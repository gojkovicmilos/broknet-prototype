(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=(i=n("wj3C"))&&"object"==typeof i&&"default"in i?i.default:i,o=n("mrSG"),s=n("q/0M"),a=n("zVF4"),l=n("S+S0"),h=n("x7I3"),c=r.SDK_VERSION,u=new s.Logger("@firebase/firestore"),d=function(t){return t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT",t}({});function p(){return u.logLevel===s.LogLevel.DEBUG?d.DEBUG:u.logLevel===s.LogLevel.SILENT?d.SILENT:d.ERROR}function m(t){switch(t){case d.DEBUG:u.logLevel=s.LogLevel.DEBUG;break;case d.ERROR:u.logLevel=s.LogLevel.ERROR;break;case d.SILENT:u.logLevel=s.LogLevel.SILENT;break;default:u.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function f(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(u.logLevel<=s.LogLevel.DEBUG){var r=n.map(y);u.debug.apply(u,o.__spreadArrays(["Firestore ("+c+") ["+t+"]: "+e],r))}}function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(u.logLevel<=s.LogLevel.ERROR){var i=e.map(y);u.error.apply(u,o.__spreadArrays(["Firestore ("+c+"): "+t],i))}}function y(t){if("string"==typeof t)return t;var e=C.getPlatform();try{return e.formatJSON(t)}catch(n){return t}}function b(t){var e="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+t;throw g(e),new Error(e)}function v(t,e){t||b(e)}var C=function(){function t(){}return t.setPlatform=function(e){t.platform&&b("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||b("Platform not set"),t.platform},t}();function S(){return C.getPlatform().emptyByteString}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=function(t){function e(e,n){var i=t.call(this,n)||this;return i.code=e,i.message=n,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return o.__extends(e,t),e}(Error);function k(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new _(x.INVALID_ARGUMENT,t)}for(var i in n.prototype=t.prototype,t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return void 0!==t?t:e}function I(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Number(n);isNaN(i)||e(i,t[n])}}function A(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function P(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M(t,e){if(0!==e.length)throw new _(x.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+j(e.length,"argument")+".")}function E(t,e,n){if(e.length!==n)throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires "+j(n,"argument")+", but was called with "+j(e.length,"argument")+".")}function D(t,e,n){if(e.length<n)throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires at least "+j(n,"argument")+", but was called with "+j(e.length,"argument")+".")}function F(t,e,n,i){if(e.length<n||e.length>i)throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+i+" arguments, but was called with "+j(e.length,"argument")+".")}function L(t,e,n,i){W(t,e,q(n)+" argument",i)}function R(t,e,n,i){void 0!==i&&L(t,e,n,i)}function B(t,e,n,i){W(t,e,n+" option",i)}function N(t,e,n,i){void 0!==i&&B(t,e,n,i)}function O(t,e,n,i,r){void 0!==i&&function(t,e,n,i,r){for(var o=[],s=0,a=r;s<a.length;s++){var l=a[s];if(l===i)return;o.push(G(l))}var h=G(i);throw new _(x.INVALID_ARGUMENT,"Invalid value "+h+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,i,r)}function V(t,e,n,i){if(!e.some((function(t){return t===i})))throw new _(x.INVALID_ARGUMENT,"Invalid value "+G(i)+" provided to function "+t+"() for its "+q(n)+" argument. Acceptable values: "+e.join(", "))}function W(t,e,n,i){if(!("object"===e?H(i):"non-empty string"===e?"string"==typeof i&&""!==i:typeof i===e)){var r=G(i);throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function H(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function G(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":b("Unknown wrong type: "+typeof t)}function z(t,e,n){if(void 0===n)throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+q(e)+" argument, but it was undefined.")}function U(t,e,n){A(e,(function(e,i){if(n.indexOf(e)<0)throw new _(x.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Y(t,e,n,i){var r=G(i);return new _(x.INVALID_ARGUMENT,"Function "+t+"() requires its "+q(n)+" argument to be a "+e+", but it was: "+r)}function X(t,e,n){if(n<=0)throw new _(x.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+q(e)+" argument to be a positive number, but it was: "+n+".")}function q(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function j(t,e){return t+" "+e+(1===t?"":"s")}var K=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function $(t,e){return t<e?-1:t>e?1:0}function Q(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function J(t){return t+"\0"}function Z(){if("undefined"==typeof Uint8Array)throw new _(x.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function tt(){if(!C.getPlatform().base64Available)throw new _(x.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var et=function(){function t(t){tt(),this._binaryString=t}return t.fromBase64String=function(e){E("Blob.fromBase64String",arguments,1),L("Blob.fromBase64String","string",1,e),tt();try{var n=C.getPlatform().atob(e);return new t(n)}catch(i){throw new _(x.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+i)}},t.fromUint8Array=function(e){if(E("Blob.fromUint8Array",arguments,1),Z(),!(e instanceof Uint8Array))throw Y("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,(function(t){return String.fromCharCode(t)})).join("");return new t(n)},t.prototype.toBase64=function(){return E("Blob.toBase64",arguments,0),tt(),C.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){E("Blob.toUint8Array",arguments,0),Z();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return $(this._binaryString,t._binaryString)},t}(),nt=k(et,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),it=function(){return function(t,e,n,i,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=i,this.forceLongPolling=r}}(),rt="(default)",ot=function(){function t(t,e){this.projectId=t,this.database=e||rt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===rt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return $(this.projectId,t.projectId)||$(this.database,t.database)},t}(),st=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),at=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&b("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&b("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return v(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.construct=function(t,n,i){return new e(t,n,i)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new _(x.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.EMPTY_PATH=new e([]),e}(at),ht=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.construct=function(t,n,i){return new e(t,n,i)},e.isValidIdentifier=function(t){return ht.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],i="",r=0,o=function(){if(0===i.length)throw new _(x.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(i),i=""},s=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new _(x.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new _(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new _(x.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(at),ut=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===lt.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return lt.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new lt(e.slice()))},t.fromPathString=function(e){return new t(lt.fromString(e))},t.EMPTY=new t(new lt([])),t}(),dt=function(){return function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}}(),pt=function(t){return t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction",t}({}),mt=function(){function t(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,i,r,o){var s=new t(e,n,Date.now()+i,r,o);return s.start(i),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _(x.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ft=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var i=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var r=mt.createAndSchedule(this,t,e,n,(function(t){return i.removeDelayedOperation(t)}));return this.delayedOperations.push(r),r},t.prototype.verifyNotFailed=function(){this.failure&&b("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){v(t===pt.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,i=e.delayedOperations;n<i.length;n++){var r=i[n];if(r.skipDelay(),t!==pt.All&&r.timerId===t)break}return e.drain()}))},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),gt="\x01",yt="\x01",bt="\x10",vt="\x11";function Ct(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=xt(e)),e=St(t.get(n),e);return xt(e)}function St(t,e){for(var n=e,i=t.length,r=0;r<i;r++){var o=t.charAt(r);switch(o){case"\0":n+=gt+bt;break;case gt:n+=gt+vt;break;default:n+=o}}return n}function xt(t){return t+gt+yt}function _t(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===gt&&t.charAt(1)===yt,"Non-empty path "+t+" had length 2"),lt.EMPTY_PATH;for(var n=e-2,i=[],r="",o=0;o<e;){var s=t.indexOf(gt,o);switch((s<0||s>n)&&b('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case yt:var a=t.substring(o,s),l=void 0;0===r.length?l=a:(l=r+=a,r=""),i.push(l);break;case bt:r+=t.substring(o,s),r+="\0";break;case vt:r+=t.substring(o,s+1);break;default:b('Invalid encoded resource path: "'+t+'"')}o=s+2}return new lt(i)}var kt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?$(this.nanoseconds,t.nanoseconds):$(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),wt=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new kt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new kt(0,0)),t}(),Tt=function(){function t(t,e){this.comparator=t,this.root=e||At.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new It(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new It(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new It(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new It(this.root,t,this.comparator,!0)},t}(),It=function(){function t(t,e,n,i){this.isReverse=i,this.nodeStack=[];for(var r=1;!t.isEmpty();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(e,r.key)){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw b("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw b("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw b("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),Pt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw b("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw b("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw b("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw b("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw b("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new At(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();At.EMPTY=new Pt;var Mt=function(){function t(t){this.comparator=t,this.data=new Tt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Et(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Et(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),i=e.data.getIterator();n.hasNext();){var r=n.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Et=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Dt=new Tt(ut.comparator);function Ft(){return Dt}function Lt(){return Ft()}var Rt=new Tt(ut.comparator);function Bt(){return Rt}var Nt=new Tt(ut.comparator);function Ot(){return Nt}var Vt=new Mt(ut.comparator);function Wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Vt,i=0,r=t;i<r.length;i++)n=n.add(r[i]);return n}var Ht=new Mt($);function Gt(){return Ht}var zt=function(){function t(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i,v(i.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var i=n.mutationResults;v(i.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+i.length+").");for(var r=0;r<this.mutations.length;r++){var o=this.mutations[r];o.key.isEqual(t)&&(e=o.applyToRemoteDocument(e,i[r]))}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,i=this.baseMutations;n<i.length;n++)(a=i[n]).key.isEqual(t)&&(e=a.applyToLocalView(e,e,this.localWriteTime));for(var r=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.applyToLocalView(e,r,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(i){var r=e.applyToLocalView(i.key,t.get(i.key));r&&(n=n.insert(i.key,r))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Wt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Q(this.mutations,t.mutations)&&Q(this.baseMutations,t.baseMutations)},t}(),Ut=function(){function t(t,e,n,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=i,this.docVersions=r}return t.from=function(e,n,i,r){v(e.mutations.length===i.length,"Mutations sent "+e.mutations.length+" must equal results received "+i.length);for(var o=Ot(),s=e.mutations,a=0;a<s.length;a++)o=o.insert(s[a].key,i[a].version);return new t(e,n,i,r,o)},t}(),Yt=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var i=this;return this.callbackAttached&&b("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,r){i.nextCallback=function(n){i.wrapSuccess(e,n).next(t,r)},i.catchCallback=function(e){i.wrapFailure(n,e).next(t,r)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(i){return t.reject(i)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var i=0,r=0,o=!1;e.forEach((function(e){++i,e.next((function(){++r,o&&r===i&&t()}),(function(t){return n(t)}))})),o=!0,r===i&&t()}))},t.or=function(e){for(var n=t.resolve(!1),i=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},r=0,o=e;r<o.length;r++)i(o[r]);return n},t.forEach=function(t,e){var n=this,i=[];return t.forEach((function(t,r){i.push(e.call(n,t,r))})),this.waitFor(i)},t}(),Xt="SimpleDb",qt=function(){function t(e){this.db=e,12.2===t.getIOSVersion(a.getUA())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,i){return v(t.isAvailable(),"IndexedDB not supported in current environment."),f(Xt,"Opening database:",e),new Yt((function(r,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){r(new t(e.target.result))},s.onblocked=function(){o(new _(x.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new _(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){f(Xt,'Database "'+e+'" requires upgrade from version:',t.oldVersion),i.createOrUpgrade(t.target.result,s.transaction,t.oldVersion,nn).next((function(){f(Xt,"Database upgrade to version "+nn+" complete")}))}})).toPromise()},t.delete=function(t){return f(Xt,"Removing database:",t),Qt(window.indexedDB.deleteDatabase(t)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=a.getUA(),n=t.getIOSVersion(e),i=0<n&&n<10,r=t.getAndroidVersion(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)},t.isMockPersistence=function(){return"undefined"!=typeof process&&"YES"===process.env.USE_MOCK_PERSISTENCE},t.getStore=function(t,e){return t.store(e)},t.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i,r,s,a,l,h;return o.__generator(this,(function(c){switch(c.label){case 0:i=t.startsWith("readonly"),r=t.endsWith("idempotent"),s=0,a=function(){var t,a,h,c;return o.__generator(this,(function(o){switch(o.label){case 0:++s,t=Kt.open(l.db,i?"readonly":"readwrite",e),o.label=1;case 1:return o.trys.push([1,3,,4]),(a=n(t).catch((function(e){return t.abort(e),Yt.reject(e)})).toPromise()).catch((function(){})),[4,t.completionPromise];case 2:return o.sent(),[2,{value:a}];case 3:return h=o.sent(),f(Xt,"Transaction failed with error: %s. Retrying: %s.",h.message,c=r&&"FirebaseError"!==h.name&&s<3),c?[3,4]:[2,{value:Promise.reject(h)}];case 4:return[2]}}))},l=this,c.label=1;case 1:return[5,a()];case 2:return"object"==typeof(h=c.sent())?[2,h.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),jt=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Qt(this.dbCursor.delete())},t}(),Kt=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new dt,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Zt(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,i){return new t(e.transaction(i,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(f(Xt,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new $t(e)},t}(),$t=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f(Xt,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(f(Xt,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Qt(n)},t.prototype.add=function(t){return f(Xt,"ADD",this.store.name,t,t),Qt(this.store.add(t))},t.prototype.get=function(t){var e=this;return Qt(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f(Xt,"GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f(Xt,"DELETE",this.store.name,t),Qt(this.store.delete(t))},t.prototype.count=function(){return f(Xt,"COUNT",this.store.name),Qt(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),i=[];return this.iterateCursor(n,(function(t,e){i.push(e)})).next((function(){return i}))},t.prototype.deleteAll=function(t,e){f(Xt,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var i=this.cursor(n);return this.iterateCursor(i,(function(t,e,n){return n.delete()}))},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var i=this.cursor(n);return this.iterateCursor(i,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Yt((function(n,i){e.onerror=function(t){var e=Zt(t.target.error);i(e)},e.onsuccess=function(e){var i=e.target.result;i?t(i.primaryKey,i.value).next((function(t){t?i.continue():n()})):n()}}))},t.prototype.iterateCursor=function(t,e){var n=[];return new Yt((function(i,r){t.onerror=function(t){r(t.target.error)},t.onsuccess=function(t){var r=t.target.result;if(r){var o=new jt(r),s=e(r.primaryKey,r.value,o);if(s instanceof Yt){var a=s.catch((function(t){return o.done(),Yt.reject(t)}));n.push(a)}o.isDone?i():null===o.skipToKey?r.continue():r.continue(o.skipToKey)}else i()}})).next((function(){return Yt.waitFor(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Qt(t){return new Yt((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Zt(t.target.error);n(e)}}))}var Jt=!1;function Zt(t){var e=qt.getIOSVersion(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new _("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Jt||(Jt=!0,setTimeout((function(){throw i}),0)),i}}return t}var te=function(){function t(t,e,n,i){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=i,this.documentKeysByBatchId={}}return t.forUser=function(e,n,i,r){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,i,r)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return re(t).iterate({index:ln.userMutationsIndex,range:n},(function(t,n,i){e=!1,i.done()})).next((function(){return e}))},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=ie(n),se(t).put(e)}))},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=ie(e),se(t).put(n)}))},t.prototype.addMutationBatch=function(t,e,n,i){var r=this,o=oe(t),s=re(t);return s.add({}).next((function(a){v("number"==typeof a,"Auto-generated key is not a number");for(var l=new zt(a,e,n,i),h=r.serializer.toDbMutationBatch(r.userId,l),c=[],u=new Mt((function(t,e){return $(t.canonicalString(),e.canonicalString())})),d=0,p=i;d<p.length;d++){var m=p[d],f=hn.key(r.userId,m.key.path,a);u=u.add(m.key.path.popLast()),c.push(s.put(h)),c.push(o.put(f,hn.PLACEHOLDER))}return u.forEach((function(e){c.push(r.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){r.documentKeysByBatchId[a]=l.keys()})),Yt.waitFor(c).next((function(){return l}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return re(t).get(e).next((function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Yt.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var i=t.keys();return n.documentKeysByBatchId[e]=i,i}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return re(t).iterate({index:ln.userMutationsIndex,range:r},(function(t,e,r){e.userId===n.userId&&(v(e.batchId>=i,"Should have found mutation after "+i),o=n.serializer.fromDbMutationBatch(e)),r.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return re(t).iterate({index:ln.userMutationsIndex,range:e,reverse:!0},(function(t,e,i){n=e.batchId,i.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return re(t).loadAll(ln.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,i=hn.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return oe(t).iterate({range:r},(function(i,r,s){var a=i[0],l=i[2],h=_t(i[1]);if(a===n.userId&&e.path.isEqual(h))return re(t).get(l).next((function(t){if(!t)throw b("Dangling document-mutation reference found: "+i+" which points to "+l);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+l),o.push(n.serializer.fromDbMutationBatch(t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,i=new Mt($),r=[];return e.forEach((function(e){var o=hn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=oe(t).iterate({range:s},(function(t,r,o){var s=t[0],a=t[2],l=_t(t[1]);s===n.userId&&e.path.isEqual(l)?i=i.add(a):o.done()}));r.push(a)})),Yt.waitFor(r).next((function(){return n.lookupMutationBatches(t,i)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=e.path,r=i.length+1,o=hn.prefixForPath(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new Mt($);return oe(t).iterate({range:s},(function(t,e,o){var s=t[0],l=t[2],h=_t(t[1]);s===n.userId&&i.isPrefixOf(h)?h.length===r&&(a=a.add(l)):o.done()})).next((function(){return n.lookupMutationBatches(t,a)}))},t.prototype.lookupMutationBatches=function(t,e){var n=this,i=[],r=[];return e.forEach((function(e){r.push(re(t).get(e).next((function(t){if(null===t)throw b("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),i.push(n.serializer.fromDbMutationBatch(t))})))})),Yt.waitFor(r).next((function(){return i}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return ne(t.simpleDbTransaction,this.userId,e).next((function(i){return t.addOnCommittedListener((function(){n.removeCachedMutationKeys(e.batchId)})),Yt.forEach(i,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Yt.resolve();var i=IDBKeyRange.lowerBound(hn.prefixForUser(e.userId)),r=[];return oe(t).iterate({range:i},(function(t,n,i){if(t[0]===e.userId){var o=_t(t[1]);r.push(o)}else i.done()})).next((function(){v(0===r.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+r.map((function(t){return t.canonicalString()})))}))}))},t.prototype.containsKey=function(t,e){return ee(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return se(t).get(this.userId).next((function(t){return t||new an(e.userId,-1,"")}))},t}();function ee(t,e,n){var i=hn.prefixForPath(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return oe(t).iterate({range:o,keysOnly:!0},(function(t,n,i){t[0]===e&&t[1]===r&&(s=!0),i.done()})).next((function(){return s}))}function ne(t,e,n){var i=t.store(ln.store),r=t.store(hn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=i.iterate({range:s},(function(t,e,n){return a++,n.delete()}));o.push(l.next((function(){v(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var h=[],c=0,u=n.mutations;c<u.length;c++){var d=u[c],p=hn.key(e,d.key.path,n.batchId);o.push(r.delete(p)),h.push(d.key)}return Yt.waitFor(o).next((function(){return h}))}function ie(t){return t instanceof Uint8Array?(v(qt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function re(t){return Vn.getStore(t,ln.store)}function oe(t){return Vn.getStore(t,hn.store)}function se(t){return Vn.getStore(t,an.store)}var ae=1,le=function(t){return t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine",t}({}),he=function(){function t(t,e){this.generatorId=t,v((t&ae)===t,"Generator ID "+t+" contains more than "+ae+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<ae,t},t.prototype.after=function(t){return this.seek(t+(1<<ae)),this.next()},t.prototype.seek=function(t){v((t&ae)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forTargetCache=function(){return new t(le.QueryCache,2)},t.forSyncEngine=function(){return new t(le.SyncEngine)},t}(),ce=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=he.forTargetCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return wt.fromTimestamp(new kt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return pe(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var i=this;return this.retrieveMetadata(t).next((function(r){return r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),i.saveMetadata(t,r)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.saveTargetData(t,e).next((function(){return n.retrieveMetadata(t).next((function(i){return i.targetCount+=1,n.updateMetadataFromTargetData(e,i),n.saveMetadata(t,i)}))}))},t.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ue(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return v(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},t.prototype.removeTargets=function(t,e,n){var i=this,r=0,o=[];return ue(t).iterate((function(s,a){var l=i.serializer.fromDbTarget(a);l.sequenceNumber<=e&&null===n.get(l.targetId)&&(r++,o.push(i.removeTargetData(t,l)))})).next((function(){return Yt.waitFor(o)})).next((function(){return r}))},t.prototype.forEachTarget=function(t,e){var n=this;return ue(t).iterate((function(t,i){var r=n.serializer.fromDbTarget(i);e(r)}))},t.prototype.retrieveMetadata=function(t){return de(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,Vn.getStore(n,gn.store)).put(gn.key,e);var n},t.prototype.saveTargetData=function(t,e){return ue(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=this,i=e.canonicalId(),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ue(t).iterate({range:r,index:mn.queryTargetsIndexName},(function(t,i,r){var s=n.serializer.fromDbTarget(i);e.isEqual(s.target)&&(o=s,r.done())})).next((function(){return o}))},t.prototype.addMatchingKeys=function(t,e,n){var i=this,r=[],o=me(t);return e.forEach((function(e){var s=Ct(e.path);r.push(o.put(new fn(n,s))),r.push(i.referenceDelegate.addReference(t,e))})),Yt.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){var i=this,r=me(t);return Yt.forEach(e,(function(e){var o=Ct(e.path);return Yt.waitFor([r.delete([n,o]),i.referenceDelegate.removeReference(t,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=me(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),i=me(t),r=Wt();return i.iterate({range:n,keysOnly:!0},(function(t,e,n){var i=_t(t[1]),o=new ut(i);r=r.add(o)})).next((function(){return r}))},t.prototype.containsKey=function(t,e){var n=Ct(e.path),i=IDBKeyRange.bound([n],[J(n)],!1,!0),r=0;return me(t).iterate({index:fn.documentTargetsIndex,keysOnly:!0,range:i},(function(t,e,n){0!==t[0]&&(r++,n.done())})).next((function(){return r>0}))},t.prototype.getTargetDataForTarget=function(t,e){var n=this;return ue(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},t}();function ue(t){return Vn.getStore(t,mn.store)}function de(t){return qt.getStore(t,gn.store).get(gn.key).next((function(t){return v(null!==t,"Missing metadata row."),t}))}function pe(t){return de(t).next((function(t){return t.highestListenSequenceNumber}))}function me(t){return Vn.getStore(t,fn.store)}var fe=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new Mt(ct.comparator);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ge=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ye=function(){return function(t,e){this.version=t,this.transformResults=e}}(),be=function(t){return t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete",t}({}),ve=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ue&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ue:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Ce=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Ue?t.version:wt.MIN},t}(),Se=function(t){function e(e,n,i){var r=t.call(this)||this;return r.key=e,r.value=n,r.precondition=i,r.type=be.Set,r}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation."),new Ue(this.key,e.version,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var i=Ce.getPostMutationVersion(t);return new Ue(this.key,i,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(Ce),xe=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=i,o.precondition=r,o.type=be.Patch,o}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Xe(this.key,e.version);var n=this.patchDocument(t);return new Ue(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var i=Ce.getPostMutationVersion(t),r=this.patchDocument(t);return new Ue(this.key,i,{hasLocalMutations:!0},r)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof Ue?t.data():He.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var i=e.data.field(n);t=null!==i?t.set(n,i):t.delete(n)}})),t},e}(Ce),_e=function(t){function e(e,n){var i=t.call(this)||this;return i.key=e,i.fieldTransforms=n,i.type=be.Transform,i.precondition=ve.exists(!0),i}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Xe(this.key,e.version);var n=this.requireDocument(t),i=this.serverTransformResults(t,e.transformResults),r=e.version,o=this.transformObject(n.data(),i);return new Ue(this.key,r,{hasCommittedMutations:!0},o)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var i=this.requireDocument(t),r=this.localTransformResults(n,t,e),o=this.transformObject(i.data(),r);return new Ue(this.key,i.version,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,i=this.fieldTransforms;n<i.length;n++){var r=i[n],o=t instanceof Ue?t.field(r.field):void 0,s=r.transform.computeBaseValue(o||null);null!=s&&(e=null==e?He.EMPTY.set(r.field,s):e.set(r.field,s))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Q(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){return v(t instanceof Ue,"Unknown MaybeDocument type "+t),v(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<e.length;i++){var r=this.fieldTransforms[i],o=r.transform,s=null;t instanceof Ue&&(s=t.field(r.field)),n.push(o.applyToRemoteDocument(s,e[i]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var i=[],r=0,o=this.fieldTransforms;r<o.length;r++){var s=o[r],a=s.transform,l=null;e instanceof Ue&&(l=e.field(s.field)),null===l&&n instanceof Ue&&(l=n.field(s.field)),i.push(a.applyToLocalView(l,t))}return i},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)t=t.set(this.fieldTransforms[n].field,e[n]);return t},e}(Ce),ke=function(t){function e(e,n){var i=t.call(this)||this;return i.key=e,i.precondition=n,i.type=be.Delete,i}return o.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new Ye(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ye(this.key,wt.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(Ce),we=function(t){return t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue",t}({}),Te=function(t){return t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous",t}({}),Ie=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(Te.Estimate,n);case"previous":return new t(Te.Previous,n);case"none":case void 0:return new t(Te.Default,n);default:return b("fromSnapshotOptions() called with invalid options.")}},t}(),Ae=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),$(this.typeOrder,t.typeOrder)},t}(),Pe=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=we.NullValue,e.internalValue=null,e}return o.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Ae),Me=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.BooleanValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?$(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Ae),Ee=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.NumberValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(i=t.internalValue)?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1:this.defaultCompareTo(t);var n,i},e}(Ae);function De(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Fe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&De(this.internalValue,t.internalValue)},e}(Ee),Le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&De(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ee),Re=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.StringValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?$(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Ae),Be=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.TimestampValue,n}return o.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Ne?-1:this.defaultCompareTo(t)},e}(Ae),Ne=function(t){function e(e,n){var i=t.call(this)||this;return i.localWriteTime=e,i.previousValue=n,i.typeOrder=we.TimestampValue,i}return o.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===Te.Estimate?new Be(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===Te.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Be?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Ae),Oe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.BlobValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Ae),Ve=function(t){function e(e,n){var i=t.call(this)||this;return i.databaseId=e,i.key=n,i.typeOrder=we.RefValue,i}return o.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:ut.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Ae),We=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.GeoPointValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Ae),He=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.ObjectValue,n}return o.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,i){e[n]=i.value(t)})),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),i=t.internalValue.getIterator();n.hasNext()&&i.hasNext();){var r=n.getNext(),o=i.getNext();if(r.key!==o.key||!r.value.isEqual(o.value))return!1}return!n.hasNext()&&!i.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),i=t.internalValue.getIterator();n.hasNext()&&i.hasNext();){var r=n.getNext(),o=i.getNext(),s=$(r.key,o.key)||r.value.compareTo(o.value);if(s)return s}return $(n.hasNext(),i.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var i=this.child(t.firstSegment());i instanceof e||(i=e.EMPTY);var r=i.set(t.popFirst(),n);return this.setChild(t.firstSegment(),r)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var i=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),i))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.internalValue.get(t):null})),n},e.prototype.fieldMask=function(){var t=new Mt(ct.comparator);return this.internalValue.forEach((function(n,i){var r=new ct([n]);if(i instanceof e){var o=i.fieldMask().fields;o.isEmpty()?t=t.add(r):o.forEach((function(e){t=t.add(r.child(e))}))}else t=t.add(r)})),fe.fromSet(t)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new Tt($)),e}(Ae),Ge=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=we.ArrayValue,n}return o.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(t.internalValue[i]);if(r)return r}return $(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},e}(Ae),ze=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ut.comparator(t.key,e.key)},t}(),Ue=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e,n)||this;return a.objectValue=r,a.proto=o,a.converter=s,v(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return o.__extends(e,t),e.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var i=this.getProtoField(t);n=void 0===i?null:this.converter(i),this.fieldValueCache.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=He.EMPTY;A(this.proto.fields||{},(function(n,i){e=e.set(new ct([n]),t.converter(i))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(t){v(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.compareByField=function(t,e,n){var i=e.field(t),r=n.field(t);return null!==i&&null!==r?i.compareTo(r):b("Trying to compare documents on fields that don't exist")},e}(ze),Ye=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.hasCommittedMutations=!(!i||!i.hasCommittedMutations),r}return o.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ze),Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ze),qe=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(i[r][0].isEqual(t))return void(i[r]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1},t.prototype.forEach=function(t){A(this.inner,(function(e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return P(this.inner)},t}(),je=function(){function t(){this.changes=new qe((function(t){return t.toString()})),this.changesApplied=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return v(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){v(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},t.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Yt.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},t}(),Ke=function(){function t(t,e){this.serializer=t,this.indexManager=e}return t.prototype.addEntry=function(t,e,n){return Qe(t).put(Je(e),n)},t.prototype.removeEntry=function(t,e){var n=Qe(t),i=Je(e);return n.delete(i)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(i){return i.byteSize+=e,n.setMetadata(t,i)}))},t.prototype.getEntry=function(t,e){var n=this;return Qe(t).get(Je(e)).next((function(t){return n.maybeDecodeDocument(t)}))},t.prototype.getSizedEntry=function(t,e){var n=this;return Qe(t).get(Je(e)).next((function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Ze(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,i=Lt();return this.forEachDbEntry(t,e,(function(t,e){var r=n.maybeDecodeDocument(e);i=i.insert(t,r)})).next((function(){return i}))},t.prototype.getSizedEntries=function(t,e){var n=this,i=Lt(),r=new Tt(ut.comparator);return this.forEachDbEntry(t,e,(function(t,e){var o=n.maybeDecodeDocument(e);o?(i=i.insert(t,o),r=r.insert(t,Ze(e))):(i=i.insert(t,null),r=r.insert(t,0))})).next((function(){return{maybeDocuments:i,sizeMap:r}}))},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Yt.resolve();var i=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),r=e.getIterator(),o=r.getNext();return Qe(t).iterate({range:i},(function(t,e,i){for(var s=ut.fromSegments(t);o&&ut.comparator(o,s)<0;)n(o,null),o=r.getNext();o&&o.isEqual(s)&&(n(o,e),o=r.hasNext()?r.getNext():null),o?i.skip(o.path.toArray()):i.done()})).next((function(){for(;o;)n(o,null),o=r.hasNext()?r.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var i=this;v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Bt(),o=e.path.length+1,s={};if(n.isEqual(wt.MIN)){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var l=e.path.toArray(),h=this.serializer.toDbTimestampKey(n);s.range=IDBKeyRange.lowerBound([l,h],!0),s.index=dn.collectionReadTimeIndex}return Qe(t).iterate(s,(function(t,n,s){if(t.length===o){var a=i.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(a.key.path)?a instanceof Ue&&e.matches(a)&&(r=r.insert(a.key,a)):s.done()}})).next((function(){return r}))},t.prototype.getNewDocumentChanges=function(t,e){var n=this,i=Ft(),r=this.serializer.toDbTimestampKey(e),o=Qe(t),s=IDBKeyRange.lowerBound(r,!0);return o.iterate({index:dn.readTimeIndex,range:s},(function(t,e){var o=n.serializer.fromDbRemoteDocument(e);i=i.insert(o.key,o),r=e.readTime})).next((function(){return{changedDocs:i,readTime:n.serializer.fromDbTimestampKey(r)}}))},t.prototype.getLastDocumentChange=function(t){var e,n=this,i=Qe(t),r=wt.MIN;return i.iterate({index:dn.readTimeIndex,reverse:!0},(function(t,i,o){e=n.serializer.fromDbRemoteDocument(i),i.readTime&&(r=n.serializer.fromDbTimestampKey(i.readTime)),o.done()})).next((function(){return{changedDoc:e,readTime:r}}))},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return $e(t).get(pn.key).next((function(t){return v(!!t,"Missing document cache metadata"),t}))},t.prototype.setMetadata=function(t,e){return $e(t).put(pn.key,e)},t.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof Ye&&e.version.isEqual(wt.forDeletedDoc())?null:e}return null},t.RemoteDocumentChangeBuffer=function(t){function e(e,n){var i=t.call(this)||this;return i.documentCache=e,i.trackRemovals=n,i.documentSizes=new qe((function(t){return t.toString()})),i}return o.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],i=0,r=new Mt((function(t,e){return $(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.documentSizes.get(o);if(v(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){v(!e.readTime.isEqual(wt.MIN),"Cannot add a document with a read time of zero");var l=e.documentCache.serializer.toDbRemoteDocument(s,e.readTime);r=r.add(o.path.popLast());var h=Ze(l);i+=h-a,n.push(e.documentCache.addEntry(t,o,l))}else if(i-=a,e.trackRemovals){var c=e.documentCache.serializer.toDbRemoteDocument(new Ye(o,wt.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,c))}else n.push(e.documentCache.removeEntry(t,o))})),r.forEach((function(i){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,i))})),n.push(this.documentCache.updateMetadata(t,i)),Yt.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},e}(je),t}();function $e(t){return Vn.getStore(t,pn.store)}function Qe(t){return Vn.getStore(t,dn.store)}function Je(t){return t.path.toArray()}function Ze(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw b("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var tn=function(){function t(){this.collectionParentIndex=new en}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Yt.resolve()},t.prototype.getCollectionParents=function(t,e){return Yt.resolve(this.collectionParentIndex.getEntries(e))},t}(),en=function(){function t(){this.index={}}return t.prototype.add=function(t){v(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Mt(lt.comparator),r=!i.has(n);return this.index[e]=i.add(n),r},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Mt(lt.comparator)).toArray()},t}(),nn=9,rn=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,i){var r=this;v(n<i&&n>=0&&i<=nn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Kt(e);n<1&&i>=1&&(function(t){t.createObjectStore(sn.store)}(t),function(t){t.createObjectStore(an.store,{keyPath:an.keyPath}),t.createObjectStore(ln.store,{keyPath:ln.keyPath,autoIncrement:!0}).createIndex(ln.userMutationsIndex,ln.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hn.store)}(t),bn(t),function(t){t.createObjectStore(dn.store)}(t));var s=Yt.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore(fn.store),t.deleteObjectStore(mn.store),t.deleteObjectStore(gn.store)}(t),bn(t)),s=s.next((function(){return function(t){var e=t.store(gn.store),n=new gn(0,0,wt.MIN.toTimestamp(),0);return e.put(gn.key,n)}(o)}))),n<4&&i>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(ln.store).loadAll().next((function(n){t.deleteObjectStore(ln.store),t.createObjectStore(ln.store,{keyPath:ln.keyPath,autoIncrement:!0}).createIndex(ln.userMutationsIndex,ln.userMutationsKeyPath,{unique:!0});var i=e.store(ln.store),r=n.map((function(t){return i.put(t)}));return Yt.waitFor(r)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(vn.store,{keyPath:vn.keyPath})}(t)}))),n<5&&i>=5&&(s=s.next((function(){return r.removeAcknowledgedMutations(o)}))),n<6&&i>=6&&(s=s.next((function(){return function(t){t.createObjectStore(pn.store)}(t),r.addDocumentGlobal(o)}))),n<7&&i>=7&&(s=s.next((function(){return r.ensureSequenceNumbers(o)}))),n<8&&i>=8&&(s=s.next((function(){return r.createCollectionParentIndex(t,o)}))),n<9&&i>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(dn.store);e.createIndex(dn.readTimeIndex,dn.readTimeIndexPath,{unique:!1}),e.createIndex(dn.collectionReadTimeIndex,dn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(dn.store).iterate((function(t,n){e+=Ze(n)})).next((function(){var n=new pn(e);return t.store(pn.store).put(pn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(an.store),i=t.store(ln.store);return n.loadAll().next((function(n){return Yt.forEach(n,(function(n){var r=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return i.loadAll(ln.userMutationsIndex,r).next((function(i){return Yt.forEach(i,(function(i){v(i.userId===n.userId,"Cannot process batch "+i.batchId+" from unexpected user");var r=e.serializer.fromDbMutationBatch(i);return ne(t,n.userId,r).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(fn.store),n=t.store(dn.store);return pe(t).next((function(t){var i=[];return n.iterate((function(n,r){var o=new lt(n),s=function(t){return[0,Ct(t)]}(o);i.push(e.get(s).next((function(n){return n?Yt.resolve():function(n){return e.put(new fn(0,Ct(n),t))}(o)})))})).next((function(){return Yt.waitFor(i)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(yn.store,{keyPath:yn.keyPath});var n=e.store(yn.store),i=new en,r=function(t){if(i.add(t)){var e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:Ct(r)})}};return e.store(dn.store).iterate({keysOnly:!0},(function(t,e){var n=new lt(t);return r(n.popLast())})).next((function(){return e.store(hn.store).iterate({keysOnly:!0},(function(t,e){var n=_t(t[1]);return r(n.popLast())}))}))},t}(),on=function(){return function(t,e){this.seconds=t,this.nanoseconds=e}}(),sn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),an=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),ln=function(){function t(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),hn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ct(e)]},t.key=function(t,e,n){return[t,Ct(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),cn=function(){return function(t,e){this.path=t,this.readTime=e}}(),un=function(){return function(t,e){this.path=t,this.version=e}}(),dn=function(){function t(t,e,n,i,r,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),pn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),mn=function(){function t(t,e,n,i,r,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=o,this.query=s}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),fn=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),gn=function(){function t(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),yn=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function bn(t){t.createObjectStore(fn.store,{keyPath:fn.keyPath}).createIndex(fn.documentTargetsIndex,fn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.queryTargetsIndexName,mn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gn.store)}var vn=function(){function t(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i}return t.store="clientMetadata",t.keyPath="clientId",t}(),Cn=o.__spreadArrays([an.store,ln.store,hn.store,dn.store,mn.store,sn.store,gn.store,fn.store],[vn.store]),Sn=o.__spreadArrays(Cn,[pn.store]),xn=o.__spreadArrays(Sn,[yn.store]),_n=function(){function t(){this.collectionParentsCache=new en}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(v(e.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(e)){var i=e.lastSegment(),r=e.popLast();return t.addOnCommittedListener((function(){n.collectionParentsCache.add(e)})),kn(t).put({collectionId:i,parent:Ct(r)})}return Yt.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],i=IDBKeyRange.bound([e,""],[J(e),""],!1,!0);return kn(t).loadAll(i).next((function(t){for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.collectionId!==e)break;n.push(_t(o.parent))}return n}))},t}();function kn(t){return Vn.getStore(t,yn.store)}var wn=function(t){return t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution",t}({}),Tn=function(){function t(t,e,n,i,r,o,s){void 0===r&&(r=wt.MIN),void 0===o&&(o=wt.MIN),void 0===s&&(s=S()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)},t}(),In=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ut.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new Ye(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ut.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new Xe(e,n)):b("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),i=t.key.path.popLast().toArray();if(t instanceof Ue){var r=t.proto?t.proto:this.remoteSerializer.toDocument(t);return new dn(null,null,r,a=t.hasCommittedMutations,n,i)}if(t instanceof Ye){var o=t.key.path.toArray(),s=this.toDbTimestamp(t.version),a=t.hasCommittedMutations;return new dn(null,new cn(o,s),null,a,n,i)}if(t instanceof Xe){o=t.key.path.toArray();var l=this.toDbTimestamp(t.version);return new dn(new un(o,l),null,null,!0,n,i)}return b("Unexpected MaybeDocument")},t.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},t.prototype.fromDbTimestampKey=function(t){var e=new kt(t[0],t[1]);return wt.fromTimestamp(e)},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new on(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new kt(t.seconds,t.nanoseconds);return wt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,i=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),r=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new ln(t,e.batchId,e.localWriteTime.toMillis(),i,r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),i=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),r=kt.fromMillis(t.localWriteTimeMs);return new zt(t.batchId,r,n,i)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(Ct(t.path))})),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Wt(),n=0,i=t;n<i.length;n++)e=e.add(new ut(_t(i[n])));return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):wt.MIN,r=t.resumeToken;return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new Tn(e,t.targetId,wn.Listen,t.lastListenSequenceNumber,n,i,r)},t.prototype.toDbTarget=function(t){v(wn.Listen===t.purpose,"Only queries with purpose "+wn.Listen+" may be stored, got "+t.purpose);var e,n,i=this.toDbTimestamp(t.snapshotVersion),r=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),t.resumeToken instanceof Uint8Array?(v(qt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new mn(t.targetId,t.target.canonicalId(),i,n,t.sequenceNumber,r,e)},t}();function An(t,e){var n=t[1],i=e[1],r=$(t[0],e[0]);return 0===r?$(n,i):r}var Pn=function(){function t(t){this.maxElements=t,this.buffer=new Mt(An),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();An(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Mn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},En=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Dn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==En.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(pt.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(Wn)}))},t}(),Fn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Yt.resolve(st.INVALID);var i=new Pn(e);return this.delegate.forEachTarget(t,(function(t){return i.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return i.addElement(t)}))})).next((function(){return i.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===En.COLLECTION_DISABLED?(f("LruGarbageCollector","Garbage collection skipped; disabled"),Yt.resolve(Mn)):this.getCacheSize(t).next((function(i){return i<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Mn):n.runGarbageCollection(t,e)}))},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,i,r,o,s,a,l,h=this,c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>h.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),i=h.params.maximumSequenceNumbersToCollect):i=e,o=Date.now(),h.nthSequenceNumber(t,i)})).next((function(i){return n=i,s=Date.now(),h.removeTargets(t,n,e)})).next((function(e){return r=e,a=Date.now(),h.removeOrphanedDocuments(t,n)})).next((function(t){return l=Date.now(),p()<=d.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-c)+"ms\n\tDetermined least recently used "+i+" in "+(s-o)+"ms\n\tRemoved "+r+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(l-a)+"ms\nTotal Duration: "+(l-c)+"ms"),Yt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t})}))},t}(),Ln=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Rn="IndexedDbPersistence",Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",On=function(t){function e(e,n){var i=t.call(this)||this;return i.simpleDbTransaction=e,i.currentSequenceNumber=n,i}return o.__extends(e,t),e}(Ln),Vn=function(){function t(e,n,i,r,o,s,a,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.queue=s,this.sequenceNumberSyncer=l,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new zn(this,o),this.dbName=n+t.MAIN_DATABASE,this.serializer=new In(a),this.document=r.document,this.targetCache=new ce(this.referenceDelegate,this.serializer),this.indexManager=new _n,this.remoteDocumentCache=new Ke(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new _(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof On)return qt.getStore(t.simpleDbTransaction,e);throw b("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(i){switch(i.label){case 0:if(!t.isAvailable())throw new _(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return i.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),qt.openOrCreate(this.dbName,nn,new rn(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[gn.store],(function(t){return pe(t)}))})).then((function(e){t.listenSequence=new st(e,t.sequenceNumberSyncer)})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",xn,(function(e){return Gn(e).put(new vn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next((function(){return!1})):!!n&&t.acquireOrExtendPrimaryLease(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return f(Rn,"Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(e)})),t.isPrimary=e}))},t.prototype.verifyPrimaryLease=function(t){var e=this;return Hn(t).get(sn.key).next((function(t){return Yt.resolve(e.isLocalClient(t))}))},t.prototype.removeClientMetadata=function(t){return Gn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var i=t.getStore(n,vn.store);return i.loadAll().next((function(t){var n=e.filterActiveClients(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Yt.forEach(r,(function(t){return i.delete(t.clientId)})).next((function(){return r}))}))}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(pt.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Hn(t).get(sn.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new _(x.FAILED_PRECONDITION,Nn);return!1}}return!(!e.networkEnabled||!e.inForeground)||Gn(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&f(Rn,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[sn.store,vn.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[vn.store],(function(e){return Gn(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return t.isAvailable()?[4,qt.delete(e+t.MAIN_DATABASE)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),te.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getTargetCache=function(){return v(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var i=this;f(Rn,"Starting transaction:",t);var r,o=e.endsWith("idempotent"),s=e.startsWith("readonly");return this.simpleDb.runTransaction(s?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite",xn,(function(o){return r=new On(o,i.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?i.verifyPrimaryLease(o).next((function(t){return!!t||i.canActAsPrimary(o)})).next((function(e){if(!e)throw g("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.queue.enqueueAndForget((function(){return i.primaryStateListener(!1)})),new _(x.FAILED_PRECONDITION,Bn);return n(r)})).next((function(t){return i.acquireOrExtendPrimaryLease(o).next((function(){return t}))})):i.verifyAllowTabSynchronization(o).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Hn(t).get(sn.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new _(x.FAILED_PRECONDITION,Nn)}))},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new sn(this.clientId,this.allowTabSynchronization,Date.now());return Hn(t).put(sn.key,e)},t.isAvailable=function(){return qt.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Hn(t);return n.get(sn.key).next((function(t){return e.isLocalClient(t)?(f(Rn,"Releasing primary lease."),n.delete(sn.key)):Yt.resolve()}))},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(g("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return f(Rn,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(n){return g(Rn,"Failed to get zombied client id.",n),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){g("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Wn(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){if(!function(t){return t.code===x.FAILED_PRECONDITION&&t.message===Bn}(t))throw t;return f(Rn,"Unexpectedly lost primary lease"),[2]}))}))}function Hn(t){return t.store(sn.store)}function Gn(t){return t.store(vn.store)}var zn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Fn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Un(t,e)},t.prototype.removeReference=function(t,e){return Un(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Un(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Yt.resolve(!0):function(t,e){var n=!1;return se(t).iterateSerial((function(i){return ee(t,i,e).next((function(t){return t&&(n=!0),Yt.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.forEachOrphanedDocument(t,(function(s,a){if(a<=e){var l=n.isPinned(t,s).next((function(e){if(!e)return o++,i.getEntry(t,s).next((function(){return i.removeEntry(s),me(t).delete([0,Ct(s.path)])}))}));r.push(l)}})).next((function(){return Yt.waitFor(r)})).next((function(){return i.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Un(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,i=me(t),r=st.INVALID;return i.iterate({index:fn.documentTargetsIndex},(function(t,i){var o=i.path,s=i.sequenceNumber;0===t[0]?(r!==st.INVALID&&e(new ut(_t(n)),r),r=s,n=o):r=st.INVALID})).next((function(){r!==st.INVALID&&e(new ut(_t(n)),r)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Un(t,e){return me(t).put(function(t,e){return new fn(0,Ct(t.path),e)}(e,t.currentSequenceNumber))}var Yn=Number,Xn=Yn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),qn=Yn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,jn=Yn.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Kn(t){return null==t}function $n(t){return jn(t)&&t<=qn&&t>=Xn}var Qn=function(){function t(t,e,n,i,r,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.memoizedCanonicalId=null}return t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var i=0,r=this.orderBy;i<r.length;i++)t+=r[i].canonicalId(),t+=",";Kn(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),Kn(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.isDocumentQuery=function(){return ut.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),Jn=function(t){return t.First="F",t.Last="L",t}({}),Zn=function(){function t(t,e,n,i,r,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=Jn.First),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=s,this.endAt=a,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)this.memoizedOrderBy=t.isKeyField()?[ui]:[new ci(t),ui];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,i=0,r=this.explicitOrderBy;i<r.length;i++){var o=r[i];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:li.ASCENDING)===li.ASCENDING?ui:di)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof ni)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.withLimitToFirst=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Jn.First,this.startAt,this.endAt)},t.prototype.withLimitToLast=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Jn.Last,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},t.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},t.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},t.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},t.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},t.prototype.docComparator=function(t,e){for(var n=!1,i=0,r=this.orderBy;i<r.length;i++){var o=r[i],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimitToFirst=function(){return!Kn(this.limit)&&this.limitType===Jn.First},t.prototype.hasLimitToLast=function(){return!Kn(this.limit)&&this.limitType===Jn.Last},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ni&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var i=n[e];if(i instanceof ni&&t.indexOf(i.op)>=0)return i.op}return null},t.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Jn.First)this.memoizedTarget=new Qn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var i=n[e];t.push(new ci(i.field,i.dir===li.DESCENDING?li.ASCENDING:li.DESCENDING))}var r=this.endAt?new hi(this.endAt.position,!this.endAt.before):null,o=this.startAt?new hi(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Qn(this.path,this.collectionGroup,t,this.filters,this.limit,r,o)}return this.memoizedTarget},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):ut.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var i=n[e];if(!i.field.isKeyField()&&null===t.field(i.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),ti=function(){return function(){}}(),ei=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return b("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),ni=function(t){function e(e,n,i){var r=t.call(this)||this;return r.field=e,r.op=n,r.value=i,r}return o.__extends(e,t),e.create=function(t,n,i){if(t.isKeyField())return n===ei.IN?(v(i instanceof Ge,"Comparing on key with IN, but filter value not an ArrayValue"),v(i.internalValue.every((function(t){return t instanceof Ve})),"Comparing on key with IN, but an array value was not a RefValue"),new ri(t,i)):(v(i instanceof Ve,"Comparing on key, but filter value not a RefValue"),v(n!==ei.ARRAY_CONTAINS&&n!==ei.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new ii(t,n,i));if(i.isEqual(Pe.INSTANCE)){if(n!==ei.EQUAL)throw new _(x.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,i)}if(i.isEqual(Le.NAN)){if(n!==ei.EQUAL)throw new _(x.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,i)}return n===ei.ARRAY_CONTAINS?new oi(t,i):n===ei.IN?(v(i instanceof Ge,"IN filter has invalid value: "+i.toString()),new si(t,i)):n===ei.ARRAY_CONTAINS_ANY?(v(i instanceof Ge,"ARRAY_CONTAINS_ANY filter has invalid value: "+i.toString()),new ai(t,i)):new e(t,n,i)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case ei.LESS_THAN:return t<0;case ei.LESS_THAN_OR_EQUAL:return t<=0;case ei.EQUAL:return 0===t;case ei.GREATER_THAN:return t>0;case ei.GREATER_THAN_OR_EQUAL:return t>=0;default:return b("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[ei.LESS_THAN,ei.LESS_THAN_OR_EQUAL,ei.GREATER_THAN,ei.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(ti),ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=ut.comparator(t.key,this.value.key);return this.matchesComparison(e)},e}(ni),ri=function(t){function e(e,n){var i=t.call(this,e,ei.IN,n)||this;return i.value=n,i}return o.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},e}(ni),oi=function(t){function e(e,n){return t.call(this,e,ei.ARRAY_CONTAINS,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ge&&e.contains(this.value)},e}(ni),si=function(t){function e(e,n){var i=t.call(this,e,ei.IN,n)||this;return i.value=n,i}return o.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(ni),ai=function(t){function e(e,n){var i=t.call(this,e,ei.ARRAY_CONTAINS_ANY,n)||this;return i.value=n,i}return o.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ge&&n.internalValue.some((function(t){return e.value.contains(t)}))},e}(ni),li=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),hi=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=t[i],o=this.position[i];if(r.field.isKeyField())v(o instanceof Ve,"Bound has a non-key value where the key path is being used."),n=ut.comparator(o.key,e.key);else{var s=e.field(r.field);v(null!==s,"Field should exist since document matched the orderBy already."),n=o.compareTo(s)}if(r.dir===li.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},t}(),ci=function(){function t(t,e){this.field=t,void 0===e&&(e=li.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ue.compareByKey(t,e):Ue.compareByField(this.field,t,e);switch(this.dir){case li.ASCENDING:return n;case li.DESCENDING:return-1*n;default:return b("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ui=new ci(ct.keyField(),li.ASCENDING),di=new ci(ct.keyField(),li.DESCENDING),pi=function(){function t(){}return t.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,i){var r=this;return v(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),e.matchesAllDocuments()?this.executeFullCollectionScan(t,e):n.isEqual(wt.MIN)?this.executeFullCollectionScan(t,e):this.localDocumentsView.getDocuments(t,i).next((function(o){var s=r.applyQuery(e,o);return(e.hasLimitToFirst()||e.hasLimitToLast())&&r.needsRefill(e.limitType,s,i,n)?r.executeFullCollectionScan(t,e):(p()<=d.DEBUG&&f("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),r.localDocumentsView.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.applyQuery=function(t,e){var n=new Mt((function(e,n){return t.docComparator(e,n)}));return e.forEach((function(e,i){i instanceof Ue&&t.matches(i)&&(n=n.add(i))})),n},t.prototype.needsRefill=function(t,e,n,i){if(n.size!==e.size)return!0;var r=t===Jn.First?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)},t.prototype.executeFullCollectionScan=function(t,e){return p()<=d.DEBUG&&f("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,wt.MIN)},t}(),mi=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(i){return n.getDocumentInternal(t,e,i)}))},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var i=0,r=n;i<r.length;i++)t=r[i].applyToLocalView(e,t);return t}))},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var i=Lt();return e.forEach((function(t,e){for(var r=0,o=n;r<o.length;r++)e=o[r].applyToLocalView(t,e);i=i.insert(t,e)})),i},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(i){var r=n.applyLocalMutationsToDocuments(t,e,i),o=Ft();return r.forEach((function(t,e){e||(e=new Ye(t,wt.forDeletedDoc())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ut(e)).next((function(t){var e=Bt();return t instanceof Ue&&(e=e.insert(t.key,t)),e}))},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var i=this;v(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=e.collectionGroup,o=Bt();return this.indexManager.getCollectionParents(t,r).next((function(s){return Yt.forEach(s,(function(s){var a=e.asCollectionQueryAtPath(s.child(r));return i.getDocumentsMatchingCollectionQuery(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var i,r,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next((function(n){return i=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.addMissingBaseDocuments(t,r=e,i).next((function(t){i=t;for(var e=0,n=r;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var l=a[s],h=l.key,c=i.get(h),u=l.applyToLocalView(c,c,o.localWriteTime);i=u instanceof Ue?i.insert(h,u):i.remove(h)}}))})).next((function(){return i.forEach((function(t,n){e.matches(n)||(i=i.remove(t))})),i}))},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var i=Wt(),r=0,o=e;r<o.length;r++)for(var s=0,a=o[r].mutations;s<a.length;s++){var l=a[s];l instanceof xe&&null===n.get(l.key)&&(i=i.add(l.key))}var h=n;return this.remoteDocumentCache.getEntries(t,i).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ue&&(h=h.insert(t,e))})),h}))},t}(),fi=function(){function t(){this.refsByKey=new Mt(gi.compareByKey),this.refsByTarget=new Mt(gi.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new gi(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.removeRef(new gi(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.removeReferencesForId=function(t){var e=this,n=ut.EMPTY,i=new gi(n,t),r=new gi(n,t+1),o=[];return this.refsByTarget.forEachInRange([i,r],(function(t){e.removeRef(t),o.push(t.key)})),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ut.EMPTY,n=new gi(e,t),i=new gi(e,t+1),r=Wt();return this.refsByTarget.forEachInRange([n,i],(function(t){r=r.add(t.key)})),r},t.prototype.containsKey=function(t){var e=new gi(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),gi=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ut.comparator(t.key,e.key)||$(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return $(t.targetOrBatchId,e.targetOrBatchId)||ut.comparator(t.key,e.key)},t}(),yi=function(){function t(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new fi,this.targetDataByTarget=new Tt($),this.targetIdByTarget=new qe((function(t){return t.canonicalId()})),this.lastDocumentChangeReadTime=wt.MIN,v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new mi(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return t.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},t.prototype.handleUserChange=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r=this;return o.__generator(this,(function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(i){var o;return r.mutationQueue.getAllMutationBatches(i).next((function(s){return o=s,e=r.persistence.getMutationQueue(t),n=new mi(r.remoteDocuments,e,r.persistence.getIndexManager()),e.getAllMutationBatches(i)})).next((function(t){for(var e=[],r=[],s=Wt(),a=0,l=o;a<l.length;a++){e.push((p=l[a]).batchId);for(var h=0,c=p.mutations;h<c.length;h++)s=s.add(c[h].key)}for(var u=0,d=t;u<d.length;u++){var p;r.push((p=d[u]).batchId);for(var m=0,f=p.mutations;m<f.length;m++)s=s.add(f[m].key)}return n.getDocuments(i,s).next((function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:r}}))}))}))];case 1:return i=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,i]}}))}))},t.prototype.localWrite=function(t){var e,n=this,i=kt.now(),r=t.reduce((function(t,e){return t.add(e.key)}),Wt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,r).next((function(r){e=r;for(var s=[],a=0,l=t;a<l.length;a++){var h=l[a],c=h.extractBaseValue(e.get(h.key));null!=c&&s.push(new xe(h.key,c,c.fieldMask(),ve.exists(!0)))}return n.mutationQueue.addMutationBatch(o,i,s,t)}))})).then((function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}}))},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):Yt.resolve(null)}))}))},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var i=t.batch.keys(),r=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,r)})).next((function(){return r.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,i)}))}))},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var i;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),i=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,i)}))}))},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)}))},t.prototype.applyRemoteEvent=function(e){var n=this,i=e.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var s=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=n.targetDataByTarget;var a=[];I(e.targetChanges,(function(e,s){var l=r.get(e);if(l){a.push(n.targetCache.removeMatchingKeys(o,s.removedDocuments,e).next((function(){return n.targetCache.addMatchingKeys(o,s.addedDocuments,e)})));var h=s.resumeToken;if(h.length>0){var c=l.withResumeToken(h,i).withSequenceNumber(o.currentSequenceNumber);r=r.insert(e,c),t.shouldPersistTargetData(l,c,s)&&a.push(n.targetCache.updateTargetData(o,c))}}}));var l=Ft(),h=Wt();if(e.documentUpdates.forEach((function(t,e){h=h.add(t)})),a.push(s.getEntries(o,h).next((function(t){e.documentUpdates.forEach((function(r,h){var c=t.get(r);h instanceof Ye&&h.version.isEqual(wt.MIN)?(s.removeEntry(r,i),l=l.insert(r,h)):null==c||h.version.compareTo(c.version)>0||0===h.version.compareTo(c.version)&&c.hasPendingWrites?(v(!wt.MIN.isEqual(i),"Cannot add a document when the remote version is zero"),s.addEntry(h,i),l=l.insert(r,h)):f("LocalStore","Ignoring outdated watch update for ",r,". Current version:",c.version," Watch version:",h.version),e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,r))}))}))),!i.isEqual(wt.MIN)){var c=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(t){return v(i.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+i+" < "+t),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,i)}));a.push(c)}return Yt.waitFor(a).next((function(){return s.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,l)}))})).then((function(t){return n.targetDataByTarget=r,t}))},t.shouldPersistTargetData=function(t,e,n){return v(e.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},t.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,i=t;n<i.length;n++){var r=i[n],o=r.targetId;if(this.localViewReferences.addReferences(r.addedKeys,o),this.localViewReferences.removeReferences(r.removedKeys,o),!r.fromCache){var s=this.targetDataByTarget.get(o);v(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.withLastLimboFreeSnapshotVersion(s.snapshotVersion);this.targetDataByTarget=this.targetDataByTarget.insert(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Yt.forEach(t,(function(t){return Yt.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.localDocuments.getDocument(n,t)}))},t.prototype.allocateTarget=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var i;return e.targetCache.getTargetData(n,t).next((function(r){return r?Yt.resolve(i=r):e.targetCache.allocateTargetId(n).next((function(r){return i=new Tn(t,r,wn.Listen,n.currentSequenceNumber),e.targetCache.addTargetData(n,i).next((function(){return i}))}))}))})).then((function(n){return null===e.targetDataByTarget.get(n.targetId)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n}))},t.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?Yt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},t.prototype.releaseTarget=function(t,e){var n=this,i=this.targetDataByTarget.get(t);return v(null!==i,"Tried to release nonexistent target: "+t),this.persistence.runTransaction("Release target",e?"readwrite-idempotent":"readwrite-primary-idempotent",(function(r){var o=n.localViewReferences.removeReferencesForId(t);return e?Yt.resolve():Yt.forEach(o,(function(t){return n.persistence.referenceDelegate.removeReference(r,t)})).next((function(){n.persistence.referenceDelegate.removeTarget(r,i)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(i.target)}))},t.prototype.executeQuery=function(t,e){var n=this,i=wt.MIN,r=Wt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,t.toTarget()).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,t.targetId).next((function(t){r=t}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?i:wt.MIN,e?r:Wt())})).next((function(t){return{documents:t,remoteKeys:r}}))}))},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.targetCache.getMatchingKeysForTargetId(n,t)}))},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var i=this,r=e.batch,o=r.keys(),s=Yt.resolve();return o.forEach((function(i){s=s.next((function(){return n.getEntry(t,i)})).next((function(t){var o=t,s=e.docVersions.get(i);v(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(s)<0)&&((o=r.applyToRemoteDocument(i,o,e))?n.addEntry(o,e.commitVersion):v(!t,"Mutation batch "+r+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return i.mutationQueue.removeMutationBatch(t,r)}))},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.collect(n,e.targetDataByTarget)}))},t.prototype.getTarget=function(t){var e=this,n=this.targetDataByTarget.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.targetCache.getTargetDataForTarget(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)})).then((function(e){var n=e.changedDocs;return t.lastDocumentChangeReadTime=e.readTime,n}))},t.prototype.synchronizeLastDocumentChangeReadTime=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){return this.remoteDocuments instanceof Ke?(t=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.getLastDocumentChange(e)})).then((function(t){e.lastDocumentChangeReadTime=t.readTime}))]):[2]}))}))},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),bi=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=S(),this.batchesByDocumentKey=new Mt(gi.compareByKey)}return t.prototype.checkEmpty=function(t){return Yt.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var i=e.batchId,r=this.indexOfExistingBatchId(i,"acknowledged");v(0===r,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[r];return v(i===o.batchId,"Queue ordering failure: expected batch "+i+", got batch "+o.batchId),this.lastStreamToken=n,Yt.resolve()},t.prototype.getLastStreamToken=function(t){return Yt.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Yt.resolve()},t.prototype.addMutationBatch=function(t,e,n,i){v(0!==i.length,"Mutation batches should not be empty");var r=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var o=new zt(r,e,n,i);this.mutationQueue.push(o);for(var s=0,a=i;s<a.length;s++){var l=a[s];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new gi(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast())}return Yt.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Yt.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),Yt.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.indexOfBatchId(e+1),i=n<0?0:n;return Yt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Yt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return Yt.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,i=new gi(e,0),r=new gi(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([i,r],(function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var i=n.findMutationBatch(t.targetOrBatchId);v(null!==i,"Batches in the index must exist in the main table"),o.push(i)})),Yt.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,i=new Mt($);return e.forEach((function(t){var e=new gi(t,0),r=new gi(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,r],(function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),i=i.add(e.targetOrBatchId)}))})),Yt.resolve(this.findMutationBatches(i))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,i=n.length+1,r=n;ut.isDocumentKey(r)||(r=r.child(""));var o=new gi(new ut(r),0),s=new Mt($);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(s=s.add(t.targetOrBatchId)),!0)}),o),Yt.resolve(this.findMutationBatches(s))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var i=e.findMutationBatch(t);null!==i&&n.push(i)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var i=this.batchesByDocumentKey;return Yt.forEach(e.mutations,(function(r){var o=new gi(r.key,e.batchId);return i=i.delete(o),n.referenceDelegate.removeMutationReference(t,r.key)})).next((function(){n.batchesByDocumentKey=i}))},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new gi(e,0),i=this.batchesByDocumentKey.firstAfterOrEqual(n);return Yt.resolve(e.isEqual(i&&i.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Yt.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),vi=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new Tt(ut.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){v(!n.isEqual(wt.MIN),"Cannot add a document with a read time of zero");var i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.sizer(e);return this.docs=this.docs.insert(i,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Yt.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,i=Lt();return e.forEach((function(t){var e=n.docs.get(t);i=i.insert(t,e?e.maybeDocument:null)})),Yt.resolve(i)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var i=Bt(),r=new ut(e.path.child("")),o=this.docs.getIteratorFrom(r);o.hasNext();){var s=o.getNext(),a=s.value,l=a.maybeDocument,h=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;h.compareTo(n)<=0||l instanceof Ue&&e.matches(l)&&(i=i.insert(l.key,l))}return Yt.resolve(i)},t.prototype.forEachDocumentKey=function(t,e){return Yt.forEach(this.docs,(function(t){return e(t)}))},t.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return Yt.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return o.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(i,r){r?n.push(e.documentCache.addEntry(t,r,e.readTime)):e.documentCache.removeEntry(i)})),Yt.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(je),t}(),Ci=function(){function t(t){this.persistence=t,this.targets=new qe((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=wt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new fi,this.targetCount=0,this.targetIdGenerator=he.forTargetCache()}return t.prototype.forEachTarget=function(t,e){return this.targets.forEach((function(t,n){return e(n)})),Yt.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Yt.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Yt.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Yt.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Yt.resolve()},t.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return v(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,Yt.resolve()},t.prototype.updateTargetData=function(t,e){return v(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),Yt.resolve()},t.prototype.removeTargetData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Yt.resolve()},t.prototype.removeTargets=function(t,e,n){var i=this,r=0,o=[];return this.targets.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i.targets.delete(s),o.push(i.removeMatchingKeysForTargetId(t,a.targetId)),r++)})),Yt.waitFor(o).next((function(){return r}))},t.prototype.getTargetCount=function(t){return Yt.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.targets.get(e)||null;return Yt.resolve(n)},t.prototype.getTargetDataForTarget=function(t,e){return b("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((function(e){r.push(i.addReference(t,e))})),Yt.waitFor(r)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((function(e){r.push(i.removeReference(t,e))})),Yt.waitFor(r)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Yt.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Yt.resolve(n)},t.prototype.containsKey=function(t,e){return Yt.resolve(this.references.containsKey(e))},t}(),Si=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new st(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new Ci(this),this.indexManager=new tn,this.remoteDocumentCache=new vi(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}return t.createLruPersistence=function(e,n,i){return new t(e,(function(t){return new ki(t,new In(n),i)}))},t.createEagerPersistence=function(e){return new t(e,(function(t){return new _i(t)}))},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new bi(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.targetCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var i=this;f("MemoryPersistence","Starting transaction:",t);var r=new xi(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(r).next((function(t){return i.referenceDelegate.onTransactionCommitted(r).next((function(){return t}))})).toPromise().then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.mutationQueuesContainKey=function(t,e){return Yt.or((n=this.mutationQueues,i=[],A(n,(function(t,e){return i.push(e)})),i).map((function(n){return function(){return n.containsKey(t,e)}})));var n,i},t}(),xi=function(t){function e(e){var n=t.call(this)||this;return n.currentSequenceNumber=e,n}return o.__extends(e,t),e}(Ln),_i=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw b("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Yt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Yt.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Yt.resolve()},t.prototype.removeTarget=function(t,e){var n=this,i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return i.removeTargetData(t,e)}))},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Yt.forEach(this.orphanedDocuments,(function(i){return e.isReferenced(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Yt.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Yt.resolve(n.inMemoryPins.containsKey(e))}])},t}(),ki=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new qe((function(t){return Ct(t.path)})),this.garbageCollector=new Fn(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Yt.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Yt.forEach(this.orphanedSequenceNumbers,(function(i,r){return n.isPinned(t,i,r).next((function(t){return t?Yt.resolve():e(r)}))}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,i=0,r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.forEachDocumentKey(t,(function(r){return n.isPinned(t,r,e).next((function(t){t||(i++,o.removeEntry(r))}))})).next((function(){return o.apply(t)})).next((function(){return i}))},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Yt.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Yt.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Yt.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Yt.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t,t.version);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw b("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var i=this;return Yt.or([function(){return i.persistence.mutationQueuesContainKey(t,e)},function(){return Yt.resolve(i.inMemoryPins.containsKey(e))},function(){return i.persistence.getTargetCache().containsKey(t,e)},function(){var t=i.orphanedSequenceNumbers.get(e);return Yt.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),wi=1e3,Ti=1.5,Ii=6e4,Ai=function(){function t(t,e,n,i,r){void 0===n&&(n=wi),void 0===i&&(i=Ti),void 0===r&&(r=Ii),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=i,this.maxDelayMs=r,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),i=Math.max(0,Date.now()-this.lastAttemptTime),r=Math.max(0,n-i);this.currentBaseMs>0&&f("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,r,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),Pi=function(t){return t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff",t}({}),Mi=function(){function t(t,e,n,i,r,o){this.queue=t,this.idleTimerId=n,this.connection=i,this.credentialsProvider=r,this.listener=o,this.state=Pi.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Ai(t,e)}return t.prototype.isStarted=function(){return this.state===Pi.Starting||this.state===Pi.Open||this.state===Pi.Backoff},t.prototype.isOpen=function(){return this.state===Pi.Open},t.prototype.start=function(){this.state!==Pi.Error?(v(this.state===Pi.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(Pi.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Pi.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.isOpen()?[2,this.close(Pi.Initial)]:[2]}))}))},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===Pi.Error||Kn(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==Pi.Error?this.backoff.reset():e&&e.code===x.RESOURCE_EXHAUSTED?(g(e.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===x.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===Pi.Initial,"Must be in initial state to auth"),this.state=Pi.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new _(x.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},t.prototype.startStream=function(t){var e=this;v(this.state===Pi.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return v(e.state===Pi.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=Pi.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.performBackoff=function(){var t=this;v(this.state===Pi.Error,"Should only perform backoff when in Error state"),this.state=Pi.Backoff,this.backoff.backoffAndRun((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return v(this.state===Pi.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Pi.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),f("PersistentStream","close with error: "+t),this.stream=null,this.close(Pi.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ei=function(t){function e(e,n,i,r,o){var s=t.call(this,e,pt.ListenStreamConnectionBackoff,pt.ListenStreamIdle,n,i,o)||this;return s.serializer=r,s}return o.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(Mi),Di=function(t){function e(e,n,i,r,o){var s=t.call(this,e,pt.WriteStreamConnectionBackoff,pt.WriteStreamIdle,n,i,o)||this;return s.serializer=r,s.handshakeComplete_=!1,s.lastStreamToken=S(),s}return o.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},e}(Mi),Fi=function(){function t(t,e,n,i){this.queue=t,this.connection=e,this.credentials=n,this.serializer=i}return t.prototype.newPersistentWriteStream=function(t){return new Di(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new Ei(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var i=Ft();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);i=i.insert(n.key,n)}));var r=[];return t.forEach((function(t){var e=i.get(t);v(!!e,"Missing entity in write response for "+t),r.push(e)})),r}))},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(i){return n.connection.invokeRPC(t,e,i)})).catch((function(t){throw t.code===x.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(i){return n.connection.invokeStreamingRPC(t,e,i)})).catch((function(t){throw t.code===x.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t}(),Li=function(){function t(t){this.datastore=t,this.readVersions=Ot(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new _(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=i.sent()).forEach((function(t){t instanceof Ye||t instanceof Ue?n.recordVersion(t):b("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new ke(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),!t.isEmpty())throw new _(x.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof Ue)e=t.version;else{if(!(t instanceof Ye))throw b("Document in a transaction was a "+t.constructor.name);e=wt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new _(x.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?ve.updateTime(e):ve.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(wt.forDeletedDoc()))throw new _(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ve.updateTime(e)}return ve.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Ri=function(t){return t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline",t}({}),Bi=function(t){return t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState",t}({}),Ni=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=Ri.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Ri.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(pt.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,v(t.state===Ri.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(Ri.Offline),Promise.resolve()})))},t.prototype.handleWatchStreamFailure=function(t){this.state===Ri.Online?(this.setAndBroadcast(Ri.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(Ri.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===Ri.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(e),this.shouldWarnClientIsOffline=!1):f("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),Oi=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}({});function Vi(t){switch(t){case x.OK:return b("Treated status OK as error");case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return b("Unknown status code: "+t)}}function Wi(t){if(void 0===t)return g("GRPC error has no .code"),x.UNKNOWN;switch(t){case Oi.OK:return x.OK;case Oi.CANCELLED:return x.CANCELLED;case Oi.UNKNOWN:return x.UNKNOWN;case Oi.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Oi.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Oi.INTERNAL:return x.INTERNAL;case Oi.UNAVAILABLE:return x.UNAVAILABLE;case Oi.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Oi.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Oi.NOT_FOUND:return x.NOT_FOUND;case Oi.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Oi.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Oi.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Oi.ABORTED:return x.ABORTED;case Oi.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Oi.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Oi.DATA_LOSS:return x.DATA_LOSS;default:return b("Unknown status code: "+t)}}function Hi(t){if(void 0===t)return Oi.OK;switch(t){case x.OK:return Oi.OK;case x.CANCELLED:return Oi.CANCELLED;case x.UNKNOWN:return Oi.UNKNOWN;case x.DEADLINE_EXCEEDED:return Oi.DEADLINE_EXCEEDED;case x.RESOURCE_EXHAUSTED:return Oi.RESOURCE_EXHAUSTED;case x.INTERNAL:return Oi.INTERNAL;case x.UNAVAILABLE:return Oi.UNAVAILABLE;case x.UNAUTHENTICATED:return Oi.UNAUTHENTICATED;case x.INVALID_ARGUMENT:return Oi.INVALID_ARGUMENT;case x.NOT_FOUND:return Oi.NOT_FOUND;case x.ALREADY_EXISTS:return Oi.ALREADY_EXISTS;case x.PERMISSION_DENIED:return Oi.PERMISSION_DENIED;case x.FAILED_PRECONDITION:return Oi.FAILED_PRECONDITION;case x.ABORTED:return Oi.ABORTED;case x.OUT_OF_RANGE:return Oi.OUT_OF_RANGE;case x.UNIMPLEMENTED:return Oi.UNIMPLEMENTED;case x.DATA_LOSS:return Oi.DATA_LOSS;default:return b("Unknown status code: "+t)}}var Gi=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ut.comparator(e.key,n.key)}:function(t,e){return ut.comparator(t.key,e.key)},this.keyedMap=Bt(),this.sortedSet=new Tt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();n.hasNext();){var r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i},t}(),zi=function(t){return t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata",t}({}),Ui=function(t){return t[t.Local=0]="Local",t[t.Synced=1]="Synced",t}({}),Yi=function(){function t(){this.changeMap=new Tt(ut.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==zi.Added&&n.type===zi.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===zi.Metadata&&n.type!==zi.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===zi.Modified&&n.type===zi.Modified?this.changeMap=this.changeMap.insert(e,{type:zi.Modified,doc:t.doc}):t.type===zi.Modified&&n.type===zi.Added?this.changeMap=this.changeMap.insert(e,{type:zi.Added,doc:t.doc}):t.type===zi.Removed&&n.type===zi.Added?this.changeMap=this.changeMap.remove(e):t.type===zi.Removed&&n.type===zi.Modified?this.changeMap=this.changeMap.insert(e,{type:zi.Removed,doc:n.doc}):t.type===zi.Added&&n.type===zi.Removed?this.changeMap=this.changeMap.insert(e,{type:zi.Modified,doc:t.doc}):b("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Xi=function(){function t(t,e,n,i,r,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,i,r){var o=[];return n.forEach((function(t){o.push({type:zi.Added,doc:t})})),new t(e,n,Gi.emptySet(n),o,i,r,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},t}(),qi=function(){function t(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var i,r=((i={})[e]=ji.createSynthesizedTargetChangeForCurrentChange(e,n),i);return new t(wt.MIN,r,Gt(),Ft(),Wt())},t}(),ji=function(){function t(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(S(),n,Wt(),Wt(),Wt())},t}(),Ki=function(){return function(t,e,n,i){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=i}}(),$i=function(){return function(t,e){this.targetId=t,this.existenceFilter=e}}(),Qi=function(t){return t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset",t}({}),Ji=function(){return function(t,e,n,i){void 0===n&&(n=S()),void 0===i&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}(),Zi=function(){function t(){this.pendingResponses=0,this.documentChanges=nr(),this._resumeToken=S(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=Wt(),e=Wt(),n=Wt();return this.documentChanges.forEach((function(i,r){switch(r){case zi.Added:t=t.add(i);break;case zi.Modified:e=e.add(i);break;case zi.Removed:n=n.add(i);break;default:b("Encountered invalid change type: "+r)}})),new ji(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=nr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),tr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Ft(),this.pendingDocumentTargetMapping=er(),this.pendingTargetResets=new Mt($)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var i=n[e];t.newDoc instanceof Ue?this.addDocumentToTarget(i,t.newDoc):t.newDoc instanceof Ye&&this.removeDocumentFromTarget(i,t.key,t.newDoc)}for(var r=0,o=t.removedTargetIds;r<o.length;r++)this.removeDocumentFromTarget(i=o[r],t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var i=e.ensureTargetState(n);switch(t.state){case Qi.NoChange:e.isActiveTarget(n)&&i.updateResumeToken(t.resumeToken);break;case Qi.Added:i.recordTargetResponse(),i.isPending||i.clearPendingChanges(),i.updateResumeToken(t.resumeToken);break;case Qi.Removed:i.recordTargetResponse(),i.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Qi.Current:e.isActiveTarget(n)&&(i.markCurrent(),i.updateResumeToken(t.resumeToken));break;case Qi.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),i.updateResumeToken(t.resumeToken));break;default:b("Unknown target watch change state: "+t.state)}}))},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):I(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,i=this.targetDataForActiveTarget(e);if(i){var r=i.target;if(r.isDocumentQuery())if(0===n){var o=new ut(r.path);this.removeDocumentFromTarget(e,o,new Ye(o,wt.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};I(this.targetStates,(function(i,r){var o=e.targetDataForActiveTarget(i);if(o){if(r.current&&o.target.isDocumentQuery()){var s=new ut(o.target.path);null!==e.pendingDocumentUpdates.get(s)||e.targetContainsDocument(i,s)||e.removeDocumentFromTarget(i,s,new Ye(s,t))}r.hasPendingChanges&&(n[i]=r.toTargetChange(),r.clearPendingChanges())}}));var i=Wt();this.pendingDocumentTargetMapping.forEach((function(t,n){var r=!0;n.forEachWhile((function(t){var n=e.targetDataForActiveTarget(t);return!n||n.purpose===wn.LimboResolution||(r=!1,!1)})),r&&(i=i.add(t))}));var r=new qi(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,i);return this.pendingDocumentUpdates=Ft(),this.pendingDocumentTargetMapping=er(),this.pendingTargetResets=new Mt($),r},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?zi.Modified:zi.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var i=this.ensureTargetState(t);this.targetContainsDocument(t,e)?i.addDocumentChange(e,zi.Removed):i.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Zi),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Mt($),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Zi,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function er(){return new Tt(ut.comparator)}function nr(){return new Tt(ut.comparator)}var ir="RemoteStore",rr=function(){function t(t,e,n,i,r){var s=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=r,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return o.__awaiter(s,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(f(ir,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Ni(n,i),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Ri.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Ri.Offline),[2]}}))}))},t.prototype.disableNetworkInternal=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(f(ir,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return f(ir,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Ri.Unknown),[2]}}))}))},t.prototype.listen=function(t){w(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},t.prototype.unlisten=function(t){v(w(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),P(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Ri.Unknown))},t.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new tr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!P(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){return I(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},t.prototype.onWatchStreamClose=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Ri.Unknown),[2]}))}))},t.prototype.onWatchStreamChange=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(i){switch(i.label){case 0:return this.onlineStateTracker.set(Ri.Online),t instanceof Ji&&t.state===Qi.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Ki?this.watchChangeAggregator.handleDocumentChange(t):t instanceof $i?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof Ji,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(wt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=i.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(wt.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return I(n.targetChanges,(function(n,i){if(i.resumeToken.length>0){var r=e.listenTargets[n];r&&(e.listenTargets[n]=r.withResumeToken(i.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(S(),n.snapshotVersion),e.sendUnwatchRequest(t);var i=new Tn(n.target,t,wn.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(i)}})),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,i=Promise.resolve();return t.targetIds.forEach((function(t){i=i.then((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return w(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),i},t.prototype.fillWritePipeline=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++)t.writeStream.writeMutations(n[e].mutations)})).catch(Wn)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var i=this.writePipeline.shift(),r=Ut.from(i,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(r).then((function(){return n.fillWritePipeline()}))},t.prototype.onWriteStreamClose=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]:[2]}))}))},t.prototype.handleHandshakeError=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return Vi(t.code)?(f(ir,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=S(),[2,this.localStore.setLastStreamToken(S()).catch(Wn)]):[2]}))}))},t.prototype.handleWriteError=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(i){return Vi(r=t.code)&&r!==x.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2];var r}))}))},t.prototype.createTransaction=function(){return new Li(this.datastore)},t.prototype.restartNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(Ri.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.handleCredentialChange=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(f(ir,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.applyPrimaryState=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Ri.Unknown),e.label=4;case 4:return[2]}}))}))},t}(),or=function(){function t(t,e){if(E("GeoPoint",arguments,2),L("GeoPoint","number",1,t),L("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new _(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return $(this._lat,t._lat)||$(this._long,t._long)},t}(),sr=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new Ne(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ar=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=cr(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},i=0,r=this.elements;i<r.length;i++)n(r[i]);return new Ge(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Q(e.elements,this.elements)},t}(),lr=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=cr(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},i=0,r=this.elements;i<r.length;i++)n(r[i]);return new Ge(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&Q(e.elements,this.elements)},t}(),hr=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);return n instanceof Fe&&this.operand instanceof Fe?new Fe(n.internalValue+this.operand.internalValue):new Le(n.internalValue+this.operand.internalValue)},t.prototype.applyToRemoteDocument=function(t,e){return v(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof Ee?t:new Fe(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function cr(t){return t instanceof Ge?t.internalValue.slice():[]}var ur,dr,pr=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),mr=((ur={})[li.ASCENDING.name]="ASCENDING",ur[li.DESCENDING.name]="DESCENDING",ur),fr=((dr={})[ei.LESS_THAN.name]="LESS_THAN",dr[ei.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",dr[ei.GREATER_THAN.name]="GREATER_THAN",dr[ei.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",dr[ei.EQUAL.name]="EQUAL",dr[ei.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",dr[ei.IN.name]="IN",dr[ei.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",dr),gr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(t,e){v(!Kn(t),e+" is missing")}function br(t){return"number"==typeof t?t:"string"==typeof t?Number(t):b("can't parse "+t)}var vr=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?x.UNKNOWN:Wi(t.code);return new _(e,t.message||"")},t.prototype.toInt32Value=function(t){return this.options.useProto3Json||Kn(t)?t:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Kn(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=br(t.seconds||"0");return new kt(e,t.nanos||0)},t.prototype.fromIso8601String=function(t){var e=0,n=gr.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}var r=new Date(t),o=Math.floor(r.getTime()/1e3);return new kt(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),et.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),et.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),wt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=lt.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ut(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?lt.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new lt(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new lt(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Pe)return{nullValue:"NULL_VALUE"};if(t instanceof Me)return{booleanValue:t.value()};if(t instanceof Fe)return{integerValue:""+t.value()};if(t instanceof Le){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Re?{stringValue:t.value()}:t instanceof He?{mapValue:this.toMapValue(t)}:t instanceof Ge?{arrayValue:this.toArrayValue(t)}:t instanceof Be?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof We?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Oe?{bytesValue:this.toBytes(t.value())}:t instanceof Ve?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:b("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Pe.INSTANCE;if("booleanValue"in t)return Me.of(t.booleanValue);if("integerValue"in t)return new Fe(br(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Le.NAN;if("Infinity"===t.doubleValue)return Le.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Le.NEGATIVE_INFINITY}return new Le(t.doubleValue)}if("stringValue"in t)return new Re(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t)return yr(t.arrayValue,"arrayValue"),new Ge((t.arrayValue.values||[]).map((function(t){return e.fromValue(t)})));if("timestampValue"in t)return yr(t.timestampValue,"timestampValue"),new Be(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t)return yr(t.geoPointValue,"geoPointValue"),new We(new or(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){yr(t.bytesValue,"bytesValue");var n=this.fromBlob(t.bytesValue);return new Oe(n)}if("referenceValue"in t){yr(t.referenceValue,"referenceValue");var i=this.fromResourceName(t.referenceValue),r=new ot(i.get(1),i.get(3)),o=new ut(this.extractLocalPathFromResourceName(i));return new Ve(r,o)}return b("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,i=this.fromName(t.name),r=this.fromVersion(t.updateTime);return new Ue(i,r,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},t.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,i){n[t]=e.toValue(i)})),n},t.prototype.fromFields=function(t){var e=this,n=He.EMPTY;return A(t,(function(t,i){n=n.set(new ct([t]),e.fromValue(i))})),n},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},t.prototype.fromFound=function(t){var e=this;v(!!t.found,"Tried to deserialize a found document from a missing document."),yr(t.found.name,"doc.found.name"),yr(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),i=this.fromVersion(t.found.updateTime);return new Ue(n,i,{},void 0,t.found,(function(t){return e.fromValue(t)}))},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new Ye(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):b("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Qi.Added:return"ADD";case Qi.Current:return"CURRENT";case Qi.NoChange:return"NO_CHANGE";case Qi.Removed:return"REMOVE";case Qi.Reset:return"RESET";default:return b("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof $i)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Ki){var e;if(t.newDoc instanceof Ue)return{documentChange:{document:{name:this.toName((e=t.newDoc).key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof Ye)return{documentDelete:{document:this.toName((e=t.newDoc).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ji){var n=void 0;return t.cause&&(n={code:Hi(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return b("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){yr(t.targetChange,"targetChange");var i=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),s=t.targetChange.cause,a=s&&this.fromRpcStatus(s);e=new Ji(i,r,o,a||null)}else if("documentChange"in t){yr(t.documentChange,"documentChange");var l=t.documentChange;yr(l.document,"documentChange.name"),yr(l.document.name,"documentChange.document.name"),yr(l.document.updateTime,"documentChange.document.updateTime");var h=this.fromName(l.document.name),c=this.fromVersion(l.document.updateTime),u=new Ue(h,c,{},void 0,l.document,(function(t){return n.fromValue(t)}));e=new Ki(l.targetIds||[],l.removedTargetIds||[],u.key,u)}else if("documentDelete"in t){yr(t.documentDelete,"documentDelete");var d=t.documentDelete;yr(d.document,"documentDelete.document"),h=this.fromName(d.document),c=d.readTime?this.fromVersion(d.readTime):wt.forDeletedDoc(),u=new Ye(h,c),e=new Ki([],d.removedTargetIds||[],u.key,u)}else if("documentRemove"in t){yr(t.documentRemove,"documentRemove");var p=t.documentRemove;yr(p.document,"documentRemove"),h=this.fromName(p.document),e=new Ki([],p.removedTargetIds||[],h,null)}else{if(!("filter"in t))return b("Unknown change type "+JSON.stringify(t));yr(t.filter,"filter");var m=t.filter;yr(m.targetId,"filter.targetId");var f=new pr(m.count||0);e=new $i(m.targetId,f)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Qi.NoChange:"ADD"===t?Qi.Added:"REMOVE"===t?Qi.Removed:"CURRENT"===t?Qi.Current:"RESET"===t?Qi.Reset:b("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return wt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?wt.MIN:e.readTime?this.fromVersion(e.readTime):wt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Se)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof ke)e={delete:this.toName(t.key)};else if(t instanceof xe)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof _e))return b("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):ve.NONE;if(t.update){yr(t.update.name,"name");var i=this.fromName(t.update.name),r=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new xe(i,r,o,n)}return new Se(i,r,n)}if(t.delete)return i=this.fromName(t.delete),new ke(i,n);if(t.transform){i=this.fromName(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new _e(i,s)}return b("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:b("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?ve.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ve.exists(t.exists):ve.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,i=this.fromVersion(t.updateTime?t.updateTime:e);i.isEqual(wt.MIN)&&(i=this.fromVersion(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults.map((function(t){return n.fromValue(t)}))),new ye(i,r)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof sr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ar)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof lr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof hr)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw b("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=sr.instance;else if("appendMissingElements"in t)n=new ar((t.appendMissingElements.values||[]).map((function(t){return e.fromValue(t)})));else if("removeAllFromArray"in t)n=new lr((t.removeAllFromArray.values||[]).map((function(t){return e.fromValue(t)})));else if("increment"in t){var i=this.fromValue(t.increment);v(i instanceof Ee,"NUMERIC_ADD transform requires a NumberValue"),n=new hr(i)}else b("Unknown transform proto: "+JSON.stringify(t));var r=ct.fromServerFormat(t.fieldPath);return new ge(r,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;return v(1===e,"DocumentsTarget contained other than 1 document: "+e),Zn.atPath(this.fromQueryPath(t.documents[0])).toTarget()},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var i=this.toFilter(t.filters);i&&(e.structuredQuery.where=i);var r=this.toOrder(t.orderBy);r&&(e.structuredQuery.orderBy=r);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){v(1===i,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?r=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var l=null;n.limit&&(l=this.fromInt32Value(n.limit));var h=null;n.startAt&&(h=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Zn(e,r,a,s,l,Jn.First,h,c).toTarget()},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case wn.Listen:return null;case wn.ExistenceFilterMismatch:return"existence-filter-mismatch";case wn.LimboResolution:return"limbo-document";default:return b("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.target;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof ni?e.toUnaryOrFieldFilter(t):b("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.fromFilter(t)})).reduce((function(t,e){return t.concat(e)})):b("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},t.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.toValue(t)}))}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,i=t.values.map((function(t){return e.fromValue(t)}));return new hi(i,n)},t.prototype.toDirection=function(t){return mr[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return li.ASCENDING;case"DESCENDING":return li.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return fr[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return ei.EQUAL;case"GREATER_THAN":return ei.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return ei.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return ei.LESS_THAN;case"LESS_THAN_OR_EQUAL":return ei.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return ei.ARRAY_CONTAINS;case"IN":return ei.IN;case"ARRAY_CONTAINS_ANY":return ei.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return b("Unspecified operator");default:return b("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ct.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new ci(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return ni.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===ei.EQUAL){if(t.value.isEqual(Le.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(Pe.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return ni.create(e,ei.EQUAL,Le.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return ni.create(n,ei.EQUAL,Pe.INSTANCE);case"OPERATOR_UNSPECIFIED":return b("Unspecified filter");default:return b("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(t){return ct.fromServerFormat(t)}));return fe.fromArray(e)},t}(),Cr=function(){return function(){this.viewSnap=null,this.targetId=0,this.listeners=[]}}(),Sr=function(){function t(t){this.syncEngine=t,this.queries=new qe((function(t){return t.canonicalId()})),this.onlineState=Ri.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,i=this.queries.get(e);return i||(n=!0,i=new Cr,this.queries.set(e,i)),i.listeners.push(t),v(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),i.viewSnap&&t.onViewSnapshot(i.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then((function(t){return i.targetId=t,t})):Promise.resolve(i.targetId)},t.prototype.unlisten=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r;return o.__generator(this,(function(o){return n=!1,(i=this.queries.get(e=t.query))&&(r=i.listeners.indexOf(t))>=0&&(i.listeners.splice(r,1),n=0===i.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,i=t;n<i.length;n++){var r=i[n],o=this.queries.get(r.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].onViewSnapshot(r)&&(e=!0);o.viewSnap=r}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var i=0,r=n.listeners;i<r.length;i++)r[i].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,i){for(var r=0,o=i.listeners;r<o.length;r++)o[r].applyOnlineStateChange(t)&&(e=!0)})),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},t}(),xr=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Ri.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,i=t.docChanges;n<i.length;n++){var r=i[n];r.type!==zi.Metadata&&e.push(r)}t=new Xi(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){return v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.waitForSyncWhenOnline&&e!==Ri.Offline?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===Ri.Offline)},t.prototype.shouldRaiseEvent=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Xi.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),_r=function(){function t(t,e,n,i){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=i}return t.fromSnapshot=function(e,n){for(var i=Wt(),r=Wt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case zi.Added:i=i.add(a.doc.key);break;case zi.Removed:r=r.add(a.doc.key)}}return new t(e,n.fromCache,i,r)},t}(),kr=function(){return function(t){this.key=t}}(),wr=function(){return function(t){this.key=t}}(),Tr=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Wt(),this.mutatedKeys=Wt(),this.documentSet=new Gi(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,i=e?e.changeSet:new Yi,r=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.hasLimitToFirst()&&r.size===this.query.limit?r.last():null,h=this.query.hasLimitToLast()&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((function(t,e){var c=r.get(t),u=e instanceof Ue?e:null;u&&(v(t.isEqual(u.key),"Mismatching keys found in document changes: "+t+" != "+u.key),u=n.query.matches(u)?u:null);var d=!!c&&n.mutatedKeys.has(c.key),p=!!u&&(u.hasLocalMutations||n.mutatedKeys.has(u.key)&&u.hasCommittedMutations),m=!1;c&&u?c.data().isEqual(u.data())?d!==p&&(i.track({type:zi.Metadata,doc:u}),m=!0):n.shouldWaitForSyncedDocument(c,u)||(i.track({type:zi.Modified,doc:u}),m=!0,(l&&n.query.docComparator(u,l)>0||h&&n.query.docComparator(u,h)<0)&&(a=!0)):!c&&u?(i.track({type:zi.Added,doc:u}),m=!0):c&&!u&&(i.track({type:zi.Removed,doc:c}),m=!0,(l||h)&&(a=!0)),m&&(u?(s=s.add(u),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;s.size>this.query.limit;){var c=this.query.hasLimitToFirst()?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),i.track({type:zi.Removed,doc:c})}return v(!a||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:s,changeSet:i,needsRefill:a,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var i=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case zi.Added:return 1;case zi.Modified:case zi.Metadata:return 2;case zi.Removed:return 0;default:return b("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||i.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var s=e?this.updateLimboDocuments():[],a=0===this.limboDocuments.size&&this.current?Ui.Synced:Ui.Local,l=a!==this.syncState;return this.syncState=a,0!==o.length||l?{snapshot:new Xi(this.query,t.documentSet,r,o,t.mutatedKeys,a===Ui.Local,l,!1),limboChanges:s}:{limboChanges:s}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===Ri.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Yi,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=Wt(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new wr(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new kr(t))})),n},t.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Wt();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},t.prototype.computeInitialSnapshot=function(){return Xi.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ui.Local)},t}(),Ir=5,Ar=function(){function t(t,e,n,i){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=i,this.retries=Ir,this.backoff=new Ai(this.asyncQueue,pt.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return o.__generator(this,(function(i){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!Kn(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(g){return this.deferred.reject(g),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Vi(e)}return!1},t}(),Pr=function(){return function(t,e,n){this.query=t,this.targetId=e,this.view=n}}(),Mr=function(){return function(t){this.key=t,this.receivedDocument=!1}}(),Er=function(){function t(t,e,n,i){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=i,this.syncEngineListener=null,this.queryViewsByQuery=new qe((function(t){return t.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Tt(ut.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new fi,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=he.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Ri.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("listen()"),(i=this.queryViewsByQuery.get(t))?(this.sharedClientState.addLocalQueryTarget(e=i.targetId),n=i.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(t.toTarget())];case 2:return r=o.sent(),s=this.sharedClientState.addLocalQueryTarget(r.targetId),[4,this.initializeViewAndComputeSnapshot(t,e=r.targetId,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.remoteStore.listen(r),o.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},t.prototype.initializeViewAndComputeSnapshot=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i,r,s,a,l,h;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return i=o.sent(),r=new Tr(t,i.remoteKeys),s=r.computeDocChanges(i.documents),a=ji.createSynthesizedTargetChangeForCurrentChange(e,n&&this.onlineState!==Ri.Offline),v(0===(l=r.applyChanges(s,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!l.snapshot,"applyChanges for new view should always return a snapshot"),h=new Pr(t,e,r),this.queryViewsByQuery.set(t,h),this.queriesByTarget[e]||(this.queriesByTarget[e]=[]),this.queriesByTarget[e].push(t),[2,l.snapshot]}}))}))},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=i.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}}))}))},t.prototype.unlisten=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i=this;return o.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),(n=this.queriesByTarget[e.targetId]).length>1?(this.queriesByTarget[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.queryViewsByQuery.delete(t),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then((function(){i.sharedClientState.clearQueryState(e.targetId),i.remoteStore.unlisten(e.targetId),i.removeAndCleanupTarget(e.targetId)})).catch(Wn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=i.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return i.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return i.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new Ar(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(i){switch(i.label){case 0:this.assertSubscribed("applyRemoteEvent()"),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=i.sent(),A(t.targetChanges,(function(t,e){var i=n.limboResolutionsByTarget[Number(t)];i&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?i.receivedDocument=!0:e.modifiedDocuments.size>0?v(i.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(v(i.receivedDocument,"Received remove for limbo target document without add."),i.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return i.sent(),[3,6];case 4:return[4,Wn(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===Bi.RemoteStore||!this.isPrimary&&e===Bi.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(e,i){var r=i.view.applyOnlineStateChange(t);v(0===r.limboChanges.length,"OnlineState should not affect limbo documents."),r.snapshot&&n.push(r.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,i,r,s,a,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),(i=(n=this.limboResolutionsByTarget[t])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(i),delete this.limboResolutionsByTarget[t],r=(r=new Tt(ut.comparator)).insert(i,new Ye(i,wt.forDeletedDoc())),s=Wt().add(i),a=new qi(wt.MIN,{},new Mt($),r,s),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(t,!1).then((function(){return l.removeAndCleanupTarget(t,e)})).catch(Wn)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.applyBatchState=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i;return o.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(i=r.sent())?(f("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return r.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):b("Unknown batchState: "+e),r.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(i)];case 5:return r.sent(),[2]}}))}))},t.prototype.applySuccessfulWrite=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(i){switch(i.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),this.processUserCallback(e=t.batch.batchId,null),this.triggerPendingWritesCallbacks(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return[4,Wn(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.rejectFailedWrite=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(i){switch(i.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=i.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return i.sent(),[3,6];case 4:return[4,Wn(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.registerPendingWritesCallback=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(i){switch(i.label){case 0:return this.remoteStore.canUseNetwork()||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=i.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}}))}))},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new _(x.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Tt($)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var i=n.get(t);i&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?i.reject(e):i.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),v(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var i=0,r=this.queriesByTarget[t];i<r.length;i++){var o=r[i];this.queryViewsByQuery.delete(o),e&&this.syncEngineListener.onWatchError(o,e)}if(delete this.queriesByTarget[t],this.isPrimary){var s=this.limboDocumentRefs.referencesForId(t);this.limboDocumentRefs.removeReferencesForId(t),s.forEach((function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)}))}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,i=e;n<i.length;n++){var r=i[n];r instanceof kr?(this.limboDocumentRefs.addReference(r.key,t),this.trackLimboChange(r)):r instanceof wr?(f("SyncEngine","Document no longer in limbo: "+r.key),this.limboDocumentRefs.removeReference(r.key,t),this.limboDocumentRefs.containsKey(r.key)||this.removeLimboTarget(r.key)):b("Unknown limbo change: "+JSON.stringify(r))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){f("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),i=Zn.atPath(e.path);this.limboResolutionsByTarget[n]=new Mr(e),this.remoteStore.listen(new Tn(i.toTarget(),n,wn.LimboResolution,st.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,i,r,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],i=[],r=[],this.queryViewsByQuery.forEach((function(o,a){r.push(Promise.resolve().then((function(){var e=a.view.computeDocChanges(t);return e.needsRefill?s.localStore.executeQuery(a.query,!1).then((function(t){return a.view.computeDocChanges(t.documents,e)})):e})).then((function(t){var r=a.view.applyChanges(t,!0===s.isPrimary,e&&e.targetChanges[a.targetId]);if(s.updateTrackedLimbos(a.targetId,r.limboChanges),r.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(a.targetId,r.snapshot.fromCache?"not-current":"current"),n.push(r.snapshot);var o=_r.fromSnapshot(a.targetId,r.snapshot);i.push(o)}})))})),[4,Promise.all(r)];case 1:return o.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(i)];case 2:return o.sent(),[2]}}))}))},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(i){switch(i.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=i.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:i.sent(),i.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return i.sent(),[2]}}))}))},t.prototype.applyPrimaryState=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s,a,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return o.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=o.sent(),i=0,r=n;i<r.length;i++)this.remoteStore.listen(r[i]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),I(this.queriesByTarget,(function(t,e){l.sharedClientState.isLocalQueryTarget(t)?s.push(t):a=a.then((function(){return l.removeAndCleanupTarget(t),l.localStore.releaseTarget(t,!0)})),l.remoteStore.unlisten(t)})),[4,a]);case 4:return o.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return o.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},t.prototype.resetLimboDocuments=function(){var t=this;I(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Tt(ut.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,i,r,s,a,l,h,c,u,d,p,m;return o.__generator(this,(function(o){switch(o.label){case 0:e=[],n=[],i=0,r=t,o.label=1;case 1:return i<r.length?(a=void 0,(l=this.queriesByTarget[s=r[i]])&&0!==l.length?[4,this.localStore.releaseTarget(s,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.localStore.allocateTarget(l[0].toTarget())];case 3:a=o.sent(),h=0,c=l,o.label=4;case 4:return h<c.length?(v(!!(d=this.queryViewsByQuery.get(u=c[h])),"No query view found for "+u),[4,this.synchronizeViewAndComputeSnapshot(d)]):[3,7];case 5:(p=o.sent()).snapshot&&n.push(p.snapshot),o.label=6;case 6:return h++,[3,4];case 7:return[3,12];case 8:return v(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(s)];case 9:return v(!!(m=o.sent()),"Target for id "+s+" not found"),[4,this.localStore.allocateTarget(m)];case 10:return a=o.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(m),s,!1)];case 11:o.sent(),o.label=12;case 12:e.push(a),o.label=13;case 13:return i++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},t.prototype.synthesizeTargetToQuery=function(t){return new Zn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,Jn.First,t.startAt,t.endAt)},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var i,r;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return f("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return i=o.sent(),r=qi.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(i,r)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(t,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(t,n),[3,7];case 6:b("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},t.prototype.applyActiveTargetsChange=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,i,r,s,a,l,h,c,u,d=this;return o.__generator(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,i=t,p.label=1;case 1:return n<i.length?(v(!this.queriesByTarget[u=i[n]],"Trying to add an already active target"),[4,this.localStore.getTarget(u)]):[3,6];case 2:return v(!!(r=p.sent()),"Query data for active target "+u+" not found"),[4,this.localStore.allocateTarget(r)];case 3:return s=p.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(r),s.targetId,!1)];case 4:p.sent(),this.remoteStore.listen(s),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){return o.__generator(this,(function(e){switch(e.label){case 0:return l.queriesByTarget[t]?[4,l.localStore.releaseTarget(t,!1).then((function(){d.remoteStore.unlisten(t),d.removeAndCleanupTarget(t)})).catch(Wn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},l=this,h=0,c=e,p.label=7;case 7:return h<c.length?[5,a(u=c[h])]:[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return Wt().add(e.key);var n=Wt(),i=this.queriesByTarget[t];if(!i)return n;for(var r=0,o=i;r<o.length;r++){var s=o[r],a=this.queryViewsByQuery.get(s);v(!!a,"No query view found for "+s),n=n.unionWith(a.view.syncedDocuments)}return n},t}(),Dr=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Fr="SharedClientState",Lr="firestore_clients",Rr="firestore_mutations",Br="firestore_targets",Nr="firestore_online_state",Or="firestore_sequence_number",Vr=function(){function t(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i,v(void 0!==i==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,i){var r=JSON.parse(i),o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new _(r.error.code,r.error.message)),o?new t(e,n,r.state,s):(g(Fr,"Failed to parse mutation state for ID '"+n+"': "+i),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wr=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var i=JSON.parse(n),r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new _(i.error.code,i.error.message)),r?new t(e,i.state,o):(g(Fr,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hr=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var i=JSON.parse(n),r="object"==typeof i&&i.activeTargetIds instanceof Array,o=Gt(),s=0;r&&s<i.activeTargetIds.length;++s)r=$n(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(g(Fr,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in Ri&&"string"==typeof n.clientId?new t(n.clientId,Ri[n.onlineState]):(g(Fr,"Failed to parse online state: "+e),null)},t}(),zr=function(){function t(){this.activeTargetIds=Gt()}return t.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ur=function(){function t(e,n,i,r,o){if(this.queue=e,this.platform=n,this.persistenceKey=i,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new _(x.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Or+"_"+i,this.activeClients[this.localClientId]=new zr,this.clientStateKeyRe=new RegExp("^"+Lr+"_"+s+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Rr+"_"+s+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Br+"_"+s+"_(\\d+)$"),this.onlineStateKey=Nr+"_"+i,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,r,s,a,l,h,c,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.localClientId&&(r=this.getItem(this.toWebStorageClientStateKey(i)))&&(s=Hr.fromWebStorageEntry(i,r))&&(this.activeClients[s.clientId]=s);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(l=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(l),h=0,c=this.earlyEvents;h<c.length;h++)this.handleWebStorageEvent(c[h]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return u.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Gt();return A(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var i=Wr.fromWebStorageEntry(t,n);i&&(e=i.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var i=this;e.forEach((function(t){i.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){i.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f(Fr,"READ",t,e),e},t.prototype.setItem=function(t,e){f(Fr,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f(Fr,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(f(Fr,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,i,r,s,a;return o.__generator(this,(function(o){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(i)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(r)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(s=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(s)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=st.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(i){g(Fr,"Failed to read sequence number from WebStorage",i)}return e}(t.newValue))!==st.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var i=new Vr(this.currentUser,t,e,n),r=this.toWebStorageMutationBatchKey(t);this.setItem(r,i.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:Ri[t]}))},t.prototype.persistQueryTargetState=function(t,e,n){var i=this.toWebStorageQueryTargetMetadataKey(t),r=new Wr(t,e,n);this.setItem(i,r.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Lr+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Br+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Rr+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Hr.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var i=Number(n[1]);return Vr.fromWebStorageEntry(new Dr(void 0!==n[2]?n[2]:null),i,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var i=Number(n[1]);return Wr.fromWebStorageEntry(i,e)},t.prototype.fromWebStorageOnlineState=function(t){return Gr.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(f(Fr,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,i=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var r=this.getAllActiveQueryTargets(),s=[],a=[];return r.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),i.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return r.has(t)||a.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(s,a)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),Yr=function(){function t(){this.localState=new zr,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new zr,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Xr=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return En.withCacheSize(this.cacheSizeBytes)},t}(),qr=function(){return function(){}}(),jr=function(){function t(t,e,n,i){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=i,this.clientId=K.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new dt,i=new dt,r=!1;return this.credentials.setChangeListener((function(o){r?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(o)})):(r=!0,e.initializePersistence(t,i,o).then((function(t){return e.initializeRest(o,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},t.prototype.initializePersistence=function(t,e,n){var i=this;return t instanceof Xr?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!i.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),i.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof _?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new _(x.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,i=Vn.buildStoragePrefix(this.databaseInfo),r=new vr(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,s;return o.__generator(this,(function(o){switch(o.label){case 0:if(e.synchronizeTabs&&!Ur.isAvailable(this.platform))throw new _(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Ur(this.asyncQueue,this.platform,i,this.clientId,t):new Yr,[4,Vn.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:i,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:r,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return s=o.sent(),this.persistence=s,[2,s.referenceDelegate.garbageCollector]}}))}))}))},t.prototype.startMemoryPersistence=function(){return this.persistence=Si.createEagerPersistence(this.clientId),this.sharedClientState=new Yr,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return f("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(i){return o.__awaiter(n,void 0,void 0,(function(){var n,r,s,a,l,h=this;return o.__generator(this,(function(c){switch(c.label){case 0:return n=new pi,this.localStore=new yi(this.persistence,n,t),[4,this.localStore.start()];case 1:return c.sent(),e&&(this.lruScheduler=new Dn(e,this.asyncQueue,this.localStore)),r=this.platform.newConnectivityMonitor(),s=this.platform.newSerializer(this.databaseInfo.databaseId),a=new Fi(this.asyncQueue,i,this.credentials,s),l=function(t){return h.syncEngine.applyOnlineStateChange(t,Bi.SharedClientState)},this.remoteStore=new rr(this.localStore,a,this.asyncQueue,(function(t){return h.syncEngine.applyOnlineStateChange(t,Bi.RemoteStore)}),r),this.syncEngine=new Er(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=l,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Sr(this.syncEngine),[4,this.sharedClientState.start()];case 2:return c.sent(),[4,this.remoteStore.start()];case 3:return c.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return o.__awaiter(h,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return c.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return o.__awaiter(h,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return c.sent(),[2]}}))}))}))},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new dt;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},t.prototype.listen=function(t,e,n){var i=this;this.verifyNotTerminated();var r=new xr(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return i.eventMgr.listen(r)})),r},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof Ue)return t;if(t instanceof Ye)return null;throw new _(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,i;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=r.sent(),n=new Tr(t,e.remoteKeys),i=n.computeDocChanges(e.documents),[2,n.applyChanges(i,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new dt;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new dt;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},t}(),Kr=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),$r=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,i){if(!(e instanceof Array)||e.length<1)throw new _(x.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+j(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(L("FieldPath","string",n,t[n]),0===t[n].length)throw new _(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Y("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ct.keyField().canonicalString()),t}(),Qr=new RegExp("[~\\*/\\[\\]]"),Jr=function(){return function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}}}(),Zr=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Dr.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),to=function(){function t(t){var e=this;this.tokenListener=null,this.currentUser=Dr.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then((function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)}),(function(){})))}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new _(x.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Jr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new Dr(t)},t}(),eo=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Dr.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),no=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new eo(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Dr.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function io(t){if(!t)return new Zr;switch(t.type){case"gapi":var e=t.client;return v(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new no(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new _(x.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function ro(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,i=0,r=["next","error","complete"];i<r.length;i++){var o=r[i];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var oo=function(){function t(t){this._methodName=t}return t.delete=function(){return M("FieldValue.delete",arguments),so.instance},t.serverTimestamp=function(){return M("FieldValue.serverTimestamp",arguments),ao.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("FieldValue.arrayUnion",arguments,1),new lo(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("FieldValue.arrayRemove",arguments,1),new ho(t)},t.increment=function(t){return L("FieldValue.increment","number",1,t),E("FieldValue.increment",arguments,1),new co(t)},t.prototype.isEqual=function(t){return this===t},t}(),so=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return o.__extends(e,t),e.instance=new e,e}(oo),ao=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(e,t),e.instance=new e,e}(oo),lo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return o.__extends(e,t),e}(oo),ho=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return o.__extends(e,t),e}(oo),co=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return o.__extends(e,t),e}(oo),uo=k(oo,"Use FieldValue.<field>() instead."),po=/^__.*__$/,mo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return n.push(null!==this.fieldMask?new xe(t,this.data,this.fieldMask,e):new Se(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new _e(t,this.fieldTransforms)),n},t}(),fo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new xe(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new _e(t,this.fieldTransforms)),n},t}(),go=function(t){return t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument",t[t.ArrayArgument=4]="ArrayArgument",t}({});function yo(t){switch(t){case go.Set:case go.MergeSet:case go.Update:return!0;case go.Argument:case go.ArrayArgument:return!1;default:throw b("Unexpected case for UserDataSource: "+t)}}var bo=function(){function t(t,e,n,i,r,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=i,void 0===r&&this.validatePath(),this.arrayElement=void 0!==i&&i,this.fieldTransforms=r||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),i=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return i.validatePathSegment(e),i},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),i=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return i.validatePath(),i},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new _(x.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(yo(this.dataSource)&&po.test(t))throw this.createError('Document fields cannot begin and end with "__"')},t}(),vo=function(){return function(t,e){this.databaseId=t,this.key=e}}(),Co=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new bo(go.Set,t,ct.EMPTY_PATH);xo("Data must be an object, but it was:",n,e);var i=this.parseData(e,n);return new mo(i,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var i=new bo(go.MergeSet,t,ct.EMPTY_PATH);xo("Data must be an object, but it was:",i,e);var r,o,s=this.parseData(e,i);if(n){for(var a=new Mt(ct.comparator),l=0,h=n;l<h.length;l++){var c=h[l],u=void 0;if(c instanceof $r)u=c._internalPath;else{if("string"!=typeof c)throw b("Expected stringOrFieldPath to be a string or a FieldPath");u=ko(t,c)}if(!i.contains(u))throw new _(x.INVALID_ARGUMENT,"Field '"+u+"' is specified in your field mask but missing from your input data.");a=a.add(u)}r=fe.fromSet(a),o=i.fieldTransforms.filter((function(t){return r.covers(t.field)}))}else r=fe.fromArray(i.fieldMask),o=i.fieldTransforms;return new mo(s,r,o)},t.prototype.parseUpdateData=function(t,e){var n=this,i=new bo(go.Update,t,ct.EMPTY_PATH);xo("Data must be an object, but it was:",i,e);var r=new Mt(ct.comparator),o=He.EMPTY;A(e,(function(e,s){var a=ko(t,e),l=i.childContextForFieldPath(a);if((s=n.runPreConverter(s,l))instanceof so)r=r.add(a);else{var h=n.parseData(s,l);null!=h&&(r=r.add(a),o=o.set(a,h))}}));var s=fe.fromSet(r);return new fo(o,s,i.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,i){var r=new bo(go.Update,t,ct.EMPTY_PATH),o=[_o(t,e)],s=[n];if(i.length%2!=0)throw new _(x.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<i.length;a+=2)o.push(_o(t,i[a])),s.push(i[a+1]);var l=new Mt(ct.comparator),h=He.EMPTY;for(a=0;a<o.length;++a){var c=o[a],u=r.childContextForFieldPath(c),d=this.runPreConverter(s[a],u);if(d instanceof so)l=l.add(c);else{var p=this.parseData(d,u);null!=p&&(l=l.add(c),h=h.set(c,p))}}var m=fe.fromSet(l);return new fo(h,m,r.fieldTransforms)},t.prototype.parseQueryValue=function(t,e,n){void 0===n&&(n=!1);var i=new bo(n?go.ArrayArgument:go.Argument,t,ct.EMPTY_PATH),r=this.parseData(e,i);return v(null!=r,"Parsed data should not be null."),v(0===i.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(i){var n=wo(i);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(So(t=this.runPreConverter(t,e)))return xo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof oo)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement&&e.dataSource!==go.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,i=new Tt($);return P(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):A(t,(function(t,r){var o=n.parseData(r,e.childContextForField(t));null!=o&&(i=i.insert(t,o))})),new He(i)},t.prototype.parseArray=function(t,e){for(var n=[],i=0,r=0,o=t;r<o.length;r++){var s=this.parseData(o[r],e.childContextForArray(i));null==s&&(s=Pe.INSTANCE),n.push(s),i++}return new Ge(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!yo(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof so){if(e.dataSource!==go.MergeSet)throw e.dataSource===go.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof ao)e.fieldTransforms.push(new ge(e.path,sr.instance));else if(t instanceof lo){var n=this.parseArrayTransformElements(t._methodName,t._elements),i=new ar(n);e.fieldTransforms.push(new ge(e.path,i))}else if(t instanceof ho){n=this.parseArrayTransformElements(t._methodName,t._elements);var r=new lr(n);e.fieldTransforms.push(new ge(e.path,r))}else if(t instanceof co){var o=this.parseQueryValue("FieldValue.increment",t._operand),s=new hr(o);e.fieldTransforms.push(new ge(e.path,s))}else b("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Pe.INSTANCE;if("number"==typeof t)return $n(t)?new Fe(t):new Le(t);if("boolean"==typeof t)return Me.of(t);if("string"==typeof t)return new Re(t);if(t instanceof Date)return new Be(kt.fromDate(t));if(t instanceof kt)return new Be(new kt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof or)return new We(t);if(t instanceof et)return new Oe(t);if(t instanceof vo)return new Ve(t.databaseId,t.key);throw e.createError("Unsupported field value: "+G(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(e,i){var r=new bo(go.Argument,t,ct.EMPTY_PATH);return n.parseData(e,r.childContextForArray(i))}))},t}();function So(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof or||t instanceof et||t instanceof vo||t instanceof oo)}function xo(t,e,n){if(!So(n)||!H(n)){var i=G(n);throw e.createError("an object"===i?t+" a custom object":t+" "+i)}}function _o(t,e){if(e instanceof $r)return e._internalPath;if("string"==typeof e)return ko(t,e);throw new _(x.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function ko(t,e){try{return function(t){if(t.search(Qr)>=0)throw new _(x.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new($r.bind.apply($r,o.__spreadArrays([void 0],t.split("."))))}catch(e){throw new _(x.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(i){var n=wo(i);throw new _(x.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function wo(t){return t instanceof Error?t.message:t.toString()}var To="firestore.googleapis.com",Io=!0,Ao=!0,Po=!1,Mo=En.COLLECTION_DISABLED,Eo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new _(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=To,this.ssl=Io}else B("settings","non-empty string","host",t.host),this.host=t.host,N("settings","boolean","ssl",t.ssl),this.ssl=T(t.ssl,Io);if(U("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),N("settings","object","credentials",t.credentials),this.credentials=t.credentials,N("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=T(t.timestampsInSnapshots,Ao),N("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=En.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Mo&&t.cacheSizeBytes<En.MINIMUM_CACHE_SIZE_BYTES)throw new _(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+En.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}N("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?Po:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Do=function(){function t(e,n){var i=this;if(this._firebaseApp=null,this._queue=new ft,this.INTERNAL={delete:function(){return o.__awaiter(i,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=t.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new to(n)}else{var s=e;if(!s.projectId)throw new _(x.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new ot(s.projectId,s.database),this._persistenceKey="[DEFAULT]",this._credentials=new Zr}this._settings=new Eo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(E("Firestore.settings",arguments,1),L("Firestore.settings","object",1,t),w(t,"persistence"))throw new _(x.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Eo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new _(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=io(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new _(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&g("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=T(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Xr(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=Vn.buildStoragePrefix(this.makeDatabaseInfo()),n=new dt;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new _(x.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Vn.clearPersistence(e)];case 1:return i.sent(),n.resolve(),[3,3];case 2:return t=i.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.ensureClientConfigured(),ro(t)?this.onSnapshotsInSyncInternal(t):(L("Firestore.onSnapshotsInSync","function",1,t),this.onSnapshotsInSyncInternal({next:t}))},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new Kr({next:function(){t.next&&t.next()},error:function(t){throw b("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new qr),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new it(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new jr(C.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new Co((function(e){if(e instanceof Ro){var n=t,i=e.firestore._databaseId;if(!i.isEqual(n))throw new _(x.INVALID_ARGUMENT,"Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return new vo(t,e._key)}return e}))},t.databaseIdFromApp=function(t){var e=t.options;if(!w(e,"projectId"))throw new _(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new _(x.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ot(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new _(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return E("Firestore.collection",arguments,1),L("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Ho(lt.fromString(t),this)},t.prototype.doc=function(t){return E("Firestore.doc",arguments,1),L("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Ro.forPath(lt.fromString(t),this)},t.prototype.collectionGroup=function(t){if(E("Firestore.collectionGroup",arguments,1),L("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new _(x.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Vo(new Zn(lt.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return E("Firestore.runTransaction",arguments,1),L("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new Fo(e,n))}))},t.prototype.batch=function(){return this.ensureClientConfigured(),new Lo(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(p()){case d.DEBUG:return"debug";case d.ERROR:return"error";case d.SILENT:return"silent";default:return b("Unknown log level: "+p())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(E("Firestore.setLogLevel",arguments,1),L("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":m(d.DEBUG);break;case"error":m(d.ERROR);break;case"silent":m(d.SILENT);break;default:throw new _(x.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),Fo=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;E("Transaction.get",arguments,1);var n=Yo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return b("Mismatch in docs returned from document lookup.");var i=t[0];if(i instanceof Ye)return new No(e._firestore,n._key,null,!1,!1);if(i instanceof Ue)return new No(e._firestore,n._key,i,!1,!1);throw b("BatchGetDocumentsRequest returned unexpected document type: "+i.constructor.name)}))},t.prototype.set=function(t,e,n){F("Transaction.set",arguments,2,3);var i=Yo("Transaction.set",t,this._firestore),r=(n=Go("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(i._key,r),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof $r?(D("Transaction.update",arguments,3),i=Yo("Transaction.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(E("Transaction.update",arguments,2),i=Yo("Transaction.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(i._key,r),this},t.prototype.delete=function(t){E("Transaction.delete",arguments,1);var e=Yo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),Lo=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){F("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var i=Yo("WriteBatch.set",t,this._firestore),r=(n=Go("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(r.toMutations(i._key,ve.NONE)),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.verifyNotCommitted(),"string"==typeof e||e instanceof $r?(D("WriteBatch.update",arguments,3),i=Yo("WriteBatch.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(E("WriteBatch.update",arguments,2),i=Yo("WriteBatch.update",t,this._firestore),r=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(r.toMutations(i._key,ve.exists(!0))),this},t.prototype.delete=function(t){E("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Yo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new ke(e._key,ve.NONE)),this},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new _(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ro=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new _(x.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new ut(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ho(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(E("DocumentReference.collection",arguments,1),L("DocumentReference.collection","non-empty string",1,t),!t)throw new _(x.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=lt.fromString(t);return new Ho(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Y("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){F("DocumentReference.set",arguments,1,2);var n=(e=Go("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,ve.NONE))},t.prototype.update=function(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return"string"==typeof t||t instanceof $r?(D("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,i)):(E("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,ve.exists(!0)))},t.prototype.delete=function(){return E("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ke(this._key,ve.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];F("DocumentReference.onSnapshot",arguments,1,4);var n,i={includeMetadataChanges:!1},r=0;"object"!=typeof t[r]||ro(t[r])||(U("DocumentReference.onSnapshot",i=t[r],["includeMetadataChanges"]),N("DocumentReference.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++);var o={includeMetadataChanges:i.includeMetadataChanges};return ro(t[r])?n=t[r]:(L("DocumentReference.onSnapshot","function",r,t[r]),R("DocumentReference.onSnapshot","function",r+1,t[r+1]),R("DocumentReference.onSnapshot","function",r+2,t[r+2]),n={next:t[r],error:t[r+1],complete:t[r+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,i=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(i=e.error.bind(e));var r=new Kr({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var i=t.docs.get(n._key);e.next(new No(n.firestore,n._key,i,t.fromCache,t.hasPendingWrites))}},error:i}),o=this._firestoreClient.listen(Zn.atPath(this._key.path),r,t);return function(){r.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return F("DocumentReference.get",arguments,0,1),Uo("DocumentReference.get",t),new Promise((function(n,i){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new No(e.firestore,e._key,t,!0,t instanceof Ue&&t.hasLocalMutations))}),i):e.getViaSnapshotListener(n,i,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){i(),!r.exists&&r.metadata.fromCache?e(new _(x.UNAVAILABLE,"Failed to get document because the client is offline.")):r.exists&&r.metadata.fromCache&&n&&"server"===n.source?e(new _(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(r)},error:e})},t}(),Bo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),No=function(){function t(t,e,n,i,r){this._firestore=t,this._key=e,this._document=n,this._fromCache=i,this._hasPendingWrites=r}return t.prototype.data=function(t){return F("DocumentSnapshot.data",arguments,0,1),t=zo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data(),Ie.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(F("DocumentSnapshot.get",arguments,1,2),e=zo("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(_o("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,Ie.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Bo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Y("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,i={};return t.forEach((function(t,r){i[t]=n.convertValue(r,e)})),i},t.prototype.convertValue=function(t,e){if(t instanceof He)return this.convertObject(t,e);if(t instanceof Ge)return this.convertArray(t,e);if(t instanceof Ve){var n=t.value(e),i=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(i)||g("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+i.projectId+"/"+i.database+") instead."),new Ro(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map((function(t){return n.convertValue(t,e)}))},t}(),Oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(No),Vo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,i){E("Query.where",arguments,3),z("Query.where",3,i);var r,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];V("Query.where",o,2,n);var s=_o("Query.where",e),a=ei.fromString(n);if(s.isKeyField()){if(a===ei.ARRAY_CONTAINS||a===ei.ARRAY_CONTAINS_ANY)throw new _(x.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===ei.IN){this.validateDisjunctiveFilterElements(i,a);for(var l=[],h=0,c=i;h<c.length;h++){var u=c[h];l.push(this.parseDocumentIdValue(u))}r=new Ge(l)}else r=this.parseDocumentIdValue(i)}else a!==ei.IN&&a!==ei.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(i,a),r=this.firestore._dataConverter.parseQueryValue("Query.where",i,a===ei.IN);var d=ni.create(s,a,r);return this.validateNewFilter(d),new t(this._query.addFilter(d),this.firestore)},t.prototype.orderBy=function(e,n){var i;if(F("Query.orderBy",arguments,1,2),R("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)i=li.ASCENDING;else{if("desc"!==n)throw new _(x.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");i=li.DESCENDING}if(null!==this._query.startAt)throw new _(x.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new _(x.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=_o("Query.orderBy",e),o=new ci(r,i);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){return E("Query.limit",arguments,1),L("Query.limit","number",1,e),X("Query.limit",1,e),new t(this._query.withLimitToFirst(e),this.firestore)},t.prototype.limitToLast=function(e){return E("Query.limitToLast",arguments,1),L("Query.limitToLast","number",1,e),X("Query.limitToLast",1,e),new t(this._query.withLimitToLast(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(r),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(r),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(r),this.firestore)},t.prototype.endAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(r),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Y("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,i){if(z(t,1,e),e instanceof No){if(n.length>0)throw new _(x.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var r=e;if(!r.exists)throw new _(x.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,r._document,i)}var o=[e].concat(n);return this.boundFromFields(t,o,i)},t.prototype.boundFromDocument=function(t,e,n){for(var i=[],r=0,o=this._query.orderBy;r<o.length;r++){var s=o[r];if(s.field.isKeyField())i.push(new Ve(this.firestore._databaseId,e.key));else{var a=e.field(s.field);if(a instanceof Ne)throw new _(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var l=s.field.canonicalString();throw new _(x.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}i.push(a)}}return new hi(i,n)},t.prototype.boundFromFields=function(t,e,n){var i=this._query.explicitOrderBy;if(e.length>i.length)throw new _(x.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var r=[],o=0;o<e.length;o++){var s=e[o];if(i[o].field.isKeyField()){if("string"!=typeof s)throw new _(x.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this._query.isCollectionGroupQuery()&&-1!==s.indexOf("/"))throw new _(x.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this._query.path.child(lt.fromString(s));if(!ut.isDocumentKey(a))throw new _(x.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var l=new ut(a);r.push(new Ve(this.firestore._databaseId,l))}else{var h=this.firestore._dataConverter.parseQueryValue(t,s);r.push(h)}}return new hi(r,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];F("Query.onSnapshot",arguments,1,4);var n,i={},r=0;return"object"!=typeof t[r]||ro(t[r])||(U("Query.onSnapshot",i=t[r],["includeMetadataChanges"]),N("Query.onSnapshot","boolean","includeMetadataChanges",i.includeMetadataChanges),r++),ro(t[r])?n=t[r]:(L("Query.onSnapshot","function",r,t[r]),R("Query.onSnapshot","function",r+1,t[r+1]),R("Query.onSnapshot","function",r+2,t[r+2]),n={next:t[r],error:t[r+1],complete:t[r+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(i,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,i=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(i=e.error.bind(e));var r=new Kr({next:function(t){e.next&&e.next(new Wo(n.firestore,n._query,t))},error:i}),o=this.firestore.ensureClientConfigured(),s=o.listen(this._query,r,t);return function(){r.mute(),o.unlisten(s)}},t.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new _(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return F("Query.get",arguments,0,1),Uo("Query.get",t),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,i){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new Wo(e.firestore,e._query,t))}),i):e.getViaSnapshotListener(n,i,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(r){i(),r.metadata.fromCache&&n&&"server"===n.source?e(new _(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(r)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new _(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new _(x.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(lt.fromString(t));if(!ut.isDocumentKey(e))throw new _(x.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Ve(this.firestore._databaseId,new ut(e))}if(t instanceof Ro)return new Ve(this.firestore._databaseId,t._key);throw new _(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+G(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new _(x.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new _(x.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new _(x.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new _(x.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof ni){var e=[ei.ARRAY_CONTAINS,ei.ARRAY_CONTAINS_ANY],n=[ei.IN,ei.ARRAY_CONTAINS_ANY],i=e.indexOf(t.op)>=0,r=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new _(x.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this._query.getFirstOrderByField();null!==s&&this.validateOrderByAndInequalityMatch(t.field,s)}else if(r||i){var a=null;if(r&&(a=this._query.findFilterOperator(n)),null===a&&i&&(a=this._query.findFilterOperator(e)),null!=a)throw new _(x.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new _(x.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Wo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Bo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;F("QuerySnapshot.forEach",arguments,1,2),L("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(i){t.call(e,n.convertToDocumentImpl(i))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Vo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(U("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),N("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new _(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var i,r=0;return n.docChanges.map((function(e){var o=new Oo(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===zi.Added,"Invalid event type for first snapshot"),v(!i||n.query.docComparator(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:r++}}))}var o=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==zi.Metadata})).map((function(e){var i=new Oo(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),r=-1,s=-1;return e.type!==zi.Added&&(v((r=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==zi.Removed&&(s=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:Xo(e.type),doc:i,oldIndex:r,newIndex:s}}))}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Y("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Oo(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(Wo.prototype.docChanges,t,{get:function(){return function(){throw new _(x.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var Ho=function(t){function e(e,n){var i=t.call(this,Zn.atPath(e),n)||this;if(e.length%2!=1)throw new _(x.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return i}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Ro(new ut(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(F("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=K.newId()),L("CollectionReference.doc","non-empty string",1,t),""===t)throw new _(x.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=lt.fromString(t);return Ro.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){E("CollectionReference.add",arguments,1),L("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},e}(Vo);function Go(t,e){if(void 0===e)return{merge:!1};if(U(t,e,["merge","mergeFields"]),N(t,"boolean","merge",e.merge),"mergeFields","a string or a FieldPath",void 0!==(n=e.mergeFields)&&function(t,e,n,i,r){if(!(i instanceof Array))throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires its mergeFields option to be an array, but it was: "+G(i));for(var o=0;o<i.length;++o)if(!r(i[o]))throw new _(x.INVALID_ARGUMENT,"Function "+t+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+G(i[o]))}(t,0,0,n,(function(t){return"string"==typeof t||t instanceof $r})),void 0!==e.mergeFields&&void 0!==e.merge)throw new _(x.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function zo(t,e){return void 0===e?{}:(U(t,e,["serverTimestamps"]),O(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Uo(t,e){R(t,"object",1,e),e&&(U(t,e,["source"]),O(t,0,"source",e.source,["default","server","cache"]))}function Yo(t,e,n){if(e instanceof Ro){if(e.firestore!==n)throw new _(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Y(t,"DocumentReference",1,e)}function Xo(t){switch(t){case zi.Added:return"added";case zi.Modified:case zi.Metadata:return"modified";case zi.Removed:return"removed";default:return b("Unknown change type: "+t)}}var qo=k(Do,"Use firebase.firestore() instead."),jo=k(Fo,"Use firebase.firestore().runTransaction() instead."),Ko=k(Lo,"Use firebase.firestore().batch() instead."),$o=k(Ro,"Use firebase.firestore().doc() instead."),Qo=k(No),Jo=k(Oo),Zo=k(Vo),ts=k(Wo),es=k(Ho,"Use firebase.firestore().collection() instead."),ns={Firestore:qo,GeoPoint:or,Timestamp:kt,Blob:nt,Transaction:jo,WriteBatch:Ko,DocumentReference:$o,DocumentSnapshot:Qo,Query:Zo,QueryDocumentSnapshot:Jo,QuerySnapshot:ts,CollectionReference:es,FieldPath:$r,FieldValue:uo,setLogLevel:Do.setLogLevel,CACHE_SIZE_UNLIMITED:Mo},is=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),rs=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),os=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),ss="Connection",as={BatchGetDocuments:"batchGet",Commit:"commit"},ls="gl-js/ fire/"+c,hs=function(){function t(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=ls},t.prototype.invokeRPC=function(t,e,n){var i=this,r=this.makeUrl(t);return new Promise((function(s,a){var l=new h.XhrIo;l.listenOnce(h.EventType.COMPLETE,(function(){try{switch(l.getLastErrorCode()){case h.ErrorCode.NO_ERROR:var e=l.getResponseJson();f(ss,"XHR received:",JSON.stringify(e)),s(e);break;case h.ErrorCode.TIMEOUT:f(ss,'RPC "'+t+'" timed out'),a(new _(x.DEADLINE_EXCEEDED,"Request time out"));break;case h.ErrorCode.HTTP_ERROR:var n=l.getStatus();if(f(ss,'RPC "'+t+'" failed with status:',n,"response text:",l.getResponseText()),n>0){var i=l.getResponseJson().error;if(i&&i.status&&i.message){var r=(o=i.status.toLowerCase().replace("_","-"),Object.values(x).indexOf(o)>=0?o:x.UNKNOWN);a(new _(r,i.message))}else a(new _(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else f(ss,'RPC "'+t+'" failed'),a(new _(x.UNAVAILABLE,"Connection failed."));break;default:b('RPC "'+t+'" failed with unanticipated webchannel error '+l.getLastErrorCode()+": "+l.getLastError()+", giving up.")}}finally{f(ss,'RPC "'+t+'" completed.')}var o}));var c=o.__assign({},e);delete c.database;var u=JSON.stringify(c);f(ss,"XHR sending: ",r+" "+u);var d={"Content-Type":"text/plain"};i.modifyHeadersForRequest(d,n),l.send(r,"POST",u,d,15)}))},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=h.createWebChannelTransport(),r={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(r.initMessageHeaders,e),a.isReactNative()||(r.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");f(ss,"Creating WebChannel: "+o+" "+r);var s=i.createWebChannel(o,r),l=!1,c=!1,u=new os({sendFn:function(t){c?f(ss,"Not sending because WebChannel is closed:",t):(l||(f(ss,"Opening WebChannel transport."),s.open(),l=!0),f(ss,"WebChannel sending:",t),s.send(t))},closeFn:function(){return s.close()}}),d=function(t,e){s.listen(t,(function(t){try{e(t)}catch(n){setTimeout((function(){throw n}),0)}}))};return d(h.WebChannel.EventType.OPEN,(function(){c||f(ss,"WebChannel transport opened.")})),d(h.WebChannel.EventType.CLOSE,(function(){c||(c=!0,f(ss,"WebChannel transport closed"),u.callOnClose())})),d(h.WebChannel.EventType.ERROR,(function(t){c||(c=!0,f(ss,"WebChannel transport errored:",t),u.callOnClose(new _(x.UNAVAILABLE,"The operation could not be completed")))})),d(h.WebChannel.EventType.MESSAGE,(function(t){if(!c){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){f(ss,"WebChannel received error:",n);var i=n.status,r=function(t){var e=Oi[t];if(void 0!==e)return Wi(e)}(i),o=n.message;void 0===r&&(r=x.INTERNAL,o="Unknown error status: "+i+" with message "+n.message),c=!0,u.callOnClose(new _(r,o)),s.close()}else f(ss,"WebChannel received:",e),u.callOnMessage(e)}})),setTimeout((function(){u.callOnOpen()}),0),u},t.prototype.makeUrl=function(t){var e=as[t];return v(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},t}();function cs(t){!function(t){t.INTERNAL.registerComponent(new l.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new Do(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(ns)))}(t)}C.setPlatform(new(function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new hs(t))},t.prototype.newConnectivityMonitor=function(){return rs.isAvailable()?new rs:new is},t.prototype.newSerializer=function(t){return new vr(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}())),cs(r),e.registerFirestore=cs},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mrSG"),r=n("zVF4"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new r.Deferred;this.instancesDeferred.set(e,n);try{var i=this.getOrInitializeService(e);i&&n.resolve(i)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=i.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,r=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(r);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(c){}try{for(var r=i.__values(this.instancesDeferred.entries()),o=r.next();!o.done;o=r.next()){var s=i.__read(o.value,2),a=s[1],l=this.normalizeInstanceIdentifier(s[0]);try{var h=this.getOrInitializeService(l);a.resolve(h)}catch(c){}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=a,e.Provider=s},VQUD:function(t,e,n){var i;!function(){function n(t,e){t.prototype=function(t){function e(){}return e.prototype=t,new e}(e.prototype),t.prototype.constructor=t,t.base=e.prototype}function r(t,e,n){return"millisecond"===n?t.setMilliseconds(t.getMilliseconds()+1*e):"second"===n?t.setSeconds(t.getSeconds()+1*e):"minute"===n?t.setMinutes(t.getMinutes()+1*e):"hour"===n?t.setHours(t.getHours()+1*e):"day"===n?t.setDate(t.getDate()+1*e):"week"===n?t.setDate(t.getDate()+7*e):"month"===n?t.setMonth(t.getMonth()+1*e):"year"===n&&t.setFullYear(t.getFullYear()+1*e),t}function o(t,e){var n=!1;for(0>t&&(n=!0,t*=-1),t=""+t,e=e||1;t.length<e;)t="0"+t;return n?"-"+t:t}function s(t){if(!t)return t;for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--n)););return t.slice(0,n+1)}function a(t){t.roundRect=function(t,e,n,i,r,o,s,a){s&&(this.fillStyle=s),a&&(this.strokeStyle=a),void 0===r&&(r=5),this.lineWidth=o,this.beginPath(),this.moveTo(t+r,e),this.lineTo(t+n-r,e),this.quadraticCurveTo(t+n,e,t+n,e+r),this.lineTo(t+n,e+i-r),this.quadraticCurveTo(t+n,e+i,t+n-r,e+i),this.lineTo(t+r,e+i),this.quadraticCurveTo(t,e+i,t,e+i-r),this.lineTo(t,e+r),this.quadraticCurveTo(t,e,t+r,e),this.closePath(),s&&this.fill(),a&&0<o&&this.stroke()}}function l(t,e){return t-e}function h(t,e,n){if(t&&e&&n){n=n+"."+e;var i="image/"+e;t=t.toDataURL(i);var r=!1,o=document.createElement("a");if(o.download=n,o.href=t,"undefined"!=typeof Blob&&new Blob){for(var s=t.replace(/^data:[a-z\/]*;base64,/,""),a=(s=atob(s),new ArrayBuffer(s.length)),l=(a=new Uint8Array(a),0);l<s.length;l++)a[l]=s.charCodeAt(l);e=new Blob([a.buffer],{type:"image/"+e});try{window.navigator.msSaveBlob(e,n),r=!0}catch(h){o.dataset.downloadurl=[i,o.download,o.href].join(":"),o.href=window.URL.createObjectURL(e)}}if(!r)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent?o.dispatchEvent(event):o.fireEvent&&o.fireEvent("onclick")}catch(Q){(e=window.open()).document.write("<img src='"+t+"'></img><div>Please right click on the image and save it to your device</div>"),e.document.close()}}}function c(t){var e=((16711680&t)>>16).toString(16),n=((65280&t)>>8).toString(16);return t=((255&t)>>0).toString(16),"#"+(e=2>e.length?"0"+e:e)+(n=2>n.length?"0"+n:n)+(2>t.length?"0"+t:t)}function u(t,e){var n,i=this.length>>>0;for(0>(n=0>(n=Number(e)||0)?Math.ceil(n):Math.floor(n))&&(n+=i);n<i;n++)if(n in this&&this[n]===t)return n;return-1}function d(t){return null==t}function p(t){return t.indexOf||(t.indexOf=u),t}function m(t){H.fSDec&&t[dt("`eeDwdouMhrudods")](dt("e`u`@ohl`uhnoHuds`uhnoDoe"),(function(){H._fTWm&&H._fTWm(t)}))}function f(t,e,n){var i=t+"_"+e+"_"+(n=n||"normal"),r=tt[i];if(isNaN(r)){try{if(t="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+t+"; font-size:"+e+"px; font-weight:"+n+";",!et){var o=document.body;(et=document.createElement("span")).innerHTML="";var s=document.createTextNode("Mpgyi");et.appendChild(s),o.appendChild(et)}et.style.display="",et.setAttribute("style",t),r=Math.round(et.offsetHeight),et.style.display="none"}catch(a){r=Math.ceil(1.1*e)}r=Math.max(r,e),tt[i]=r}return r}function g(t,e){var n=[];if(n={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[t||"solid"])for(var i=0;i<n.length;i++)n[i]*=e;else n=[];return n}function y(t,e,n,i,r){return(i=i||[]).push([t,e,n,r=r||!1]),t.addEventListener?(t.addEventListener(e,n,r),n):!!t.attachEvent&&(i=function(e){(e=e||window.event).preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},n.call(t,e)},t.attachEvent("on"+e,i),i)}function b(t,e,n){for(t=n.getImageData(t*=ct,e*=ct,2,2).data,e=!0,n=0;4>n;n++)if(t[n]!==t[n+4]|t[n]!==t[n+8]|t[n]!==t[n+12]){e=!1;break}return e?t[0]<<16|t[1]<<8|t[2]:0}function v(t,e,n){return t in e?e[t]:n[t]}function C(t,e,n){if(G&&at){var i=t.getContext("2d");t.width=e*(ct=lt/(ht=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),t.height=n*ct,lt!==ht&&(t.style.width=e+"px",t.style.height=n+"px",i.scale(ct,ct))}else t.width=e,t.height=n}function S(t){if(!mt){var e=!1,n=!1;void 0===z.Chart.creditHref?(t.creditHref=dt("iuuqr;..b`ow`rkr/bnl."),t.creditText=dt("B`ow`rKR/bnl")):(e=t.updateOption("creditText"),n=t.updateOption("creditHref")),t.creditHref&&t.creditText&&(t._creditLink||(t._creditLink=document.createElement("a"),t._creditLink.setAttribute("class","canvasjs-chart-credit"),t._creditLink.setAttribute("title","JavaScript Charts"),t._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:2px;top:"+(t.height-14)+"px;color:dimgrey;text-decoration:none;font-size:11px;font-family: Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),t._creditLink.setAttribute("tabIndex",-1),t._creditLink.setAttribute("target","_blank")),(0===t.renderCount||e||n)&&(t._creditLink.setAttribute("href",t.creditHref),t._creditLink.innerHTML=t.creditText),t._creditLink&&t.creditHref&&t.creditText?(t._creditLink.parentElement||t._canvasJSContainer.appendChild(t._creditLink),t._creditLink.style.top=t.height-14+"px"):t._creditLink.parentElement&&t._canvasJSContainer.removeChild(t._creditLink))}}function x(t,e){W&&(this.canvasCount|=0,window.console.log(++this.canvasCount));var n=document.createElement("canvas");return n.setAttribute("class","canvasjs-chart-canvas"),C(n,t,e),G||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(n),n}function _(t,e,n){for(var i in n)e.style[i]=n[i]}function k(t,e,n){e.getAttribute("state")||(e.style.backgroundColor=t.toolbar.backgroundColor,e.style.color=t.toolbar.fontColor,e.style.border="none",_(0,e,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),e.getAttribute("state")!==n&&(e.setAttribute("state",n),e.setAttribute("type","button"),_(0,e,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),e.setAttribute("title",t._cultureInfo[n+"Text"]),e.innerHTML="<img style='height:95%; pointer-events: none;' src='"+ft[n].image+"' alt='"+t._cultureInfo[n+"Text"]+"' />")}function w(){for(var t=null,e=0;e<arguments.length;e++)(t=arguments[e]).style&&(t.style.display="inline")}function T(){for(var t=null,e=0;e<arguments.length;e++)(t=arguments[e])&&t.style&&(t.style.display="none")}function I(t,e,n,i,r){this._defaultsKey=t,this._themeOptionsKey=e,this._index=i,this.parent=r,this._eventListeners=[],t={},this.theme&&d(e)&&d(i)?t=d(J[this.theme])?J.light1:J[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[e]&&(null===i?t=this.parent.themeOptions[e]:0<this.parent.themeOptions[e].length&&(i=Math.min(this.parent.themeOptions[e].length-1,i),t=this.parent.themeOptions[e][i])),this.themeOptions=t,this.options=n||{_isPlaceholder:!0},this.setOptions(this.options,t)}function A(t,e,n,i,r){void 0===r&&(r=0),this._padding=r,this._x1=t,this._y1=e,this._x2=n,this._y2=i,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function P(t,e){P.base.constructor.call(this,"TextBlock",null,e,null,null),this.ctx=t,this._isDirty=!0,this._wrappedText=null,this._initialize()}function M(t,e){M.base.constructor.call(this,"Toolbar","toolbar",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function E(t,e){if(E.base.constructor.call(this,"Title","title",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.optionsName="title",d(this.options.margin)&&t.options.subtitles)for(var n=t.options.subtitles,i=0;i<n.length;i++)if((d(n[i].horizontalAlign)&&"center"===this.horizontalAlign||n[i].horizontalAlign===this.horizontalAlign)&&(d(n[i].verticalAlign)&&"top"===this.verticalAlign||n[i].verticalAlign===this.verticalAlign)&&!n[i].dockInsidePlotArea==!this.dockInsidePlotArea){this.margin=0;break}void 0===this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function D(t,e,n){D.base.constructor.call(this,"Subtitle","subtitles",e,n,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,void 0===this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function F(){this.pool=[]}function L(t){var e;t&&U[t]&&(e=U[t]),L.base.constructor.call(this,"CultureInfo",null,e,null,null)}var R,B,N,O,V,W=!1,H={},G=!!document.createElement("canvas").getContext,z={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditHref:"",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:G?"transparent":null,margin:5,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{backgroundColor:"white",backgroundColorOnHover:"#2196f3",borderColor:"#2196f3",borderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:G?"transparent":null,borderColor:G?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:G?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:G?"transparent":null,titleBorderColor:G?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:G?"transparent":null,labelBorderColor:G?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:G?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:G?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:G?"grey":null,labelBorderColor:G?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:G?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:G?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:G?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},U={en:{}},Y=G?"Trebuchet MS, Helvetica, sans-serif":"Arial",X=G?"Impact, Charcoal, sans-serif":"Arial",q={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},j={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:X,fontSize:32,fontColor:B="#333333",fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:X,fontSize:Q=14,fontColor:B,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:Y,indexLabelFontSize:Q,indexLabelFontColor:B,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Y,titleFontSize:$=20,titleFontColor:B,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N="#000000",labelFontWeight:"normal",lineThickness:1,lineColor:R="#666666",tickThickness:1,tickColor:R,gridThickness:0,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:V=O="#000000",color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:B,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:0,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:B,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:1,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:B,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:1,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:Y,fontSize:14,fontColor:B,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Y,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};N=B="#F5F5F5",R="#FFFFFF",O="#40BAF1",V="#F5F5F5";var K={colorSet:"colorSet2",title:{fontFamily:Y,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:Y,fontSize:Q=14,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:Y,indexLabelFontSize:Q,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Y,titleFontSize:$=20,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:Y,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Y,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1}};N=B="#F5F5F5",X={colorSet:"colorSet12",backgroundColor:"#2A2A2A",title:{fontFamily:X,fontSize:32,fontColor:B,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:X,fontSize:Q=14,fontColor:B,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:Y,indexLabelFontSize:Q,indexLabelFontColor:N,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Y,titleFontSize:$=20,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R="#FFFFFF",tickThickness:1,tickColor:R,gridThickness:0,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V="#F5F5F5",color:O="#40BAF1",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:0,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:1,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:1,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:Y,fontSize:14,fontColor:B,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Y,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:N,backgroundColor:"rgba(0, 0, 0, .7)"}},N=B="#FAFAFA";var $,Q,J={light1:j,light2:K,dark1:X,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:Y,fontSize:32,fontColor:B,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:Y,fontSize:Q=14,fontColor:B,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{backgroundColor:"#666666",backgroundColorOnHover:"#FF7372",borderColor:"#FF7372",borderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:Y,indexLabelFontSize:Q,indexLabelFontColor:N,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Y,titleFontSize:$=20,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R="#FFFFFF",tickThickness:1,tickColor:R,gridThickness:0,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V="#F5F5F5",color:O="#40BAF1",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:1,lineColor:R,tickThickness:1,tickColor:R,gridThickness:0,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:0,lineColor:R,tickThickness:1,tickColor:R,gridThickness:1,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:Y,titleFontSize:$,titleFontColor:N,titleFontWeight:"normal",labelFontFamily:Y,labelFontSize:Q,labelFontColor:N,labelFontWeight:"normal",lineThickness:0,lineColor:R,tickThickness:1,tickColor:R,gridThickness:1,gridColor:R,stripLines:[{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Y,labelFontSize:Q,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:V,color:O,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:Y,fontSize:14,fontColor:B,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Y,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:N,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:j,theme2:K,theme3:j},Z={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};H.fSDec=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(Math.ceil(t.length/57/5)^t.charCodeAt(n));return e},H.obj={trVs:"Ush`m!Wdsrhno",fntStr:"qy!B`mhcsh-!Mtbhe`!Fs`oed-!Mtbhe`!R`or!Tohbned-!@sh`m-!r`or,rdshg",txtBl:"udyuC`rdmhod",fnt:"gnou",fSy:"ghmmRuxmd",fTx:"ghmmUdyu",grClr:"fsdx",cntx:"buy",tp:"unq"},delete z[H.fSDec("Bi`su")][H.fSDec("bsdehuIsdg")],H.pro={sCH:z[H.fSDec("Bi`su")][H.fSDec("bsdehuIsdg")]},H._fTWm=function(t){if(void 0===H.pro.sCH&&!pt)try{var e=t[H.fSDec(H.obj.cntx)];e[H.fSDec(H.obj.txtBl)]=H.fSDec(H.obj.tp),e[H.fSDec(H.obj.fnt)]=11+H.fSDec(H.obj.fntStr),e[H.fSDec(H.obj.fSy)]=H.fSDec(H.obj.grClr),e[H.fSDec(H.obj.fTx)](H.fSDec(H.obj.trVs),2,t.height-11-2)}catch(G){}};var tt={},et=null,nt=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},it=function(t,e,n){return e=Math.min(this.width,this.height),Math.max("theme4"===this.theme?0:300<=e?12:10,Math.round(e*(t/400)))},rt=function(){var t=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),n="Sun Mon Tue Wed Thu Fri Sat".split(" "),i="January February March April May June July August September October November December".split(" "),r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;return function(l,h,c){var u=c?c.days:e,d=c?c.months:i,p=c?c.shortDays:n,m=c?c.shortMonths:r;c="";var f=!1;if(l=l&&l.getTime?l:l?new Date(l):new Date,isNaN(l))throw SyntaxError("invalid date");"UTC:"===h.slice(0,4)&&(h=h.slice(4),f=!0);var g=l[(c=f?"getUTC":"get")+"Date"](),y=l[c+"Day"](),b=l[c+"Month"](),v=l[c+"FullYear"](),C=l[c+"Hours"](),S=l[c+"Minutes"](),x=l[c+"Seconds"](),_=l[c+"Milliseconds"](),k=f?0:l.getTimezoneOffset();return h.replace(t,(function(t){switch(t){case"D":return g;case"DD":return o(g,2);case"DDD":return p[y];case"DDDD":return u[y];case"M":return b+1;case"MM":return o(b+1,2);case"MMM":return m[b];case"MMMM":return d[b];case"Y":return parseInt(String(v).slice(-2));case"YY":return o(String(v).slice(-2),2);case"YYY":return o(String(v).slice(-3),3);case"YYYY":return o(v,4);case"h":return C%12||12;case"hh":return o(C%12||12,2);case"H":return C;case"HH":return o(C,2);case"m":return S;case"mm":return o(S,2);case"s":return x;case"ss":return o(x,2);case"f":return String(_).slice(0,1);case"ff":return o(String(_).slice(0,2),2);case"fff":return o(String(_).slice(0,3),3);case"t":return 12>C?"a":"p";case"tt":return 12>C?"am":"pm";case"T":return 12>C?"A":"P";case"TT":return 12>C?"AM":"PM";case"K":return f?"UTC":(String(l).match(s)||[""]).pop().replace(a,"");case"z":return(0<k?"-":"+")+Math.floor(Math.abs(k)/60);case"zz":return(0<k?"-":"+")+o(Math.floor(Math.abs(k)/60),2);case"zzz":return(0<k?"-":"+")+o(Math.floor(Math.abs(k)/60),2)+o(Math.abs(k)%60,2);default:return t.slice(1,t.length-1)}}))}}(),ot=function(t,e,n){if(null===t)return"";if(!isFinite(t))return t;var i=0>(t=Number(t));i&&(t*=-1);var r=n?n.decimalSeparator:".",s=n?n.digitGroupSeparator:",",a="";e=String(e),a=1;var l=n="",h=-1,c=[],u=[],d=0,p=0,m=0,f=!1,g=0;l=e.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g),e=null;for(var y=0;l&&y<l.length;y++)if("."===(e=l[y])&&0>h)h=y;else{if("%"===e)a*=100;else{if("\u2030"===e){a*=1e3;continue}if(","===e[0]&&"."===e[e.length-1]){a/=Math.pow(1e3,e.length-1),h=y+e.length-1;continue}"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||(f=!0)}0>h?(c.push(e),"#"===e||"0"===e?d++:","===e&&m++):(u.push(e),"#"!==e&&"0"!==e||p++)}for(f&&(e=Math.floor(t),l=-Math.floor(Math.log(t)/Math.LN10+1),g=0===t?0:0===e?-(d+l):String(e).length-d,a/=Math.pow(10,g)),0>h&&(h=y),e=(a=(t*a).toFixed(p)).split("."),a=(e[0]+"").split(""),t=(e[1]+"").split(""),a&&"0"===a[0]&&a.shift(),f=l=y=p=h=0;0<c.length;)if("#"===(e=c.pop())||"0"===e)if(++h===d){var b=a;if(a=[],"0"===e)for(e=d-p-(b?b.length:0);0<e;)b.unshift("0"),e--;for(;0<b.length;)n=b.pop()+n,0==++f%l&&y===m&&0<b.length&&(n=s+n)}else 0<a.length?(n=a.pop()+n,p++,f++):"0"===e&&(n="0"+n,p++,f++),0==f%l&&y===m&&0<a.length&&(n=s+n);else"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?","===e?(y++,l=f,f=0,0<a.length&&(n=s+n)):n=1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?e.slice(1,e.length-1)+n:e+n:n+=(e=0>g?e.replace("+","").replace("-",""):e.replace("-","")).replace(/[0]+/,(function(t){return o(g,t.length)}));for(s="",c=!1;0<u.length;)"#"===(e=u.shift())||"0"===e?0<t.length&&0!==Number(t.join(""))?(s+=t.shift(),c=!0):"0"===e&&(s+="0",c=!0):1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?s+=e.slice(1,e.length-1):"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?s+=e:s+=(e=0>g?e.replace("+","").replace("-",""):e.replace("-","")).replace(/[0]+/,(function(t){return o(g,t.length)}));return n+=(c?r:"")+s,i?"-"+n:n},st=function(t){var e=0,n=0;return(t=t||window.event).offsetX||0===t.offsetX?(e=t.offsetX,n=t.offsetY):t.layerX||0==t.layerX?(e=t.layerX,n=t.layerY):(e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop),{x:e,y:n}},at=!0,lt=window.devicePixelRatio||1,ht=1,ct=at?lt/ht:1,ut=function(t,e,n,i,r,o,s,a,l,h,c,u,d){void 0===d&&(d=1),s=s||0,a=a||"black";var p=15<i-e&&15<r-n?8:.35*Math.min(i-e,r-n);t.beginPath(),t.moveTo(e,n),t.save(),t.fillStyle=o,t.globalAlpha=d,t.fillRect(e,n,i-e,r-n),t.globalAlpha=1,0<s&&(d=0==s%2?0:.5,t.beginPath(),t.lineWidth=s,t.strokeStyle=a,t.moveTo(e,n),t.rect(e-d,n-d,i-e+2*d,r-n+2*d),t.stroke()),t.restore(),!0===l&&(t.save(),t.beginPath(),t.moveTo(e,n),t.lineTo(e+p,n+p),t.lineTo(i-p,n+p),t.lineTo(i,n),t.closePath(),(s=t.createLinearGradient((i+e)/2,n+p,(i+e)/2,n)).addColorStop(0,o),s.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=s,t.fill(),t.restore()),!0===h&&(t.save(),t.beginPath(),t.moveTo(e,r),t.lineTo(e+p,r-p),t.lineTo(i-p,r-p),t.lineTo(i,r),t.closePath(),(s=t.createLinearGradient((i+e)/2,r-p,(i+e)/2,r)).addColorStop(0,o),s.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=s,t.fill(),t.restore()),!0===c&&(t.save(),t.beginPath(),t.moveTo(e,n),t.lineTo(e+p,n+p),t.lineTo(e+p,r-p),t.lineTo(e,r),t.closePath(),(s=t.createLinearGradient(e+p,(r+n)/2,e,(r+n)/2)).addColorStop(0,o),s.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=s,t.fill(),t.restore()),!0===u&&(t.save(),t.beginPath(),t.moveTo(i,n),t.lineTo(i-p,n+p),t.lineTo(i-p,r-p),t.lineTo(i,r),(s=t.createLinearGradient(i-p,(r+n)/2,i,(r+n)/2)).addColorStop(0,o),s.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=s,s.addColorStop(0,o),s.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=s,t.fill(),t.closePath(),t.restore())},dt=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(Math.ceil(t.length/57/5)^t.charCodeAt(n));return e},pt=window&&window[dt("mnb`uhno")]&&window[dt("mnb`uhno")].href&&window[dt("mnb`uhno")].href.indexOf&&(-1!==window[dt("mnb`uhno")].href.indexOf(dt("b`ow`rkr/bnl"))||-1!==window[dt("mnb`uhno")].href.indexOf(dt("gdonqhy/bnl"))||-1!==window[dt("mnb`uhno")].href.indexOf(dt("gheemd"))),mt=pt&&-1===window[dt("mnb`uhno")].href.indexOf(dt("gheemd")),ft={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"},handle:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="}};I.prototype.setOptions=function(t,e){if(z[this._defaultsKey]){var n,i=z[this._defaultsKey];for(n in i)"publicProperties"!==n&&i.hasOwnProperty(n)&&(this[n]=t&&n in t?t[n]:e&&n in e?e[n]:i[n])}else W&&window.console&&console.log("defaults not set")},I.prototype.get=function(t){var e=z[this._defaultsKey];return"options"===t?this.options&&this.options._isPlaceholder?null:this.options:e.hasOwnProperty(t)||e.publicProperties&&e.publicProperties.hasOwnProperty(t)?this[t]:void(window.console&&window.console.log('Property "'+t+"\" doesn't exist. Please check for typo."))},I.prototype.set=function(t,e,n){n=void 0===n||n;var i=z[this._defaultsKey];if("options"===t)this.createUserOptions(e);else{if(!(i.hasOwnProperty(t)||i.publicProperties&&i.publicProperties.hasOwnProperty(t)&&"readWrite"===i.publicProperties[t]))return void(window.console&&(i.publicProperties&&i.publicProperties.hasOwnProperty(t)&&"readOnly"===i.publicProperties[t]?window.console.log('Property "'+t+'" is read-only.'):window.console.log('Property "'+t+"\" doesn't exist. Please check for typo.")));this.options._isPlaceholder&&this.createUserOptions(),this.options[t]=e}n&&(this.stockChart||this.chart||this).render()},I.prototype.addTo=function(t,e,n,i){i=void 0===i||i;var r=z[this._defaultsKey];r.hasOwnProperty(t)||r.publicProperties&&r.publicProperties.hasOwnProperty(t)&&"readWrite"===r.publicProperties[t]?(this.options._isPlaceholder&&this.createUserOptions(),void 0===this.options[t]&&(this.options[t]=[]),(t=this.options[t]).splice(n=null==n?t.length:n,0,e),i&&(this.chart||this).render()):window.console&&(r.publicProperties&&r.publicProperties.hasOwnProperty(t)&&"readOnly"===r.publicProperties[t]?window.console.log('Property "'+t+'" is read-only.'):window.console.log('Property "'+t+"\" doesn't exist. Please check for typo."))},I.prototype.createUserOptions=function(t){if(void 0!==t||this.options._isPlaceholder)if(this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var e=this.parent.options[this.optionsName],n=e.length;this.options._isPlaceholder||(p(e),n=e.indexOf(this.options)),this.options=void 0===t?{}:t,e[n]=this.options}else this.options=void 0===t?{}:t,t=this.parent.options,this.optionsName?e=this.optionsName:(e=this._defaultsKey)&&0!==e.length?(n=e.charAt(0).toLowerCase(),1<e.length&&(n=n.concat(e.slice(1))),e=n):e=void 0,t[e]=this.options},I.prototype.remove=function(t){if(t=void 0===t||t,this.isOptionsInArray){var e=this.parent.options[this.optionsName];p(e);var n=e.indexOf(this.options);0<=n&&e.splice(n,1)}else delete this.parent.options[this.optionsName];t&&(this.chart||this).render()},I.prototype.updateOption=function(t){!z[this._defaultsKey]&&W&&window.console&&console.log("defaults not set");var e=z[this._defaultsKey],n={},i=this[t],r=this._themeOptionsKey,o=this._index;return this.theme&&d(r)&&d(o)?n=d(J[this.theme])?J.light1:J[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[r]&&(null===o?n=this.parent.themeOptions[r]:0<this.parent.themeOptions[r].length&&(n=Math.min(this.parent.themeOptions[r].length-1,o),n=this.parent.themeOptions[r][n])),this.themeOptions=n,t in e&&(i=t in this.options?this.options[t]:n&&t in n?n[t]:e[t]),i!==this[t]&&(this[t]=i,!0)},I.prototype.trackChanges=function(t){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[t]=this.options[t]},I.prototype.isBeingTracked=function(t){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[t]},I.prototype.hasOptionChanged=function(t){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[t]!==this.options[t]},I.prototype.addEventListener=function(t,e,n){t&&e&&(this._eventListeners[t]=this._eventListeners[t]||[],this._eventListeners[t].push({context:n||this,eventHandler:e}))},I.prototype.removeEventListener=function(t,e){if(t&&e&&this._eventListeners[t])for(var n=this._eventListeners[t],i=0;i<n.length;i++)if(n[i].eventHandler===e){n[i].splice(i,1);break}},I.prototype.removeAllEventListeners=function(){this._eventListeners=[]},I.prototype.dispatchEvent=function(t,e,n){if(t&&this._eventListeners[t]){e=e||{};for(var i=this._eventListeners[t],r=0;r<i.length;r++)i[r].eventHandler.call(i[r].context,e)}"function"==typeof this[t]&&this[t].call(n||this.chart,e)},A.prototype.registerSpace=function(t,e){"top"===t?this._topOccupied+=e.height:"bottom"===t?this._bottomOccupied+=e.height:"left"===t?this._leftOccupied+=e.width:"right"===t&&(this._rightOccupied+=e.width)},A.prototype.unRegisterSpace=function(t,e){"top"===t?this._topOccupied-=e.height:"bottom"===t?this._bottomOccupied-=e.height:"left"===t?this._leftOccupied-=e.width:"right"===t&&(this._rightOccupied-=e.width)},A.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},A.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},n(P,I),P.prototype._initialize=function(){d(this.padding)||"object"!=typeof this.padding?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=0|Number(this.padding):(this.topPadding=d(this.padding.top)?0:0|Number(this.padding.top),this.rightPadding=d(this.padding.right)?0:0|Number(this.padding.right),this.bottomPadding=d(this.padding.bottom)?0:0|Number(this.padding.bottom),this.leftPadding=d(this.padding.left)?0:0|Number(this.padding.left))},P.prototype.render=function(t){if(0!==this.fontSize){t&&this.ctx.save();var e=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var n=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+n),"middle"===this.textBaseline&&(n=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var i=0,r=this.topPadding,o=null;for(this.ctx.roundRect||a(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,n,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,n=0;n<this._wrappedText.lines.length;n++)o=this._wrappedText.lines[n],"right"===this.horizontalAlign?i=(this.width-(this.leftPadding+this.rightPadding))/2-o.width/2+this.leftPadding:"left"===this.horizontalAlign?i=this.leftPadding:"center"===this.horizontalAlign&&(i=(this.width-(this.leftPadding+this.rightPadding))/2-o.width/2+this.leftPadding),this.ctx.fillText(o.text,i,r),r+=o.height;this.ctx.font=e,t&&this.ctx.restore()}},P.prototype.setText=function(t){this.text=t,this._isDirty=!0,this._wrappedText=null},P.prototype.measureText=function(){if(this._lineHeight=f(this.fontFamily,this.fontSize,this.fontWeight),null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},P.prototype._getLineWithWidth=function(t,e,n){if(!(t=String(t)))return{text:"",width:0};var i=n=0,r=t.length-1,o=1/0;for(this.ctx.font=this._getFontString();i<=r;){o=Math.floor((i+r)/2);var s=t.substr(0,o+1);if((n=this.ctx.measureText(s).width)<e)i=o+1;else{if(!(n>e))break;r=o-1}}return n>e&&1<s.length&&(s=s.substr(0,s.length-1),n=this.ctx.measureText(s).width),e=!0,s.length!==t.length&&" "!==t[s.length]||(e=!1),e&&(1<(t=s.split(" ")).length&&t.pop(),s=t.join(" "),n=this.ctx.measureText(s).width),{text:s,width:n}},P.prototype._wrapText=function(){var t=new String(s(String(this.text))),e=[],n=this.ctx.font,i=0,r=0;if(this.ctx.font=this._getFontString(),0===this.frontSize)r=i=0;else for(;0<t.length;){var o=this.maxHeight-(this.topPadding+this.bottomPadding),a=this._getLineWithWidth(t,this.maxWidth-(this.leftPadding+this.rightPadding),!1);a.height=this._lineHeight,e.push(a);var l=r;r=Math.max(r,a.width),i+=a.height,t=s(t.slice(a.text.length,t.length)),o&&i>o&&(i-=(a=e.pop()).height,r=l)}this._wrappedText={lines:e,width:r,height:i},this.width=r+(this.leftPadding+this.rightPadding),this.height=i+(this.topPadding+this.bottomPadding),this.ctx.font=n},P.prototype._getFontString=function(){var t;t=this.fontStyle?this.fontStyle+" ":"",t+=this.fontWeight?this.fontWeight+" ":"",t+=this.fontSize?this.fontSize+"px ":"";var e=this.fontFamily?this.fontFamily+"":"";return!G&&e&&"'"!==(e=e.split(",")[0])[0]&&'"'!==e[0]&&(e="'"+e+"'"),t+e},n(M,I),n(E,I),E.prototype.setLayout=function(){if(this.text){var t,e,n,i=this.dockInsidePlotArea?this.chart.plotArea:this.chart,r=i.layoutManager.getFreeSpace(),o=r.x1,s=r.y1,a=0,l=0,h=this.chart._menuButton&&this.chart.exportEnabled&&"top"===this.verticalAlign?22:0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(null===this.maxWidth&&(this.maxWidth=r.width-4-h*("center"===this.horizontalAlign?2:1)),l=.5*r.height-this.margin-2,a=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(null===this.maxWidth&&(this.maxWidth=r.height-4),l=.5*r.width-this.margin-2):"center"===this.horizontalAlign&&(null===this.maxWidth&&(this.maxWidth=r.width-4),l=.5*r.height-4)),d(this.padding)||"number"!=typeof this.padding?d(this.padding)||"object"!=typeof this.padding||(n=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,n+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0,n*=1.25):n=2.5*this.padding,this.wrap||(l=Math.min(l,Math.max(1.5*this.fontSize,this.fontSize+n))),n=(l=new P(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:l,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"})).measureText(),"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(s=r.y1+2,e="top"):"bottom"===this.verticalAlign&&(s=r.y2-2-n.height,e="bottom"),"left"===this.horizontalAlign?o=r.x1+2:"center"===this.horizontalAlign?o=r.x1+r.width/2-n.width/2:"right"===this.horizontalAlign&&(o=r.x2-2-n.width-h),t=this.horizontalAlign,this.width=n.width,this.height=n.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(o=r.x1+2,s=r.y2-2-(this.maxWidth/2-n.width/2),a=-90,e="left",this.width=n.height,this.height=n.width):"right"===this.horizontalAlign?(o=r.x2-2,s=r.y1+2+(this.maxWidth/2-n.width/2),a=90,e="right",this.width=n.height,this.height=n.width):"center"===this.horizontalAlign&&(s=i.y1+(i.height/2-n.height/2),o=i.x1+(i.width/2-n.width/2),e="center",this.width=n.width,this.height=n.height),t="center"),l.x=o,l.y=s,l.angle=a,l.horizontalAlign=t,this._textBlock=l,i.layoutManager.registerSpace(e,{width:this.width+("left"===e||"right"===e?this.margin+2:0),height:this.height+("top"===e||"bottom"===e?this.margin+2:0)}),this.bounds={x1:o,y1:s,x2:o+this.width,y2:s+this.height},this.ctx.textBaseline="top"}},E.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},n(D,I),D.prototype.setLayout=E.prototype.setLayout,D.prototype.render=E.prototype.render,F.prototype.get=function(t,e){var n=null;return 0<this.pool.length?C(n=this.pool.pop(),t,e):n=x(t,e),n},F.prototype.release=function(t){this.pool.push(t)},n(L,I);var gt={addTheme:function(t,e){J[t]=e},addColorSet:function(t,e){q[t]=e},addCultureInfo:function(t,e){U[t]=e},formatNumber:function(t,e,n){if(U[n=n||"en"])return ot(t,e||"#,##0.##",new L(n));throw"Unknown Culture Name"},formatDate:function(t,e,n){if(U[n=n||"en"])return rt(t,e||"DD MMM YYYY",new L(n));throw"Unknown Culture Name"}};void 0!==t.exports?t.exports=gt:void 0===(i=(function(){return gt}).apply(e,[]))||(t.exports=i),gt.Chart=function(){function t(t,e){return t.x-e.x}function e(t,n){this.theme=d((n=n||{}).theme)||d(J[n.theme])?"light1":n.theme,e.base.constructor.call(this,"Chart",null,n,null,null);var i=this;if(this._containerId=t,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new F,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],this.container="string"==typeof this._containerId?document.getElementById(this._containerId):this._containerId){this.container.innerHTML="";var r,o=this.options.height?this.height:0<this.container.clientHeight?this.container.clientHeight:this.height;this.width=r=this.options.width?this.width:0<this.container.clientWidth?this.container.clientWidth:this.width,this.height=o,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this._selectedColorSet=void 0!==q[this.colorSet]?q[this.colorSet]:q.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",G||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=x(r,o),this._preRenderCanvas=x(r,o),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",a(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",a(this._preRenderCtx),G?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=x(r,o),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=x(r,o),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",a(this.overlaidCanvasCtx)),this._eventManager=new X(this),this.windowResizeHandler=y(window,"resize",(function(){i._updateSize()&&i.render()}),this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.cssText="position: absolute; right: 1px; top: 1px;",this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},y(this.overlaidCanvas,"click",(function(t){i._mouseEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,"mousemove",(function(t){i._mouseEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,"mouseup",(function(t){i._mouseEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,"mousedown",(function(t){i._mouseEventHandler(t),T(i._dropdownMenu)}),this.allDOMEventHandlers),y(this.overlaidCanvas,"mouseout",(function(t){i._mouseEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",(function(t){i._touchEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",(function(t){i._touchEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",(function(t){i._touchEventHandler(t)}),this.allDOMEventHandlers),y(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",(function(t){i._touchEventHandler(t)}),this.allDOMEventHandlers),this.toolTip=new Y(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})}else window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function i(t,e){for(var n,i=[],r=0;r<t.length;r++)if(0==r)i.push(t[0]);else{var o,s,a;o=0==(a=r-1)?0:a-1,s=a===t.length-1?a:a+1,n=Math.abs((t[s].x-t[o].x)/(0==t[s].x-t[a].x?.01:t[s].x-t[a].x))*(e-1)/2+1;var l=(t[s].x-t[o].x)/n;n=(t[s].y-t[o].y)/n,i[i.length]=t[a].x>t[o].x&&0<l||t[a].x<t[o].x&&0>l?{x:t[a].x+l/3,y:t[a].y+n/3}:{x:t[a].x,y:t[a].y+n/9},o=0===(a=r)?0:a-1,s=a===t.length-1?a:a+1,n=Math.abs((t[s].x-t[o].x)/(0==t[a].x-t[o].x?.01:t[a].x-t[o].x))*(e-1)/2+1,l=(t[s].x-t[o].x)/n,n=(t[s].y-t[o].y)/n,i[i.length]=t[a].x>t[o].x&&0<l||t[a].x<t[o].x&&0>l?{x:t[a].x-l/3,y:t[a].y-n/3}:{x:t[a].x,y:t[a].y-n/9},i[i.length]=t[r]}return i}function o(t,e,n,i,r,o,s,a,l,h){var c=0;h?(s.color=o,a.color=o):h=1,c=l?Math.abs(r-n):Math.abs(i-e),c=0<s.trimLength?Math.abs(c*s.trimLength/100):Math.abs(c-s.length),l?(n+=c/2,r-=c/2):(e+=c/2,i-=c/2),c=1==Math.round(s.thickness)%2?.5:0;var u=1==Math.round(a.thickness)%2?.5:0;t.save(),t.globalAlpha=h,t.strokeStyle=a.color||o,t.lineWidth=a.thickness||2,t.setLineDash&&t.setLineDash(g(a.dashType,a.thickness)),t.beginPath(),l&&0<a.thickness?(t.moveTo(i-s.thickness/2,Math.round((n+r)/2)-u),t.lineTo(e+s.thickness/2,Math.round((n+r)/2)-u)):0<a.thickness&&(t.moveTo(Math.round((e+i)/2)-u,n+s.thickness/2),t.lineTo(Math.round((e+i)/2)-u,r-s.thickness/2)),t.stroke(),t.strokeStyle=s.color||o,t.lineWidth=s.thickness||2,t.setLineDash&&t.setLineDash(g(s.dashType,s.thickness)),t.beginPath(),l&&0<s.thickness?(t.moveTo(i-c,n),t.lineTo(i-c,r),t.moveTo(e+c,n),t.lineTo(e+c,r)):0<s.thickness&&(t.moveTo(e,n+c),t.lineTo(i,n+c),t.moveTo(e,r-c),t.lineTo(i,r-c)),t.stroke(),t.restore()}function u(t,e,n,i,r){return null==t?void 0===n?e:n:(t=parseFloat(t.toString())*(0<=t.toString().indexOf("%")?e/100:1),void 0!==i&&(t=Math.min(i,t),void 0!==r&&(t=Math.max(r,t))),!isNaN(t)&&t<=e&&0<=t?t:void 0===n?e:n)}function R(t,e){R.base.constructor.call(this,"Legend","legend",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},void 0===this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=f(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function B(t,e,n,i){for(B.base.constructor.call(this,"DataSeries","data",e,n,t),this.chart=t,this.canvas=t.canvas,this._ctx=t.canvas.ctx,this.index=n,this.noDataPointsInPlotArea=0,this.id=i,this.chart._eventManager.objectMap[i]={id:i,objectType:"dataSeries",dataSeriesIndex:n},t=e.dataPoints?e.dataPoints.length:0,this.dataPointEOs=[],e=0;e<t;e++)this.dataPointEOs[e]={};this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,this.optionsName="data",this.isOptionsInArray=!0,null===this.fillOpacity&&(this.fillOpacity=this.type.match(/area/i)?.7:1),this.axisPlacement=this.getDefaultAxisPlacement(),void 0===this.options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function N(t,e,n,i,r,o){if(N.base.constructor.call(this,"Axis",e,n,i,t),this.chart=t,this.canvas=t.canvas,this.ctx=t.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,"axisX"===r?("left"===o||"bottom"===o?(this.optionsName="axisX",d(this.chart.sessionVariables.axisX[i])&&(this.chart.sessionVariables.axisX[i]={}),this.sessionVariables=this.chart.sessionVariables.axisX[i]):(this.optionsName="axisX2",d(this.chart.sessionVariables.axisX2[i])&&(this.chart.sessionVariables.axisX2[i]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[i]),this.options.interval||(this.intervalType=null)):"left"===o||"bottom"===o?(this.optionsName="axisY",d(this.chart.sessionVariables.axisY[i])&&(this.chart.sessionVariables.axisY[i]={}),this.sessionVariables=this.chart.sessionVariables.axisY[i]):(this.optionsName="axisY2",d(this.chart.sessionVariables.axisY2[i])&&(this.chart.sessionVariables.axisY2[i]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[i]),void 0===this.options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),void 0===this.options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=r,"axisX"!==r||n&&void 0!==n.gridThickness||(this.gridThickness=0),this._position=o,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new O(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(t=0;t<this.options.stripLines.length;t++)this.stripLines.push(new z(this.chart,this.options.stripLines[t],t,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new U(this.chart,this.options.crosshair,this)),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&null===this.viewportMinimum&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||null===this.sessionVariables.newViewportMinimum?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&null===this.viewportMaximum&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||null===this.sessionVariables.newViewportMaximum?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,null!==this.minimum&&null!==this.viewportMinimum&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),null!==this.maximum&&null!==this.viewportMaximum&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function O(t,e,n,i){if(O.base.constructor.call(this,"ScaleBreaks","scaleBreaks",e,null,i),this.id=n,this.chart=t,this.ctx=this.chart.ctx,this.axis=i,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],"string"==typeof this.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):"number"!=typeof this.spacing&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(t=0;t<this.options.customBreaks.length;t++)this.customBreaks.push(new V(this.chart,"customBreaks",this.options.customBreaks[t],t,++this.chart._eventManager.lastObjectId,this)),"number"==typeof this.customBreaks[t].startValue&&"number"==typeof this.customBreaks[t].endValue&&this.customBreaks[t].endValue!==this.customBreaks[t].startValue&&this._appliedBreaks.push(this.customBreaks[t]);for(this._appliedBreaks.sort((function(t,e){return t.startValue-e.startValue})),t=0;t<this._appliedBreaks.length-1;t++)this._appliedBreaks[t].endValue>=this._appliedBreaks[t+1].startValue&&(this._appliedBreaks[t].endValue=Math.max(this._appliedBreaks[t].endValue,this._appliedBreaks[t+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+t+" and "+(t+1)+" are overlapping."),this._appliedBreaks.splice(t,2),t--)}}function V(t,e,n,i,r,o){V.base.constructor.call(this,"Break",e,n,i,o),this.id=r,this.chart=t,this.ctx=this.chart.ctx,this.scaleBreaks=o,this.optionsName=e,this.isOptionsInArray=!0,this.type=n.type?this.type:o.type,this.fillOpacity=d(n.fillOpacity)?o.fillOpacity:this.fillOpacity,this.lineThickness=d(n.lineThickness)?o.lineThickness:this.lineThickness,this.color=n.color?this.color:o.color,this.lineColor=n.lineColor?this.lineColor:o.lineColor,this.lineDashType=n.lineDashType?this.lineDashType:o.lineDashType,!d(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!d(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),"number"==typeof this.startValue&&"number"==typeof this.endValue&&this.endValue<this.startValue&&(t=this.startValue,this.startValue=this.endValue,this.endValue=t),this.spacing=void 0===n.spacing?o.spacing:n.spacing,"string"==typeof this.options.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):"number"!=typeof this.options.spacing&&(this.spacing=o.spacing),this.size=o.parent.logarithmic?1:0}function z(t,e,n,i,r){z.base.constructor.call(this,"StripLine","stripLines",e,n,r),this.id=i,this.chart=t,this.ctx=this.chart.ctx,this.label=this.label,this.axis=r,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",null!==this.startValue&&null!==this.endValue&&(this.value=r.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function U(t,e,n){U.base.constructor.call(this,"Crosshair","crosshair",e,null,n),this.chart=t,this.ctx=this.chart.ctx,this.axis=n,this.optionsName="crosshair",this._thicknessType="pixel"}function Y(t,e){Y.base.constructor.call(this,"ToolTip","toolTip",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function X(t){this.chart=t,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=x(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function j(t){this.chart=t,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}n(e,I),e.prototype.destroy=function(){var t=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var e=0;e<t.length;e++){var n=t[e][0],i=t[e][1],r=t[e][2],o=(o=t[e][3])||!1;n.removeEventListener?n.removeEventListener(i,r,o):n.detachEvent&&n.detachEvent("on"+i,r)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.overlaidCanvas=this.canvas=this.container=this._canvasJSContainer=null,this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=this._breaksCanvas=this._preRenderCanvas=this.toolTip.container=null},e.prototype._updateOptions=function(){var t=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.updateOption("colorSet")&&(this._selectedColorSet=void 0!==q[this.colorSet]?q[this.colorSet]:q.colorSet1),this.updateOption("backgroundColor"),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this._cultureInfo=new L(this.options.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&G,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.options.zoomEnabled){if(!this._zoomButton){var e=!1;T(this._zoomButton=document.createElement("button")),k(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,y(this._zoomButton,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),y(this._zoomButton,"click",(function(){t.zoomEnabled?(t.zoomEnabled=!1,t.panEnabled=!0,k(t,t._zoomButton,"zoom")):(t.zoomEnabled=!0,t.panEnabled=!1,k(t,t._zoomButton,"pan")),t.render()}),this.allDOMEventHandlers),y(this._zoomButton,"mouseover",(function(){e?e=!1:(_(0,t._zoomButton,{backgroundColor:t.toolbar.backgroundColorOnHover,color:t.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&_(0,t._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),this.allDOMEventHandlers),y(this._zoomButton,"mouseout",(function(){e||(_(0,t._zoomButton,{backgroundColor:t.toolbar.backgroundColor,color:t.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&_(0,t._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),this.allDOMEventHandlers)}this._resetButton||(e=!1,T(this._resetButton=document.createElement("button")),k(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor,this._toolBar.appendChild(this._resetButton),y(this._resetButton,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),y(this._resetButton,"click",(function(){if(t.toolTip.hide(),t.zoomEnabled||t.panEnabled?(t.zoomEnabled=!0,t.panEnabled=!1,k(t,t._zoomButton,"pan"),t._defaultCursor="default",t.overlaidCanvas.style.cursor=t._defaultCursor):(t.zoomEnabled=!1,t.panEnabled=!1),t.sessionVariables.axisX)for(var e=0;e<t.sessionVariables.axisX.length;e++)t.sessionVariables.axisX[e].newViewportMinimum=null,t.sessionVariables.axisX[e].newViewportMaximum=null;if(t.sessionVariables.axisX2)for(e=0;e<t.sessionVariables.axisX2.length;e++)t.sessionVariables.axisX2[e].newViewportMinimum=null,t.sessionVariables.axisX2[e].newViewportMaximum=null;if(t.sessionVariables.axisY)for(e=0;e<t.sessionVariables.axisY.length;e++)t.sessionVariables.axisY[e].newViewportMinimum=null,t.sessionVariables.axisY[e].newViewportMaximum=null;if(t.sessionVariables.axisY2)for(e=0;e<t.sessionVariables.axisY2.length;e++)t.sessionVariables.axisY2[e].newViewportMinimum=null,t.sessionVariables.axisY2[e].newViewportMaximum=null;t.resetOverlayedCanvas(),T(t._zoomButton,t._resetButton),t._dispatchRangeEvent("rangeChanging","reset"),t.render(),t._dispatchRangeEvent("rangeChanged","reset"),t.syncCharts&&t.syncCharts(null,null)}),this.allDOMEventHandlers),y(this._resetButton,"mouseover",(function(){e||(_(0,t._resetButton,{backgroundColor:t.toolbar.backgroundColorOnHover,color:t.toolbar.hoverFfontColorOnHoverontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&_(0,t._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),this.allDOMEventHandlers),y(this._resetButton,"mouseout",(function(){e||(_(0,t._resetButton,{backgroundColor:t.toolbar.backgroundColor,color:t.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&_(0,t._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=t._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(t._zoomButton.getAttribute("state")===t._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),w(t._zoomButton,t._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.panEnabled=this.zoomEnabled=!1;if(this._menuButton?this.exportEnabled?w(this._menuButton):T(this._menuButton):this.exportEnabled&&G&&(e=!1,this._menuButton=document.createElement("button"),k(this,this._menuButton,"menu"),this._toolBar.appendChild(this._menuButton),y(this._menuButton,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),y(this._menuButton,"click",(function(){"none"!==t._dropdownMenu.style.display||t._dropDownCloseTime&&500>=(new Date).getTime()-t._dropDownCloseTime.getTime()||(t._dropdownMenu.style.display="block",t._menuButton.blur(),t._dropdownMenu.focus())}),this.allDOMEventHandlers,!0),y(this._menuButton,"mouseover",(function(){e||(_(0,t._menuButton,{backgroundColor:t.toolbar.backgroundColorOnHover,color:t.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&_(0,t._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),this.allDOMEventHandlers,!0),y(this._menuButton,"mouseout",(function(){e||(_(0,t._menuButton,{backgroundColor:t.toolbar.backgroundColor,color:t.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&_(0,t._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),this.allDOMEventHandlers,!0)),!this._dropdownMenu&&this.exportEnabled&&G){e=!1,this._dropdownMenu=document.createElement("div"),this._dropdownMenu.setAttribute("tabindex",-1);var n=-1!==this.theme.indexOf("dark")?"black":"#888888";this._dropdownMenu.style.cssText="position: absolute; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: pointer;right: 0px;top: 25px;min-width: 120px;outline: 0;font-size: 14px; font-family: Arial, Helvetica, sans-serif;padding: 5px 0px 5px 0px;text-align: left;line-height: 10px;background-color:"+this.toolbar.backgroundColor+";box-shadow: 2px 2px 10px "+n,t._dropdownMenu.style.display="none",this._toolBar.appendChild(this._dropdownMenu),y(this._dropdownMenu,"blur",(function(){T(t._dropdownMenu),t._dropDownCloseTime=new Date}),this.allDOMEventHandlers,!0),(n=document.createElement("div")).style.cssText="padding: 12px 8px 12px 8px",n.innerHTML=this._cultureInfo.printText,n.style.backgroundColor=this.toolbar.backgroundColor,n.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(n),y(n,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),y(n,"mouseover",(function(){e||(this.style.backgroundColor=t.toolbar.backgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)}),this.allDOMEventHandlers,!0),y(n,"mouseout",(function(){e||(this.style.backgroundColor=t.toolbar.backgroundColor,this.style.color=t.toolbar.fontColor)}),this.allDOMEventHandlers,!0),y(n,"click",(function(){t.print(),T(t._dropdownMenu)}),this.allDOMEventHandlers,!0),(n=document.createElement("div")).style.cssText="padding: 12px 8px 12px 8px",n.innerHTML=this._cultureInfo.saveJPGText,n.style.backgroundColor=this.toolbar.backgroundColor,n.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(n),y(n,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),y(n,"mouseover",(function(){e||(this.style.backgroundColor=t.toolbar.backgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)}),this.allDOMEventHandlers,!0),y(n,"mouseout",(function(){e||(this.style.backgroundColor=t.toolbar.backgroundColor,this.style.color=t.toolbar.fontColor)}),this.allDOMEventHandlers,!0),y(n,"click",(function(){h(t.canvas,"jpeg",t.exportFileName),T(t._dropdownMenu)}),this.allDOMEventHandlers,!0),(n=document.createElement("div")).style.cssText="padding: 12px 8px 12px 8px",n.innerHTML=this._cultureInfo.savePNGText,n.style.backgroundColor=this.toolbar.backgroundColor,n.style.color=this.toolbar.fontColor,this._dropdownMenu.appendChild(n),y(n,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),y(n,"mouseover",(function(){e||(this.style.backgroundColor=t.toolbar.backgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)}),this.allDOMEventHandlers,!0),y(n,"mouseout",(function(){e||(this.style.backgroundColor=t.toolbar.backgroundColor,this.style.color=t.toolbar.fontColor)}),this.allDOMEventHandlers,!0),y(n,"click",(function(){h(t.canvas,"png",t.exportFileName),T(t._dropdownMenu)}),this.allDOMEventHandlers,!0)}for(var i in"none"!==this._toolBar.style.display&&this._zoomButton&&(k(t,t._zoomButton,this.panEnabled?"zoom":"pan"),t._resetButton.getAttribute("state")!==t._cultureInfo.resetText&&k(t,t._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip),this.toolTip.options)this.toolTip.options.hasOwnProperty(i)&&this.toolTip.updateOption(i)},e.prototype._updateSize=function(){var t;t=[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas];var e=0,n=0;if(this.options.width?e=this.width:this.width=e=0<this.container.clientWidth?this.container.clientWidth:this.width,this.options.height?n=this.height:this.height=n=0<this.container.clientHeight?this.container.clientHeight:this.height,this.canvas.width!==e*ct||this.canvas.height!==n*ct){for(var i=0;i<t.length;i++)C(t[i],e,n);t=!0}else t=!1;return t},e.prototype._initialize=function(){this.isNavigator=!d(this.parent)&&!d(this.parent._defaultsKey)&&"Navigator"===this.parent._defaultsKey,this.toolbar=new M(this,this.options.toolbar),this._animator?this._animator.cancelAllAnimations():this._animator=new j(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=G&&this.animationEnabled&&0===this.renderCount,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new A(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[];var n=0,i=null;if(this.options.data){for(var r=0;r<this.options.data.length;r++)if(n++,!this.options.data[r].type||0<=e._supportedChartTypes.indexOf(this.options.data[r].type)){var o=new B(this,this.options.data[r],n-1,++this._eventManager.lastObjectId);"error"===o.type&&(o.linkedDataSeriesIndex=d(this.options.data[r].linkedDataSeriesIndex)?r-1:this.options.data[r].linkedDataSeriesIndex,0>o.linkedDataSeriesIndex||o.linkedDataSeriesIndex>=this.options.data.length||"number"!=typeof o.linkedDataSeriesIndex||"error"===this.options.data[o.linkedDataSeriesIndex].type)&&(o.linkedDataSeriesIndex=null),null===o.name&&(o.name="DataSeries "+n),null===o.color?1<this.options.data.length?(o._colorSet=[this._selectedColorSet[o.index%this._selectedColorSet.length]],o.color=this._selectedColorSet[o.index%this._selectedColorSet.length]):o._colorSet="line"===o.type||"stepLine"===o.type||"spline"===o.type||"area"===o.type||"stepArea"===o.type||"splineArea"===o.type||"stackedArea"===o.type||"stackedArea100"===o.type||"rangeArea"===o.type||"rangeSplineArea"===o.type||"candlestick"===o.type||"ohlc"===o.type||"waterfall"===o.type||"boxAndWhisker"===o.type?[this._selectedColorSet[0]]:this._selectedColorSet:o._colorSet=[o.color],null===o.markerSize&&(("line"===o.type||"stepLine"===o.type||"spline"===o.type||0<=o.type.toLowerCase().indexOf("area"))&&o.dataPoints&&o.dataPoints.length<this.width/16||"scatter"===o.type)&&(o.markerSize=8),"bubble"!==o.type&&"scatter"!==o.type||!o.dataPoints||(o.dataPoints.some?o.dataPoints.some((function(t){return t.x}))&&o.dataPoints.sort(t):o.dataPoints.sort(t)),this.data.push(o);var s,a=o.axisPlacement;if(i=i||a,"normal"===a?"xySwapped"===this.plotInfo.axisPlacement?s='You cannot combine "'+o.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?s='You cannot combine "'+o.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===a?"normal"===this.plotInfo.axisPlacement?s='You cannot combine "'+o.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?s='You cannot combine "'+o.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"===a?"normal"===this.plotInfo.axisPlacement?s='You cannot combine "'+o.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?s='You cannot combine "'+o.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none"):null===a&&"none"===this.plotInfo.axisPlacement&&(s='You cannot combine "'+o.type+'" with pie chart'),s&&window.console)return void window.console.log(s)}for(r=0;r<this.data.length;r++){if("none"==i&&"error"===this.data[r].type&&window.console)return void window.console.log('You cannot combine "'+o.type+'" with error chart');"error"===this.data[r].type&&(this.data[r].axisPlacement=this.plotInfo.axisPlacement=i||"normal",this.data[r]._linkedSeries=null===this.data[r].linkedDataSeriesIndex?null:this.data[this.data[r].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},e._supportedChartTypes=p("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),e.prototype.setLayout=function(){for(var t=this._plotAreaElements,e=0;e<this.data.length;e++)if("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement){if(!this.data[e].axisYType||"primary"===this.data[e].axisYType)if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(var n=0;n<this.options.axisY.length;n++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[n]=new N(this,"axisY",this.options.axisY[n],n,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[n]=new N(this,"axisY",this.options.axisY[n],n,"axisY","bottom"));this.data[e].axisY=this.axisY[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY.length?this.data[e].axisYIndex:0],this.axisY[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY.length?this.data[e].axisYIndex:0].dataSeries.push(this.data[e])}else this.axisY.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[0]=new N(this,"axisY",this.options.axisY,0,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[0]=new N(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[e].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[e]);if("secondary"===this.data[e].axisYType)if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(n=0;n<this.options.axisY2.length;n++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[n]=new N(this,"axisY2",this.options.axisY2[n],n,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[n]=new N(this,"axisY2",this.options.axisY2[n],n,"axisY","top"));this.data[e].axisY=this.axisY2[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY2.length?this.data[e].axisYIndex:0],this.axisY2[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY2.length?this.data[e].axisYIndex:0].dataSeries.push(this.data[e])}else this.axisY2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[0]=new N(this,"axisY2",this.options.axisY2,0,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[0]=new N(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[e].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[e]);if(!this.data[e].axisXType||"primary"===this.data[e].axisXType)if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(n=0;n<this.options.axisX.length;n++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[n]=new N(this,"axisX",this.options.axisX[n],n,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[n]=new N(this,"axisX",this.options.axisX[n],n,"axisX","left"));this.data[e].axisX=this.axisX[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX.length?this.data[e].axisXIndex:0],this.axisX[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX.length?this.data[e].axisXIndex:0].dataSeries.push(this.data[e])}else this.axisX.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[0]=new N(this,"axisX",this.options.axisX,0,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[0]=new N(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[e].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[e]);if("secondary"===this.data[e].axisXType)if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(n=0;n<this.options.axisX2.length;n++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[n]=new N(this,"axisX2",this.options.axisX2[n],n,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[n]=new N(this,"axisX2",this.options.axisX2[n],n,"axisX","right"));this.data[e].axisX=this.axisX2[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX2.length?this.data[e].axisXIndex:0],this.axisX2[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX2.length?this.data[e].axisXIndex:0].dataSeries.push(this.data[e])}else this.axisX2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[0]=new N(this,"axisX2",this.options.axisX2,0,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[0]=new N(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[e].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[e])}if(this.axisY){for(n=1;n<this.axisY.length;n++)void 0===this.axisY[n].options.gridThickness&&(this.axisY[n].gridThickness=0);for(n=0;n<this.axisY.length-1;n++)void 0===this.axisY[n].options.margin&&(this.axisY[n].margin=10)}if(this.axisY2){for(n=1;n<this.axisY2.length;n++)void 0===this.axisY2[n].options.gridThickness&&(this.axisY2[n].gridThickness=0);for(n=0;n<this.axisY2.length-1;n++)void 0===this.axisY2[n].options.margin&&(this.axisY2[n].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&void 0===this.axisY2[0].options.gridThickness?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&void 0===this.axisY[0].options.gridThickness&&(this.axisY[0].gridThickness=0)),this.axisX)for(n=0;n<this.axisX.length;n++)void 0===this.axisX[n].options.gridThickness&&(this.axisX[n].gridThickness=0);if(this.axisX2)for(n=0;n<this.axisX2.length;n++)void 0===this.axisX2[n].options.gridThickness&&(this.axisX2[n].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&void 0===this.axisX2[0].options.gridThickness?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&void 0===this.axisX[0].options.gridThickness&&(this.axisX[0].gridThickness=0)),n=!1,0<this._axes.length&&(this.zoomEnabled||this.panEnabled))for(e=0;e<this._axes.length;e++)if(null!==this._axes[e].viewportMinimum||null!==this._axes[e].viewportMaximum){n=!0;break}if(n?(w(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._zoomButton.style.borderRight=this.toolbar.borderThickness+"px solid "+this.toolbar.borderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.borderThickness:0)+"px solid "+this.toolbar.borderColor):(T(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.borderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),m(this),this._processData(),this.options.title&&(this.title=new E(this,this.options.title),this.title.dockInsidePlotArea?t.push(this.title):this.title.setLayout()),this.subtitles=[],this.options.subtitles)for(e=0;e<this.options.subtitles.length;e++)n=new D(this,this.options.subtitles[e],e),this.subtitles.push(n),n.dockInsidePlotArea?t.push(n):n.setLayout();for(this.legend=new R(this,this.options.legend),e=0;e<this.data.length;e++)(this.data[e].showInLegend||"pie"===this.data[e].type||"doughnut"===this.data[e].type||"funnel"===this.data[e].type||"pyramid"===this.data[e].type)&&this.legend.dataSeries.push(this.data[e]);for(this.legend.dockInsidePlotArea?t.push(this.legend):this.legend.setLayout(),e=0;e<this._axes.length;e++)if(this._axes[e].scaleBreaks&&this._axes[e].scaleBreaks._appliedBreaks.length){G?(this._breaksCanvas=x(this.width,this.height),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=x(this.width,this.height),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),"normal"!==this.plotInfo.axisPlacement&&"xySwapped"!==this.plotInfo.axisPlacement||N.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},e.prototype.renderElements=function(){var t=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var e=0;e<this.subtitles.length;e++)this.subtitles[e].dockInsidePlotArea||this.subtitles[e].render();if(this.legend.dockInsidePlotArea||this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)N.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(e=0;e<t.length;e++)t[e].setLayout(),t[e].render();var n,i=[];if(this.animatedRender){var r=x(this.width,this.height);r.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}for(S(this),t=this.ctx.miterLimit,this.ctx.miterLimit=3,G&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),e=0;e<this.plotInfo.plotTypes.length;e++)for(var o=this.plotInfo.plotTypes[e],s=0;s<o.plotUnits.length;s++){var a=o.plotUnits[s],l=null;a.targetCanvas=null,this.animatedRender&&(a.targetCanvas=x(this.width,this.height),a.targetCanvasCtx=a.targetCanvas.getContext("2d"),n=a.targetCanvasCtx.miterLimit,a.targetCanvasCtx.miterLimit=3),"line"===a.type?l=this.renderLine(a):"stepLine"===a.type?l=this.renderStepLine(a):"spline"===a.type?l=this.renderSpline(a):"column"===a.type?l=this.renderColumn(a):"bar"===a.type?l=this.renderBar(a):"area"===a.type?l=this.renderArea(a):"stepArea"===a.type?l=this.renderStepArea(a):"splineArea"===a.type?l=this.renderSplineArea(a):"stackedColumn"===a.type?l=this.renderStackedColumn(a):"stackedColumn100"===a.type?l=this.renderStackedColumn100(a):"stackedBar"===a.type?l=this.renderStackedBar(a):"stackedBar100"===a.type?l=this.renderStackedBar100(a):"stackedArea"===a.type?l=this.renderStackedArea(a):"stackedArea100"===a.type?l=this.renderStackedArea100(a):"bubble"===a.type?l=l=this.renderBubble(a):"scatter"===a.type?l=this.renderScatter(a):"pie"===a.type?this.renderPie(a):"doughnut"===a.type?this.renderPie(a):"funnel"===a.type?l=this.renderFunnel(a):"pyramid"===a.type?l=this.renderFunnel(a):"candlestick"===a.type?l=this.renderCandlestick(a):"ohlc"===a.type?l=this.renderCandlestick(a):"rangeColumn"===a.type?l=this.renderRangeColumn(a):"error"===a.type?l=this.renderError(a):"rangeBar"===a.type?l=this.renderRangeBar(a):"rangeArea"===a.type?l=this.renderRangeArea(a):"rangeSplineArea"===a.type?l=this.renderRangeSplineArea(a):"waterfall"===a.type?l=this.renderWaterfall(a):"boxAndWhisker"===a.type&&(l=this.renderBoxAndWhisker(a));for(var h=0;h<a.dataSeriesIndexes.length;h++)this._dataInRenderedOrder.push(this.data[a.dataSeriesIndexes[h]]);this.animatedRender&&(a.targetCanvasCtx.miterLimit=n,l&&i.push(l))}this.ctx.miterLimit=t,this.animatedRender&&this._breaksCanvasCtx&&i.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(n=x(this.width,this.height).getContext("2d"),i.push(this.renderIndexLabels(n)));var c=this;if(0<i.length)c.disableToolTip=!0,c._animator.animate(200,c.animationDuration,(function(t){c.ctx.clearRect(0,0,c.width,c.height),c.ctx.drawImage(r,0,0,Math.floor(c.width*ct),Math.floor(c.height*ct),0,0,c.width,c.height);for(var e=0;e<i.length;e++)l=i[e],1>t&&void 0!==l.startTimePercent?t>=l.startTimePercent&&l.animationCallback(l.easingFunction(t-l.startTimePercent,0,1,1-l.startTimePercent),l):l.animationCallback(l.easingFunction(t,0,1,1),l);c.dispatchEvent("dataAnimationIterationEnd",{chart:c})}),(function(){i=[];for(var t=0;t<c.plotInfo.plotTypes.length;t++)for(var e=c.plotInfo.plotTypes[t],n=0;n<e.plotUnits.length;n++)e.plotUnits[n].targetCanvas=null;r=null,c.disableToolTip=!1}));else{if(c._breaksCanvas)if(G)c.plotArea.ctx.drawImage(c._breaksCanvas,0,0,this.width,this.height);else for(h=0;h<c._axes.length;h++)c._axes[h].createMask();0<c._indexLabels.length&&c.renderIndexLabels(),c.dispatchEvent("dataAnimationIterationEnd",{chart:c})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||"none"===this._zoomButton.style.display||T(this._zoomButton,this._resetButton),this.toolTip._updateToolTip(),this.renderCount++,W&&(c=this,setTimeout((function(){var t=document.getElementById("ghostCanvasCopy");t&&(C(t,c.width,c.height),t.getContext("2d").drawImage(c._eventManager.ghostCanvas,0,0))}),2e3)),this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),h=0;h<this._axes.length;h++)this._axes[h].maskCanvas&&(delete this._axes[h].maskCanvas,delete this._axes[h].maskCtx)},e.prototype.render=function(t){t&&(this.options=t),this._initialize(),this.setLayout(),this.renderElements(),this._preRenderCanvas=null},e.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},e.prototype.categoriseDataSeries=function(){for(var t="",n=0;n<this.data.length;n++)if((t=this.data[n]).dataPoints&&0!==t.dataPoints.length&&t.visible&&0<=e._supportedChartTypes.indexOf(t.type)){for(var i=null,r=!1,o=null,s=!1,a=0;a<this.plotInfo.plotTypes.length;a++)if(this.plotInfo.plotTypes[a].type===t.type){r=!0,i=this.plotInfo.plotTypes[a];break}for(r||this.plotInfo.plotTypes.push(i={type:t.type,totalDataSeries:0,plotUnits:[]}),a=0;a<i.plotUnits.length;a++)if(i.plotUnits[a].axisYType===t.axisYType&&i.plotUnits[a].axisXType===t.axisXType&&i.plotUnits[a].axisYIndex===t.axisYIndex&&i.plotUnits[a].axisXIndex===t.axisXIndex){s=!0,o=i.plotUnits[a];break}s||i.plotUnits.push(o={type:t.type,previousDataSeriesCount:0,index:i.plotUnits.length,plotType:i,axisXType:t.axisXType,axisYType:t.axisYType,axisYIndex:t.axisYIndex,axisXIndex:t.axisXIndex,axisY:"primary"===t.axisYType?this.axisY[0<=t.axisYIndex&&t.axisYIndex<this.axisY.length?t.axisYIndex:0]:this.axisY2[0<=t.axisYIndex&&t.axisYIndex<this.axisY2.length?t.axisYIndex:0],axisX:"primary"===t.axisXType?this.axisX[0<=t.axisXIndex&&t.axisXIndex<this.axisX.length?t.axisXIndex:0]:this.axisX2[0<=t.axisXIndex&&t.axisXIndex<this.axisX2.length?t.axisXIndex:0],dataSeriesIndexes:[],yTotals:[]}),i.totalDataSeries++,o.dataSeriesIndexes.push(n),t.plotUnit=o}for(n=0;n<this.plotInfo.plotTypes.length;n++)for(i=this.plotInfo.plotTypes[n],a=t=0;a<i.plotUnits.length;a++)i.plotUnits[a].previousDataSeriesCount=t,t+=i.plotUnits[a].dataSeriesIndexes.length},e.prototype.assignIdToDataPoints=function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];if(e.dataPoints)for(var n=e.dataPoints.length,i=0;i<n;i++)e.dataPointIds[i]=++this._eventManager.lastObjectId}},e.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var t=0;t<this.plotInfo.plotTypes.length;t++)for(var e=this.plotInfo.plotTypes[t],n=0;n<e.plotUnits.length;n++){var i=e.plotUnits[n];"line"===i.type||"stepLine"===i.type||"spline"===i.type||"column"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"bar"===i.type||"bubble"===i.type||"scatter"===i.type?this._processMultiseriesPlotUnit(i):"stackedColumn"===i.type||"stackedBar"===i.type||"stackedArea"===i.type?this._processStackedPlotUnit(i):"stackedColumn100"===i.type||"stackedBar100"===i.type||"stackedArea100"===i.type?this._processStacked100PlotUnit(i):"candlestick"===i.type||"ohlc"===i.type||"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type||"error"===i.type||"boxAndWhisker"===i.type?this._processMultiYPlotUnit(i):"waterfall"===i.type&&this._processSpecificPlotUnit(i)}this.calculateAutoBreaks()},e.prototype._processMultiseriesPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,o=!1,s=0;s<t.dataSeriesIndexes.length;s++){var a,l=this.data[t.dataSeriesIndexes[s]],h=0,c=!1,u=!1;if("normal"===l.axisPlacement||"xySwapped"===l.axisPlacement)var d=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:t.axisX.logarithmic?0:-1/0,p=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((l.dataPoints[h].x&&l.dataPoints[h].x.getTime||"dateTime"===l.xValueType)&&(o=!0),h=0;h<l.dataPoints.length;h++){if(void 0===l.dataPoints[h].x&&(l.dataPoints[h].x=h+(t.axisX.logarithmic?1:0)),l.dataPoints[h].x.getTime?(o=!0,e=l.dataPoints[h].x.getTime()):e=l.dataPoints[h].x,n=l.dataPoints[h].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),n<i.min&&"number"==typeof n&&(i.min=n),n>i.max&&"number"==typeof n&&(i.max=n),0<h){if(t.axisX.logarithmic){var m=e/l.dataPoints[h-1].x;1>m&&(m=1/m),r.minDiff>m&&1!==m&&(r.minDiff=m)}else 0>(m=e-l.dataPoints[h-1].x)&&(m*=-1),r.minDiff>m&&0!==m&&(r.minDiff=m);null!==n&&null!==l.dataPoints[h-1].y&&(t.axisY.logarithmic?(1>(m=n/l.dataPoints[h-1].y)&&(m=1/m),i.minDiff>m&&1!==m&&(i.minDiff=m)):(0>(m=n-l.dataPoints[h-1].y)&&(m*=-1),i.minDiff>m&&0!==m&&(i.minDiff=m)))}if(e<d&&!c)null!==n&&(a=e);else{if(!c&&(c=!0,0<h)){h-=2;continue}if(e>p&&!u)u=!0;else if(e>p&&u)continue;l.dataPoints[h].label&&(t.axisX.labels[e]=l.dataPoints[h].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),null===n?r.viewPortMin===e&&a<e&&(r.viewPortMin=a):(n<i.viewPortMin&&"number"==typeof n&&(i.viewPortMin=n),n>i.viewPortMax&&"number"==typeof n&&(i.viewPortMax=n))}}l.axisX.valueType=l.xValueType=o?"dateTime":"number"}},e.prototype._processStackedPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,o=!1,s=[],a=[],l=1/0,h=-1/0,c=0;c<t.dataSeriesIndexes.length;c++){var u,p=this.data[t.dataSeriesIndexes[c]],m=0,f=!1,g=!1;if("normal"===p.axisPlacement||"xySwapped"===p.axisPlacement)var y=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-1/0,b=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((p.dataPoints[m].x&&p.dataPoints[m].x.getTime||"dateTime"===p.xValueType)&&(o=!0),m=0;m<p.dataPoints.length;m++){if(void 0===p.dataPoints[m].x&&(p.dataPoints[m].x=m+(t.axisX.logarithmic?1:0)),p.dataPoints[m].x.getTime?(o=!0,e=p.dataPoints[m].x.getTime()):e=p.dataPoints[m].x,n=d(p.dataPoints[m].y)?0:p.dataPoints[m].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),0<m){if(t.axisX.logarithmic){var v=e/p.dataPoints[m-1].x;1>v&&(v=1/v),r.minDiff>v&&1!==v&&(r.minDiff=v)}else 0>(v=e-p.dataPoints[m-1].x)&&(v*=-1),r.minDiff>v&&0!==v&&(r.minDiff=v);null!==n&&null!==p.dataPoints[m-1].y&&(t.axisY.logarithmic?0<n&&(1>(v=n/p.dataPoints[m-1].y)&&(v=1/v),i.minDiff>v&&1!==v&&(i.minDiff=v)):(0>(v=n-p.dataPoints[m-1].y)&&(v*=-1),i.minDiff>v&&0!==v&&(i.minDiff=v)))}if(e<y&&!f)null!==p.dataPoints[m].y&&(u=e);else{if(!f&&(f=!0,0<m)){m-=2;continue}if(e>b&&!g)g=!0;else if(e>b&&g)continue;p.dataPoints[m].label&&(t.axisX.labels[e]=p.dataPoints[m].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),null===p.dataPoints[m].y?r.viewPortMin===e&&u<e&&(r.viewPortMin=u):(t.yTotals[e]=(t.yTotals[e]?t.yTotals[e]:0)+n,0<=n?s[e]?s[e]+=n:(s[e]=n,l=Math.min(n,l)):a[e]?a[e]+=n:(a[e]=n,h=Math.max(n,h)))}}t.axisY.scaleBreaks&&t.axisY.scaleBreaks.autoCalculate&&1<=t.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(i.dataPointYPositiveSums?(i.dataPointYPositiveSums.push.apply(i.dataPointYPositiveSums,s),i.dataPointYNegativeSums.push.apply(i.dataPointYPositiveSums,a)):(i.dataPointYPositiveSums=s,i.dataPointYNegativeSums=a)),p.axisX.valueType=p.xValueType=o?"dateTime":"number"}for(m in s)s.hasOwnProperty(m)&&!isNaN(m)&&((t=s[m])<i.min&&(i.min=Math.min(t,l)),t>i.max&&(i.max=t),m<r.viewPortMin||m>r.viewPortMax||(t<i.viewPortMin&&(i.viewPortMin=Math.min(t,l)),t>i.viewPortMax&&(i.viewPortMax=t)));for(m in a)a.hasOwnProperty(m)&&!isNaN(m)&&((t=a[m])<i.min&&(i.min=t),t>i.max&&(i.max=Math.max(t,h)),m<r.viewPortMin||m>r.viewPortMax||(t<i.viewPortMin&&(i.viewPortMin=t),t>i.viewPortMax&&(i.viewPortMax=Math.max(t,h))))}},e.prototype._processStacked100PlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,o=!1,s=!1,a=!1,l=[],h=0;h<t.dataSeriesIndexes.length;h++){var c,u=this.data[t.dataSeriesIndexes[h]],p=0,m=!1,f=!1;if("normal"===u.axisPlacement||"xySwapped"===u.axisPlacement)var g=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:-1/0,y=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((u.dataPoints[p].x&&u.dataPoints[p].x.getTime||"dateTime"===u.xValueType)&&(o=!0),p=0;p<u.dataPoints.length;p++){if(void 0===u.dataPoints[p].x&&(u.dataPoints[p].x=p+(t.axisX.logarithmic?1:0)),u.dataPoints[p].x.getTime?(o=!0,e=u.dataPoints[p].x.getTime()):e=u.dataPoints[p].x,n=d(u.dataPoints[p].y)?null:u.dataPoints[p].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),0<p){if(t.axisX.logarithmic){var b=e/u.dataPoints[p-1].x;1>b&&(b=1/b),r.minDiff>b&&1!==b&&(r.minDiff=b)}else 0>(b=e-u.dataPoints[p-1].x)&&(b*=-1),r.minDiff>b&&0!==b&&(r.minDiff=b);d(n)||null===u.dataPoints[p-1].y||(t.axisY.logarithmic?0<n&&(1>(b=n/u.dataPoints[p-1].y)&&(b=1/b),i.minDiff>b&&1!==b&&(i.minDiff=b)):(0>(b=n-u.dataPoints[p-1].y)&&(b*=-1),i.minDiff>b&&0!==b&&(i.minDiff=b)))}if(e<g&&!m)null!==n&&(c=e);else{if(!m&&(m=!0,0<p)){p-=2;continue}if(e>y&&!f)f=!0;else if(e>y&&f)continue;u.dataPoints[p].label&&(t.axisX.labels[e]=u.dataPoints[p].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),null===n?r.viewPortMin===e&&c<e&&(r.viewPortMin=c):(t.yTotals[e]=(t.yTotals[e]?t.yTotals[e]:0)+n,0<=n?s=!0:0>n&&(a=!0),l[e]=l[e]?l[e]+Math.abs(n):Math.abs(n))}}u.axisX.valueType=u.xValueType=o?"dateTime":"number"}t.axisY.logarithmic?(i.max=d(i.viewPortMax)?99*Math.pow(t.axisY.logarithmBase,-.05):Math.max(i.viewPortMax,99*Math.pow(t.axisY.logarithmBase,-.05)),i.min=d(i.viewPortMin)?1:Math.min(i.viewPortMin,1)):s&&!a?(i.max=d(i.viewPortMax)?99:Math.max(i.viewPortMax,99),i.min=d(i.viewPortMin)?1:Math.min(i.viewPortMin,1)):s&&a?(i.max=d(i.viewPortMax)?99:Math.max(i.viewPortMax,99),i.min=d(i.viewPortMin)?-99:Math.min(i.viewPortMin,-99)):!s&&a&&(i.max=d(i.viewPortMax)?-1:Math.max(i.viewPortMax,-1),i.min=d(i.viewPortMin)?-99:Math.min(i.viewPortMin,-99)),i.viewPortMin=i.min,i.viewPortMax=i.max,t.dataPointYSums=l}},e.prototype._processMultiYPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,n,i,r,o=t.axisY.dataInfo,s=t.axisX.dataInfo,a=!1,l=0;l<t.dataSeriesIndexes.length;l++){var h,c,u,d=this.data[t.dataSeriesIndexes[l]],p=0,m=!1,f=!1;if("normal"===d.axisPlacement||"xySwapped"===d.axisPlacement)var g=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:t.axisX.logarithmic?0:-1/0,y=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((d.dataPoints[p].x&&d.dataPoints[p].x.getTime||"dateTime"===d.xValueType)&&(a=!0),p=0;p<d.dataPoints.length;p++){if(void 0===d.dataPoints[p].x&&(d.dataPoints[p].x=p+(t.axisX.logarithmic?1:0)),d.dataPoints[p].x.getTime?(a=!0,e=d.dataPoints[p].x.getTime()):e=d.dataPoints[p].x,(n=d.dataPoints[p].y)&&n.length){i=Math.min.apply(null,n),r=Math.max.apply(null,n),c=!0;for(var b=0;b<n.length;b++)null===n.k&&(c=!1);c&&(m||(u=h),h=e)}if(e<s.min&&(s.min=e),e>s.max&&(s.max=e),i<o.min&&(o.min=i),r>o.max&&(o.max=r),0<p&&(t.axisX.logarithmic?(1>(c=e/d.dataPoints[p-1].x)&&(c=1/c),s.minDiff>c&&1!==c&&(s.minDiff=c)):(0>(c=e-d.dataPoints[p-1].x)&&(c*=-1),s.minDiff>c&&0!==c&&(s.minDiff=c)),n&&null!==n[0]&&d.dataPoints[p-1].y&&null!==d.dataPoints[p-1].y[0]&&(t.axisY.logarithmic?(1>(c=n[0]/d.dataPoints[p-1].y[0])&&(c=1/c),o.minDiff>c&&1!==c&&(o.minDiff=c)):(0>(c=n[0]-d.dataPoints[p-1].y[0])&&(c*=-1),o.minDiff>c&&0!==c&&(o.minDiff=c)))),!(e<g)||m){if(!m&&(m=!0,0<p)){p-=2,h=u;continue}if(e>y&&!f)f=!0;else if(e>y&&f)continue;if(d.dataPoints[p].label&&(t.axisX.labels[e]=d.dataPoints[p].label),e<s.viewPortMin&&(s.viewPortMin=e),e>s.viewPortMax&&(s.viewPortMax=e),s.viewPortMin===e&&n)for(b=0;b<n.length;b++)if(null===n[b]&&h<e){s.viewPortMin=h;break}null===n?s.viewPortMin===e&&h<e&&(s.viewPortMin=h):(i<o.viewPortMin&&(o.viewPortMin=i),r>o.viewPortMax&&(o.viewPortMax=r))}}d.axisX.valueType=d.xValueType=a?"dateTime":"number"}},e.prototype._processSpecificPlotUnit=function(t){if("waterfall"===t.type&&t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,n,i=t.axisY.dataInfo,r=t.axisX.dataInfo,o=!1,s=0;s<t.dataSeriesIndexes.length;s++){var a=this.data[t.dataSeriesIndexes[s]],l=0,h=!1,c=!1,u=e=0;if("normal"===a.axisPlacement||"xySwapped"===a.axisPlacement)var d=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:this.options.axisX&&this.options.axisX.viewportMinimum?this.options.axisX.viewportMinimum:this.options.axisX&&this.options.axisX.minimum?this.options.axisX.minimum:t.axisX.logarithmic?0:-1/0,p=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:this.options.axisX&&this.options.axisX.viewportMaximum?this.options.axisX.viewportMaximum:this.options.axisX&&this.options.axisX.maximum?this.options.axisX.maximum:1/0;for((a.dataPoints[l].x&&a.dataPoints[l].x.getTime||"dateTime"===a.xValueType)&&(o=!0),l=0;l<a.dataPoints.length;l++)void 0!==a.dataPoints[l].isCumulativeSum&&!0===a.dataPoints[l].isCumulativeSum?(a.dataPointEOs[l].cumulativeSumYStartValue=0,a.dataPointEOs[l].cumulativeSum=0===l?0:a.dataPointEOs[l-1].cumulativeSum,a.dataPoints[l].y=0===l?0:a.dataPointEOs[l-1].cumulativeSum):void 0!==a.dataPoints[l].isIntermediateSum&&!0===a.dataPoints[l].isIntermediateSum?(a.dataPointEOs[l].cumulativeSumYStartValue=u,a.dataPointEOs[l].cumulativeSum=0===l?0:a.dataPointEOs[l-1].cumulativeSum,a.dataPoints[l].y=0===l?0:e,u=0===l?0:a.dataPointEOs[l-1].cumulativeSum,e=0):(n="number"!=typeof a.dataPoints[l].y?0:a.dataPoints[l].y,a.dataPointEOs[l].cumulativeSumYStartValue=0===l?0:a.dataPointEOs[l-1].cumulativeSum,a.dataPointEOs[l].cumulativeSum=0===l?n:a.dataPointEOs[l-1].cumulativeSum+n,e+=n);for(l=0;l<a.dataPoints.length;l++)if(void 0===a.dataPoints[l].x&&(a.dataPoints[l].x=l+(t.axisX.logarithmic?1:0)),a.dataPoints[l].x.getTime?(o=!0,e=a.dataPoints[l].x.getTime()):e=a.dataPoints[l].x,n=a.dataPoints[l].y,e<r.min&&(r.min=e),e>r.max&&(r.max=e),a.dataPointEOs[l].cumulativeSum<i.min&&(i.min=a.dataPointEOs[l].cumulativeSum),a.dataPointEOs[l].cumulativeSum>i.max&&(i.max=a.dataPointEOs[l].cumulativeSum),0<l&&(t.axisX.logarithmic?(1>(u=e/a.dataPoints[l-1].x)&&(u=1/u),r.minDiff>u&&1!==u&&(r.minDiff=u)):(0>(u=e-a.dataPoints[l-1].x)&&(u*=-1),r.minDiff>u&&0!==u&&(r.minDiff=u)),null!==n&&null!==a.dataPoints[l-1].y&&(t.axisY.logarithmic?(1>(n=a.dataPointEOs[l].cumulativeSum/a.dataPointEOs[l-1].cumulativeSum)&&(n=1/n),i.minDiff>n&&1!==n&&(i.minDiff=n)):(0>(n=a.dataPointEOs[l].cumulativeSum-a.dataPointEOs[l-1].cumulativeSum)&&(n*=-1),i.minDiff>n&&0!==n&&(i.minDiff=n)))),!(e<d)||h){if(!h&&(h=!0,0<l)){l-=2;continue}if(e>p&&!c)c=!0;else if(e>p&&c)continue;a.dataPoints[l].label&&(t.axisX.labels[e]=a.dataPoints[l].label),e<r.viewPortMin&&(r.viewPortMin=e),e>r.viewPortMax&&(r.viewPortMax=e),0<l&&(a.dataPointEOs[l-1].cumulativeSum<i.viewPortMin&&(i.viewPortMin=a.dataPointEOs[l-1].cumulativeSum),a.dataPointEOs[l-1].cumulativeSum>i.viewPortMax&&(i.viewPortMax=a.dataPointEOs[l-1].cumulativeSum)),a.dataPointEOs[l].cumulativeSum<i.viewPortMin&&(i.viewPortMin=a.dataPointEOs[l].cumulativeSum),a.dataPointEOs[l].cumulativeSum>i.viewPortMax&&(i.viewPortMax=a.dataPointEOs[l].cumulativeSum)}a.axisX.valueType=a.xValueType=o?"dateTime":"number"}},e.prototype.calculateAutoBreaks=function(){function t(t,e,n,i){return i?(1>=(n=Math.pow(Math.min(n*t/e,e/t),.2))&&(n=Math.pow(1>t?1/t:Math.min(e/t,t),.25)),{startValue:t*n,endValue:e/n}):(0>=(n=.2*Math.min(n-e+t,e-t))&&(n=.25*Math.min(e-t,Math.abs(t))),{startValue:t+n,endValue:e-n})}function e(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){var e=t.axisX.scaleBreaks&&t.axisX.scaleBreaks.autoCalculate&&1<=t.axisX.scaleBreaks.maxNumberOfAutoBreaks,n=t.axisY.scaleBreaks&&t.axisY.scaleBreaks.autoCalculate&&1<=t.axisY.scaleBreaks.maxNumberOfAutoBreaks;if(e||n)for(var i,o,s=(c=t.axisX.dataInfo).min,a=c.max,l=(u=t.axisY.dataInfo).min,h=u.max,c=c._dataRanges,u=u._dataRanges,p=0,m=0;m<t.dataSeriesIndexes.length;m++){var f=r.data[t.dataSeriesIndexes[m]];if(!(4>f.dataPoints.length))for(p=0;p<f.dataPoints.length;p++)if(e&&(o=(a+1-s)*Math.max(parseFloat(t.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,(i=f.dataPoints[p].x.getTime?f.dataPoints[p].x.getTime():f.dataPoints[p].x)<c[o=Math.floor((i-s)/o)].min&&(c[o].min=i),i>c[o].max&&(c[o].max=i)),n){var g=(h+1-l)*Math.max(parseFloat(t.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((i="waterfall"===t.type?f.dataPointEOs[p].cumulativeSum:f.dataPoints[p].y)&&i.length)for(var y=0;y<i.length;y++)o=Math.floor((i[y]-l)/g),i[y]<u[o].min&&(u[o].min=i[y]),i[y]>u[o].max&&(u[o].max=i[y]);else d(i)||(i<u[o=Math.floor((i-l)/g)].min&&(u[o].min=i),i>u[o].max&&(u[o].max=i))}}}}function n(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)&&t.axisX.scaleBreaks&&t.axisX.scaleBreaks.autoCalculate&&1<=t.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var e,n=t.axisX.dataInfo,i=n.min,o=n.max,s=n._dataRanges,a=0,l=0;l<t.dataSeriesIndexes.length;l++){var h=r.data[t.dataSeriesIndexes[l]];if(!(4>h.dataPoints.length))for(a=0;a<h.dataPoints.length;a++)e=(o+1-i)*Math.max(parseFloat(t.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,(n=h.dataPoints[a].x.getTime?h.dataPoints[a].x.getTime():h.dataPoints[a].x)<s[e=Math.floor((n-i)/e)].min&&(s[e].min=n),n>s[e].max&&(s[e].max=n)}}for(var i,r=this,o=!1,s=0;s<this._axes.length;s++)if(this._axes[s].scaleBreaks&&this._axes[s].scaleBreaks.autoCalculate&&1<=this._axes[s].scaleBreaks.maxNumberOfAutoBreaks){o=!0,this._axes[s].dataInfo._dataRanges=[];for(var a=0;a<100/Math.max(parseFloat(this._axes[s].scaleBreaks.collapsibleThreshold)||10,10);a++)this._axes[s].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(o){for(s=0;s<this.plotInfo.plotTypes.length;s++)for(o=this.plotInfo.plotTypes[s],a=0;a<o.plotUnits.length;a++)"line"===(i=o.plotUnits[a]).type||"stepLine"===i.type||"spline"===i.type||"column"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"bar"===i.type||"bubble"===i.type||"scatter"===i.type||"candlestick"===i.type||"ohlc"===i.type||"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type||"waterfall"===i.type||"error"===i.type||"boxAndWhisker"===i.type?e(i):0<=i.type.indexOf("stacked")&&n(i);for(s=0;s<this._axes.length;s++)if(this._axes[s].dataInfo._dataRanges){var l=this._axes[s].dataInfo.min;i=(this._axes[s].dataInfo.max+1-l)*Math.max(parseFloat(this._axes[s].scaleBreaks.collapsibleThreshold)||10,10)/100;var h,c,u=this._axes[s].dataInfo._dataRanges;if(o=[],this._axes[s].dataInfo.dataPointYPositiveSums){var p=this._axes[s].dataInfo.dataPointYPositiveSums;for(a in h=u,p)if(p.hasOwnProperty(a)&&!isNaN(a)&&!d(c=p[a])){var m=Math.floor((c-l)/i);c<h[m].min&&(h[m].min=c),c>h[m].max&&(h[m].max=c)}delete this._axes[s].dataInfo.dataPointYPositiveSums}if(this._axes[s].dataInfo.dataPointYNegativeSums){for(a in h=u,p=this._axes[s].dataInfo.dataPointYNegativeSums)p.hasOwnProperty(a)&&!isNaN(a)&&(d(c=-1*p[a])||(c<h[m=Math.floor((c-l)/i)].min&&(h[m].min=c),c>h[m].max&&(h[m].max=c)));delete this._axes[s].dataInfo.dataPointYNegativeSums}for(a=0;a<u.length-1;a++)if(h=u[a].max,isFinite(h))for(;a<u.length-1;){if(l=u[a+1].min,isFinite(l)){(c=l-h)>i&&o.push({diff:c,start:h,end:l});break}a++}if(this._axes[s].scaleBreaks.customBreaks)for(a=0;a<this._axes[s].scaleBreaks.customBreaks.length;a++)for(i=0;i<o.length;i++)(this._axes[s].scaleBreaks.customBreaks[a].startValue<=o[i].start&&o[i].start<=this._axes[s].scaleBreaks.customBreaks[a].endValue||this._axes[s].scaleBreaks.customBreaks[a].startValue<=o[i].start&&o[i].start<=this._axes[s].scaleBreaks.customBreaks[a].endValue||o[i].start<=this._axes[s].scaleBreaks.customBreaks[a].startValue&&this._axes[s].scaleBreaks.customBreaks[a].startValue<=o[i].end||o[i].start<=this._axes[s].scaleBreaks.customBreaks[a].endValue&&this._axes[s].scaleBreaks.customBreaks[a].endValue<=o[i].end)&&(o.splice(i,1),i--);for(o.sort((function(t,e){return e.diff-t.diff})),a=0;a<Math.min(o.length,this._axes[s].scaleBreaks.maxNumberOfAutoBreaks);a++)i=t(o[a].start,o[a].end,this._axes[s].logarithmic?this._axes[s].dataInfo.max/this._axes[s].dataInfo.min:this._axes[s].dataInfo.max-this._axes[s].dataInfo.min,this._axes[s].logarithmic),this._axes[s].scaleBreaks.autoBreaks.push(new V(this,"autoBreaks",i,a,++this._eventManager.lastObjectId,this._axes[s].scaleBreaks)),this._axes[s].scaleBreaks._appliedBreaks.push(this._axes[s].scaleBreaks.autoBreaks[this._axes[s].scaleBreaks.autoBreaks.length-1]);this._axes[s].scaleBreaks._appliedBreaks.sort((function(t,e){return t.startValue-e.startValue}))}}},e.prototype.getDataPointAtXY=function(t,e,n){n=n||!1;for(var i=[],r=this._dataInRenderedOrder.length-1;0<=r;r--){var o;(o=this._dataInRenderedOrder[r].getDataPointAtXY(t,e,n))&&i.push(o)}for(t=null,e=!1,n=0;n<i.length;n++)if(("line"===i[n].dataSeries.type||"stepLine"===i[n].dataSeries.type||"area"===i[n].dataSeries.type||"stepArea"===i[n].dataSeries.type)&&(r=v("markerSize",i[n].dataPoint,i[n].dataSeries)||8,i[n].distance<=r/2)){e=!0;break}for(n=0;n<i.length;n++)e&&"line"!==i[n].dataSeries.type&&"stepLine"!==i[n].dataSeries.type&&"area"!==i[n].dataSeries.type&&"stepArea"!==i[n].dataSeries.type||(t?i[n].distance<=t.distance&&(t=i[n]):t=i[n]);return t},e.prototype.getObjectAtXY=function(t,e,n){var i=null;if(n=this.getDataPointAtXY(t,e,n||!1))i=n.dataSeries.dataPointIds[n.dataPointIndex];else if(G)i=b(t,e,this._eventManager.ghostCtx);else for(n=0;n<this.legend.items.length;n++){var r=this.legend.items[n];t>=r.x1&&t<=r.x2&&e>=r.y1&&e<=r.y2&&(i=r.id)}return i},e.prototype.getAutoFontSize=it,e.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},e.prototype.clearCanvas=nt,e.prototype.attachEvent=function(t){this._events.push(t)},e.prototype._touchEventHandler=function(t){if(t.changedTouches&&this.interactivityEnabled){var e=[],n=t.changedTouches,i=n?n[0]:t,r=null;switch(t.type){case"touchstart":case"MSPointerDown":e=["mousemove","mousedown"],this._lastTouchData=st(i),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":e=["mousemove"];break;case"touchend":case"MSPointerUp":var o=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0;e="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType||300>o?["mouseup","click"]:["mouseup"];break;default:return}if(!(n&&1<n.length)){(r=st(i)).time=new Date;try{var s=r.y-this._lastTouchData.y;o=r.time-this._lastTouchData.time,(1<Math.abs(s)&&this._lastTouchData.scroll||5<Math.abs(s)&&250>o)&&(this._lastTouchData.scroll=!0)}catch(a){}if(this._lastTouchEventType=t.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(n=0;n<e.length;n++)r=e[n],(s=document.createEvent("MouseEvent")).initMouseEvent(r,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(s),(!d(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<o||"click"===r)&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault())}}},e.prototype._dispatchRangeEvent=function(t,e){var n={chart:this};n.type=t,n.trigger=e;var i=[];this.axisX&&0<this.axisX.length&&i.push("axisX"),this.axisX2&&0<this.axisX2.length&&i.push("axisX2"),this.axisY&&0<this.axisY.length&&i.push("axisY"),this.axisY2&&0<this.axisY2.length&&i.push("axisY2");for(var r=0;r<i.length;r++)if(d(n[i[r]])&&(n[i[r]]=[]),"axisY"===i[r])for(var o=0;o<this.axisY.length;o++)n[i[r]].push({viewportMinimum:this[i[r]][o].sessionVariables.newViewportMinimum,viewportMaximum:this[i[r]][o].sessionVariables.newViewportMaximum});else if("axisY2"===i[r])for(o=0;o<this.axisY2.length;o++)n[i[r]].push({viewportMinimum:this[i[r]][o].sessionVariables.newViewportMinimum,viewportMaximum:this[i[r]][o].sessionVariables.newViewportMaximum});else if("axisX"===i[r])for(o=0;o<this.axisX.length;o++)n[i[r]].push({viewportMinimum:this[i[r]][o].sessionVariables.newViewportMinimum,viewportMaximum:this[i[r]][o].sessionVariables.newViewportMaximum});else if("axisX2"===i[r])for(o=0;o<this.axisX2.length;o++)n[i[r]].push({viewportMinimum:this[i[r]][o].sessionVariables.newViewportMinimum,viewportMaximum:this[i[r]][o].sessionVariables.newViewportMaximum});this.dispatchEvent(t,n,this)},e.prototype._mouseEventHandler=function(t){void 0===t.target&&t.srcElement&&(t.target=t.srcElement);var n,i,r=st(t),o=t.type;if(t.which?i=3==t.which:t.button&&(i=2==t.button),e.capturedEventParam&&(n=e.capturedEventParam,"mouseup"===o&&(e.capturedEventParam=null,n.chart.overlaidCanvas.releaseCapture?n.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",n.chart._mouseEventHandler,!1)),n.hasOwnProperty(o)&&("mouseup"!==o||n.chart.overlaidCanvas.releaseCapture?t.target!==n.chart.overlaidCanvas&&G||n[o].call(n.context,r.x,r.y):t.target!==n.chart.overlaidCanvas&&(n.chart.isDrag=!1))),this.interactivityEnabled)if(this._ignoreNextEvent)this._ignoreNextEvent=!1;else if(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),W&&window.console&&(window.console.log(o+" --\x3e x: "+r.x+"; y:"+r.y),i&&window.console.log(t.which),"mouseup"===o&&window.console.log("mouseup")),!i){if(!e.capturedEventParam&&this._events){for(var s=0;s<this._events.length;s++)if(this._events[s].hasOwnProperty(o)){if(r.x>=(i=(n=this._events[s]).bounds).x1&&r.x<=i.x2&&r.y>=i.y1&&r.y<=i.y2){n[o].call(n.context,r.x,r.y),"mousedown"===o&&!0===n.capture?(e.capturedEventParam=n,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===o&&(n.chart.overlaidCanvas.releaseCapture?n.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}n=null}t.target.style.cursor=n&&n.cursor?n.cursor:this._defaultCursor}(r.x<(o=this.plotArea).x1||r.x>o.x2||r.y<o.y1||r.y>o.y2)&&(this.toolTip&&this.toolTip.enabled?this.toolTip.hide():this.resetOverlayedCanvas()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(t)}},e.prototype._plotAreaMouseDown=function(t,e){this.isDrag=!0,this.dragStartPoint={x:t,y:e}},e.prototype._plotAreaMouseUp=function(t,e){if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var n=e-this.dragStartPoint.y,i=t-this.dragStartPoint.x,r=0<=this.zoomType.indexOf("x"),o=0<=this.zoomType.indexOf("y"),s=!1;if(this.resetOverlayedCanvas(),"xySwapped"===this.plotInfo.axisPlacement){var a=o;o=r,r=a}if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(r=o=0;r<this._axes.length;r++)(n=this._axes[r]).logarithmic?n.viewportMinimum<n.minimum?(n.sessionVariables.newViewportMinimum=n.viewportMinimum*(o=n.minimum/n.viewportMinimum),n.sessionVariables.newViewportMaximum=n.viewportMaximum*o,s=!0):n.viewportMaximum>n.maximum&&(n.sessionVariables.newViewportMinimum=n.viewportMinimum/(o=n.viewportMaximum/n.maximum),n.sessionVariables.newViewportMaximum=n.viewportMaximum/o,s=!0):n.viewportMinimum<n.minimum?(n.sessionVariables.newViewportMinimum=n.viewportMinimum+(o=n.minimum-n.viewportMinimum),n.sessionVariables.newViewportMaximum=n.viewportMaximum+o,s=!0):n.viewportMaximum>n.maximum&&(n.sessionVariables.newViewportMinimum=n.viewportMinimum-(o=n.viewportMaximum-n.maximum),n.sessionVariables.newViewportMaximum=n.viewportMaximum-o,s=!0);else if((!r||2<Math.abs(i))&&(!o||2<Math.abs(n))&&this.zoomEnabled){if(!this.dragStartPoint)return;n=r?this.dragStartPoint.x:this.plotArea.x1,i=o?this.dragStartPoint.y:this.plotArea.y1,r=r?t:this.plotArea.x2,o=o?e:this.plotArea.y2,2<Math.abs(n-r)&&2<Math.abs(i-o)&&this._zoomPanToSelectedRegion(n,i,r,o)&&(s=!0)}s&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),s&&this.zoomEnabled&&"none"===this._zoomButton.style.display&&(w(this._zoomButton,this._resetButton),k(this,this._zoomButton,"pan"),k(this,this._resetButton,"reset")))}}if(this.isDrag=!1,"none"!==this.plotInfo.axisPlacement){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(s=0;s<this.axisX.length;s++)this.axisX[s].crosshair&&this.axisX[s].crosshair.enabled&&this.axisX[s].renderCrosshair(t,e);if(this.axisX2&&0<this.axisX2.length)for(s=0;s<this.axisX2.length;s++)this.axisX2[s].crosshair&&this.axisX2[s].crosshair.enabled&&this.axisX2[s].renderCrosshair(t,e);if(this.axisY&&0<this.axisY.length)for(s=0;s<this.axisY.length;s++)this.axisY[s].crosshair&&this.axisY[s].crosshair.enabled&&this.axisY[s].renderCrosshair(t,e);if(this.axisY2&&0<this.axisY2.length)for(s=0;s<this.axisY2.length;s++)this.axisY2[s].crosshair&&this.axisY2[s].crosshair.enabled&&this.axisY2[s].renderCrosshair(t,e)}},e.prototype._plotAreaMouseMove=function(t,e){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var n=0,i=0,r=n=null,o=(r=0<=this.zoomType.indexOf("x"),0<=this.zoomType.indexOf("y")),s=this;if("xySwapped"===this.plotInfo.axisPlacement&&(n=o,o=r,r=n),n=this.dragStartPoint.x-t,i=this.dragStartPoint.y-e,2<Math.abs(n)&&8>Math.abs(n)&&(this.panEnabled||this.zoomEnabled)?this.toolTip.hide():this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(t,e),(!r||2<Math.abs(n)||!o||2<Math.abs(i))&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled)r={x1:r?this.plotArea.x1+n:this.plotArea.x1,y1:o?this.plotArea.y1+i:this.plotArea.y1,x2:r?this.plotArea.x2+n:this.plotArea.x2,y2:o?this.plotArea.y2+i:this.plotArea.y2},clearTimeout(s._panTimerId),s._panTimerId=setTimeout(function(n,i,r,o){return function(){s._zoomPanToSelectedRegion(n,i,r,o,!0)&&(s._dispatchRangeEvent("rangeChanging","pan"),s.render(),s._dispatchRangeEvent("rangeChanged","pan"),s.dragStartPoint.x=t,s.dragStartPoint.y=e)}}(r.x1,r.y1,r.x2,r.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),n=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";var a=o?this.dragStartPoint.y:this.plotArea.y1,l=r?t-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,h=o?e-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(i=r?this.dragStartPoint.x:this.plotArea.x1,a,r?t:this.plotArea.x2-this.plotArea.x1,o?e:this.plotArea.y2-this.plotArea.y1,"xy"!==this.zoomType).isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(i,a,l,h),this.overlaidCanvasCtx.globalAlpha=n}}else if(this.toolTip.mouseMoveHandler(t,e),"none"!==this.plotInfo.axisPlacement){if(this.axisX&&0<this.axisX.length)for(r=0;r<this.axisX.length;r++)this.axisX[r].crosshair&&this.axisX[r].crosshair.enabled&&this.axisX[r].renderCrosshair(t,e);if(this.axisX2&&0<this.axisX2.length)for(r=0;r<this.axisX2.length;r++)this.axisX2[r].crosshair&&this.axisX2[r].crosshair.enabled&&this.axisX2[r].renderCrosshair(t,e);if(this.axisY&&0<this.axisY.length)for(r=0;r<this.axisY.length;r++)this.axisY[r].crosshair&&this.axisY[r].crosshair.enabled&&this.axisY[r].renderCrosshair(t,e);if(this.axisY2&&0<this.axisY2.length)for(r=0;r<this.axisY2.length;r++)this.axisY2[r].crosshair&&this.axisY2[r].crosshair.enabled&&this.axisY2[r].renderCrosshair(t,e)}},e.prototype._zoomPanToSelectedRegion=function(t,e,n,i,r){if(e=(t=this.validateRegion(t,e,n,i,r)).axesWithValidRange,n=t.axesRanges,t.isValid)for(i=0;i<e.length;i++)e[i].setViewPortRange((r=n[i]).val1,r.val2),this.syncCharts&&this.syncCharts(r.val1,r.val2);return t.isValid},e.prototype.validateRegion=function(t,e,n,i,r){r=r||!1;for(var o=0<=this.zoomType.indexOf("x"),s=0<=this.zoomType.indexOf("y"),a=!1,l=[],h=[],c=[],u=0;u<this._axes.length;u++)("axisX"===this._axes[u].type&&o||"axisY"===this._axes[u].type&&s)&&h.push(this._axes[u]);for(s=0;s<h.length;s++){if(o=!1,(m=(u=h[s]).convertPixelToValue({x:t,y:e}))>(p=u.convertPixelToValue({x:n,y:i})))var d=p,p=m,m=d;if(u.scaleBreaks)for(d=0;!o&&d<u.scaleBreaks._appliedBreaks.length;d++)o=u.scaleBreaks._appliedBreaks[d].startValue<=m&&u.scaleBreaks._appliedBreaks[d].endValue>=p;if(isFinite(u.dataInfo.minDiff))if(d=u.getApparentDifference(m,p,null,!0),o||!(this.panEnabled&&u.scaleBreaks&&u.scaleBreaks._appliedBreaks.length)&&(u.logarithmic&&d<Math.pow(u.dataInfo.minDiff,3)||!u.logarithmic&&d<3*Math.abs(u.dataInfo.minDiff))||m<u.minimum||p>u.maximum){if(!r){a=!1;break}}else l.push(u),c.push({val1:m,val2:p}),a=!0}return{isValid:a,axesWithValidRange:l,axesRanges:c}},e.prototype.preparePlotArea=function(){var t=this.plotArea;if(!G&&(0<t.x1||0<t.y1)&&t.ctx.translate(t.x1,t.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var e=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&0<this.axisY.length&&this.axisY[0]){var n=this.axisY[0];t.x1=e.x1<e.x2?e.x1:n.lineCoordinates.x1,t.y1=e.y1<n.lineCoordinates.y1?e.y1:n.lineCoordinates.y1,t.x2=e.x2>n.lineCoordinates.x2?e.x2:n.lineCoordinates.x2,t.y2=e.y2>e.y1?e.y2:n.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1}this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(n=this.axisY2[0],t.x1=e.x1<e.x2?e.x1:n.lineCoordinates.x1,t.y1=e.y1<n.lineCoordinates.y1?e.y1:n.lineCoordinates.y1,t.x2=e.x2>n.lineCoordinates.x2?e.x2:n.lineCoordinates.x2,t.y2=e.y2>e.y1?e.y2:n.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1)}else e=this.layoutManager.getFreeSpace(),t.x1=e.x1,t.x2=e.x2,t.y1=e.y1,t.y2=e.y2,t.width=e.width,t.height=e.height;G||(t.canvas.width=t.width,t.canvas.height=t.height,t.canvas.style.left=t.x1+"px",t.canvas.style.top=t.y1+"px",(0<t.x1||0<t.y1)&&t.ctx.translate(-t.x1,-t.y1)),t.layoutManager=new A(t.x1,t.y1,t.x2,t.y2,2)},e.prototype.renderIndexLabels=function(t){var e=t||this.plotArea.ctx,n=this.plotArea,i=0,r=0,o=0,s=0,a=i=s=r=o=0,l=0;for(t=0;t<this._indexLabels.length;t++){var h,c,u=this._indexLabels[t],p=u.chartType.toLowerCase();a=v("indexLabelFontColor",u.dataPoint,u.dataSeries),l=v("indexLabelFontSize",u.dataPoint,u.dataSeries),h=v("indexLabelFontFamily",u.dataPoint,u.dataSeries),c=v("indexLabelFontStyle",u.dataPoint,u.dataSeries),s=v("indexLabelFontWeight",u.dataPoint,u.dataSeries);var m=v("indexLabelBackgroundColor",u.dataPoint,u.dataSeries),f=(r=v("indexLabelMaxWidth",u.dataPoint,u.dataSeries),o=v("indexLabelWrap",u.dataPoint,u.dataSeries),v("indexLabelLineDashType",u.dataPoint,u.dataSeries)),y=v("indexLabelLineColor",u.dataPoint,u.dataSeries),b=d(u.dataPoint.indexLabelLineThickness)?d(u.dataSeries.options.indexLabelLineThickness)?0:u.dataSeries.options.indexLabelLineThickness:u.dataPoint.indexLabelLineThickness,C=(i=0<b?Math.min(10,("normal"===this.plotInfo.axisPlacement?this.plotArea.height:this.plotArea.width)<<0):0,{percent:null,total:null}),S=null;(0<=u.dataSeries.type.indexOf("stacked")||"pie"===u.dataSeries.type||"doughnut"===u.dataSeries.type)&&(C=this.getPercentAndTotal(u.dataSeries,u.dataPoint)),(u.dataSeries.indexLabelFormatter||u.dataPoint.indexLabelFormatter)&&(S={chart:this,dataSeries:u.dataSeries,dataPoint:u.dataPoint,index:u.indexKeyword,total:C.total,percent:C.percent});var x=u.dataPoint.indexLabelFormatter?u.dataPoint.indexLabelFormatter(S):u.dataPoint.indexLabel?this.replaceKeywordsWithValue(u.dataPoint.indexLabel,u.dataPoint,u.dataSeries,null,u.indexKeyword):u.dataSeries.indexLabelFormatter?u.dataSeries.indexLabelFormatter(S):u.dataSeries.indexLabel?this.replaceKeywordsWithValue(u.dataSeries.indexLabel,u.dataPoint,u.dataSeries,null,u.indexKeyword):null;if(null!==x&&""!==x){C=v("indexLabelPlacement",u.dataPoint,u.dataSeries),S=v("indexLabelOrientation",u.dataPoint,u.dataSeries);var _=u.direction,k=u.dataSeries.axisX,w=u.dataSeries.axisY,T=!1;if((m=new P(e,{x:0,y:0,maxWidth:r||.5*this.width,maxHeight:o?5*l:1.5*l,angle:"horizontal"===S?0:-90,text:x,padding:0,backgroundColor:m,horizontalAlign:"left",fontSize:l,fontFamily:h,fontWeight:s,fontColor:a,fontStyle:c,textBaseline:"top"})).measureText(),u.dataSeries.indexLabelMaxWidth=m.maxWidth,"stackedarea100"===p){if(u.point.x<n.x1||u.point.x>n.x2||u.point.y<n.y1-1||u.point.y>n.y2+1)continue}else if("rangearea"===p||"rangesplinearea"===p){if(u.dataPoint.x<k.viewportMinimum||u.dataPoint.x>k.viewportMaximum||Math.max.apply(null,u.dataPoint.y)<w.viewportMinimum||Math.min.apply(null,u.dataPoint.y)>w.viewportMaximum)continue}else if(0<=p.indexOf("line")||0<=p.indexOf("area")||0<=p.indexOf("bubble")||0<=p.indexOf("scatter")){if(u.dataPoint.x<k.viewportMinimum||u.dataPoint.x>k.viewportMaximum||u.dataPoint.y<w.viewportMinimum||u.dataPoint.y>w.viewportMaximum)continue}else if(0<=p.indexOf("column")||"waterfall"===p||"error"===p&&!u.axisSwapped){if(u.dataPoint.x<k.viewportMinimum||u.dataPoint.x>k.viewportMaximum||u.bounds.y1>n.y2||u.bounds.y2<n.y1)continue}else if(0<=p.indexOf("bar")||"error"===p){if(u.dataPoint.x<k.viewportMinimum||u.dataPoint.x>k.viewportMaximum||u.bounds.x1>n.x2||u.bounds.x2<n.x1)continue}else if("candlestick"===p||"ohlc"===p){if(u.dataPoint.x<k.viewportMinimum||u.dataPoint.x>k.viewportMaximum||Math.max.apply(null,u.dataPoint.y)<w.viewportMinimum||Math.min.apply(null,u.dataPoint.y)>w.viewportMaximum)continue}else if(u.dataPoint.x<k.viewportMinimum||u.dataPoint.x>k.viewportMaximum)continue;r=s=2,"horizontal"===S?(a=m.width,l=m.height):(l=m.width,a=m.height),"normal"===this.plotInfo.axisPlacement?(0<=p.indexOf("line")||0<=p.indexOf("area")?(C="auto",s=4):0<=p.indexOf("stacked")?"auto"===C&&(C="inside"):"bubble"!==p&&"scatter"!==p||(C="inside"),h=u.point.x-a/2,"inside"!==C?(r=n.y1,o=n.y2,0<_?(c=u.point.y-l-s-i)<r&&(T=(c="auto"===C?Math.max(u.point.y,r)+s+i:r+s+i)+l>u.point.y):(c=u.point.y+s+i)>o-l-s-i&&(T=(c="auto"===C?Math.min(u.point.y,o)-l-s-i:o-l-s-i)<u.point.y)):(r=Math.max(u.bounds.y1,n.y1),o=Math.min(u.bounds.y2,n.y2),i=0<=p.indexOf("range")||"error"===p?0<_?Math.max(u.bounds.y1,n.y1)+l/2+s:Math.min(u.bounds.y2,n.y2)-l/2-s:(Math.max(u.bounds.y1,n.y1)+Math.min(u.bounds.y2,n.y2))/2,0<_?(c=Math.max(u.point.y,i)-l/2)<r&&("bubble"===p||"scatter"===p)&&(c=Math.max(u.point.y-l-s,n.y1+s)):(c=Math.min(u.point.y,i)-l/2)>o-l-s&&("bubble"===p||"scatter"===p)&&(c=Math.min(u.point.y+s,n.y2-l-s)),c=Math.min(c,o-l))):(0<=p.indexOf("line")||0<=p.indexOf("area")||0<=p.indexOf("scatter")?(C="auto",r=4):0<=p.indexOf("stacked")?"auto"===C&&(C="inside"):"bubble"===p&&(C="inside"),c=u.point.y-l/2,"inside"!==C?(s=n.x1,o=n.x2,0>_?(h=u.point.x-a-r-i)<s&&(T=(h="auto"===C?Math.max(u.point.x,s)+r+i:s+r+i)+a>u.point.x):(h=u.point.x+r+i)>o-a-r-i&&(T=(h="auto"===C?Math.min(u.point.x,o)-a-r-i:o-a-r-i)<u.point.x)):(s=Math.max(u.bounds.x1,n.x1),Math.min(u.bounds.x2,n.x2),i=0<=p.indexOf("range")||"error"===p?0>_?Math.max(u.bounds.x1,n.x1)+a/2+r:Math.min(u.bounds.x2,n.x2)-a/2-r:(Math.max(u.bounds.x1,n.x1)+Math.min(u.bounds.x2,n.x2))/2,h=0>_?Math.max(u.point.x,i)-a/2:Math.min(u.point.x,i)-a/2,h=Math.max(h,s))),"vertical"===S&&(c+=l),m.x=h,m.y=c,m.render(!0),b&&"inside"!==C&&(0>p.indexOf("bar")&&("error"!==p||!u.axisSwapped)&&u.point.x>n.x1&&u.point.x<n.x2||!T)&&(0>p.indexOf("column")&&("error"!==p||u.axisSwapped)&&u.point.y>n.y1&&u.point.y<n.y2||!T)&&(e.lineWidth=b,e.strokeStyle=y||"gray",e.setLineDash&&e.setLineDash(g(f,b)),e.beginPath(),e.moveTo(u.point.x,u.point.y),0<=p.indexOf("bar")||"error"===p&&u.axisSwapped?e.lineTo(h+(0<u.direction?0:a),c+("horizontal"===S?l:-l)/2):0<=p.indexOf("column")||"error"===p&&!u.axisSwapped?e.lineTo(h+a/2,c+((0<u.direction?l:-l)+("horizontal"===S?l:-l))/2):e.lineTo(h+a/2,c+((c<u.point.y?l:-l)+("horizontal"===S?l:-l))/2),e.stroke())}}for(e={source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0,startTimePercent:.7},t=0;t<this._indexLabels.length;t++)m=v("indexLabelBackgroundColor",(u=this._indexLabels[t]).dataPoint,u.dataSeries),u.dataSeries.indexLabelBackgroundColor=d(m)?G?"transparent":null:m;return e},e.prototype.renderLine=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;n.save();var r=this.plotArea;n.beginPath(),n.rect(r.x1,r.y1,r.width,r.height),n.clip();for(var o,s=[],a=0;a<t.dataSeriesIndexes.length;a++){var l=t.dataSeriesIndexes[a],h=this.data[l];n.lineWidth=h.lineThickness;var u=h.dataPoints,d="solid";if(n.setLineDash){var p=g(h.nullDataLineDashType,h.lineThickness),m=g(d=h.lineDashType,h.lineThickness);n.setLineDash(m)}this._eventManager.objectMap[f=h.id]={objectType:"dataSeries",dataSeriesIndex:l},f=c(f),i.strokeStyle=f,i.lineWidth=0<h.lineThickness?Math.max(h.lineThickness,4):0;var f=h._colorSet,y=f=h.lineColor=h.options.lineColor?h.options.lineColor:f[0];n.strokeStyle=f;var b,v,C=!0,S=0;if(n.beginPath(),0<u.length){var x=!1;for(S=0;S<u.length;S++)if(!((b=u[S].x.getTime?u[S].x.getTime():u[S].x)<t.axisX.dataInfo.viewPortMin||b>t.axisX.dataInfo.viewPortMax&&(!h.connectNullData||!x)))if("number"!=typeof u[S].y)0<S&&!(h.connectNullData||x||C)&&(n.stroke(),G&&i.stroke()),x=!0;else{b=t.axisX.convertValueToPixel(b),v=t.axisY.convertValueToPixel(u[S].y);var _=h.dataPointIds[S];if(this._eventManager.objectMap[_]={id:_,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:S,x1:b,y1:v},C||x?(!C&&h.connectNullData?(n.setLineDash&&(h.options.nullDataLineDashType||d===h.lineDashType&&h.lineDashType!==h.nullDataLineDashType)&&(n.stroke(),n.beginPath(),n.moveTo(o.x,o.y),d=h.nullDataLineDashType,n.setLineDash(p)),n.lineTo(b,v),G&&i.lineTo(b,v)):(n.beginPath(),n.moveTo(b,v),G&&(i.beginPath(),i.moveTo(b,v))),x=C=!1):(n.lineTo(b,v),G&&i.lineTo(b,v),0==S%500&&(n.stroke(),n.beginPath(),n.moveTo(b,v),G&&(i.stroke(),i.beginPath(),i.moveTo(b,v)))),o={x:b,y:v},S<u.length-1&&(y!==(u[S].lineColor||f)||d!==(u[S].lineDashType||h.lineDashType))&&(n.stroke(),n.beginPath(),n.moveTo(b,v),n.strokeStyle=y=u[S].lineColor||f,n.setLineDash&&(u[S].lineDashType?n.setLineDash(g(d=u[S].lineDashType,h.lineThickness)):(d=h.lineDashType,n.setLineDash(m)))),0<u[S].markerSize||0<h.markerSize){var k=h.getMarkerProperties(S,b,v,n);s.push(k),_=c(_),G&&s.push({x:b,y:v,ctx:i,type:k.type,size:k.size,color:_,borderColor:_,borderThickness:k.borderThickness})}(u[S].indexLabel||h.indexLabel||u[S].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:u[S],dataSeries:h,point:{x:b,y:v},direction:0>u[S].y===t.axisY.reversed?1:-1,color:f})}n.stroke(),G&&i.stroke()}}return tt.drawMarkers(s),G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(r.x1,r.y1,r.width,r.height),i.beginPath()),n.restore(),n.beginPath(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderStepLine=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;n.save();var r=this.plotArea;n.beginPath(),n.rect(r.x1,r.y1,r.width,r.height),n.clip();for(var o,s=[],a=0;a<t.dataSeriesIndexes.length;a++){var l=t.dataSeriesIndexes[a],h=this.data[l];n.lineWidth=h.lineThickness;var u=h.dataPoints,d="solid";if(n.setLineDash){var p=g(h.nullDataLineDashType,h.lineThickness),m=g(d=h.lineDashType,h.lineThickness);n.setLineDash(m)}this._eventManager.objectMap[f=h.id]={objectType:"dataSeries",dataSeriesIndex:l},f=c(f),i.strokeStyle=f,i.lineWidth=0<h.lineThickness?Math.max(h.lineThickness,4):0;var f=h._colorSet,y=f=h.lineColor=h.options.lineColor?h.options.lineColor:f[0];n.strokeStyle=f;var b,v,C=!0,S=0;if(n.beginPath(),0<u.length){var x=!1;for(S=0;S<u.length;S++)if(!((b=u[S].getTime?u[S].x.getTime():u[S].x)<t.axisX.dataInfo.viewPortMin||b>t.axisX.dataInfo.viewPortMax&&(!h.connectNullData||!x)))if("number"!=typeof u[S].y)0<S&&!(h.connectNullData||x||C)&&(n.stroke(),G&&i.stroke()),x=!0;else{var _=v;b=t.axisX.convertValueToPixel(b),v=t.axisY.convertValueToPixel(u[S].y);var k=h.dataPointIds[S];this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:S,x1:b,y1:v},C||x?(!C&&h.connectNullData?(n.setLineDash&&(h.options.nullDataLineDashType||d===h.lineDashType&&h.lineDashType!==h.nullDataLineDashType)&&(n.stroke(),n.beginPath(),n.moveTo(o.x,o.y),d=h.nullDataLineDashType,n.setLineDash(p)),n.lineTo(b,_),n.lineTo(b,v),G&&(i.lineTo(b,_),i.lineTo(b,v))):(n.beginPath(),n.moveTo(b,v),G&&(i.beginPath(),i.moveTo(b,v))),x=C=!1):(n.lineTo(b,_),G&&i.lineTo(b,_),n.lineTo(b,v),G&&i.lineTo(b,v),0==S%500&&(n.stroke(),n.beginPath(),n.moveTo(b,v),G&&(i.stroke(),i.beginPath(),i.moveTo(b,v)))),o={x:b,y:v},S<u.length-1&&(y!==(u[S].lineColor||f)||d!==(u[S].lineDashType||h.lineDashType))&&(n.stroke(),n.beginPath(),n.moveTo(b,v),n.strokeStyle=y=u[S].lineColor||f,n.setLineDash&&(u[S].lineDashType?n.setLineDash(g(d=u[S].lineDashType,h.lineThickness)):(d=h.lineDashType,n.setLineDash(m)))),(0<u[S].markerSize||0<h.markerSize)&&(_=h.getMarkerProperties(S,b,v,n),s.push(_),k=c(k),G&&s.push({x:b,y:v,ctx:i,type:_.type,size:_.size,color:k,borderColor:k,borderThickness:_.borderThickness})),(u[S].indexLabel||h.indexLabel||u[S].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:u[S],dataSeries:h,point:{x:b,y:v},direction:0>u[S].y===t.axisY.reversed?1:-1,color:f})}n.stroke(),G&&i.stroke()}}return tt.drawMarkers(s),G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(r.x1,r.y1,r.width,r.height),i.beginPath()),n.restore(),n.beginPath(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderSpline=function(t){function e(t){if(0<(t=i(t,2)).length){r.beginPath(),G&&o.beginPath(),r.moveTo(t[0].x,t[0].y),t[0].newStrokeStyle&&(r.strokeStyle=t[0].newStrokeStyle),t[0].newLineDashArray&&r.setLineDash(t[0].newLineDashArray),G&&o.moveTo(t[0].x,t[0].y);for(var e=0;e<t.length-3;e+=3)r.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),G&&o.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),(0<e&&0==e%3e3||t[e+3].newStrokeStyle||t[e+3].newLineDashArray)&&(r.stroke(),r.beginPath(),r.moveTo(t[e+3].x,t[e+3].y),t[e+3].newStrokeStyle&&(r.strokeStyle=t[e+3].newStrokeStyle),t[e+3].newLineDashArray&&r.setLineDash(t[e+3].newLineDashArray),G&&(o.stroke(),o.beginPath(),o.moveTo(t[e+3].x,t[e+3].y)));r.stroke(),G&&o.stroke()}}var n=t.targetCanvasCtx||this.plotArea.ctx,r=G?this._preRenderCtx:n;if(!(0>=t.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx;r.save();var s=this.plotArea;r.beginPath(),r.rect(s.x1,s.y1,s.width,s.height),r.clip();for(var a=[],l=0;l<t.dataSeriesIndexes.length;l++){var h=t.dataSeriesIndexes[l],u=this.data[h];r.lineWidth=u.lineThickness;var d=u.dataPoints,p="solid";if(r.setLineDash){var m=g(u.nullDataLineDashType,u.lineThickness),f=g(p=u.lineDashType,u.lineThickness);r.setLineDash(f)}this._eventManager.objectMap[y=u.id]={objectType:"dataSeries",dataSeriesIndex:h},y=c(y),o.strokeStyle=y,o.lineWidth=0<u.lineThickness?Math.max(u.lineThickness,4):0;var y=u._colorSet,b=y=u.lineColor=u.options.lineColor?u.options.lineColor:y[0];r.strokeStyle=y;var v,C,S=0,x=[];if(r.beginPath(),0<d.length)for(C=!1,S=0;S<d.length;S++)if(!((v=d[S].getTime?d[S].x.getTime():d[S].x)<t.axisX.dataInfo.viewPortMin||v>t.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!C)))if("number"!=typeof d[S].y)0<S&&!C&&(u.connectNullData?r.setLineDash&&0<x.length&&(u.options.nullDataLineDashType||!d[S-1].lineDashType)&&(x[x.length-1].newLineDashArray=m,p=u.nullDataLineDashType):(e(x),x=[])),C=!0;else{v=t.axisX.convertValueToPixel(v),C=t.axisY.convertValueToPixel(d[S].y);var _=u.dataPointIds[S];if(this._eventManager.objectMap[_]={id:_,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:S,x1:v,y1:C},x[x.length]={x:v,y:C},S<d.length-1&&(b!==(d[S].lineColor||y)||p!==(d[S].lineDashType||u.lineDashType))&&(x[x.length-1].newStrokeStyle=b=d[S].lineColor||y,r.setLineDash&&(d[S].lineDashType?x[x.length-1].newLineDashArray=g(p=d[S].lineDashType,u.lineThickness):(p=u.lineDashType,x[x.length-1].newLineDashArray=f))),0<d[S].markerSize||0<u.markerSize){var k=u.getMarkerProperties(S,v,C,r);a.push(k),_=c(_),G&&a.push({x:v,y:C,ctx:o,type:k.type,size:k.size,color:_,borderColor:_,borderThickness:k.borderThickness})}(d[S].indexLabel||u.indexLabel||d[S].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:d[S],dataSeries:u,point:{x:v,y:C},direction:0>d[S].y===t.axisY.reversed?1:-1,color:y}),C=!1}e(x)}return tt.drawMarkers(a),G&&(n.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&r.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&r.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.clearRect(s.x1,s.y1,s.width,s.height),o.beginPath()),r.restore(),r.beginPath(),{source:n,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderColumn=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o,s=null,a=this.plotArea,l=0,h=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),u=(l=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,this.plotArea.width/t.plotType.totalDataSeries*.9)<<0),d=t.axisX.dataInfo.minDiff;for(isFinite(d)||(d=.3*Math.abs(t.axisX.range)),d=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:a.width*(t.axisX.logarithmic?Math.log(d)/Math.log(t.axisX.range):Math.abs(d)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&l>u&&(l=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<l&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,l)),d<l&&(d=l),d>u&&(d=u),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(a.x1,a.y1,a.width,a.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),u=0;u<t.dataSeriesIndexes.length;u++){var p=t.dataSeriesIndexes[u],m=this.data[p],f=m.dataPoints;if(0<f.length){var g=!!(5<d&&m.bevelEnabled);for(l=0;l<f.length;l++)if(!((o=f[l].getTime?f[l].x.getTime():f[l].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof f[l].y){i=t.axisX.convertValueToPixel(o),r=t.axisY.convertValueToPixel(f[l].y),i=t.axisX.reversed?i+t.plotType.totalDataSeries*d/2-(t.previousDataSeriesCount+u)*d<<0:i-t.plotType.totalDataSeries*d/2+(t.previousDataSeriesCount+u)*d<<0;var y,b=t.axisX.reversed?i-d<<0:i+d<<0;0<=f[l].y?y=h:(y=r,r=h),r>y&&(s=r,r=y,y=s),ut(n,i,r,b,y,s=f[l].color?f[l].color:m._colorSet[l%m._colorSet.length],0,null,g&&0<=f[l].y,0>f[l].y&&g,!1,!1,m.fillOpacity),this._eventManager.objectMap[s=m.dataPointIds[l]]={id:s,objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:l,x1:i,y1:r,x2:b,y2:y},s=c(s),G&&ut(this._eventManager.ghostCtx,i,r,b,y,s,0,null,!1,!1,!1,!1),(f[l].indexLabel||m.indexLabel||f[l].indexLabelFormatter||m.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:f[l],dataSeries:m,point:{x:i+(b-i)/2,y:0>f[l].y===t.axisY.reversed?r:y},direction:0>f[l].y===t.axisY.reversed?1:-1,bounds:{x1:i,y1:Math.min(r,y),x2:b,y2:Math.max(r,y)},color:s})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.yScaleAnimation,easingFunction:Q.easing.easeOutQuart,animationBase:h<t.axisY.bounds.y1?t.axisY.bounds.y1:h>t.axisY.bounds.y2?t.axisY.bounds.y2:h}}},e.prototype.renderStackedColumn=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o=null,s=this.plotArea,a=[],l=[],h=[],u=[],d=0,p=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0);d=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,i=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0;var m=t.axisX.dataInfo.minDiff;isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:s.width*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&d>i&&(d=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,i)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&i<d&&(i=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,d)),m<d&&(m=d),m>i&&(m=i),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var f=0;f<t.dataSeriesIndexes.length;f++){var g=t.dataSeriesIndexes[f],y=this.data[g],b=y.dataPoints;if(0<b.length){var v=!!(5<m&&y.bevelEnabled);for(n.strokeStyle="#4572A7 ",d=0;d<b.length;d++)if(!((o=b[d].x.getTime?b[d].x.getTime():b[d].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof b[d].y){var C,S=(i=t.axisX.convertValueToPixel(o))-t.plotType.plotUnits.length*m/2+t.index*m<<0,x=S+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<b[d].y)h[o]=b[d].y+(h[o]?h[o]:0),0<h[o]&&(r=t.axisY.convertValueToPixel(h[o]),C=void 0!==a[o]?a[o]:p,a[o]=r);else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=b[d].y)u[o]=b[d].y+(u[o]?u[o]:0),C=t.axisY.convertValueToPixel(u[o]),r=void 0!==l[o]?l[o]:p,l[o]=C;else if(r=t.axisY.convertValueToPixel(b[d].y),0<=b[d].y){var _=void 0!==a[o]?a[o]:0;a[o]=_+((C=p-_)-(r-=_))}else l[o]=(_=l[o]?l[o]:0)+((C=r+_)-(r=p+_));ut(n,S,r,x,C,o=b[d].color?b[d].color:y._colorSet[d%y._colorSet.length],0,null,v&&0<=b[d].y,0>b[d].y&&v,!1,!1,y.fillOpacity),this._eventManager.objectMap[o=y.dataPointIds[d]]={id:o,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:S,y1:r,x2:x,y2:C},o=c(o),G&&ut(this._eventManager.ghostCtx,S,r,x,C,o,0,null,!1,!1,!1,!1),(b[d].indexLabel||y.indexLabel||b[d].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:b[d],dataSeries:y,point:{x:i,y:0<=b[d].y?r:C},direction:0>b[d].y===t.axisY.reversed?1:-1,bounds:{x1:S,y1:Math.min(r,C),x2:x,y2:Math.max(r,C)},color:o})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.yScaleAnimation,easingFunction:Q.easing.easeOutQuart,animationBase:p<t.axisY.bounds.y1?t.axisY.bounds.y1:p>t.axisY.bounds.y2?t.axisY.bounds.y2:p}}},e.prototype.renderStackedColumn100=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o=null,s=this.plotArea,a=[],l=[],h=[],u=[],d=0,p=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0);d=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,i=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0;var m=t.axisX.dataInfo.minDiff;isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:s.width*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&d>i&&(d=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,i)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&i<d&&(i=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,d)),m<d&&(m=d),m>i&&(m=i),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var f=0;f<t.dataSeriesIndexes.length;f++){var g=t.dataSeriesIndexes[f],y=this.data[g],b=y.dataPoints;if(0<b.length){var v=!!(5<m&&y.bevelEnabled);for(d=0;d<b.length;d++)if(!((o=b[d].x.getTime?b[d].x.getTime():b[d].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof b[d].y){i=t.axisX.convertValueToPixel(o),r=0!==t.dataPointYSums[o]?b[d].y/t.dataPointYSums[o]*100:0;var C,S=i-t.plotType.plotUnits.length*m/2+t.index*m<<0,x=S+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<b[d].y){if(h[o]=r+(void 0!==h[o]?h[o]:0),0>=h[o])continue;r=t.axisY.convertValueToPixel(h[o]),C=a[o]?a[o]:p,a[o]=r}else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=b[d].y)u[o]=r+(void 0!==u[o]?u[o]:0),C=t.axisY.convertValueToPixel(u[o]),r=l[o]?l[o]:p,l[o]=C;else if(r=t.axisY.convertValueToPixel(r),0<=b[d].y){var _=void 0!==a[o]?a[o]:0;r-=_,C=p-_,t.dataSeriesIndexes.length-1===f&&1>=Math.abs(s.y1-r)&&(r=s.y1),a[o]=_+(C-r)}else C=r+(_=void 0!==l[o]?l[o]:0),r=p+_,t.dataSeriesIndexes.length-1===f&&1>=Math.abs(s.y2-C)&&(C=s.y2),l[o]=_+(C-r);ut(n,S,r,x,C,o=b[d].color?b[d].color:y._colorSet[d%y._colorSet.length],0,null,v&&0<=b[d].y,0>b[d].y&&v,!1,!1,y.fillOpacity),this._eventManager.objectMap[o=y.dataPointIds[d]]={id:o,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:S,y1:r,x2:x,y2:C},o=c(o),G&&ut(this._eventManager.ghostCtx,S,r,x,C,o,0,null,!1,!1,!1,!1),(b[d].indexLabel||y.indexLabel||b[d].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:b[d],dataSeries:y,point:{x:i,y:0<=b[d].y?r:C},direction:0>b[d].y===t.axisY.reversed?1:-1,bounds:{x1:S,y1:Math.min(r,C),x2:x,y2:Math.max(r,C)},color:o})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.yScaleAnimation,easingFunction:Q.easing.easeOutQuart,animationBase:p<t.axisY.bounds.y1?t.axisY.bounds.y1:p>t.axisY.bounds.y2?t.axisY.bounds.y2:p}}},e.prototype.renderBar=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o,s=null,a=this.plotArea,l=0,h=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),u=(l=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,this.plotArea.height/t.plotType.totalDataSeries*.9)<<0),d=t.axisX.dataInfo.minDiff;for(isFinite(d)||(d=.3*Math.abs(t.axisX.range)),d=this.options.dataPointWidth?this.dataPointWidth:a.height*(t.axisX.logarithmic?Math.log(d)/Math.log(t.axisX.range):Math.abs(d)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&l>u&&(l=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<l&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,l)),d<l&&(d=l),d>u&&(d=u),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(a.x1,a.y1,a.width,a.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),u=0;u<t.dataSeriesIndexes.length;u++){var p=t.dataSeriesIndexes[u],m=this.data[p],f=m.dataPoints;if(0<f.length){var g=!!(5<d&&m.bevelEnabled);for(n.strokeStyle="#4572A7 ",l=0;l<f.length;l++)if(!((o=f[l].getTime?f[l].x.getTime():f[l].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof f[l].y){r=t.axisX.convertValueToPixel(o),i=t.axisY.convertValueToPixel(f[l].y),r=t.axisX.reversed?r+t.plotType.totalDataSeries*d/2-(t.previousDataSeriesCount+u)*d<<0:r-t.plotType.totalDataSeries*d/2+(t.previousDataSeriesCount+u)*d<<0;var y,b=t.axisX.reversed?r-d<<0:r+d<<0;0<=f[l].y?y=h:(y=i,i=h),ut(n,y,r,i,b,s=f[l].color?f[l].color:m._colorSet[l%m._colorSet.length],0,null,g,!1,!1,!1,m.fillOpacity),this._eventManager.objectMap[s=m.dataPointIds[l]]={id:s,objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:l,x1:y,y1:r,x2:i,y2:b},s=c(s),G&&ut(this._eventManager.ghostCtx,y,r,i,b,s,0,null,!1,!1,!1,!1),(f[l].indexLabel||m.indexLabel||f[l].indexLabelFormatter||m.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:f[l],dataSeries:m,point:{x:0<=f[l].y?i:y,y:r+(b-r)/2},direction:0>f[l].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(y,i),y1:r,x2:Math.max(y,i),y2:b},color:s})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.xScaleAnimation,easingFunction:Q.easing.easeOutQuart,animationBase:h<t.axisY.bounds.x1?t.axisY.bounds.x1:h>t.axisY.bounds.x2?t.axisY.bounds.x2:h}}},e.prototype.renderStackedBar=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o=null,s=this.plotArea,a=[],l=[],h=[],u=[],d=0,p=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0);d=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,r=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0;var m=t.axisX.dataInfo.minDiff;isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:s.height*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&d>r&&(d=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,r)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&r<d&&(r=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,d)),m<d&&(m=d),m>r&&(m=r),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var f=0;f<t.dataSeriesIndexes.length;f++){var g=t.dataSeriesIndexes[f],y=this.data[g],b=y.dataPoints;if(0<b.length){var v=!!(5<m&&y.bevelEnabled);for(n.strokeStyle="#4572A7 ",d=0;d<b.length;d++)if(!((o=b[d].x.getTime?b[d].x.getTime():b[d].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof b[d].y){var C,S=(r=t.axisX.convertValueToPixel(o))-t.plotType.plotUnits.length*m/2+t.index*m<<0,x=S+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<b[d].y)h[o]=b[d].y+(h[o]?h[o]:0),0<h[o]&&(C=a[o]?a[o]:p,a[o]=i=t.axisY.convertValueToPixel(h[o]));else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=b[d].y)u[o]=b[d].y+(u[o]?u[o]:0),i=l[o]?l[o]:p,l[o]=C=t.axisY.convertValueToPixel(u[o]);else if(i=t.axisY.convertValueToPixel(b[d].y),0<=b[d].y){var _=a[o]?a[o]:0;a[o]=_+((i+=_)-(C=p+_))}else C=i-(_=l[o]?l[o]:0),l[o]=_+((i=p-_)-C);ut(n,C,S,i,x,o=b[d].color?b[d].color:y._colorSet[d%y._colorSet.length],0,null,v,!1,!1,!1,y.fillOpacity),this._eventManager.objectMap[o=y.dataPointIds[d]]={id:o,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:C,y1:S,x2:i,y2:x},o=c(o),G&&ut(this._eventManager.ghostCtx,C,S,i,x,o,0,null,!1,!1,!1,!1),(b[d].indexLabel||y.indexLabel||b[d].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:b[d],dataSeries:y,point:{x:0<=b[d].y?i:C,y:r},direction:0>b[d].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(C,i),y1:S,x2:Math.max(C,i),y2:x},color:o})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.xScaleAnimation,easingFunction:Q.easing.easeOutQuart,animationBase:p<t.axisY.bounds.x1?t.axisY.bounds.x1:p>t.axisY.bounds.x2?t.axisY.bounds.x2:p}}},e.prototype.renderStackedBar100=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o=null,s=this.plotArea,a=[],l=[],h=[],u=[],d=0,p=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0);d=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,r=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0;var m=t.axisX.dataInfo.minDiff;isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:s.height*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&d>r&&(d=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,r)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&r<d&&(r=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,d)),m<d&&(m=d),m>r&&(m=r),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(s.x1,s.y1,s.width,s.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var f=0;f<t.dataSeriesIndexes.length;f++){var g=t.dataSeriesIndexes[f],y=this.data[g],b=y.dataPoints;if(0<b.length){var v=!!(5<m&&y.bevelEnabled);for(n.strokeStyle="#4572A7 ",d=0;d<b.length;d++)if(!((o=b[d].x.getTime?b[d].x.getTime():b[d].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&"number"==typeof b[d].y){var C;r=t.axisX.convertValueToPixel(o),C=0!==t.dataPointYSums[o]?b[d].y/t.dataPointYSums[o]*100:0;var S=r-t.plotType.plotUnits.length*m/2+t.index*m<<0,x=S+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<b[d].y){if(h[o]=C+(h[o]?h[o]:0),0>=h[o])continue;C=a[o]?a[o]:p,a[o]=i=t.axisY.convertValueToPixel(h[o])}else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=b[d].y)u[o]=C+(u[o]?u[o]:0),i=l[o]?l[o]:p,l[o]=C=t.axisY.convertValueToPixel(u[o]);else if(i=t.axisY.convertValueToPixel(C),0<=b[d].y){var _=a[o]?a[o]:0;C=p+_,i+=_,t.dataSeriesIndexes.length-1===f&&1>=Math.abs(s.x2-i)&&(i=s.x2),a[o]=_+(i-C)}else C=i-(_=l[o]?l[o]:0),i=p-_,t.dataSeriesIndexes.length-1===f&&1>=Math.abs(s.x1-C)&&(C=s.x1),l[o]=_+(i-C);ut(n,C,S,i,x,o=b[d].color?b[d].color:y._colorSet[d%y._colorSet.length],0,null,v,!1,!1,!1,y.fillOpacity),this._eventManager.objectMap[o=y.dataPointIds[d]]={id:o,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:d,x1:C,y1:S,x2:i,y2:x},o=c(o),G&&ut(this._eventManager.ghostCtx,C,S,i,x,o,0,null,!1,!1,!1,!1),(b[d].indexLabel||y.indexLabel||b[d].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:b[d],dataSeries:y,point:{x:0<=b[d].y?i:C,y:r},direction:0>b[d].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(C,i),y1:S,x2:Math.max(C,i),y2:x},color:o})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.xScaleAnimation,easingFunction:Q.easing.easeOutQuart,animationBase:p<t.axisY.bounds.x1?t.axisY.bounds.x1:p>t.axisY.bounds.x2?t.axisY.bounds.x2:p}}},e.prototype.renderArea=function(t){var e,n;function i(){k&&(0<f.lineThickness&&o.stroke(),t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?S=_:0>t.axisY.viewportMaximum?S=h.y1:0<t.axisY.viewportMinimum&&(S=l.y2),o.lineTo(b,S),o.lineTo(k.x,S),o.closePath(),o.globalAlpha=f.fillOpacity,o.fill(),o.globalAlpha=1,G&&(a.lineTo(b,S),a.lineTo(k.x,S),a.closePath(),a.fill()),o.beginPath(),o.moveTo(b,v),a.beginPath(),a.moveTo(b,v),k={x:b,y:v})}var r=t.targetCanvasCtx||this.plotArea.ctx,o=G?this._preRenderCtx:r;if(!(0>=t.dataSeriesIndexes.length)){var s,a=this._eventManager.ghostCtx,l=t.axisX.lineCoordinates,h=t.axisY.lineCoordinates,u=[],d=this.plotArea;o.save(),G&&a.save(),o.beginPath(),o.rect(d.x1,d.y1,d.width,d.height),o.clip(),G&&(a.beginPath(),a.rect(d.x1,d.y1,d.width,d.height),a.clip());for(var p=0;p<t.dataSeriesIndexes.length;p++){var m=t.dataSeriesIndexes[p],f=this.data[m],y=f.dataPoints;this._eventManager.objectMap[u=f.id]={objectType:"dataSeries",dataSeriesIndex:m},u=c(u),a.fillStyle=u,u=[],e=!0;var b,v,C,S,x=0,_=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),k=null;if(0<y.length){var w=f._colorSet[x%f._colorSet.length],T=f.lineColor=f.options.lineColor||w,I=T;if(o.fillStyle=w,o.strokeStyle=T,o.lineWidth=f.lineThickness,n="solid",o.setLineDash){var A=g(f.nullDataLineDashType,f.lineThickness),P=g(n=f.lineDashType,f.lineThickness);o.setLineDash(P)}for(var M=!0;x<y.length;x++)if(!((C=y[x].x.getTime?y[x].x.getTime():y[x].x)<t.axisX.dataInfo.viewPortMin||C>t.axisX.dataInfo.viewPortMax&&(!f.connectNullData||!M)))if("number"!=typeof y[x].y)f.connectNullData||M||e||i(),M=!0;else{b=t.axisX.convertValueToPixel(C),v=t.axisY.convertValueToPixel(y[x].y),e||M?(!e&&f.connectNullData?(o.setLineDash&&(f.options.nullDataLineDashType||n===f.lineDashType&&f.lineDashType!==f.nullDataLineDashType)&&(e=b,n=v,b=s.x,v=s.y,i(),o.moveTo(s.x,s.y),b=e,v=n,k=s,n=f.nullDataLineDashType,o.setLineDash(A)),o.lineTo(b,v),G&&a.lineTo(b,v)):(o.beginPath(),o.moveTo(b,v),G&&(a.beginPath(),a.moveTo(b,v)),k={x:b,y:v}),M=e=!1):(o.lineTo(b,v),G&&a.lineTo(b,v),0==x%250&&i()),s={x:b,y:v},x<y.length-1&&(I!==(y[x].lineColor||T)||n!==(y[x].lineDashType||f.lineDashType))&&(i(),o.strokeStyle=I=y[x].lineColor||T,o.setLineDash&&(y[x].lineDashType?o.setLineDash(g(n=y[x].lineDashType,f.lineThickness)):(n=f.lineDashType,o.setLineDash(P))));var E=f.dataPointIds[x];this._eventManager.objectMap[E]={id:E,objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:x,x1:b,y1:v},0!==y[x].markerSize&&(0<y[x].markerSize||0<f.markerSize)&&(C=f.getMarkerProperties(x,b,v,o),u.push(C),E=c(E),G&&u.push({x:b,y:v,ctx:a,type:C.type,size:C.size,color:E,borderColor:E,borderThickness:C.borderThickness})),(y[x].indexLabel||f.indexLabel||y[x].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:y[x],dataSeries:f,point:{x:b,y:v},direction:0>y[x].y===t.axisY.reversed?1:-1,color:w})}i(),tt.drawMarkers(u)}}return G&&(r.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&o.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&o.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:r,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderSplineArea=function(t){function e(){var e=i(x,2);if(0<e.length){if(0<p.lineThickness){r.beginPath(),r.moveTo(e[0].x,e[0].y),e[0].newStrokeStyle&&(r.strokeStyle=e[0].newStrokeStyle),e[0].newLineDashArray&&r.setLineDash(e[0].newLineDashArray);for(var n=0;n<e.length-3;n+=3)r.bezierCurveTo(e[n+1].x,e[n+1].y,e[n+2].x,e[n+2].y,e[n+3].x,e[n+3].y),G&&o.bezierCurveTo(e[n+1].x,e[n+1].y,e[n+2].x,e[n+2].y,e[n+3].x,e[n+3].y),(e[n+3].newStrokeStyle||e[n+3].newLineDashArray)&&(r.stroke(),r.beginPath(),r.moveTo(e[n+3].x,e[n+3].y),e[n+3].newStrokeStyle&&(r.strokeStyle=e[n+3].newStrokeStyle),e[n+3].newLineDashArray&&r.setLineDash(e[n+3].newLineDashArray));r.stroke()}for(r.beginPath(),r.moveTo(e[0].x,e[0].y),G&&(o.beginPath(),o.moveTo(e[0].x,e[0].y)),n=0;n<e.length-3;n+=3)r.bezierCurveTo(e[n+1].x,e[n+1].y,e[n+2].x,e[n+2].y,e[n+3].x,e[n+3].y),G&&o.bezierCurveTo(e[n+1].x,e[n+1].y,e[n+2].x,e[n+2].y,e[n+3].x,e[n+3].y);t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?b=C:0>t.axisY.viewportMaximum?b=a.y1:0<t.axisY.viewportMinimum&&(b=s.y2),S={x:e[0].x,y:e[0].y},r.lineTo(e[e.length-1].x,b),r.lineTo(S.x,b),r.closePath(),r.globalAlpha=p.fillOpacity,r.fill(),r.globalAlpha=1,G&&(o.lineTo(e[e.length-1].x,b),o.lineTo(S.x,b),o.closePath(),o.fill())}}var n=t.targetCanvasCtx||this.plotArea.ctx,r=G?this._preRenderCtx:n;if(!(0>=t.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx,s=t.axisX.lineCoordinates,a=t.axisY.lineCoordinates,l=[],h=this.plotArea;r.save(),G&&o.save(),r.beginPath(),r.rect(h.x1,h.y1,h.width,h.height),r.clip(),G&&(o.beginPath(),o.rect(h.x1,h.y1,h.width,h.height),o.clip());for(var u=0;u<t.dataSeriesIndexes.length;u++){var d=t.dataSeriesIndexes[u],p=this.data[d],m=p.dataPoints;this._eventManager.objectMap[l=p.id]={objectType:"dataSeries",dataSeriesIndex:d},l=c(l),o.fillStyle=l,l=[];var f,y,b,v=0,C=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),S=null,x=[];if(0<m.length){var _=p._colorSet[v%p._colorSet.length],k=p.lineColor=p.options.lineColor||_,w=k;r.fillStyle=_,r.strokeStyle=k,r.lineWidth=p.lineThickness;var T="solid";if(r.setLineDash){var I=g(p.nullDataLineDashType,p.lineThickness),A=g(T=p.lineDashType,p.lineThickness);r.setLineDash(A)}for(y=!1;v<m.length;v++)if(!((f=m[v].x.getTime?m[v].x.getTime():m[v].x)<t.axisX.dataInfo.viewPortMin||f>t.axisX.dataInfo.viewPortMax&&(!p.connectNullData||!y)))if("number"!=typeof m[v].y)0<v&&!y&&(p.connectNullData?r.setLineDash&&0<x.length&&(p.options.nullDataLineDashType||!m[v-1].lineDashType)&&(x[x.length-1].newLineDashArray=I,T=p.nullDataLineDashType):(e(),x=[])),y=!0;else{f=t.axisX.convertValueToPixel(f),y=t.axisY.convertValueToPixel(m[v].y);var P=p.dataPointIds[v];if(this._eventManager.objectMap[P]={id:P,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:v,x1:f,y1:y},x[x.length]={x:f,y},v<m.length-1&&(w!==(m[v].lineColor||k)||T!==(m[v].lineDashType||p.lineDashType))&&(x[x.length-1].newStrokeStyle=w=m[v].lineColor||k,r.setLineDash&&(m[v].lineDashType?x[x.length-1].newLineDashArray=g(T=m[v].lineDashType,p.lineThickness):(T=p.lineDashType,x[x.length-1].newLineDashArray=A))),0!==m[v].markerSize&&(0<m[v].markerSize||0<p.markerSize)){var M=p.getMarkerProperties(v,f,y,r);l.push(M),P=c(P),G&&l.push({x:f,y,ctx:o,type:M.type,size:M.size,color:P,borderColor:P,borderThickness:M.borderThickness})}(m[v].indexLabel||p.indexLabel||m[v].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:m[v],dataSeries:p,point:{x:f,y},direction:0>m[v].y===t.axisY.reversed?1:-1,color:_}),y=!1}e(),tt.drawMarkers(l)}}return G&&(n.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&r.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&r.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),r.restore(),{source:n,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderStepArea=function(t){var e,n;function i(){k&&(0<f.lineThickness&&o.stroke(),t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?S=_:0>t.axisY.viewportMaximum?S=h.y1:0<t.axisY.viewportMinimum&&(S=l.y2),o.lineTo(b,S),o.lineTo(k.x,S),o.closePath(),o.globalAlpha=f.fillOpacity,o.fill(),o.globalAlpha=1,G&&(a.lineTo(b,S),a.lineTo(k.x,S),a.closePath(),a.fill()),o.beginPath(),o.moveTo(b,v),a.beginPath(),a.moveTo(b,v),k={x:b,y:v})}var r=t.targetCanvasCtx||this.plotArea.ctx,o=G?this._preRenderCtx:r;if(!(0>=t.dataSeriesIndexes.length)){var s,a=this._eventManager.ghostCtx,l=t.axisX.lineCoordinates,h=t.axisY.lineCoordinates,u=[],d=this.plotArea;o.save(),G&&a.save(),o.beginPath(),o.rect(d.x1,d.y1,d.width,d.height),o.clip(),G&&(a.beginPath(),a.rect(d.x1,d.y1,d.width,d.height),a.clip());for(var p=0;p<t.dataSeriesIndexes.length;p++){var m=t.dataSeriesIndexes[p],f=this.data[m],y=f.dataPoints;this._eventManager.objectMap[u=f.id]={objectType:"dataSeries",dataSeriesIndex:m},u=c(u),a.fillStyle=u,u=[],e=!0;var b,v,C,S,x=0,_=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),k=null;if(n=!1,0<y.length){var w=f._colorSet[x%f._colorSet.length],T=f.lineColor=f.options.lineColor||w,I=T;o.fillStyle=w,o.strokeStyle=T,o.lineWidth=f.lineThickness;var A="solid";if(o.setLineDash){var P=g(f.nullDataLineDashType,f.lineThickness),M=g(A=f.lineDashType,f.lineThickness);o.setLineDash(M)}for(;x<y.length;x++)if(!((C=y[x].x.getTime?y[x].x.getTime():y[x].x)<t.axisX.dataInfo.viewPortMin||C>t.axisX.dataInfo.viewPortMax&&(!f.connectNullData||!n))){var E=v;"number"!=typeof y[x].y?(f.connectNullData||n||e||i(),n=!0):(b=t.axisX.convertValueToPixel(C),v=t.axisY.convertValueToPixel(y[x].y),e||n?(!e&&f.connectNullData?(o.setLineDash&&(f.options.nullDataLineDashType||A===f.lineDashType&&f.lineDashType!==f.nullDataLineDashType)&&(e=b,n=v,b=s.x,v=s.y,i(),o.moveTo(s.x,s.y),b=e,v=n,k=s,A=f.nullDataLineDashType,o.setLineDash(P)),o.lineTo(b,E),o.lineTo(b,v),G&&(a.lineTo(b,E),a.lineTo(b,v))):(o.beginPath(),o.moveTo(b,v),G&&(a.beginPath(),a.moveTo(b,v)),k={x:b,y:v}),n=e=!1):(o.lineTo(b,E),G&&a.lineTo(b,E),o.lineTo(b,v),G&&a.lineTo(b,v),0==x%250&&i()),s={x:b,y:v},x<y.length-1&&(I!==(y[x].lineColor||T)||A!==(y[x].lineDashType||f.lineDashType))&&(i(),o.strokeStyle=I=y[x].lineColor||T,o.setLineDash&&(y[x].lineDashType?o.setLineDash(g(A=y[x].lineDashType,f.lineThickness)):(A=f.lineDashType,o.setLineDash(M)))),this._eventManager.objectMap[C=f.dataPointIds[x]]={id:C,objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:x,x1:b,y1:v},0!==y[x].markerSize&&(0<y[x].markerSize||0<f.markerSize)&&(E=f.getMarkerProperties(x,b,v,o),u.push(E),C=c(C),G&&u.push({x:b,y:v,ctx:a,type:E.type,size:E.size,color:C,borderColor:C,borderThickness:E.borderThickness})),(y[x].indexLabel||f.indexLabel||y[x].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:y[x],dataSeries:f,point:{x:b,y:v},direction:0>y[x].y===t.axisY.reversed?1:-1,color:w}))}i(),tt.drawMarkers(u)}}return G&&(r.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&o.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&o.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),o.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),o.restore(),{source:r,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderStackedArea=function(t){function e(){if(!(1>y.length)){for(0<w.lineThickness&&i.stroke();0<y.length;){var t=y.pop();i.lineTo(t.x,t.y),G&&x.lineTo(t.x,t.y)}i.closePath(),i.globalAlpha=w.fillOpacity,i.fill(),i.globalAlpha=1,i.beginPath(),G&&(x.closePath(),x.fill(),x.beginPath()),y=[]}}var n=t.targetCanvasCtx||this.plotArea.ctx,i=G?this._preRenderCtx:n;if(!(0>=t.dataSeriesIndexes.length)){var r,o,s,a,h,u=null,d=null,p=[],m=this.plotArea,f=[],y=[],b=[],v=[],C=0,S=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),x=this._eventManager.ghostCtx;G&&x.beginPath(),i.save(),G&&x.save(),i.beginPath(),i.rect(m.x1,m.y1,m.width,m.height),i.clip(),G&&(x.beginPath(),x.rect(m.x1,m.y1,m.width,m.height),x.clip()),u=[];for(var _=0;_<t.dataSeriesIndexes.length;_++){var k=t.dataSeriesIndexes[_],w=this.data[k],T=w.dataPoints;for(w.dataPointIndexes=[],C=0;C<T.length;C++)k=T[C].x.getTime?T[C].x.getTime():T[C].x,w.dataPointIndexes[k]=C,u[k]||(b.push(k),u[k]=!0);b.sort(l)}for(_=0;_<t.dataSeriesIndexes.length;_++){if(T=(w=this.data[k=t.dataSeriesIndexes[_]]).dataPoints,a=!0,y=[],this._eventManager.objectMap[C=w.id]={objectType:"dataSeries",dataSeriesIndex:k},C=c(C),x.fillStyle=C,0<b.length){u=w._colorSet[0];var I=w.lineColor=w.options.lineColor||u,A=I;if(i.fillStyle=u,i.strokeStyle=I,i.lineWidth=w.lineThickness,h="solid",i.setLineDash){var P=g(w.nullDataLineDashType,w.lineThickness),M=g(h=w.lineDashType,w.lineThickness);i.setLineDash(M)}var E=!0;for(C=0;C<b.length;C++){var D=0<=w.dataPointIndexes[d=b[C]]?T[w.dataPointIndexes[d]]:{x:d,y:null};if(!(d<t.axisX.dataInfo.viewPortMin||d>t.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!E)))if("number"!=typeof D.y)w.connectNullData||E||a||e(),E=!0;else{r=t.axisX.convertValueToPixel(d);var F=f[d]?f[d]:0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length){if(v[d]=D.y+(v[d]?v[d]:0),0>=v[d]&&t.axisY.logarithmic)continue;o=t.axisY.convertValueToPixel(v[d])}else o=t.axisY.convertValueToPixel(D.y),o-=F;if(y.push({x:r,y:S-F}),f[d]=S-o,a||E?(!a&&w.connectNullData?(i.setLineDash&&(w.options.nullDataLineDashType||h===w.lineDashType&&w.lineDashType!==w.nullDataLineDashType)&&(a=y.pop(),h=y[y.length-1],e(),i.moveTo(s.x,s.y),y.push(h),y.push(a),h=w.nullDataLineDashType,i.setLineDash(P)),i.lineTo(r,o),G&&x.lineTo(r,o)):(i.beginPath(),i.moveTo(r,o),G&&(x.beginPath(),x.moveTo(r,o))),E=a=!1):(i.lineTo(r,o),G&&x.lineTo(r,o),0==C%250&&(e(),i.moveTo(r,o),G&&x.moveTo(r,o),y.push({x:r,y:S-F}))),s={x:r,y:o},C<T.length-1&&(A!==(T[C].lineColor||I)||h!==(T[C].lineDashType||w.lineDashType))&&(e(),i.beginPath(),i.moveTo(r,o),y.push({x:r,y:S-F}),i.strokeStyle=A=T[C].lineColor||I,i.setLineDash&&(T[C].lineDashType?i.setLineDash(g(h=T[C].lineDashType,w.lineThickness)):(h=w.lineDashType,i.setLineDash(M)))),0<=w.dataPointIndexes[d]){var L=w.dataPointIds[w.dataPointIndexes[d]];this._eventManager.objectMap[L]={id:L,objectType:"dataPoint",dataSeriesIndex:k,dataPointIndex:w.dataPointIndexes[d],x1:r,y1:o}}0<=w.dataPointIndexes[d]&&0!==D.markerSize&&(0<D.markerSize||0<w.markerSize)&&(F=w.getMarkerProperties(w.dataPointIndexes[d],r,o,i),p.push(F),d=c(L),G&&p.push({x:r,y:o,ctx:x,type:F.type,size:F.size,color:d,borderColor:d,borderThickness:F.borderThickness})),(D.indexLabel||w.indexLabel||D.indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:D,dataSeries:w,point:{x:r,y:o},direction:0>T[C].y===t.axisY.reversed?1:-1,color:u})}}e(),i.moveTo(r,o),G&&x.moveTo(r,o)}delete w.dataPointIndexes}return tt.drawMarkers(p),G&&(n.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(m.x1,m.y1,m.width,m.height),x.restore()),i.restore(),{source:n,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderStackedArea100=function(t){function e(){for(0<w.lineThickness&&i.stroke();0<y.length;){var t=y.pop();i.lineTo(t.x,t.y),G&&x.lineTo(t.x,t.y)}i.closePath(),i.globalAlpha=w.fillOpacity,i.fill(),i.globalAlpha=1,i.beginPath(),G&&(x.closePath(),x.fill(),x.beginPath()),y=[]}var n=t.targetCanvasCtx||this.plotArea.ctx,i=G?this._preRenderCtx:n;if(!(0>=t.dataSeriesIndexes.length)){var r,o,s,a,h,u=null,d=null,p=this.plotArea,m=[],f=[],y=[],b=[],v=[],C=0,S=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),x=this._eventManager.ghostCtx;i.save(),G&&x.save(),i.beginPath(),i.rect(p.x1,p.y1,p.width,p.height),i.clip(),G&&(x.beginPath(),x.rect(p.x1,p.y1,p.width,p.height),x.clip()),u=[];for(var _=0;_<t.dataSeriesIndexes.length;_++){var k=t.dataSeriesIndexes[_],w=this.data[k],T=w.dataPoints;for(w.dataPointIndexes=[],C=0;C<T.length;C++)k=T[C].x.getTime?T[C].x.getTime():T[C].x,w.dataPointIndexes[k]=C,u[k]||(b.push(k),u[k]=!0);b.sort(l)}for(_=0;_<t.dataSeriesIndexes.length;_++){if(T=(w=this.data[k=t.dataSeriesIndexes[_]]).dataPoints,a=!0,this._eventManager.objectMap[u=w.id]={objectType:"dataSeries",dataSeriesIndex:k},u=c(u),x.fillStyle=u,y=[],0<b.length){u=w._colorSet[C%w._colorSet.length];var I=w.lineColor=w.options.lineColor||u,A=I;if(i.fillStyle=u,i.strokeStyle=I,i.lineWidth=w.lineThickness,h="solid",i.setLineDash){var P=g(w.nullDataLineDashType,w.lineThickness),M=g(h=w.lineDashType,w.lineThickness);i.setLineDash(M)}var E=!0;for(C=0;C<b.length;C++){var D=0<=w.dataPointIndexes[d=b[C]]?T[w.dataPointIndexes[d]]:{x:d,y:null};if(!(d<t.axisX.dataInfo.viewPortMin||d>t.axisX.dataInfo.viewPortMax&&(!w.connectNullData||!E)))if("number"!=typeof D.y)w.connectNullData||E||a||e(),E=!0;else{var F;F=0!==t.dataPointYSums[d]?D.y/t.dataPointYSums[d]*100:0,r=t.axisX.convertValueToPixel(d);var L=f[d]?f[d]:0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length){if(v[d]=F+(v[d]?v[d]:0),0>=v[d]&&t.axisY.logarithmic)continue;o=t.axisY.convertValueToPixel(v[d])}else o=t.axisY.convertValueToPixel(F),o-=L;if(y.push({x:r,y:S-L}),f[d]=S-o,a||E?(!a&&w.connectNullData?(i.setLineDash&&(w.options.nullDataLineDashType||h===w.lineDashType&&w.lineDashType!==w.nullDataLineDashType)&&(a=y.pop(),h=y[y.length-1],e(),i.moveTo(s.x,s.y),y.push(h),y.push(a),h=w.nullDataLineDashType,i.setLineDash(P)),i.lineTo(r,o),G&&x.lineTo(r,o)):(i.beginPath(),i.moveTo(r,o),G&&(x.beginPath(),x.moveTo(r,o))),E=a=!1):(i.lineTo(r,o),G&&x.lineTo(r,o),0==C%250&&(e(),i.moveTo(r,o),G&&x.moveTo(r,o),y.push({x:r,y:S-L}))),s={x:r,y:o},C<T.length-1&&(A!==(T[C].lineColor||I)||h!==(T[C].lineDashType||w.lineDashType))&&(e(),i.beginPath(),i.moveTo(r,o),y.push({x:r,y:S-L}),i.strokeStyle=A=T[C].lineColor||I,i.setLineDash&&(T[C].lineDashType?i.setLineDash(g(h=T[C].lineDashType,w.lineThickness)):(h=w.lineDashType,i.setLineDash(M)))),0<=w.dataPointIndexes[d]){var R=w.dataPointIds[w.dataPointIndexes[d]];this._eventManager.objectMap[R]={id:R,objectType:"dataPoint",dataSeriesIndex:k,dataPointIndex:w.dataPointIndexes[d],x1:r,y1:o}}0<=w.dataPointIndexes[d]&&0!==D.markerSize&&(0<D.markerSize||0<w.markerSize)&&(L=w.getMarkerProperties(C,r,o,i),m.push(L),d=c(R),G&&m.push({x:r,y:o,ctx:x,type:L.type,size:L.size,color:d,borderColor:d,borderThickness:L.borderThickness})),(D.indexLabel||w.indexLabel||D.indexLabelFormatter||w.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:D,dataSeries:w,point:{x:r,y:o},direction:0>T[C].y===t.axisY.reversed?1:-1,color:u})}}e(),i.moveTo(r,o),G&&x.moveTo(r,o)}delete w.dataPointIndexes}return tt.drawMarkers(m),G&&(n.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(p.x1,p.y1,p.width,p.height),x.restore()),i.restore(),{source:n,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderBubble=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o=this.plotArea,s=0;n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var a=-1/0,l=1/0,h=0;h<t.dataSeriesIndexes.length;h++){var u=t.dataSeriesIndexes[h],d=this.data[u],p=d.dataPoints,m=0;for(s=0;s<p.length;s++)(i=i=p[s].getTime?p[s].x.getTime():p[s].x)<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax||void 0===p[s].z||((m=p[s].z)>a&&(a=m),m<l&&(l=m))}var f=25*Math.PI,g=Math.max(Math.pow(.25*Math.min(o.height,o.width)/2,2)*Math.PI,f);for(h=0;h<t.dataSeriesIndexes.length;h++)if(0<(p=(d=this.data[u=t.dataSeriesIndexes[h]]).dataPoints).length)for(n.strokeStyle="#4572A7 ",s=0;s<p.length;s++)if(!((i=i=p[s].getTime?p[s].x.getTime():p[s].x)<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof p[s].y){i=t.axisX.convertValueToPixel(i),r=t.axisY.convertValueToPixel(p[s].y),m=p[s].z;var y=2*Math.max(Math.sqrt((a===l?g/2:f+(g-f)/(a-l)*(m-l))/Math.PI)<<0,1);(m=d.getMarkerProperties(s,n)).size=y,n.globalAlpha=d.fillOpacity,tt.drawMarker(i,r,n,m.type,m.size,m.color,m.borderColor,m.borderThickness),n.globalAlpha=1;var b=d.dataPointIds[s];this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:s,x1:i,y1:r,size:y},y=c(b),G&&tt.drawMarker(i,r,this._eventManager.ghostCtx,m.type,m.size,y,y,m.borderThickness),(p[s].indexLabel||d.indexLabel||p[s].indexLabelFormatter||d.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:p[s],dataSeries:d,point:{x:i,y:r},direction:1,bounds:{x1:i-m.size/2,y1:r-m.size/2,x2:i+m.size/2,y2:r+m.size/2},color:null})}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderScatter=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o=this.plotArea,s=0;n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip());for(var a=0;a<t.dataSeriesIndexes.length;a++){var l=t.dataSeriesIndexes[a],h=this.data[l],u=h.dataPoints;if(0<u.length){n.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(o.height,o.width)/2,2);var d=0,p=0;for(s=0;s<u.length;s++)if(!((i=i=u[s].getTime?u[s].x.getTime():u[s].x)<t.axisX.dataInfo.viewPortMin||i>t.axisX.dataInfo.viewPortMax)&&"number"==typeof u[s].y){i=t.axisX.convertValueToPixel(i),r=t.axisY.convertValueToPixel(u[s].y);var m=h.getMarkerProperties(s,i,r,n);n.globalAlpha=h.fillOpacity,tt.drawMarker(m.x,m.y,m.ctx,m.type,m.size,m.color,m.borderColor,m.borderThickness),n.globalAlpha=1,Math.sqrt((d-i)*(d-i)+(p-r)*(p-r))<Math.min(m.size,5)&&u.length>Math.min(this.plotArea.width,this.plotArea.height)||(this._eventManager.objectMap[d=h.dataPointIds[s]]={id:d,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:s,x1:i,y1:r},d=c(d),G&&tt.drawMarker(m.x,m.y,this._eventManager.ghostCtx,m.type,m.size,d,d,m.borderThickness),(u[s].indexLabel||h.indexLabel||u[s].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:u[s],dataSeries:h,point:{x:i,y:r},direction:1,bounds:{x1:i-m.size/2,y1:r-m.size/2,x2:i+m.size/2,y2:r+m.size/2},color:null}),d=i,p=r)}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderCandlestick=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e,i=this._eventManager.ghostCtx;if(!(0>=t.dataSeriesIndexes.length)){var r,o,s,a,l,h,u=null,p=null,m=this.plotArea,f=0,g=(u=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,p=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,t.axisX.dataInfo.minDiff);isFinite(g)||(g=.3*Math.abs(t.axisX.range)),g=this.options.dataPointWidth?this.dataPointWidth:.7*m.width*(t.axisX.logarithmic?Math.log(g)/Math.log(t.axisX.range):Math.abs(g)/Math.abs(t.axisX.range))<<0,this.dataPointMaxWidth&&u>p&&(u=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,p)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&p<u&&(p=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,u)),g<u&&(g=u),g>p&&(g=p),n.save(),G&&i.save(),n.beginPath(),n.rect(m.x1,m.y1,m.width,m.height),n.clip(),G&&(i.beginPath(),i.rect(m.x1,m.y1,m.width,m.height),i.clip());for(var y=0;y<t.dataSeriesIndexes.length;y++){var b=t.dataSeriesIndexes[y],v=this.data[b],C=v.dataPoints;if(0<C.length){var S=!!(5<g&&v.bevelEnabled);for(f=0;f<C.length;f++)if(!((h=C[f].getTime?C[f].x.getTime():C[f].x)<t.axisX.dataInfo.viewPortMin||h>t.axisX.dataInfo.viewPortMax)&&!d(C[f].y)&&C[f].y.length&&"number"==typeof C[f].y[0]&&"number"==typeof C[f].y[1]&&"number"==typeof C[f].y[2]&&"number"==typeof C[f].y[3]){r=t.axisX.convertValueToPixel(h),o=t.axisY.convertValueToPixel(C[f].y[0]),s=t.axisY.convertValueToPixel(C[f].y[1]),a=t.axisY.convertValueToPixel(C[f].y[2]),l=t.axisY.convertValueToPixel(C[f].y[3]);var x=r-g/2<<0,_=x+g<<0,k=(p=v.options.fallingColor?v.fallingColor:v._colorSet[0],u=C[f].color?C[f].color:v._colorSet[0],Math.round(Math.max(1,.15*g))),w=0==k%2?0:.5,T=v.dataPointIds[f];this._eventManager.objectMap[T]={id:T,objectType:"dataPoint",dataSeriesIndex:b,dataPointIndex:f,x1:x,y1:o,x2:_,y2:s,x3:r,y3:a,x4:r,y4:l,borderThickness:k,color:u},n.strokeStyle=u,n.beginPath(),n.lineWidth=k,i.lineWidth=Math.max(k,4),"candlestick"===v.type?(n.moveTo(r-w,s),n.lineTo(r-w,Math.min(o,l)),n.stroke(),n.moveTo(r-w,Math.max(o,l)),n.lineTo(r-w,a),n.stroke(),ut(n,x,Math.min(o,l),_,Math.max(o,l),C[f].y[0]<=C[f].y[3]?v.risingColor:p,k,u,S,S,!1,!1,v.fillOpacity),G&&(u=c(T),i.strokeStyle=u,i.moveTo(r-w,s),i.lineTo(r-w,Math.min(o,l)),i.stroke(),i.moveTo(r-w,Math.max(o,l)),i.lineTo(r-w,a),i.stroke(),ut(i,x,Math.min(o,l),_,Math.max(o,l),u,0,null,!1,!1,!1,!1))):"ohlc"===v.type&&(n.moveTo(r-w,s),n.lineTo(r-w,a),n.stroke(),n.beginPath(),n.moveTo(r,o),n.lineTo(x,o),n.stroke(),n.beginPath(),n.moveTo(r,l),n.lineTo(_,l),n.stroke(),G&&(u=c(T),i.strokeStyle=u,i.moveTo(r-w,s),i.lineTo(r-w,a),i.stroke(),i.beginPath(),i.moveTo(r,o),i.lineTo(x,o),i.stroke(),i.beginPath(),i.moveTo(r,l),i.lineTo(_,l),i.stroke())),(C[f].indexLabel||v.indexLabel||C[f].indexLabelFormatter||v.indexLabelFormatter)&&this._indexLabels.push({chartType:v.type,dataPoint:C[f],dataSeries:v,point:{x:x+(_-x)/2,y:t.axisY.reversed?a:s},direction:1,bounds:{x1:x,y1:Math.min(s,a),x2:_,y2:Math.max(s,a)},color:u})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(m.x1,m.y1,m.width,m.height),i.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderBoxAndWhisker=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e,i=this._eventManager.ghostCtx;if(!(0>=t.dataSeriesIndexes.length)){var r,o,s,a,l,h,u,p=null,m=this.plotArea,f=0,y=(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,f=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,t.axisX.dataInfo.minDiff);isFinite(y)||(y=.3*Math.abs(t.axisX.range)),y=this.options.dataPointWidth?this.dataPointWidth:.7*m.width*(t.axisX.logarithmic?Math.log(y)/Math.log(t.axisX.range):Math.abs(y)/Math.abs(t.axisX.range))<<0,this.dataPointMaxWidth&&p>f&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,f)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&f<p&&(f=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),y<p&&(y=p),y>f&&(y=f),n.save(),G&&i.save(),n.beginPath(),n.rect(m.x1,m.y1,m.width,m.height),n.clip(),G&&(i.beginPath(),i.rect(m.x1,m.y1,m.width,m.height),i.clip());for(var b=!!t.axisY.reversed,v=0;v<t.dataSeriesIndexes.length;v++){var C=t.dataSeriesIndexes[v],S=this.data[C],x=S.dataPoints;if(0<x.length){var _=!!(5<y&&S.bevelEnabled);for(f=0;f<x.length;f++)if(!((u=x[f].getTime?x[f].x.getTime():x[f].x)<t.axisX.dataInfo.viewPortMin||u>t.axisX.dataInfo.viewPortMax)&&!d(x[f].y)&&x[f].y.length&&"number"==typeof x[f].y[0]&&"number"==typeof x[f].y[1]&&"number"==typeof x[f].y[2]&&"number"==typeof x[f].y[3]&&"number"==typeof x[f].y[4]&&5===x[f].y.length){r=t.axisX.convertValueToPixel(u),o=t.axisY.convertValueToPixel(x[f].y[0]),s=t.axisY.convertValueToPixel(x[f].y[1]),a=t.axisY.convertValueToPixel(x[f].y[2]),l=t.axisY.convertValueToPixel(x[f].y[3]),h=t.axisY.convertValueToPixel(x[f].y[4]);var k=r-y/2<<0,w=r+y/2<<0,T=(p=x[f].color?x[f].color:S._colorSet[0],Math.round(Math.max(1,.15*y))),I=0==T%2?0:.5,A=x[f].whiskerColor?x[f].whiskerColor:x[f].color?S.whiskerColor?S.whiskerColor:x[f].color:S.whiskerColor?S.whiskerColor:p,P="number"==typeof x[f].whiskerThickness?x[f].whiskerThickness:"number"==typeof S.options.whiskerThickness?S.whiskerThickness:T,M=x[f].whiskerDashType?x[f].whiskerDashType:S.whiskerDashType,E="number"==typeof(E=d(x[f].whiskerLength)?d(S.options.whiskerLength)?y:S.whiskerLength:x[f].whiskerLength)?0>=E?0:E>=y?y:E:"string"==typeof E?parseInt(E)*y/100>y?y:parseInt(E)*y/100:y,D=1==Math.round(P)%2?.5:0,F=x[f].stemColor?x[f].stemColor:x[f].color?S.stemColor?S.stemColor:x[f].color:S.stemColor?S.stemColor:p,L="number"==typeof x[f].stemThickness?x[f].stemThickness:"number"==typeof S.options.stemThickness?S.stemThickness:T,R=1==Math.round(L)%2?.5:0,B=x[f].stemDashType?x[f].stemDashType:S.stemDashType,N=x[f].lineColor?x[f].lineColor:x[f].color?S.lineColor?S.lineColor:x[f].color:S.lineColor?S.lineColor:p,O="number"==typeof x[f].lineThickness?x[f].lineThickness:"number"==typeof S.options.lineThickness?S.lineThickness:T,V=x[f].lineDashType?x[f].lineDashType:S.lineDashType,W=1==Math.round(O)%2?.5:0,H=S.upperBoxColor,z=S.lowerBoxColor,U=d(S.options.fillOpacity)?1:S.fillOpacity,Y=S.dataPointIds[f];this._eventManager.objectMap[Y]={id:Y,objectType:"dataPoint",dataSeriesIndex:C,dataPointIndex:f,x1:k,y1:o,x2:w,y2:s,x3:r,y3:a,x4:r,y4:l,y5:h,borderThickness:T,color:p,stemThickness:L,stemColor:F,whiskerThickness:P,whiskerLength:E,whiskerColor:A,lineThickness:O,lineColor:N},n.save(),0<L&&(n.beginPath(),n.strokeStyle=F,n.lineWidth=L,n.setLineDash&&n.setLineDash(g(B,L)),n.moveTo(r-R,s),n.lineTo(r-R,o),n.stroke(),n.moveTo(r-R,l),n.lineTo(r-R,a),n.stroke()),n.restore(),i.lineWidth=Math.max(T,4),n.beginPath(),ut(n,k,Math.min(h,s),w,Math.max(s,h),z,0,p,!!b&&_,!b&&_,!1,!1,U),n.beginPath(),ut(n,k,Math.min(a,h),w,Math.max(h,a),H,0,p,!b&&_,!!b&&_,!1,!1,U),n.beginPath(),n.lineWidth=T,n.strokeStyle=p,n.rect(k-I,Math.min(s,a)-I,w-k+2*I,Math.max(s,a)-Math.min(s,a)+2*I),n.stroke(),n.save(),0<O&&(n.beginPath(),n.globalAlpha=1,n.setLineDash&&n.setLineDash(g(V,O)),n.strokeStyle=N,n.lineWidth=O,n.moveTo(k,h-W),n.lineTo(w,h-W),n.stroke()),n.restore(),n.save(),0<P&&(n.beginPath(),n.setLineDash&&n.setLineDash(g(M,P)),n.strokeStyle=A,n.lineWidth=P,n.moveTo(r-E/2<<0,l-D),n.lineTo(r+E/2<<0,l-D),n.stroke(),n.moveTo(r-E/2<<0,o+D),n.lineTo(r+E/2<<0,o+D),n.stroke()),n.restore(),G&&(p=c(Y),i.strokeStyle=p,i.lineWidth=L,0<L&&(i.moveTo(r-I-R,s),i.lineTo(r-I-R,Math.max(o,l)),i.stroke(),i.moveTo(r-I-R,Math.min(o,l)),i.lineTo(r-I-R,a),i.stroke()),ut(i,k,Math.max(s,a),w,Math.min(s,a),p,0,null,!1,!1,!1,!1),0<P&&(i.beginPath(),i.lineWidth=P,i.moveTo(r+E/2,l-D),i.lineTo(r-E/2,l-D),i.stroke(),i.moveTo(r+E/2,o+D),i.lineTo(r-E/2,o+D),i.stroke())),(x[f].indexLabel||S.indexLabel||x[f].indexLabelFormatter||S.indexLabelFormatter)&&this._indexLabels.push({chartType:S.type,dataPoint:x[f],dataSeries:S,point:{x:k+(w-k)/2,y:t.axisY.reversed?o:l},direction:1,bounds:{x1:k,y1:Math.min(o,l),x2:w,y2:Math.max(o,l)},color:p})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(m.x1,m.y1,m.width,m.height),i.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderRangeColumn=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o,s=null,a=this.plotArea,l=0;l=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,i=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width;var h=t.axisX.dataInfo.minDiff;isFinite(h)||(h=.3*Math.abs(t.axisX.range)),h=this.options.dataPointWidth?this.dataPointWidth:a.width*(t.axisX.logarithmic?Math.log(h)/Math.log(t.axisX.range):Math.abs(h)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&l>i&&(l=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,i)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&i<l&&(i=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,l)),h<l&&(h=l),h>i&&(h=i),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(a.x1,a.y1,a.width,a.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip());for(var u=0;u<t.dataSeriesIndexes.length;u++){var p=t.dataSeriesIndexes[u],m=this.data[p],f=m.dataPoints;if(0<f.length){var g=!!(5<h&&m.bevelEnabled);for(l=0;l<f.length;l++)if(!((o=f[l].getTime?f[l].x.getTime():f[l].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&!d(f[l].y)&&f[l].y.length&&"number"==typeof f[l].y[0]&&"number"==typeof f[l].y[1]){s=t.axisX.convertValueToPixel(o),i=t.axisY.convertValueToPixel(f[l].y[0]),r=t.axisY.convertValueToPixel(f[l].y[1]);var y=t.axisX.reversed?s+t.plotType.totalDataSeries*h/2-(t.previousDataSeriesCount+u)*h<<0:s-t.plotType.totalDataSeries*h/2+(t.previousDataSeriesCount+u)*h<<0,b=t.axisX.reversed?y-h<<0:y+h<<0;if(s=f[l].color?f[l].color:m._colorSet[l%m._colorSet.length],i>r){var v=i;i=r,r=v}this._eventManager.objectMap[v=m.dataPointIds[l]]={id:v,objectType:"dataPoint",dataSeriesIndex:p,dataPointIndex:l,x1:y,y1:i,x2:b,y2:r},ut(n,y,i,b,r,s,0,s,g,g,!1,!1,m.fillOpacity),s=c(v),G&&ut(this._eventManager.ghostCtx,y,i,b,r,s,0,null,!1,!1,!1,!1),(f[l].indexLabel||m.indexLabel||f[l].indexLabelFormatter||m.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:f[l],dataSeries:m,indexKeyword:0,point:{x:y+(b-y)/2,y:f[l].y[1]>=f[l].y[0]?r:i},direction:f[l].y[1]>=f[l].y[0]?-1:1,bounds:{x1:y,y1:Math.min(i,r),x2:b,y2:Math.max(i,r)},color:s}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:f[l],dataSeries:m,indexKeyword:1,point:{x:y+(b-y)/2,y:f[l].y[1]>=f[l].y[0]?i:r},direction:f[l].y[1]>=f[l].y[0]?1:-1,bounds:{x1:y,y1:Math.min(i,r),x2:b,y2:Math.max(i,r)},color:s}))}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderError=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e,i=!!t.axisY._position&&"left"!==t.axisY._position&&"right"!==t.axisY._position;if(!(0>=t.dataSeriesIndexes.length)){var r,s,a,l,h,c,u,p=null,m=!1,f=this.plotArea,g=0,y=t.axisX.dataInfo.minDiff;isFinite(y)||(y=.3*Math.abs(t.axisX.range)),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(f.x1,f.y1,f.width,f.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.clip());for(var b=0,v=0;v<this.data.length;v++)!this.data[v].type.match(/(bar|column)/gi)||!this.data[v].visible||this.data[v].type.match(/(stacked)/gi)&&b||b++;for(var C=0;C<t.dataSeriesIndexes.length;C++){var S=t.dataSeriesIndexes[C],x=this.data[S],_=x.dataPoints,k=!d(x._linkedSeries)&&!(!x._linkedSeries.type.match(/(bar|column)/gi)||!x._linkedSeries.visible),w=0;if(k)for(p=x._linkedSeries.id,v=0;v<p;v++)!this.data[v].type.match(/(bar|column)/gi)||!this.data[v].visible||this.data[v].type.match(/(stacked)/gi)&&w||(this.data[v].type.match(/(range)/gi)&&(m=!0),w++);if(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,g=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:i?Math.min(.15*this.height,this.plotArea.height/(k?b:1)*.9)<<0:.3*this.width,m&&(g=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:i?Math.min(.15*this.height,this.plotArea.height/(k?b:1)*.9)<<0:.03*this.width),v=this.options.dataPointWidth?this.dataPointWidth:(i?f.height:f.width)*(t.axisX.logarithmic?Math.log(y)/Math.log(t.axisX.range):Math.abs(y)/Math.abs(t.axisX.range))/(k?b:1)*.9<<0,this.dataPointMaxWidth&&p>g&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,g)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&g<p&&(g=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),v<p&&(v=p),v>g&&(v=g),0<_.length){var T=x._colorSet;for(g=0;g<_.length;g++){p=x.lineColor=x.options.color?x.options.color:T[0];var I={color:_[g].whiskerColor?_[g].whiskerColor:_[g].color?x.whiskerColor?x.whiskerColor:_[g].color:x.whiskerColor?x.whiskerColor:p,thickness:d(_[g].whiskerThickness)?x.whiskerThickness:_[g].whiskerThickness,dashType:_[g].whiskerDashType?_[g].whiskerDashType:x.whiskerDashType,length:d(_[g].whiskerLength)?d(x.options.whiskerLength)?v:x.options.whiskerLength:_[g].whiskerLength,trimLength:d(_[g].whiskerLength)&&d(x.options.whiskerLength)?50:0};I.length="number"==typeof I.length?0>=I.length?0:I.length>=v?v:I.length:"string"==typeof I.length?parseInt(I.length)*v/100>v?v:parseInt(I.length)*v/100>v:v,I.thickness="number"==typeof I.thickness?0>I.thickness?0:Math.round(I.thickness):2;var A={color:_[g].stemColor?_[g].stemColor:_[g].color?x.stemColor?x.stemColor:_[g].color:x.stemColor?x.stemColor:p,thickness:_[g].stemThickness?_[g].stemThickness:x.stemThickness,dashType:_[g].stemDashType?_[g].stemDashType:x.stemDashType};if(A.thickness="number"==typeof A.thickness?0>A.thickness?0:Math.round(A.thickness):2,!((u=_[g].getTime?_[g].x.getTime():_[g].x)<t.axisX.dataInfo.viewPortMin||u>t.axisX.dataInfo.viewPortMax)&&!d(_[g].y)&&_[g].y.length&&"number"==typeof _[g].y[0]&&"number"==typeof _[g].y[1]){var P=t.axisX.convertValueToPixel(u);i?s=P:r=P,P=t.axisY.convertValueToPixel(_[g].y[0]),i?a=P:h=P,P=t.axisY.convertValueToPixel(_[g].y[1]),i?l=P:c=P,i?(h=t.axisX.reversed?s+(k?b:1)*v/2-(k?w-1:0)*v<<0:s-(k?b:1)*v/2+(k?w-1:0)*v<<0,c=t.axisX.reversed?h-v<<0:h+v<<0):(a=t.axisX.reversed?r+(k?b:1)*v/2-(k?w-1:0)*v<<0:r-(k?b:1)*v/2+(k?w-1:0)*v<<0,l=t.axisX.reversed?a-v<<0:a+v<<0),!i&&h>c&&(P=h,h=c,c=P),i&&a>l&&(P=a,a=l,l=P),this._eventManager.objectMap[P=x.dataPointIds[g]]={id:P,objectType:"dataPoint",dataSeriesIndex:S,dataPointIndex:g,x1:Math.min(a,l),y1:Math.min(h,c),x2:Math.max(l,a),y2:Math.max(c,h),isXYSwapped:i,stemProperties:A,whiskerProperties:I},o(n,Math.min(a,l),Math.min(h,c),Math.max(l,a),Math.max(c,h),p,I,A,i),G&&o(this._eventManager.ghostCtx,a,h,l,c,p,I,A,i),(_[g].indexLabel||x.indexLabel||_[g].indexLabelFormatter||x.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:_[g],dataSeries:x,indexKeyword:0,point:{x:i?_[g].y[1]>=_[g].y[0]?a:l:a+(l-a)/2,y:i?h+(c-h)/2:_[g].y[1]>=_[g].y[0]?c:h},direction:_[g].y[1]>=_[g].y[0]?-1:1,bounds:{x1:i?Math.min(a,l):a,y1:i?h:Math.min(h,c),x2:i?Math.max(a,l):l,y2:i?c:Math.max(h,c)},color:p,axisSwapped:i}),this._indexLabels.push({chartType:"error",dataPoint:_[g],dataSeries:x,indexKeyword:1,point:{x:i?_[g].y[1]>=_[g].y[0]?l:a:a+(l-a)/2,y:i?h+(c-h)/2:_[g].y[1]>=_[g].y[0]?h:c},direction:_[g].y[1]>=_[g].y[0]?1:-1,bounds:{x1:i?Math.min(a,l):a,y1:i?h:Math.min(h,c),x2:i?Math.max(a,l):l,y2:i?c:Math.max(h,c)},color:p,axisSwapped:i}))}}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(f.x1,f.y1,f.width,f.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderRangeBar=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o,s,a=null,l=this.plotArea,h=0;h=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,i=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,this.plotArea.height/t.plotType.totalDataSeries*.9)<<0;var u=t.axisX.dataInfo.minDiff;isFinite(u)||(u=.3*Math.abs(t.axisX.range)),u=this.options.dataPointWidth?this.dataPointWidth:l.height*(t.axisX.logarithmic?Math.log(u)/Math.log(t.axisX.range):Math.abs(u)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&h>i&&(h=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,i)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&i<h&&(i=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,h)),u<h&&(u=h),u>i&&(u=i),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(l.x1,l.y1,l.width,l.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(l.x1,l.y1,l.width,l.height),this._eventManager.ghostCtx.clip());for(var p=0;p<t.dataSeriesIndexes.length;p++){var m=t.dataSeriesIndexes[p],f=this.data[m],g=f.dataPoints;if(0<g.length){var y=!!(5<u&&f.bevelEnabled);for(n.strokeStyle="#4572A7 ",h=0;h<g.length;h++)if(!((s=g[h].getTime?g[h].x.getTime():g[h].x)<t.axisX.dataInfo.viewPortMin||s>t.axisX.dataInfo.viewPortMax)&&!d(g[h].y)&&g[h].y.length&&"number"==typeof g[h].y[0]&&"number"==typeof g[h].y[1]){i=t.axisY.convertValueToPixel(g[h].y[0]),r=t.axisY.convertValueToPixel(g[h].y[1]),o=t.axisX.convertValueToPixel(s),o=t.axisX.reversed?o+t.plotType.totalDataSeries*u/2-(t.previousDataSeriesCount+p)*u<<0:o-t.plotType.totalDataSeries*u/2+(t.previousDataSeriesCount+p)*u<<0;var b=t.axisX.reversed?o-u<<0:o+u<<0;i>r&&(a=i,i=r,r=a),ut(n,i,o,r,b,a=g[h].color?g[h].color:f._colorSet[h%f._colorSet.length],0,null,y,!1,!1,!1,f.fillOpacity),this._eventManager.objectMap[a=f.dataPointIds[h]]={id:a,objectType:"dataPoint",dataSeriesIndex:m,dataPointIndex:h,x1:i,y1:o,x2:r,y2:b},a=c(a),G&&ut(this._eventManager.ghostCtx,i,o,r,b,a,0,null,!1,!1,!1,!1),(g[h].indexLabel||f.indexLabel||g[h].indexLabelFormatter||f.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:g[h],dataSeries:f,indexKeyword:0,point:{x:g[h].y[1]>=g[h].y[0]?i:r,y:o+(b-o)/2},direction:g[h].y[1]>=g[h].y[0]?-1:1,bounds:{x1:Math.min(i,r),y1:o,x2:Math.max(i,r),y2:b},color:a}),this._indexLabels.push({chartType:"rangeBar",dataPoint:g[h],dataSeries:f,indexKeyword:1,point:{x:g[h].y[1]>=g[h].y[0]?r:i,y:o+(b-o)/2},direction:g[h].y[1]>=g[h].y[0]?1:-1,bounds:{x1:Math.min(i,r),y1:o,x2:Math.max(i,r),y2:b},color:a}))}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(l.x1,l.y1,l.width,l.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}},e.prototype.renderRangeArea=function(t){function e(){if(C){var t=null;0<u.lineThickness&&i.stroke();for(var e=l.length-1;0<=e;e--)i.lineTo((t=l[e]).x,t.y),r.lineTo(t.x,t.y);if(i.closePath(),i.globalAlpha=u.fillOpacity,i.fill(),i.globalAlpha=1,r.fill(),0<u.lineThickness){for(i.beginPath(),i.moveTo(t.x,t.y),e=0;e<l.length;e++)i.lineTo((t=l[e]).x,t.y);i.stroke()}i.beginPath(),i.moveTo(p,m),r.beginPath(),r.moveTo(p,m),C={x:p,y:m},(l=[]).push({x:p,y:f})}}var n=t.targetCanvasCtx||this.plotArea.ctx,i=G?this._preRenderCtx:n;if(!(0>=t.dataSeriesIndexes.length)){var r=this._eventManager.ghostCtx,o=[],s=this.plotArea;i.save(),G&&r.save(),i.beginPath(),i.rect(s.x1,s.y1,s.width,s.height),i.clip(),G&&(r.beginPath(),r.rect(s.x1,s.y1,s.width,s.height),r.clip());for(var a=0;a<t.dataSeriesIndexes.length;a++){var l=[],h=t.dataSeriesIndexes[a],u=this.data[h],d=u.dataPoints;this._eventManager.objectMap[o=u.id]={objectType:"dataSeries",dataSeriesIndex:h},o=c(o),r.fillStyle=o,o=[];var p,m,f,y,b=!0,v=0,C=null;if(0<d.length){var S=u._colorSet[v%u._colorSet.length],x=u.lineColor=u.options.lineColor||S,_=x;i.fillStyle=S,i.strokeStyle=x,i.lineWidth=u.lineThickness;var k="solid";if(i.setLineDash){var w=g(u.nullDataLineDashType,u.lineThickness),T=g(k=u.lineDashType,u.lineThickness);i.setLineDash(T)}for(var I=!0;v<d.length;v++)if(!((y=d[v].x.getTime?d[v].x.getTime():d[v].x)<t.axisX.dataInfo.viewPortMin||y>t.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!I)))if(null!==d[v].y&&d[v].y.length&&"number"==typeof d[v].y[0]&&"number"==typeof d[v].y[1]){if(p=t.axisX.convertValueToPixel(y),m=t.axisY.convertValueToPixel(d[v].y[0]),f=t.axisY.convertValueToPixel(d[v].y[1]),b||I?(u.connectNullData&&!b?(i.setLineDash&&(u.options.nullDataLineDashType||k===u.lineDashType&&u.lineDashType!==u.nullDataLineDashType)&&(l[l.length-1].newLineDashArray=T,k=u.nullDataLineDashType,i.setLineDash(w)),i.lineTo(p,m),G&&r.lineTo(p,m),l.push({x:p,y:f})):(i.beginPath(),i.moveTo(p,m),C={x:p,y:m},(l=[]).push({x:p,y:f}),G&&(r.beginPath(),r.moveTo(p,m))),I=b=!1):(i.lineTo(p,m),l.push({x:p,y:f}),G&&r.lineTo(p,m),0==v%250&&e()),this._eventManager.objectMap[y=u.dataPointIds[v]]={id:y,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:v,x1:p,y1:m,y2:f},v<d.length-1&&(_!==(d[v].lineColor||x)||k!==(d[v].lineDashType||u.lineDashType))&&(e(),l[l.length-1].newStrokeStyle=_=d[v].lineColor||x,i.strokeStyle=_,i.setLineDash&&(d[v].lineDashType?(l[l.length-1].newLineDashArray=g(k=d[v].lineDashType,u.lineThickness),i.setLineDash(l[l.length-1].newLineDashArray)):(k=u.lineDashType,l[l.length-1].newLineDashArray=T,i.setLineDash(T)))),0!==d[v].markerSize&&(0<d[v].markerSize||0<u.markerSize)){var A=u.getMarkerProperties(v,p,f,i);o.push(A);var P=c(y);G&&o.push({x:p,y:f,ctx:r,type:A.type,size:A.size,color:P,borderColor:P,borderThickness:A.borderThickness}),A=u.getMarkerProperties(v,p,m,i),o.push(A),P=c(y),G&&o.push({x:p,y:m,ctx:r,type:A.type,size:A.size,color:P,borderColor:P,borderThickness:A.borderThickness})}(d[v].indexLabel||u.indexLabel||d[v].indexLabelFormatter||u.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:d[v],dataSeries:u,indexKeyword:0,point:{x:p,y:m},direction:d[v].y[0]>d[v].y[1]===t.axisY.reversed?-1:1,color:S}),this._indexLabels.push({chartType:"rangeArea",dataPoint:d[v],dataSeries:u,indexKeyword:1,point:{x:p,y:f},direction:d[v].y[0]>d[v].y[1]===t.axisY.reversed?1:-1,color:S}))}else I||b||e(),I=!0;e(),tt.drawMarkers(o)}}return G&&(n.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:n,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderRangeSplineArea=function(t){function e(t,e){var n=i(b,2);if(0<n.length){if(0<u.lineThickness){r.strokeStyle=e,r.setLineDash&&r.setLineDash(t),r.beginPath(),r.moveTo(n[0].x,n[0].y);for(var s=0;s<n.length-3;s+=3)(n[s].newStrokeStyle||n[s].newLineDashArray)&&(r.stroke(),r.beginPath(),r.moveTo(n[s].x,n[s].y),n[s].newStrokeStyle&&(r.strokeStyle=n[s].newStrokeStyle),n[s].newLineDashArray&&r.setLineDash(n[s].newLineDashArray)),r.bezierCurveTo(n[s+1].x,n[s+1].y,n[s+2].x,n[s+2].y,n[s+3].x,n[s+3].y);r.stroke()}for(r.beginPath(),r.moveTo(n[0].x,n[0].y),G&&(o.beginPath(),o.moveTo(n[0].x,n[0].y)),s=0;s<n.length-3;s+=3)r.bezierCurveTo(n[s+1].x,n[s+1].y,n[s+2].x,n[s+2].y,n[s+3].x,n[s+3].y),G&&o.bezierCurveTo(n[s+1].x,n[s+1].y,n[s+2].x,n[s+2].y,n[s+3].x,n[s+3].y);for(n=i(v,2),r.lineTo(v[v.length-1].x,v[v.length-1].y),s=n.length-1;2<s;s-=3)r.bezierCurveTo(n[s-1].x,n[s-1].y,n[s-2].x,n[s-2].y,n[s-3].x,n[s-3].y),G&&o.bezierCurveTo(n[s-1].x,n[s-1].y,n[s-2].x,n[s-2].y,n[s-3].x,n[s-3].y);if(r.closePath(),r.globalAlpha=u.fillOpacity,r.fill(),G&&(o.closePath(),o.fill()),r.globalAlpha=1,0<u.lineThickness){r.strokeStyle=e,r.setLineDash&&r.setLineDash(t),r.beginPath(),r.moveTo(n[0].x,n[0].y);for(var a=s=0;s<n.length-3;s+=3,a++)(b[a].newStrokeStyle||b[a].newLineDashArray)&&(r.stroke(),r.beginPath(),r.moveTo(n[s].x,n[s].y),b[a].newStrokeStyle&&(r.strokeStyle=b[a].newStrokeStyle),b[a].newLineDashArray&&r.setLineDash(b[a].newLineDashArray)),r.bezierCurveTo(n[s+1].x,n[s+1].y,n[s+2].x,n[s+2].y,n[s+3].x,n[s+3].y);r.stroke()}r.beginPath()}}var n=t.targetCanvasCtx||this.plotArea.ctx,r=G?this._preRenderCtx:n;if(!(0>=t.dataSeriesIndexes.length)){var o=this._eventManager.ghostCtx,s=[],a=this.plotArea;r.save(),G&&o.save(),r.beginPath(),r.rect(a.x1,a.y1,a.width,a.height),r.clip(),G&&(o.beginPath(),o.rect(a.x1,a.y1,a.width,a.height),o.clip());for(var l=0;l<t.dataSeriesIndexes.length;l++){var h=t.dataSeriesIndexes[l],u=this.data[h],d=u.dataPoints;this._eventManager.objectMap[s=u.id]={objectType:"dataSeries",dataSeriesIndex:h},s=c(s),o.fillStyle=s,s=[];var p,m,f,y=0,b=[],v=[];if(0<d.length){var C=u._colorSet[y%u._colorSet.length],S=u.lineColor=u.options.lineColor||C,x=S;r.fillStyle=C,r.lineWidth=u.lineThickness;var _,k="solid";if(r.setLineDash){var w=g(u.nullDataLineDashType,u.lineThickness);_=g(k=u.lineDashType,u.lineThickness)}for(m=!1;y<d.length;y++)if(!((p=d[y].x.getTime?d[y].x.getTime():d[y].x)<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax&&(!u.connectNullData||!m)))if(null!==d[y].y&&d[y].y.length&&"number"==typeof d[y].y[0]&&"number"==typeof d[y].y[1]){p=t.axisX.convertValueToPixel(p),m=t.axisY.convertValueToPixel(d[y].y[0]),f=t.axisY.convertValueToPixel(d[y].y[1]);var T=u.dataPointIds[y];if(this._eventManager.objectMap[T]={id:T,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:y,x1:p,y1:m,y2:f},b[b.length]={x:p,y:m},v[v.length]={x:p,y:f},y<d.length-1&&(x!==(d[y].lineColor||S)||k!==(d[y].lineDashType||u.lineDashType))&&(b[b.length-1].newStrokeStyle=x=d[y].lineColor||S,r.setLineDash&&(d[y].lineDashType?b[b.length-1].newLineDashArray=g(k=d[y].lineDashType,u.lineThickness):(k=u.lineDashType,b[b.length-1].newLineDashArray=_))),0!==d[y].markerSize&&(0<d[y].markerSize||0<u.markerSize)){var I=u.getMarkerProperties(y,p,m,r);s.push(I);var A=c(T);G&&s.push({x:p,y:m,ctx:o,type:I.type,size:I.size,color:A,borderColor:A,borderThickness:I.borderThickness}),I=u.getMarkerProperties(y,p,f,r),s.push(I),A=c(T),G&&s.push({x:p,y:f,ctx:o,type:I.type,size:I.size,color:A,borderColor:A,borderThickness:I.borderThickness})}(d[y].indexLabel||u.indexLabel||d[y].indexLabelFormatter||u.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:d[y],dataSeries:u,indexKeyword:0,point:{x:p,y:m},direction:d[y].y[0]<=d[y].y[1]?-1:1,color:C}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:d[y],dataSeries:u,indexKeyword:1,point:{x:p,y:f},direction:d[y].y[0]<=d[y].y[1]?1:-1,color:C})),m=!1}else 0<y&&!m&&(u.connectNullData?r.setLineDash&&0<b.length&&(u.options.nullDataLineDashType||!d[y-1].lineDashType)&&(b[b.length-1].newLineDashArray=w,k=u.nullDataLineDashType):(e(_,S),b=[],v=[])),m=!0;e(_,S),tt.drawMarkers(s)}}return G&&(n.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&r.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&r.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),r.clearRect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.restore()),r.restore(),{source:n,dest:this.plotArea.ctx,animationCallback:Q.xClipAnimation,easingFunction:Q.easing.linear,animationBase:0}}},e.prototype.renderWaterfall=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,n=G?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var i,r,o,s,a=this._eventManager.ghostCtx,l=null,h=this.plotArea,u=0,d=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0);u=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,r=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,this.plotArea.width/t.plotType.totalDataSeries*.9)<<0;var p=t.axisX.dataInfo.minDiff;isFinite(p)||(p=.3*Math.abs(t.axisX.range)),p=this.options.dataPointWidth?this.dataPointWidth:h.width*(t.axisX.logarithmic?Math.log(p)/Math.log(t.axisX.range):Math.abs(p)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.6<<0,this.dataPointMaxWidth&&u>r&&(u=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,r)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&r<u&&(r=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,u)),p<u&&(p=u),p>r&&(p=r),n.save(),G&&this._eventManager.ghostCtx.save(),n.beginPath(),n.rect(h.x1,h.y1,h.width,h.height),n.clip(),G&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.clip());for(var m=0;m<t.dataSeriesIndexes.length;m++){var f=t.dataSeriesIndexes[m],y=this.data[f],b=y.dataPoints;l=y._colorSet[0],y.risingColor=y.options.risingColor?y.options.risingColor:l,y.fallingColor=y.options.fallingColor?y.options.fallingColor:"#e40a0a";var v="number"==typeof y.options.lineThickness?Math.round(y.lineThickness):1,C=1==Math.round(v)%2?-.5:0;if(0<b.length){var S=!!(5<p&&y.bevelEnabled),x=!1,_=null,k=null;for(u=0;u<b.length;u++)if(s=b[u].getTime?b[u].x.getTime():b[u].x,"number"!=typeof b[u].y){if(0<u&&!x&&y.connectNullData)var w=y.options.nullDataLineDashType||!b[u-1].lineDashType?y.nullDataLineDashType:b[u-1].lineDashType;x=!0}else{i=t.axisX.convertValueToPixel(s),r=0===y.dataPointEOs[u].cumulativeSum?d:t.axisY.convertValueToPixel(y.dataPointEOs[u].cumulativeSum),o=0===y.dataPointEOs[u].cumulativeSumYStartValue?d:t.axisY.convertValueToPixel(y.dataPointEOs[u].cumulativeSumYStartValue),i=t.axisX.reversed?i+t.plotType.totalDataSeries*p/2-(t.previousDataSeriesCount+m)*p<<0:i-t.plotType.totalDataSeries*p/2+(t.previousDataSeriesCount+m)*p<<0;var T=t.axisX.reversed?i-p<<0:i+p<<0;r>o&&(l=r,r=o,o=l),t.axisY.reversed&&(l=r,r=o,o=l),this._eventManager.objectMap[l=y.dataPointIds[u]]={id:l,objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:u,x1:i,y1:r,x2:T,y2:o},ut(n,i,r,T,o,A=b[u].color?b[u].color:0<b[u].y?y.risingColor:y.fallingColor,0,A,S,S,!1,!1,y.fillOpacity),l=c(l),G&&ut(this._eventManager.ghostCtx,i,r,T,o,l,0,null,!1,!1,!1,!1);var I,A=i;I=void 0!==b[u].isIntermediateSum&&!0===b[u].isIntermediateSum||void 0!==b[u].isCumulativeSum&&!0===b[u].isCumulativeSum?0<b[u].y?r:o:0<b[u].y?o:r,0<u&&_&&(!x||y.connectNullData)&&(x&&n.setLineDash&&n.setLineDash(g(w,v)),n.beginPath(),n.moveTo(_,k-C),n.lineTo(A,I-C),0<v&&n.stroke(),G&&(a.beginPath(),a.moveTo(_,k-C),a.lineTo(A,I-C),0<v&&a.stroke())),x=!1,_=T,k=0<b[u].y?r:o,A=b[u].lineDashType?b[u].lineDashType:y.options.lineDashType?y.options.lineDashType:"shortDash",n.strokeStyle=b[u].lineColor?b[u].lineColor:y.options.lineColor?y.options.lineColor:"#9e9e9e",n.lineWidth=v,n.setLineDash&&(A=g(A,v),n.setLineDash(A)),(b[u].indexLabel||y.indexLabel||b[u].indexLabelFormatter||y.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:b[u],dataSeries:y,point:{x:i+(T-i)/2,y:0<=b[u].y?r:o},direction:0>b[u].y===t.axisY.reversed?1:-1,bounds:{x1:i,y1:Math.min(r,o),x2:T,y2:Math.max(r,o)},color:l})}}}return G&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:Q.fadeInAnimation,easingFunction:Q.easing.easeInQuad,animationBase:0}}};var K=function(t,e,n,i,r,o,s,a,l){if(!(0>n)){if(void 0===a&&(a=1),!G){var h=Number((s%(2*Math.PI)).toFixed(8));Number((o%(2*Math.PI)).toFixed(8))===h&&(s-=1e-4)}t.save(),t.globalAlpha=a,"pie"===r?(t.beginPath(),t.moveTo(e.x,e.y),t.arc(e.x,e.y,n,o,s,!1),t.fillStyle=i,t.strokeStyle="white",t.lineWidth=2,t.closePath(),t.fill()):"doughnut"===r&&(t.beginPath(),t.arc(e.x,e.y,n,o,s,!1),0<=l&&t.arc(e.x,e.y,l*n,s,o,!0),t.closePath(),t.fillStyle=i,t.strokeStyle="white",t.lineWidth=2,t.fill()),t.globalAlpha=1,t.restore()}};e.prototype.renderPie=function(t){function e(t){var e=a.plotArea.ctx;for(e.clearRect(m.x1,m.y1,m.width,m.height),e.fillStyle=a.backgroundColor,e.fillRect(m.x1,m.y1,m.width,m.height),e=0;e<c.length;e++){var n=f[e].startAngle,i=f[e].endAngle;if(i>n){var r=.07*k*Math.cos(f[e].midAngle),o=.07*k*Math.sin(f[e].midAngle),s=!1;c[e].exploded?(1e-9<Math.abs(f[e].center.x-(S.x+r))||1e-9<Math.abs(f[e].center.y-(S.y+o)))&&(f[e].center.x=S.x+r*t,f[e].center.y=S.y+o*t,s=!0):(0<Math.abs(f[e].center.x-S.x)||0<Math.abs(f[e].center.y-S.y))&&(f[e].center.x=S.x+r*(1-t),f[e].center.y=S.y+o*(1-t),s=!0),s&&((r={}).dataSeries=h,r.dataPoint=h.dataPoints[e],r.index=e,a.toolTip.highlightObjects([r])),K(a.plotArea.ctx,f[e].center,f[e].radius,c[e].color?c[e].color:h._colorSet[e%h._colorSet.length],h.type,n,i,h.fillOpacity,f[e].percentInnerRadius)}}for((t=a.plotArea.ctx).save(),t.fillStyle="black",t.strokeStyle="grey",t.textBaseline="middle",t.lineJoin="round",e=e=0;e<c.length;e++)(n=f[e]).indexLabelText&&(n.indexLabelTextBlock.y-=n.indexLabelTextBlock.height/2,i=0,n.indexLabelTextBlock.x+=i="left"===n.hemisphere?"inside"!==h.indexLabelPlacement?-(n.indexLabelTextBlock.width+p):-n.indexLabelTextBlock.width/2:"inside"!==h.indexLabelPlacement?p:-n.indexLabelTextBlock.width/2,n.indexLabelTextBlock.render(!0),n.indexLabelTextBlock.x-=i,n.indexLabelTextBlock.y+=n.indexLabelTextBlock.height/2,"inside"!==n.indexLabelPlacement&&0<n.indexLabelLineThickness&&(i=n.center.x+k*Math.cos(n.midAngle),r=n.center.y+k*Math.sin(n.midAngle),t.strokeStyle=n.indexLabelLineColor,t.lineWidth=n.indexLabelLineThickness,t.setLineDash&&t.setLineDash(g(n.indexLabelLineDashType,n.indexLabelLineThickness)),t.beginPath(),t.moveTo(i,r),t.lineTo(n.indexLabelTextBlock.x,n.indexLabelTextBlock.y),t.lineTo(n.indexLabelTextBlock.x+("left"===n.hemisphere?-p:p),n.indexLabelTextBlock.y),t.stroke()),t.lineJoin="miter");t.save()}function n(t,e){return e.indexLabelTextBlock.y>t.indexLabelTextBlock.y?e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2-(t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2):t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2-(e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2)}function i(t){for(var e=null,i=1;i<c.length;i++){if(f[e=(t+i+f.length)%f.length].hemisphere!==f[t].hemisphere){e=null;break}if(f[e].indexLabelText&&e!==t&&(0>n(f[e],f[t])||("right"===f[t].hemisphere?f[e].indexLabelTextBlock.y>=f[t].indexLabelTextBlock.y:f[e].indexLabelTextBlock.y<=f[t].indexLabelTextBlock.y)))break;e=null}return e}function r(t,e,o){if(1e3<(o=(o||0)+1))return 0;e=e||0;var s=0,a=S.y-1*l,h=S.y+1*l;if(0<=t&&t<c.length){var u=f[t];if(0>e&&u.indexLabelTextBlock.y<a||0<e&&u.indexLabelTextBlock.y>h)return 0;var d=0,p=0;for(p=d=d=0,0>e?u.indexLabelTextBlock.y-u.indexLabelTextBlock.height/2>a&&u.indexLabelTextBlock.y-u.indexLabelTextBlock.height/2+e<a&&(e=-(a-(u.indexLabelTextBlock.y-u.indexLabelTextBlock.height/2+e))):u.indexLabelTextBlock.y+u.indexLabelTextBlock.height/2<a&&u.indexLabelTextBlock.y+u.indexLabelTextBlock.height/2+e>h&&(e=u.indexLabelTextBlock.y+u.indexLabelTextBlock.height/2+e-h),e=u.indexLabelTextBlock.y+e,a=0,a="right"===u.hemisphere?S.x+Math.sqrt(Math.pow(l,2)-Math.pow(e-S.y,2)):S.x-Math.sqrt(Math.pow(l,2)-Math.pow(e-S.y,2)),p=S.x+k*Math.cos(u.midAngle),d=S.y+k*Math.sin(u.midAngle),d=Math.sqrt(Math.pow(a-p,2)+Math.pow(e-d,2)),p=Math.acos(k/l),e=(d=Math.acos((l*l+k*k-d*d)/(2*k*l)))<p?e-u.indexLabelTextBlock.y:0,a=null,h=1;h<c.length;h++){if(f[a=(t-h+f.length)%f.length].hemisphere!==f[t].hemisphere){a=null;break}if(f[a].indexLabelText&&f[a].hemisphere===f[t].hemisphere&&a!==t&&(0>n(f[a],f[t])||("right"===f[t].hemisphere?f[a].indexLabelTextBlock.y<=f[t].indexLabelTextBlock.y:f[a].indexLabelTextBlock.y>=f[t].indexLabelTextBlock.y)))break;a=null}p=a,d=i(t),h=a=0,0>e?(s=e,null!==(h="right"===u.hemisphere?p:d)&&(p=-e,(e=u.indexLabelTextBlock.y-u.indexLabelTextBlock.height/2-(f[h].indexLabelTextBlock.y+f[h].indexLabelTextBlock.height/2))-p<y&&+(h=r(h,a=-p,o+1)).toFixed(C)>+a.toFixed(C)&&(s=e>y?-(e-y):-(p-(h-a))))):0<e&&(s=e,null!==(h="right"===u.hemisphere?d:p)&&(p=e,(e=f[h].indexLabelTextBlock.y-f[h].indexLabelTextBlock.height/2-(u.indexLabelTextBlock.y+u.indexLabelTextBlock.height/2))-p<y&&+(h=r(h,a=p,o+1)).toFixed(C)<+a.toFixed(C)&&(s=e>y?e-y:p-(a-h)))),s&&(o=u.indexLabelTextBlock.y+s,e=0,e="right"===u.hemisphere?S.x+Math.sqrt(Math.pow(l,2)-Math.pow(o-S.y,2)):S.x-Math.sqrt(Math.pow(l,2)-Math.pow(o-S.y,2)),u.midAngle>Math.PI/2-v&&u.midAngle<Math.PI/2+v?(a=f[a=(t-1+f.length)%f.length],t=f[(t+1+f.length)%f.length],"left"===u.hemisphere&&"right"===a.hemisphere&&e>a.indexLabelTextBlock.x?e=a.indexLabelTextBlock.x-15:"right"===u.hemisphere&&"left"===t.hemisphere&&e<t.indexLabelTextBlock.x&&(e=t.indexLabelTextBlock.x+15)):u.midAngle>3*Math.PI/2-v&&u.midAngle<3*Math.PI/2+v&&(a=f[a=(t-1+f.length)%f.length],t=f[(t+1+f.length)%f.length],"right"===u.hemisphere&&"left"===a.hemisphere&&e<a.indexLabelTextBlock.x?e=a.indexLabelTextBlock.x+15:"left"===u.hemisphere&&"right"===t.hemisphere&&e>t.indexLabelTextBlock.x&&(e=t.indexLabelTextBlock.x-15)),u.indexLabelTextBlock.y=o,u.indexLabelTextBlock.x=e,u.indexLabelAngle=Math.atan2(u.indexLabelTextBlock.y-S.y,u.indexLabelTextBlock.x-S.x))}return s}function o(){(d=a.plotArea.ctx).fillStyle="grey",d.strokeStyle="grey",d.font="16px Arial",d.textBaseline="middle";var t=d=0,e=0,o=!0;for(t=0;10>t&&(1>t||0<e);t++){if((h.radius||!h.radius&&null!=h.innerRadius&&k-e<=w)&&(o=!1),o&&(k-=e),e=0,"inside"!==h.indexLabelPlacement){for(l=k*b,d=0;d<c.length;d++)(g=f[d]).indexLabelTextBlock.x=S.x+l*Math.cos(g.midAngle),g.indexLabelTextBlock.y=S.y+l*Math.sin(g.midAngle),g.indexLabelAngle=g.midAngle,g.radius=k,g.percentInnerRadius=T;for(var s,u,d=0;d<c.length;d++){var g=f[d],v=i(d);if(null!==v){var x=0;if(0>(x=n(s=f[d],u=f[v])-y)){for(var _=u=0,I=0;I<c.length;I++)I!==d&&f[I].hemisphere===g.hemisphere&&(f[I].indexLabelTextBlock.y<g.indexLabelTextBlock.y?u++:_++);_=-1*(x-(u=x/(u+_||1)*_));var A=I=0;"right"===g.hemisphere?(I=r(d,u),+(A=r(v,_=-1*(x-I))).toFixed(C)<+_.toFixed(C)&&+I.toFixed(C)<=+u.toFixed(C)&&r(d,-(_-A))):(I=r(v,u),+(A=r(d,_=-1*(x-I))).toFixed(C)<+_.toFixed(C)&&+I.toFixed(C)<=+u.toFixed(C)&&r(v,-(_-A)))}}}}else for(d=0;d<c.length;d++)g=f[d],v=S.x+(l="pie"===h.type?.7*k:.8*k)*Math.cos(g.midAngle),u=S.y+l*Math.sin(g.midAngle),g.indexLabelTextBlock.x=v,g.indexLabelTextBlock.y=u;for(d=0;d<c.length;d++)0!==(v=(g=f[d]).indexLabelTextBlock.measureText()).height&&0!==v.width&&(v=v=0,"right"===g.hemisphere?(v=m.x2-(g.indexLabelTextBlock.x+g.indexLabelTextBlock.width+p),v*=-1):v=m.x1-(g.indexLabelTextBlock.x-g.indexLabelTextBlock.width-p),0<v&&(!o&&g.indexLabelText&&(.3*g.indexLabelTextBlock.maxWidth>(u="right"===g.hemisphere?m.x2-g.indexLabelTextBlock.x:g.indexLabelTextBlock.x-m.x1)?g.indexLabelText="":g.indexLabelTextBlock.maxWidth=.85*u,.3*g.indexLabelTextBlock.maxWidth<u&&(g.indexLabelTextBlock.x-="right"===g.hemisphere?2:-2)),Math.abs(g.indexLabelTextBlock.y-g.indexLabelTextBlock.height/2-S.y)<k||Math.abs(g.indexLabelTextBlock.y+g.indexLabelTextBlock.height/2-S.y)<k)&&(9<(v/=Math.abs(Math.cos(g.indexLabelAngle)))&&(v*=.3),v>e&&(e=v)),v=v=0,0<g.indexLabelAngle&&g.indexLabelAngle<Math.PI?(v=m.y2-(g.indexLabelTextBlock.y+g.indexLabelTextBlock.height/2+5),v*=-1):v=m.y1-(g.indexLabelTextBlock.y-g.indexLabelTextBlock.height/2-5),0<v&&(!o&&g.indexLabelText&&0===r(d,v*(u=0<g.indexLabelAngle&&g.indexLabelAngle<Math.PI?-1:1))&&r(d,2*u),Math.abs(g.indexLabelTextBlock.x-S.x)<k&&(9<(v/=Math.abs(Math.sin(g.indexLabelAngle)))&&(v*=.3),v>e&&(e=v))));var P=function(t,e,n){for(var i=[],r=0;i.push(f[e]),e!==n;e=(e+1+c.length)%c.length);for(i.sort((function(t,e){return t.y-e.y})),e=0;e<i.length&&(n=i[e],r<.7*t);e++)r+=n.indexLabelTextBlock.height,n.indexLabelTextBlock.text="",n.indexLabelText="",n.indexLabelTextBlock.measureText()};!function(){for(var t=-1,e=-1,r=0,o=!1,a=0;a<c.length;a++)if(o=!1,(s=f[a]).indexLabelText){var l=i(a);if(null!==l){var h,u=f[l];x=0,(h=0>(x=n(s,u)))&&(h=s.indexLabelTextBlock.x,h=!(s.indexLabelTextBlock.x+s.indexLabelTextBlock.width<u.indexLabelTextBlock.x-p||h>u.indexLabelTextBlock.x+u.indexLabelTextBlock.width+p||s.indexLabelTextBlock.y-s.indexLabelTextBlock.height/2>u.indexLabelTextBlock.y+u.indexLabelTextBlock.height/2+p||s.indexLabelTextBlock.y+s.indexLabelTextBlock.height/2<u.indexLabelTextBlock.y-u.indexLabelTextBlock.height/2-p)),h?(0>t&&(t=a),l!==t&&(e=l,r+=-x),0==a%Math.max(c.length/10,3)&&(o=!0)):o=!0,o&&0<r&&0<=t&&0<=e&&(P(r,t,e),e=t=-1,r=0)}}0<r&&P(r,t,e)}()}}function s(){if(a.plotArea.layoutManager.reset(),a.title&&(a.title.dockInsidePlotArea||"center"===a.title.horizontalAlign&&"center"===a.title.verticalAlign)&&a.title.render(),a.subtitles)for(var t=0;t<a.subtitles.length;t++){var e=a.subtitles[t];(e.dockInsidePlotArea||"center"===e.horizontalAlign&&"center"===e.verticalAlign)&&e.render()}a.legend&&(a.legend.dockInsidePlotArea||"center"===a.legend.horizontalAlign&&"center"===a.legend.verticalAlign)&&(a.legend.setLayout(),a.legend.render())}var a=this;if(!(0>=t.dataSeriesIndexes.length)){var l,h=this.data[t.dataSeriesIndexes[0]],c=h.dataPoints,p=10,m=this.plotArea,f=h.dataPointEOs,y=2,b=1.3,v=20/180*Math.PI,C=6,S={x:(m.x2+m.x1)/2,y:(m.y2+m.y1)/2},x=0;t=!1;for(var _=0;_<c.length;_++)x+=Math.abs(c[_].y),!t&&null!=c[_].indexLabel&&0<c[_].indexLabel.toString().length&&(t=!0),!t&&null!=c[_].label&&0<c[_].label.toString().length&&(t=!0);if(0!==x){t=t||null!=h.indexLabel&&0<h.indexLabel.toString().length;var k="inside"!==h.indexLabelPlacement&&t?.75*Math.min(m.width,m.height)/2:.92*Math.min(m.width,m.height)/2;h.radius&&(k=u(h.radius,k));var w=null!=h.innerRadius?u(h.innerRadius,k):.7*k;h.radius=k,"doughnut"===h.type&&(h.innerRadius=w);var T=Math.min(w/k,(k-1)/k);this.pieDoughnutClickHandler=function(t){a.isAnimating||!d(t.dataSeries.explodeOnClick)&&!t.dataSeries.explodeOnClick||((t=t.dataPoint).exploded=!t.exploded,1<this.dataPoints.length&&a._animator.animate(0,500,(function(t){e(t),s()})))},function(){if(h&&c){for(var t=0,e=0,n=0,i=0,r=0;r<c.length;r++){var o=c[r],s=h.dataPointIds[r];f[r].id=s,f[r].objectType="dataPoint",f[r].dataPointIndex=r,f[r].dataSeriesIndex=0;var l=f[r],u={percent:null,total:null},p=null;u=a.getPercentAndTotal(h,o),(h.indexLabelFormatter||o.indexLabelFormatter)&&(p={chart:a.options,dataSeries:h,dataPoint:o,total:u.total,percent:u.percent}),u=o.indexLabelFormatter?o.indexLabelFormatter(p):o.indexLabel?a.replaceKeywordsWithValue(o.indexLabel,o,h,r):h.indexLabelFormatter?h.indexLabelFormatter(p):h.indexLabel?a.replaceKeywordsWithValue(h.indexLabel,o,h,r):o.label?o.label:"",a._eventManager.objectMap[s]=l,l.center={x:S.x,y:S.y},l.y=o.y,l.radius=k,l.percentInnerRadius=T,l.indexLabelText=u,l.indexLabelPlacement=h.indexLabelPlacement,l.indexLabelLineColor=o.indexLabelLineColor?o.indexLabelLineColor:h.options.indexLabelLineColor?h.options.indexLabelLineColor:o.color?o.color:h._colorSet[r%h._colorSet.length],l.indexLabelLineThickness=d(o.indexLabelLineThickness)?h.indexLabelLineThickness:o.indexLabelLineThickness,l.indexLabelLineDashType=o.indexLabelLineDashType?o.indexLabelLineDashType:h.indexLabelLineDashType,l.indexLabelFontColor=o.indexLabelFontColor?o.indexLabelFontColor:h.indexLabelFontColor,l.indexLabelFontStyle=o.indexLabelFontStyle?o.indexLabelFontStyle:h.indexLabelFontStyle,l.indexLabelFontWeight=o.indexLabelFontWeight?o.indexLabelFontWeight:h.indexLabelFontWeight,l.indexLabelFontSize=d(o.indexLabelFontSize)?h.indexLabelFontSize:o.indexLabelFontSize,l.indexLabelFontFamily=o.indexLabelFontFamily?o.indexLabelFontFamily:h.indexLabelFontFamily,l.indexLabelBackgroundColor=o.indexLabelBackgroundColor?o.indexLabelBackgroundColor:h.options.indexLabelBackgroundColor?h.options.indexLabelBackgroundColor:h.indexLabelBackgroundColor,l.indexLabelMaxWidth=o.indexLabelMaxWidth?o.indexLabelMaxWidth:h.indexLabelMaxWidth?h.indexLabelMaxWidth:.33*m.width,l.indexLabelWrap=void 0!==o.indexLabelWrap?o.indexLabelWrap:h.indexLabelWrap,l.startAngle=0===r?h.startAngle?h.startAngle/180*Math.PI:0:f[r-1].endAngle,l.startAngle=(l.startAngle+2*Math.PI)%(2*Math.PI),l.endAngle=l.startAngle+2*Math.PI/x*Math.abs(o.y),o=((o=(l.endAngle+l.startAngle)/2)+2*Math.PI)%(2*Math.PI),l.midAngle=o,l.midAngle>Math.PI/2-v&&l.midAngle<Math.PI/2+v?((0===t||f[n].midAngle>l.midAngle)&&(n=r),t++):l.midAngle>3*Math.PI/2-v&&l.midAngle<3*Math.PI/2+v&&((0===e||f[i].midAngle>l.midAngle)&&(i=r),e++),l.hemisphere=o>Math.PI/2&&o<=3*Math.PI/2?"left":"right",l.indexLabelTextBlock=new P(a.plotArea.ctx,{fontSize:l.indexLabelFontSize,fontFamily:l.indexLabelFontFamily,fontColor:l.indexLabelFontColor,fontStyle:l.indexLabelFontStyle,fontWeight:l.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:l.indexLabelBackgroundColor,maxWidth:l.indexLabelMaxWidth,maxHeight:l.indexLabelWrap?5*l.indexLabelFontSize:1.5*l.indexLabelFontSize,text:l.indexLabelText,padding:0,textBaseline:"top"}),l.indexLabelTextBlock.measureText()}for(s=o=0,u=!1,r=0;r<c.length;r++)l=f[(n+r)%c.length],1<t&&l.midAngle>Math.PI/2-v&&l.midAngle<Math.PI/2+v&&(o<=t/2&&!u?(l.hemisphere="right",o++):(l.hemisphere="left",u=!0));for(u=!1,r=0;r<c.length;r++)l=f[(i+r)%c.length],1<e&&l.midAngle>3*Math.PI/2-v&&l.midAngle<3*Math.PI/2+v&&(s<=e/2&&!u?(l.hemisphere="left",s++):(l.hemisphere="right",u=!0))}}(),o(),o(),o(),o(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,(function(t){var e=a.plotArea.ctx;for(e.clearRect(m.x1,m.y1,m.width,m.height),e.fillStyle=a.backgroundColor,e.fillRect(m.x1,m.y1,m.width,m.height),t=f[0].startAngle+2*Math.PI*t,e=0;e<c.length;e++){var n=0===e?f[e].startAngle:i,i=n+(f[e].endAngle-f[e].startAngle),r=!1;if(i>t&&(i=t,r=!0),i>n&&K(a.plotArea.ctx,f[e].center,f[e].radius,c[e].color?c[e].color:h._colorSet[e%h._colorSet.length],h.type,n,i,h.fillOpacity,f[e].percentInnerRadius),r)break}s()}),(function(){a.disableToolTip=!1,a._animator.animate(0,a.animatedRender?500:0,(function(t){e(t),s()}))}))}}};var $=function(t,e,n,i){void 0===n&&(n=1),0>=Math.round(e.y4-e.y1)||(t.save(),t.globalAlpha=n,t.beginPath(),t.moveTo(Math.round(e.x1),Math.round(e.y1)),t.lineTo(Math.round(e.x2),Math.round(e.y2)),t.lineTo(Math.round(e.x3),Math.round(e.y3)),t.lineTo(Math.round(e.x4),Math.round(e.y4)),"undefined"!==e.x5&&(t.lineTo(Math.round(e.x5),Math.round(e.y5)),t.lineTo(Math.round(e.x6),Math.round(e.y6))),t.closePath(),t.fillStyle=i||e.color,t.fill(),t.globalAplha=1,t.restore())};e.prototype.renderFunnel=function(t){function e(){var t,e,n,i;if("inside"!==m.indexLabelPlacement)for(var r=0;r<z.length;r++)0==j[r].textBlock.text.length?j[r].isDirty=!0:(n=void 0!==(t=z[r]).x5?(t.y2+t.y4)/2:(t.y2+t.y3)/2,e=m.reversed?void 0!==t.x5&&n>O?l(n).x2+1:(t.x2+t.x3)/2+1:void 0!==t.x5?n<O?l(n).x2+1:(t.x4+t.x3)/2+1:(t.x2+t.x3)/2+1,j[r].textBlock.x=e+D,j[r].textBlock.y=n-j[r].height/2,m.reversed?(j[r].textBlock.y+j[r].height>R+b&&(j[r].textBlock.y=R+b-j[r].height),j[r].textBlock.y<V-b&&(j[r].textBlock.y=V-b)):(j[r].textBlock.y<R-b&&(j[r].textBlock.y=R-b),j[r].textBlock.y+j[r].height>V+b&&(j[r].textBlock.y=V+b-j[r].height)));else for(r=0;r<z.length;r++)0==j[r].textBlock.text.length?j[r].isDirty=!0:(i=j[r].width,(e=(t=z[r]).height)>=(n=j[r].height)?(n=r!=W?(t.y1+t.y3)/2-n/2:(t.y1+t.y4)/2-n/2,j[r].textBlock.x=e=r!=W?(t.x4+t.x3)/2-i/2:(t.x5+t.x4)/2-i/2,j[r].textBlock.y=n):j[r].isDirty=!0)}function n(t,e){return(e<z.length?j[e].textBlock.y:m.reversed?R+b:V+b)-(0>t?m.reversed?V-b:R-b:j[t].textBlock.y+j[t].height+q)}function i(t,n,i){var o,s,a,l=[],u=b,d=[];if(-1!==n&&(0<=J.indexOf(n)?(s=J.indexOf(n),J.splice(s,1)):(J.push(n),J=J.sort((function(t,e){return t-e})))),0===J.length)l=Z;else{s=b*(1!=J.length||0!=J[0]&&J[0]!=z.length-1?2:1)/function(){for(var t=0,e=0;e<z.length-1;e++)(0<=J.indexOf(e)||0<=J.indexOf(e+1))&&t++;return t}();for(var p=0;p<z.length;p++){if(1==J.length&&0==J[0]){if(0===p){l.push(Z[p]),o=u;continue}}else 0===p&&(o=-1*u);l.push(Z[p]+o),(0<=J.indexOf(p)||p<z.length&&0<=J.indexOf(p+1))&&(o+=s)}}a=function(){for(var t=[],e=0;e<z.length;e++)t.push(l[e]-z[e].y1);return t}(),(new Date).getTime(),t._animator.animate(0,i,(function(i){var o=t.plotArea.ctx||t.ctx;K=!0,o.clearRect(y.x1,y.y1,y.x2-y.x1,y.y2-y.y1),o.fillStyle=t.backgroundColor,o.fillRect(y.x1,y.y1,y.width,y.height),function(t){for(var e,n,i=0;i<z.length;i++)e=a[i],n=z[i],e*=t,void 0===d[i]&&(d[i]=0),0>d&&(d*=-1),n.y1+=e-d[i],n.y2+=e-d[i],n.y3+=e-d[i],n.y4+=e-d[i],n.y5&&(n.y5+=e-d[i],n.y6+=e-d[i]),d[i]=e}(i);var s={};for(s.dataSeries=m,s.dataPoint=m.reversed?m.dataPoints[f.length-1-n]:m.dataPoints[n],s.index=m.reversed?f.length-1-n:n,t.toolTip.highlightObjects([s]),s=0;s<z.length;s++)$(o,z[s],m.fillOpacity);c(o),_&&("inside"!==m.indexLabelPlacement?r(o):e(),h(o)),1<=i&&(K=!1)}),null,Q.easing.easeOutQuart)}function r(t){for(var e,n,i,r,o=0;o<z.length;o++)e=l(n=((z[o].y2+z[o].y4)/2<<0)+(r=1==j[o].lineThickness%2?.5:0)).x2-1,i=j[o].textBlock.x,r=(j[o].textBlock.y+j[o].height/2<<0)+r,j[o].isDirty||0==j[o].lineThickness||(t.strokeStyle=j[o].lineColor,t.lineWidth=j[o].lineThickness,t.setLineDash&&t.setLineDash(g(j[o].lineDashType,j[o].lineThickness)),t.beginPath(),t.moveTo(e,n),t.lineTo(i,r),t.stroke())}function o(t){for(t-=1;-1<=t&&-1!=t&&j[t].isDirty;t--);return t}function s(t){for(t+=1;t<=z.length&&t!=z.length&&j[t].isDirty;t++);return t}function l(t){for(var e,n=0;n<f.length;n++)if(z[n].y1<t&&z[n].y4>t){e=z[n];break}return e?{x1:t=e.y6&&t>e.y6?e.x3+(e.x4-e.x3)/(e.y4-e.y3)*(t-e.y3):e.x2+(e.x3-e.x2)/(e.y3-e.y2)*(t-e.y2),x2:t}:-1}function h(t){for(var e=0;e<z.length;e++)j[e].isDirty||(t&&(j[e].textBlock.ctx=t),j[e].textBlock.render(!0))}function c(t){if(u.plotArea.layoutManager.reset(),t.roundRect||a(t),u.title&&(u.title.dockInsidePlotArea||"center"===u.title.horizontalAlign&&"center"===u.title.verticalAlign)&&(u.title.ctx=t,u.title.render()),u.subtitles)for(var e=0;e<u.subtitles.length;e++){var n=u.subtitles[e];(n.dockInsidePlotArea||"center"===n.horizontalAlign&&"center"===n.verticalAlign)&&(u.subtitles.ctx=t,n.render())}u.legend&&(u.legend.dockInsidePlotArea||"center"===u.legend.horizontalAlign&&"center"===u.legend.verticalAlign)&&(u.legend.ctx=t,u.legend.setLayout(),u.legend.render()),H.fNg&&H.fNg(u)}var u=this;if(!(0>=t.dataSeriesIndexes.length)){for(var m=this.data[t.dataSeriesIndexes[0]],f=m.dataPoints,y=this.plotArea,b=.025*y.width,v=.01*y.width,C=0,S=y.height-2*b,x=Math.min(y.width-2*v,2.8*y.height),_=!1,k=0;k<f.length;k++)!_&&null!=f[k].indexLabel&&0<f[k].indexLabel.toString().length&&(_=!0),!_&&null!=f[k].label&&0<f[k].label.toString().length&&(_=!0),(!_&&"function"==typeof m.indexLabelFormatter||"function"==typeof f[k].indexLabelFormatter)&&(_=!0);_=_||null!=m.indexLabel&&0<m.indexLabel.toString().length,"inside"!==m.indexLabelPlacement&&_||(v=(y.width-.75*x)/2),k=y.x1+v;var w=y.x2-v,T=y.y1+b,I=y.y2-b,A=t.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(0!=m.length&&m.dataPoints&&m.visible&&0!==f.length){var M,E,D=30*(w-(t=75*x/100))/100;"funnel"===m.type?(M=d(m.options.neckHeight)?.35*S:m.neckHeight,E=d(m.options.neckWidth)?.25*t:m.neckWidth,M="string"==typeof M&&M.match(/%$/)?(M=parseInt(M))*S/100:parseInt(M),E="string"==typeof E&&E.match(/%$/)?(E=parseInt(E))*t/100:parseInt(E),M>S?M=S:0>=M&&(M=0),E>t?E=t-.5:0>=E&&(E=0)):"pyramid"===m.type&&(E=M=0,m.reversed=!m.reversed);var F=k,L=k+t,R=m.reversed?I:T,B=(v=k+t/2)-E/2,N=v+E/2,O=m.reversed?T+M:I-M,V=m.reversed?T:I;t=[],v=[];var W,z=[],U=(x=[],T),Y=(O-R)/(B-F),X=-Y;if(-1!==(k="area"===(m.valueRepresents?m.valueRepresents:"height")?function(){var t,e,n=F,i=L,r=B,o=N;t=T,e=I-M,o=Math.abs((e-t)*(i-n+(o-r))/2),t=e-t,e=(r=N-B)*(e-I),e=o+(e=Math.abs(e)),o=[];for(var s=0,a=0;a<f.length;a++){if(void 0===f[a].y)return-1;f[a].y="number"==typeof f[a].y?f[a].y:0,s+=Math.abs(f[a].y)}if(0===s)return-1;var l,h,c=o[0]=0,u=0;for(i-=n,c=!1,a=0;a<f.length;a++)n=Math.abs(f[a].y)*e/s,c?l=0==Number(r.toFixed(3))?0:n/r:0>(h=Y*Y*i*i-4*Math.abs(Y)*n)?(n-=c=(i+(h=r))*(t-u)/2,l=t-u,u+=t-u,l+=0==h?0:n/h,u+=n/h,c=!0):(h=i-2*(l=(Math.abs(Y)*i-Math.sqrt(h))/2)/Math.abs(Y),(u+=l)>t&&(c=(i+(h=r))*(t-(u-=l))/2,l=t-u,u+=t-u,l+=(n-=c)/h,u+=n/h,c=!0),i=h),o.push(l);return o}():function(){for(var t=0,e=[],n=0;n<f.length;n++){if(void 0===f[n].y)return-1;f[n].y="number"==typeof f[n].y?f[n].y:0,t+=Math.abs(f[n].y)}if(0===t)return-1;for(n=e[0]=0;n<f.length;n++)e.push(Math.abs(f[n].y)*S/t);return e}())){if(m.reversed)for(x.push(U),E=k.length-1;0<E;E--)x.push(U+=k[E]);else for(E=0;E<k.length;E++)x.push(U+=k[E]);if(m.reversed)for(E=0;E<k.length;E++)x[E]<O?(t.push(B),v.push(N),W=E):(t.push((x[E]-R+Y*F)/Y),v.push((x[E]-R+X*L)/X));else for(E=0;E<k.length;E++)x[E]<O?(t.push((x[E]-R+Y*F)/Y),v.push((x[E]-R+X*L)/X),W=E):(t.push(B),v.push(N));for(E=0;E<k.length-1;E++)U=m.reversed?f[f.length-1-E].color?f[f.length-1-E].color:m._colorSet[(f.length-1-E)%m._colorSet.length]:f[E].color?f[E].color:m._colorSet[E%m._colorSet.length],z.push(E===W?{x1:t[E],y1:x[E],x2:v[E],y2:x[E],x3:N,y3:O,x4:v[E+1],y4:x[E+1],x5:t[E+1],y5:x[E+1],x6:B,y6:O,id:E,height:x[E+1]-x[E],color:U}:{x1:t[E],y1:x[E],x2:v[E],y2:x[E],x3:v[E+1],y3:x[E+1],x4:t[E+1],y4:x[E+1],id:E,height:x[E+1]-x[E],color:U});var q=2,j=[],K=!1,J=[],Z=[];for(k=!1,t=t=0,p(J),E=0;E<f.length;E++)f[E].exploded&&(k=!0,J.push(m.reversed?f.length-1-E:E));if(A.clearRect(y.x1,y.y1,y.width,y.height),A.fillStyle=u.backgroundColor,A.fillRect(y.x1,y.y1,y.width,y.height),_&&m.visible&&(function(){if(m&&f){for(var t,e,n,i,r,o,s,h,c,p,g,y,b,v,C=[],S=[],x={percent:null,total:null},_=null,k=0;k<f.length;k++)v=l(v=void 0!==(v=z[k]).x5?(v.y2+v.y4)/2:(v.y2+v.y3)/2).x2+1,C[k]=w-v-D;v=.5*D,k=0;for(var T=f.length-1;k<f.length||0<=T;k++,T--)t=(e=m.reversed?f[T]:f[k]).color?e.color:m.reversed?m._colorSet[(f.length-1-k)%m._colorSet.length]:m._colorSet[k%m._colorSet.length],n=e.indexLabelPlacement||m.indexLabelPlacement||"outside",i=e.indexLabelBackgroundColor||m.indexLabelBackgroundColor||(G?"transparent":null),r=e.indexLabelFontColor||m.indexLabelFontColor||"#979797",o=d(e.indexLabelFontSize)?m.indexLabelFontSize:e.indexLabelFontSize,s=e.indexLabelFontStyle||m.indexLabelFontStyle||"normal",h=e.indexLabelFontFamily||m.indexLabelFontFamily||"arial",c=e.indexLabelFontWeight||m.indexLabelFontWeight||"normal",t=e.indexLabelLineColor||m.options.indexLabelLineColor||t,p="number"==typeof e.indexLabelLineThickness?e.indexLabelLineThickness:"number"==typeof m.indexLabelLineThickness?m.indexLabelLineThickness:2,g=e.indexLabelLineDashType||m.indexLabelLineDashType||"solid",y=void 0!==e.indexLabelWrap?e.indexLabelWrap:void 0===m.indexLabelWrap||m.indexLabelWrap,u._eventManager.objectMap[b=m.dataPointIds[k]]={id:b,objectType:"dataPoint",dataPointIndex:k,dataSeriesIndex:0,funnelSection:z[m.reversed?f.length-1-k:k]},"inside"===m.indexLabelPlacement&&(C[k]=k!==W?m.reversed?z[k].x2-z[k].x1:z[k].x3-z[k].x4:z[k].x3-z[k].x6,20>C[k]&&(C[k]=k!==W&&m.reversed?z[k].x3-z[k].x4:z[k].x2-z[k].x1,C[k]/=2)),((b=e.indexLabelMaxWidth?e.indexLabelMaxWidth:m.options.indexLabelMaxWidth?m.indexLabelMaxWidth:C[k])>C[k]||0>b)&&(b=C[k]),S[k]="inside"===m.indexLabelPlacement&&z[k].height,x=u.getPercentAndTotal(m,e),(m.indexLabelFormatter||e.indexLabelFormatter)&&(_={chart:u.options,dataSeries:m,dataPoint:e,total:x.total,percent:x.percent}),e=e.indexLabelFormatter?e.indexLabelFormatter(_):e.indexLabel?u.replaceKeywordsWithValue(e.indexLabel,e,m,k):m.indexLabelFormatter?m.indexLabelFormatter(_):m.indexLabel?u.replaceKeywordsWithValue(m.indexLabel,e,m,k):e.label?e.label:"",0>=p&&(p=0),1e3>b&&1e3-b<v&&(b+=1e3-b),A.roundRect||a(A),(n=new P(A,{fontSize:o,fontFamily:h,fontColor:r,fontStyle:s,fontWeight:c,horizontalAlign:n,backgroundColor:i,maxWidth:b,maxHeight:!1===S[k]?y?4.28571429*o:1.5*o:S[k],text:e,padding:q})).measureText(),j.push({textBlock:n,id:m.reversed?T:k,isDirty:!1,lineColor:t,lineThickness:p,lineDashType:g,height:n.height<n.maxHeight?n.height:n.maxHeight,width:n.width<n.maxWidth?n.width:n.maxWidth})}}(),e(),function(){var t,e,n,i,r,o=[];r=!1,n=0;for(var a,l=w-L-D/2,h=(l=m.options.indexLabelMaxWidth?m.indexLabelMaxWidth>l?l:m.indexLabelMaxWidth:l,j.length-1);0<=h;h--)a=f[j[h].id],i=(n=j[h]).textBlock,e=(t=s(h)<z.length?j[s(h)]:null)?t.textBlock:null,n=n.height,t&&i.y+n+q>e.y&&(r=!0),((n=a.indexLabelMaxWidth||l)>l||0>n)&&(n=l),o.push(n);if(r)for(h=j.length-1;0<=h;h--)t=z[h],j[h].textBlock.maxWidth=o[o.length-(h+1)],j[h].textBlock.measureText(),j[h].textBlock.x=w-l,r=j[h].textBlock.width<j[h].textBlock.maxWidth?j[h].textBlock.width:j[h].textBlock.maxWidth,j[h].height=n=j[h].textBlock.height<j[h].textBlock.maxHeight?j[h].textBlock.height:j[h].textBlock.maxHeight,j[h].width=r,j[h].textBlock.y=(n=void 0!==t.x5?(t.y2+t.y4)/2:(t.y2+t.y3)/2)-j[h].height/2,m.reversed?(j[h].textBlock.y+j[h].height>R+b&&(j[h].textBlock.y=R+b-j[h].height),j[h].textBlock.y<V-b&&(j[h].textBlock.y=V-b)):(j[h].textBlock.y<R-b&&(j[h].textBlock.y=R-b),j[h].textBlock.y+j[h].height>V+b&&(j[h].textBlock.y=V+b-j[h].height))}(),"inside"!==m.indexLabelPlacement)){for(function(){function t(e,i){var r;if(0>e||e>=j.length)return 0;var a,l=j[e].textBlock;return 0>i?(i*=-1,(r=n(a=o(e),e))>=i?(l.y-=i,i):0==e?(0<r&&(l.y-=r),r):(0<(r+=t(a,-(i-r)))&&(l.y-=r),r)):(r=n(e,a=s(e)))>=i?(l.y+=i,i):e==z.length-1?(0<r&&(l.y+=r),r):(0<(r+=t(a,i-r))&&(l.y+=r),r)}function e(){var t,e,n,r,a,l=0;r=(I-T+2*b)/d,a=d;for(var h,c=1;c<a;c++){n=c*r;for(var u=j.length-1;0<=u;u--)!j[u].isDirty&&j[u].textBlock.y<n&&j[u].textBlock.y+j[u].height>n&&!((h=s(u))>=j.length-1)&&j[u].textBlock.y+j[u].height+q>j[h].textBlock.y&&(j[u].textBlock.y=j[u].textBlock.y+j[u].height-n>n-j[u].textBlock.y?n+1:n-j[u].height-1)}for(h=z.length-1;0<h;h--)if(!j[h].isDirty){if(0>(n=o(h))&&j[n=0].isDirty)break;if(j[h].textBlock.y<j[n].textBlock.y+j[n].height){for(e=e||h,r=h,a=0;j[r].textBlock.y<j[n].textBlock.y+j[n].height+q;){if(t=t||j[r].textBlock.y+j[r].height,a+=j[r].height,a+=q,0>=(r=n)){a+=j[r=0].height;break}if(0>(n=o(r))){a+=j[r=0].height;break}}if(r!=h){l=i(t=a-(t-=l=j[r].textBlock.y),e,r);break}}}return l}function i(t,e,n){var i=[],r=0,o=0;for(t=Math.abs(t);n<=e;n++)i.push(z[n]);for(i.sort((function(t,e){return t.height-e.height})),n=0;n<i.length&&(e=i[n],r<t);n++)o++,r+=j[e.id].height+q,j[e.id].textBlock.text="",j[e.id].indexLabelText="",j[e.id].isDirty=!0,j[e.id].textBlock.measureText();return o}for(var r,a,l,h,c,u,d=1,p=0;p<2*d;p++){for(var m=j.length-1;0<=m&&(0<=o(m)&&o(m),h=(l=j[m]).textBlock,u=(c=s(m)<z.length?j[s(m)]:null)?c.textBlock:null,r=+l.height.toFixed(6),a=+h.y.toFixed(6),!(!l.isDirty&&c&&a+r+q>+u.y.toFixed(6)&&(r=h.y+r+q-u.y,a=t(m,-r),a<r&&(0<a&&(r-=a),a=t(s(m),r),a!=r))));m--);e()}}(),E=0;E<f.length;E++)j[E].isDirty||(t=(w-(t=j[E].textBlock.x+j[E].width))/2,0==E&&(C=t),C>t&&(C=t));for(E=0;E<z.length;E++)z[E].x1+=C,z[E].x2+=C,z[E].x3+=C,z[E].x4+=C,z[E].x5&&(z[E].x5+=C,z[E].x6+=C),j[E].textBlock.x+=C}for(E=0;E<z.length;E++)$(A,C=z[E],m.fillOpacity),Z.push(C.y1);if(c(A),_&&m.visible&&("inside"===m.indexLabelPlacement||u.animationEnabled||r(A),u.animationEnabled||h()),!_)for(E=0;E<f.length;E++)u._eventManager.objectMap[C=m.dataPointIds[E]]=t={id:C,objectType:"dataPoint",dataPointIndex:E,dataSeriesIndex:0,funnelSection:z[m.reversed?f.length-1-E:E]};return!u.animationEnabled&&k?i(u,-1,0):u.animationEnabled&&!u.animatedRender&&i(u,-1,0),this.funnelPyramidClickHandler=function(t){var e=-1;!K&&!u.isAnimating&&(d(t.dataSeries.explodeOnClick)||t.dataSeries.explodeOnClick)&&0<=(e=m.reversed?f.length-1-t.dataPointIndex:t.dataPointIndex)&&(t=e,"funnel"!==m.type&&"pyramid"!==m.type||(m.reversed?f[f.length-1-t].exploded=!f[f.length-1-t].exploded:f[t].exploded=!f[t].exploded),i(u,e,500))},{source:A,dest:this.plotArea.ctx,animationCallback:function(t,e){Q.fadeInAnimation(t,e),1<=t&&(i(u,-1,500),c(u.plotArea.ctx||u.ctx))},easingFunction:Q.easing.easeInQuad,animationBase:0}}}}},e.prototype.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},e.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,e.prototype.set=function(t,n,i){i=void 0===i||i,"options"===t?(this.options=n,i&&this.render()):e.base.set.call(this,t,n,i)},e.prototype.exportChart=function(t){var e=(t=void 0===t?{}:t).format?t.format:"png",n=t.fileName?t.fileName:this.exportFileName;if(t.toDataURL)return this.canvas.toDataURL("image/"+e);h(this.canvas,e,n)},e.prototype.print=function(){var t=this.exportChart({toDataURL:!0}),e=document.createElement("iframe");e.setAttribute("class","canvasjs-chart-print-frame"),e.setAttribute("style","position:absolute; width:100%; border: 0px; margin: 0px 0px 0px 0px; padding 0px 0px 0px 0px;"),e.style.height=this.height+"px",this._canvasJSContainer.appendChild(e);var n=this,i=e.contentWindow||e.contentDocument.document||e.contentDocument;i.document.open(),i.document.write('<!DOCTYPE HTML>\n<html><body style="margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"><img src="'+t+'"/><body/></html>'),i.document.close(),setTimeout((function(){i.focus(),i.print(),setTimeout((function(){n._canvasJSContainer.removeChild(e)}),1e3)}),500)},e.prototype.getPercentAndTotal=function(t,e){var n=null,i=null,r=null;if(0<=t.type.indexOf("stacked"))i=0,(n=e.x.getTime?e.x.getTime():e.x)in t.plotUnit.yTotals&&(i=t.plotUnit.yTotals[n],r=isNaN(e.y)?0:e.y/i*100);else if("pie"===t.type||"doughnut"===t.type||"funnel"===t.type||"pyramid"===t.type){for(n=i=0;n<t.dataPoints.length;n++)isNaN(t.dataPoints[n].y)||(i+=t.dataPoints[n].y);r=isNaN(e.y)?0:e.y/i*100}return{percent:r,total:i}},e.prototype.replaceKeywordsWithValue=function(t,e,n,i,r){var o=this;if(r=void 0===r?0:r,(0<=n.type.indexOf("stacked")||"pie"===n.type||"doughnut"===n.type||"funnel"===n.type||"pyramid"===n.type)&&(0<=t.indexOf("#percent")||0<=t.indexOf("#total"))){var a="#percent",l="#total",h=this.getPercentAndTotal(n,e);l=isNaN(h.total)?l:h.total,a=isNaN(h.percent)?a:h.percent;do{if(h="",n.percentFormatString)h=n.percentFormatString;else{h="#,##0.";var c=Math.max(Math.ceil(Math.log(1/Math.abs(a))/Math.LN10),2);!isNaN(c)&&isFinite(c)||(c=2);for(var u=0;u<c;u++)h+="#";n.percentFormatString=h}t=(t=t.replace("#percent",ot(a,h,o._cultureInfo))).replace("#total",ot(l,n.yValueFormatString?n.yValueFormatString:"#,##0.########",o._cultureInfo))}while(0<=t.indexOf("#percent")||0<=t.indexOf("#total"))}return t.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,(function(t){if('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])return t.slice(1,t.length-1);t=(t=s(t.slice(1,t.length-1))).replace("#index",r);var a=null;try{var h=t.match(/(.*?)\s*\[\s*(.*?)\s*\]/);h&&0<h.length&&(a=s(h[2]),t=s(h[1]))}catch(l){}if(h=null,"color"===t)return"waterfall"===n.type?e.color?e.color:0<e.y?n.risingColor:n.fallingColor:"error"===n.type?n.color?n.color:n._colorSet[a%n._colorSet.length]:e.color?e.color:n.color?n.color:n._colorSet[i%n._colorSet.length];if(e.hasOwnProperty(t))h=e;else{if(!n.hasOwnProperty(t))return"";h=n}return h=h[t],null!==a&&(h=h[a]),"x"!==t?"y"===t?ot(h,e.yValueFormatString?e.yValueFormatString:n.yValueFormatString?n.yValueFormatString:n.yValueFormatString="#,##0.########",o._cultureInfo):"z"===t?ot(h,e.zValueFormatString?e.zValueFormatString:n.zValueFormatString?n.zValueFormatString:n.zValueFormatString="#,##0.########",o._cultureInfo):h:"dateTime"===n.axisX.valueType||"dateTime"===n.xValueType||e.x&&e.x.getTime?o.plotInfo.plotTypes[0].plotUnits[0].axisX&&!o.plotInfo.plotTypes[0].plotUnits[0].axisX.logarithmic?rt(h,e.xValueFormatString?e.xValueFormatString:n.xValueFormatString?n.xValueFormatString:n.xValueFormatString=o.axisX&&o.axisX.autoValueFormatString?o.axisX.autoValueFormatString:"DD MMM YY",o._cultureInfo):void 0:ot(h,e.xValueFormatString?e.xValueFormatString:n.xValueFormatString?n.xValueFormatString:n.xValueFormatString="#,##0.########",o._cultureInfo)}))},n(R,I),R.prototype.setLayout=function(){var t=this.dockInsidePlotArea?this.chart.plotArea:this.chart,e=t.layoutManager.getFreeSpace(),n=null,i=0,r=0,o=0,s=0,a=this.markerMargin=this.chart.options.legend&&!d(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var l=[],h=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",n=this.verticalAlign,o=this.maxWidth=null!==this.maxWidth?this.maxWidth:e.width,s=this.maxHeight=null!==this.maxHeight?this.maxHeight:.5*e.height):"center"===this.verticalAlign&&(this.orientation="vertical",n=this.horizontalAlign,o=this.maxWidth=null!==this.maxWidth?this.maxWidth:.5*e.width,s=this.maxHeight=null!==this.maxHeight?this.maxHeight:e.height),this.errorMarkerColor=[];for(var c=0;c<this.dataSeries.length;c++){var u=this.dataSeries[c];if(u.dataPoints&&u.dataPoints.length)if("pie"!==u.type&&"doughnut"!==u.type&&"funnel"!==u.type&&"pyramid"!==u.type){var p=u.legendMarkerType=u.legendMarkerType?u.legendMarkerType:"line"!==u.type&&"stepLine"!==u.type&&"spline"!==u.type&&"scatter"!==u.type&&"bubble"!==u.type||!u.markerType?"error"===u.type&&u._linkedSeries?u._linkedSeries.legendMarkerType?u._linkedSeries.legendMarkerType:B.getDefaultLegendMarker(u._linkedSeries.type):B.getDefaultLegendMarker(u.type):u.markerType,m=u.legendText?u.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:u,dataPoint:null}):u.name,f=u.legendMarkerColor=u.legendMarkerColor?u.legendMarkerColor:u.markerColor?u.markerColor:"error"===u.type?d(u.whiskerColor)?u._colorSet[0]:u.whiskerColor:u._colorSet[0],g=u.markerSize||"line"!==u.type&&"stepLine"!==u.type&&"spline"!==u.type?.75*this.lineHeight:0,y=u.legendMarkerBorderColor?u.legendMarkerBorderColor:u.markerBorderColor,b=u.legendMarkerBorderThickness?u.legendMarkerBorderThickness:u.markerBorderThickness?Math.max(1,Math.round(.2*g)):0;"error"===u.type&&this.errorMarkerColor.push(f),m=this.chart.replaceKeywordsWithValue(m,u.dataPoints[0],u,c),l.push(p={markerType:p,markerColor:f,text:m,textBlock:null,chartType:u.type,markerSize:g,lineColor:u._colorSet[0],dataSeriesIndex:u.index,dataPointIndex:null,markerBorderColor:y,markerBorderThickness:b})}else for(var v=0;v<u.dataPoints.length;v++){var C=u.dataPoints[v];p=C.legendMarkerType?C.legendMarkerType:u.legendMarkerType?u.legendMarkerType:B.getDefaultLegendMarker(u.type),m=C.legendText?C.legendText:u.legendText?u.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:u,dataPoint:C}):C.name?C.name:"DataPoint: "+(v+1),f=C.legendMarkerColor?C.legendMarkerColor:u.legendMarkerColor?u.legendMarkerColor:C.color?C.color:u.color?u.color:u._colorSet[v%u._colorSet.length],g=.75*this.lineHeight,y=C.legendMarkerBorderColor?C.legendMarkerBorderColor:u.legendMarkerBorderColor?u.legendMarkerBorderColor:C.markerBorderColor?C.markerBorderColor:u.markerBorderColor,b=C.legendMarkerBorderThickness?C.legendMarkerBorderThickness:u.legendMarkerBorderThickness?u.legendMarkerBorderThickness:C.markerBorderThickness||u.markerBorderThickness?Math.max(1,Math.round(.2*g)):0,p={markerType:p,markerColor:f,text:m=this.chart.replaceKeywordsWithValue(m,C,u,v),textBlock:null,chartType:u.type,markerSize:g,dataSeriesIndex:c,dataPointIndex:v,markerBorderColor:y,markerBorderThickness:b},(C.showInLegend||u.showInLegend&&!1!==C.showInLegend)&&l.push(p)}}if(!0===this.reversed&&l.reverse(),0<l.length){for(u=null,f=m=C=v=0,C=null!==this.itemWidth?null!==this.itemMaxWidth?Math.min(this.itemWidth,this.itemMaxWidth,o):this.itemMaxWidth=Math.min(this.itemWidth,o):null!==this.itemMaxWidth?Math.min(this.itemMaxWidth,o):this.itemMaxWidth=o,C-=(g=0===g?.75*this.lineHeight:g)+a,c=0;c<l.length;c++)y=C,"line"!==(p=l[c]).chartType&&"spline"!==p.chartType&&"stepLine"!==p.chartType||(y-=.2*this.lineHeight),0>=s||void 0===s||0>=y||void 0===y||("horizontal"===this.orientation?(p.textBlock=new P(this.ctx,{x:0,y:0,maxWidth:y,maxHeight:this.itemWrap?s:this.lineHeight,angle:0,text:p.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),p.textBlock.measureText(),null!==this.itemWidth&&(p.textBlock.width=this.itemWidth-(g+a+("line"===p.chartType||"spline"===p.chartType||"stepLine"===p.chartType?.2*this.lineHeight:0))),(!u||u.width+Math.round(p.textBlock.width+g+a+(0===u.width?0:this.horizontalSpacing)+("line"===p.chartType||"spline"===p.chartType||"stepLine"===p.chartType?.2*this.lineHeight:0))>o)&&(h.push(u={items:[],width:0}),this.height+=m,m=0),m=Math.max(m,p.textBlock.height)):(p.textBlock=new P(this.ctx,{x:0,y:0,maxWidth:C,maxHeight:!0===this.itemWrap?s:1.5*this.fontSize,angle:0,text:p.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),p.textBlock.measureText(),null!==this.itemWidth&&(p.textBlock.width=this.itemWidth-(g+a+("line"===p.chartType||"spline"===p.chartType||"stepLine"===p.chartType?.2*this.lineHeight:0))),this.height<s-this.lineHeight?h.push(u={items:[],width:0}):(u=h[v],v=(v+1)%h.length),this.height+=p.textBlock.height),p.textBlock.x=u.width,p.textBlock.y=0,u.width+=Math.round(p.textBlock.width+g+a+(0===u.width?0:this.horizontalSpacing)+("line"===p.chartType||"spline"===p.chartType||"stepLine"===p.chartType?.2*this.lineHeight:0)),u.items.push(p),this.width=Math.max(u.width,this.width),f=p.textBlock.width+(g+a+("line"===p.chartType||"spline"===p.chartType||"stepLine"===p.chartType?.2*this.lineHeight:0)));this.itemWidth=f,this.height=!1===this.itemWrap?h.length*this.lineHeight:this.height+m,this.height=Math.min(s,this.height),this.width=Math.min(o,this.width)}for("top"===this.verticalAlign?(r="left"===this.horizontalAlign?e.x1:"right"===this.horizontalAlign?e.x2-this.width:e.x1+e.width/2-this.width/2,i=e.y1):"center"===this.verticalAlign?(r="left"===this.horizontalAlign?e.x1:"right"===this.horizontalAlign?e.x2-this.width:e.x1+e.width/2-this.width/2,i=e.y1+e.height/2-this.height/2):"bottom"===this.verticalAlign&&(r="left"===this.horizontalAlign?e.x1:"right"===this.horizontalAlign?e.x2-this.width:e.x1+e.width/2-this.width/2,i=e.y2-this.height),this.items=l,c=0;c<this.items.length;c++)(p=l[c]).id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[p.id]={id:p.id,objectType:"legendItem",legendItemIndex:c,dataSeriesIndex:p.dataSeriesIndex,dataPointIndex:p.dataPointIndex};this.markerSize=g,this.rows=h,0<l.length&&t.layoutManager.registerSpace(n,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:r,y1:i,x2:r+this.width,y2:i+this.height}},R.prototype.render=function(){var t=this.bounds.x1,e=this.bounds.y1,n=this.markerMargin,i=this.maxWidth,r=this.maxHeight,o=this.markerSize,s=this.rows;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(t,e,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var a=0,l=0;l<s.length;l++){for(var h=s[l],u=0,d=0;d<h.items.length;d++){var p=h.items[d],m=p.textBlock.x+t+(0===d?.2*o:this.horizontalSpacing),f=e+a,g=m;if(this.chart.data[p.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t,e,i,Math.max(r-r%this.lineHeight,0)),this.ctx.clip(),"line"!==p.chartType&&"stepLine"!==p.chartType&&"spline"!==p.chartType||(this.ctx.strokeStyle=p.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(m-.1*this.lineHeight,f+this.lineHeight/2),this.ctx.lineTo(m+.85*this.lineHeight,f+this.lineHeight/2),this.ctx.stroke(),g-=.1*this.lineHeight),"error"===p.chartType){this.ctx.strokeStyle=this.errorMarkerColor[0],this.ctx.lineWidth=o/8,this.ctx.beginPath();var y=m-.08*this.lineHeight+.1*this.lineHeight,b=f+.15*this.lineHeight,v=.7*this.lineHeight,C=v+.02*this.lineHeight;this.ctx.moveTo(y,b),this.ctx.lineTo(y+v,b),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(y+v/2,b),this.ctx.lineTo(y+v/2,b+C),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(y,b+C),this.ctx.lineTo(y+v,b+C),this.ctx.stroke(),this.errorMarkerColor.shift()}tt.drawMarker(m+o/2,f+this.lineHeight/2,this.ctx,p.markerType,"error"===p.chartType||"line"===p.chartType||"spline"===p.chartType?p.markerSize/2:p.markerSize,p.markerColor,p.markerBorderColor,p.markerBorderThickness),p.textBlock.x=m+n+o,"line"!==p.chartType&&"stepLine"!==p.chartType&&"spline"!==p.chartType||(p.textBlock.x+=.1*this.lineHeight),p.textBlock.y=Math.round(f+this.lineHeight/2),p.textBlock.render(!0),this.ctx.restore(),u=0<d?Math.max(u,p.textBlock.height):p.textBlock.height,this.chart.data[p.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),m=c(p.id),this.ghostCtx.fillStyle=m,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(g,p.textBlock.y-this.lineHeight/2,p.textBlock.x+p.textBlock.width-g,p.textBlock.height),p.x1=this.chart._eventManager.objectMap[p.id].x1=g,p.y1=this.chart._eventManager.objectMap[p.id].y1=p.textBlock.y-this.lineHeight/2,p.x2=this.chart._eventManager.objectMap[p.id].x2=p.textBlock.x+p.textBlock.width,p.y2=this.chart._eventManager.objectMap[p.id].y2=p.textBlock.y+p.textBlock.height-this.lineHeight/2}a+=u}},n(B,I),B.prototype.getDefaultAxisPlacement=function(){var t=this.type;return"column"===t||"line"===t||"stepLine"===t||"spline"===t||"area"===t||"stepArea"===t||"splineArea"===t||"stackedColumn"===t||"stackedLine"===t||"bubble"===t||"scatter"===t||"stackedArea"===t||"stackedColumn100"===t||"stackedLine100"===t||"stackedArea100"===t||"candlestick"===t||"ohlc"===t||"rangeColumn"===t||"rangeArea"===t||"rangeSplineArea"===t||"boxAndWhisker"===t||"waterfall"===t?"normal":"bar"===t||"stackedBar"===t||"stackedBar100"===t||"rangeBar"===t?"xySwapped":"pie"===t||"doughnut"===t||"funnel"===t||"pyramid"===t?"none":("error"!==t&&window.console.log("Unknown Chart Type: "+t),null)},B.getDefaultLegendMarker=function(t){return"column"===t||"stackedColumn"===t||"stackedLine"===t||"bar"===t||"stackedBar"===t||"stackedBar100"===t||"bubble"===t||"scatter"===t||"stackedColumn100"===t||"stackedLine100"===t||"stepArea"===t||"candlestick"===t||"ohlc"===t||"rangeColumn"===t||"rangeBar"===t||"rangeArea"===t||"rangeSplineArea"===t||"boxAndWhisker"===t||"waterfall"===t?"square":"line"===t||"stepLine"===t||"spline"===t||"pie"===t||"doughnut"===t?"circle":"area"===t||"splineArea"===t||"stackedArea"===t||"stackedArea100"===t||"funnel"===t||"pyramid"===t?"triangle":"error"===t?"none":(window.console.log("Unknown Chart Type: "+t),null)},B.prototype.getDataPointAtX=function(t,e){if(!this.dataPoints||0===this.dataPoints.length)return null;var n={dataPoint:null,distance:1/0,index:NaN},i=null,r=0,o=0,s=1,a=1/0,l=0,h=0,c=0;for("none"!==this.chart.plotInfo.axisPlacement&&(c=this.axisX.logarithmic?1<(c=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x))?Math.min(Math.max((this.dataPoints.length-1)/c*Math.log(t/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0:0<(c=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x)?Math.min(Math.max((this.dataPoints.length-1)/c*(t-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0);;){if(0<=(o=0<s?c+r:c-r)&&o<this.dataPoints.length){i=this.dataPoints[o];var u=this.axisX.logarithmic?i.x>t?i.x/t:t/i.x:Math.abs(i.x-t);if(u<n.distance&&(n.dataPoint=i,n.distance=u,n.index=o),(i=u)<=a?a=i:0<s?l++:h++,1e3<l&&1e3<h)break}else if(0>c-r&&c+r>=this.dataPoints.length)break;-1===s?(r++,s=1):s=-1}return e||n.dataPoint.x!==t?e&&null!==n.dataPoint?n:null:n},B.prototype.getDataPointAtXY=function(t,e,n){if(!this.dataPoints||0===this.dataPoints.length||t<this.chart.plotArea.x1||t>this.chart.plotArea.x2||e<this.chart.plotArea.y1||e>this.chart.plotArea.y2)return null;n=n||!1;var i=[],r=0,o=0,s=1,a=!1,l=1/0,h=0,c=0,u=0;for("none"!==this.chart.plotInfo.axisPlacement&&(u=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:t,y:e}),u=this.axisX.logarithmic?1<(d=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x))?Math.min(Math.max((this.dataPoints.length-1)/d*Math.log(u/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0:0<(d=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x)?Math.min(Math.max((this.dataPoints.length-1)/d*(u-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0);;){if(0<=(o=0<s?u+r:u-r)&&o<this.dataPoints.length){var d,p=this.dataPoints[o],m=null;if(d=this.chart._eventManager.objectMap[this.dataPointIds[o]]){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":t>=d.x1&&t<=d.x2&&e>=d.y1&&e<=d.y2&&(i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:Math.min(Math.abs(d.x1-t),Math.abs(d.x2-t),Math.abs(d.y1-e),Math.abs(d.y2-e))}),a=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var f=v("markerSize",p,this)||4,g=n?20:f;(m=Math.sqrt(Math.pow(d.x1-t,2)+Math.pow(d.y1-e,2)))<=g&&i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:m}),(d=Math.abs(d.x1-t))<=l?l=d:0<s?h++:c++,m<=f/2&&(a=!0);break;case"rangeArea":case"rangeSplineArea":f=v("markerSize",p,this)||4,g=n?20:f,(m=Math.min(Math.sqrt(Math.pow(d.x1-t,2)+Math.pow(d.y1-e,2)),Math.sqrt(Math.pow(d.x1-t,2)+Math.pow(d.y2-e,2))))<=g&&i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:m}),(d=Math.abs(d.x1-t))<=l?l=d:0<s?h++:c++,m<=f/2&&(a=!0);break;case"bubble":f=d.size,(m=Math.sqrt(Math.pow(d.x1-t,2)+Math.pow(d.y1-e,2)))<=f/2&&(i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:m}),a=!0);break;case"pie":case"doughnut":f=d.center,g="doughnut"===this.type?d.percentInnerRadius*d.radius:0,(m=Math.sqrt(Math.pow(f.x-t,2)+Math.pow(f.y-e,2)))<d.radius&&m>g&&(0>(m=Math.atan2(e-f.y,t-f.x))&&(m+=2*Math.PI),m=Number(((m/Math.PI*180%360+360)%360).toFixed(12)),f=Number(((d.startAngle/Math.PI*180%360+360)%360).toFixed(12)),0===(g=Number(((d.endAngle/Math.PI*180%360+360)%360).toFixed(12)))&&1<d.endAngle&&(g=360),f>=g&&0!==p.y&&(g+=360,m<f&&(m+=360)),m>f&&m<g&&(i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:0}),a=!0));break;case"funnel":case"pyramid":e>(m=d.funnelSection).y1&&e<m.y4&&(m.y6?e>m.y6?(o=m.x6+(m.x5-m.x6)/(m.y5-m.y6)*(e-m.y6),m=m.x3+(m.x4-m.x3)/(m.y4-m.y3)*(e-m.y3)):(o=m.x1+(m.x6-m.x1)/(m.y6-m.y1)*(e-m.y1),m=m.x2+(m.x3-m.x2)/(m.y3-m.y2)*(e-m.y2)):(o=m.x1+(m.x4-m.x1)/(m.y4-m.y1)*(e-m.y1),m=m.x2+(m.x3-m.x2)/(m.y3-m.y2)*(e-m.y2)),t>o&&t<m&&(i.push({dataPoint:p,dataPointIndex:d.dataPointIndex,dataSeries:this,distance:0}),a=!0));break;case"boxAndWhisker":(t>=d.x1-d.borderThickness/2&&t<=d.x2+d.borderThickness/2&&e>=d.y4-d.borderThickness/2&&e<=d.y1+d.borderThickness/2||Math.abs(d.x2-t+d.x1-t)<d.borderThickness&&e>=d.y1&&e<=d.y4)&&(i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:Math.min(Math.abs(d.x1-t),Math.abs(d.x2-t),Math.abs(d.y2-e),Math.abs(d.y3-e))}),a=!0);break;case"candlestick":(t>=d.x1-d.borderThickness/2&&t<=d.x2+d.borderThickness/2&&e>=d.y2-d.borderThickness/2&&e<=d.y3+d.borderThickness/2||Math.abs(d.x2-t+d.x1-t)<d.borderThickness&&e>=d.y1&&e<=d.y4)&&(i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:Math.min(Math.abs(d.x1-t),Math.abs(d.x2-t),Math.abs(d.y2-e),Math.abs(d.y3-e))}),a=!0);break;case"ohlc":(Math.abs(d.x2-t+d.x1-t)<d.borderThickness&&e>=d.y2&&e<=d.y3||t>=d.x1&&t<=(d.x2+d.x1)/2&&e>=d.y1-d.borderThickness/2&&e<=d.y1+d.borderThickness/2||t>=(d.x1+d.x2)/2&&t<=d.x2&&e>=d.y4-d.borderThickness/2&&e<=d.y4+d.borderThickness/2)&&(i.push({dataPoint:p,dataPointIndex:o,dataSeries:this,distance:Math.min(Math.abs(d.x1-t),Math.abs(d.x2-t),Math.abs(d.y2-e),Math.abs(d.y3-e))}),a=!0)}if(a||1e3<h&&1e3<c)break}}else if(0>u-r&&u+r>=this.dataPoints.length)break;-1===s?(r++,s=1):s=-1}for(t=null,e=0;e<i.length;e++)t?i[e].distance<=t.distance&&(t=i[e]):t=i[e];return t},B.prototype.getMarkerProperties=function(t,e,n,i){var r=this.dataPoints;return{x:e,y:n,ctx:i,type:r[t].markerType?r[t].markerType:this.markerType,size:r[t].markerSize?r[t].markerSize:this.markerSize,color:r[t].markerColor?r[t].markerColor:this.markerColor?this.markerColor:r[t].color?r[t].color:this.color?this.color:this._colorSet[t%this._colorSet.length],borderColor:r[t].markerBorderColor?r[t].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:r[t].markerBorderThickness?r[t].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},n(N,I),N.prototype.createExtraLabelsForLog=function(t){if(!(5<(t=(t||0)+1))){var e=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(e/this.viewportMinimum)<this.noTicks-1){for(var n=N.getNiceNumber((e-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),i=Math.ceil(this.viewportMinimum/n)*n;i<e;i+=n)i<this.viewportMinimum||this.logLabelValues.push(i);this.logLabelValues.sort(l),this.createExtraLabelsForLog(t)}}},N.prototype.createLabels=function(){var t,e,n,i,o,s=0,a=0,l=0,h=0,c=(a=0,a=this.interval,0),u=.6*this.chart.height;t=!1;var p=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],m=p.length?d(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if("axisX"!==this.type||"dateTime"!==this.valueType||this.logarithmic){if(n=this.viewportMaximum,this.labels){t=Math.ceil(a);var f=!1;for(s=a=Math.ceil(this.intervalStartPosition);s<this.viewportMaximum;s+=t){if(!this.labels[s]){f=!1;break}f=!0}f&&(this.interval=t,this.intervalStartPosition=a)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),a=0,f=m;a<this.logLabelValues.length;a++)if((s=this.logLabelValues[a])<this.viewportMinimum)a++;else{for(;f<p.length&&s>p[f].endValue;f++);o=s,(t=f<p.length&&s>=p[f].startValue&&s<=p[f].endValue)||(t=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:o,label:this.labels[o]?this.labels[o]:null}):"axisX"===this.type&&this.labels[o]?this.labels[o]:ot(o,this.valueFormatString,this.chart._cultureInfo),t=new P(this.ctx,{x:0,y:0,maxWidth:l,maxHeight:h,angle:this.labelAngle,text:this.prefix+t+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:o,textBlock:t,effectiveHeight:null}))}for(f=m,s=this.intervalStartPosition;s<=n;s=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?s*Math.pow(this.logarithmBase,this.interval):s+this.interval:(this.logarithmic&&this.equidistantInterval?s*Math.pow(this.logarithmBase,this.interval):s+this.interval).toFixed(12))){for(;f<p.length&&s>p[f].endValue;f++);o=s,(t=f<p.length&&s>=p[f].startValue&&s<=p[f].endValue)||(t=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:o,label:this.labels[o]?this.labels[o]:null}):"axisX"===this.type&&this.labels[o]?this.labels[o]:ot(o,this.valueFormatString,this.chart._cultureInfo),t=new P(this.ctx,{x:0,y:0,maxWidth:l,maxHeight:h,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:o,textBlock:t,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),n=r(new Date(this.viewportMaximum),this.interval,this.intervalType),f=m,s=this.intervalStartPosition;s<n;r(s,a,this.intervalType)){for(t=s.getTime();f<p.length&&t>p[f].endValue;f++);o=t,(t=f<p.length&&t>=p[f].startValue&&t<=p[f].endValue)||(t=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(o),label:this.labels[o]?this.labels[o]:null}):"axisX"===this.type&&this.labels[o]?this.labels[o]:rt(o,this.valueFormatString,this.chart._cultureInfo),t=new P(this.ctx,{x:0,y:0,maxWidth:l,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:h,angle:this.labelAngle,text:this.prefix+t+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:o,textBlock:t,effectiveHeight:null,breaksLabelType:void 0}))}for("bottom"===this._position||"top"===this._position?(c=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*Z[this.intervalType+"Duration"]*this.interval,l=void 0===this.options.labelMaxWidth?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(h=void 0===this.options.labelWrap||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize)):"left"!==this._position&&"right"!==this._position||(c=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*Z[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(l=void 0===this.options.labelMaxWidth?.3*this.chart.width>>0:this.options.labelMaxWidth),h=void 0===this.options.labelWrap||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),a=0;a<this._labels.length;a++){(t=this._labels[a].textBlock).maxWidth=l,t.maxHeight=h;var g=t.measureText();i=g.height}if(n=[],m=p=0,this.labelAutoFit||this.options.labelAutoFit)if(d(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),"bottom"===this._position||"top"===this._position)if(l=.9*c>>0,m=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=l,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,s=0;s<this._labels.length;s++)if(!this._labels[s].breaksLabelType){var y;for(f=(t=this._labels[s].textBlock).text.split(" "),a=0;a<f.length;a++)o=f[a],this.ctx.font=t.fontStyle+" "+t.fontWeight+" "+t.fontSize+"px "+t.fontFamily,(o=this.ctx.measureText(o)).width>m&&(y=s,m=o.width)}for(s=0,s=this.intervalStartPosition<this.viewportMinimum?1:0;s<this._labels.length;s++)if(!this._labels[s].breaksLabelType){for(g=(t=this._labels[s].textBlock).measureText(),f=s+1;f<this._labels.length;f++)if(!this._labels[f].breaksLabelType){e=(e=this._labels[f].textBlock).measureText();break}if(n.push(t.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,n),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),a=l*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(h-t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),d(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle)if(this.sessionVariables.labelMaxHeight=0===this.labelAngle?h:Math.min((a-l*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),a),o=(u-(i+t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),d(this.options.labelWrap)){if(d(this.options.labelWrap))if(d(this.options.labelMaxWidth)){if(!d(e))if(a=g.width+e.width>>0,f=this.labelFontSize,m<l)a-2*l>p&&(p=a-2*l,a>=2*l&&a<2.2*l?(this.sessionVariables.labelMaxWidth=l,d(this.options.labelFontSize)&&12<f&&(f=Math.floor(12/13*f),t.measureText()),this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?f:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):a>=2.2*l&&a<2.8*l?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=o,this.sessionVariables.labelFontSize=f):a>=2.8*l&&a<3.2*l?(this.sessionVariables.labelMaxWidth=Math.max(l,m),this.sessionVariables.labelWrap=!0,d(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?f:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):a>=3.2*l&&a<3.6*l?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=o,this.sessionVariables.labelFontSize=this.labelFontSize):a>3.6*l&&a<5*l?(d(this.options.labelFontSize)&&12<f&&(f=Math.floor(12/13*f),t.measureText()),this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?f:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=o):a>5*l&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=l,this.sessionVariables.labelFontSize=f,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelAngle=this.labelAngle));else if(y===s&&(0===y&&m+this._labels[y+1].textBlock.measureText().width-2*l>p||y===this._labels.length-1&&m+this._labels[y-1].textBlock.measureText().width-2*l>p||0<y&&y<this._labels.length-1&&m+this._labels[y+1].textBlock.measureText().width-2*l>p&&m+this._labels[y-1].textBlock.measureText().width-2*l>p))p=0===y?m+this._labels[y+1].textBlock.measureText().width-2*l:m+this._labels[y-1].textBlock.measureText().width-2*l,this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?f:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=o;else if(0===p)for(this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?f:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,a=0;a<this._labels.length;a++)(t=this._labels[a].textBlock).maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(l,m),o),g=t.measureText(),a<this._labels.length-1&&((e=this._labels[f=a+1].textBlock).maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(l,m),o),e=e.measureText(),g.width+e.width>>0>2*l&&(this.sessionVariables.labelAngle=-25))}else this.options.labelMaxWidth<l?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=a):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=h)}else this.labelWrap?d(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(l,m),o),this.sessionVariables.labelWrap=this.labelWrap,g.width+e.width>>0>2*l&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>l?-25:this.sessionVariables.labelAngle):d(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelMaxWidth=l,g.width+e.width>>0>2*l&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=o)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>l?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelWrap=this.labelWrap);else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=0===this.labelAngle?h:Math.min((a-l*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),a),o=0!=this.labelAngle?(u-(i+t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):l,this.sessionVariables.labelMaxHeight=h=this.labelWrap?(u-o*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,d(this.options.labelWrap)?d(this.options.labelWrap)&&(this.labelWrap&&!d(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:o,this.sessionVariables.labelMaxHeight=h):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=o,this.sessionVariables.labelMaxHeight=a<.9*c?.9*c:a,this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:o):(d(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:o,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=h)}for(a=0;a<this._labels.length;a++)(t=this._labels[a].textBlock).maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,t.fontSize=this.sessionVariables.labelFontSize,t.angle=this.labelAngle=this.sessionVariables.labelAngle,t.wrap=this.labelWrap=this.sessionVariables.labelWrap,t.maxHeight=this.sessionVariables.labelMaxHeight,t.measureText()}else for(s=0;s<this._labels.length;s++)(t=this._labels[s].textBlock).maxWidth=this.labelMaxWidth=d(this.options.labelMaxWidth)?this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,t.fontSize=this.labelFontSize=d(this.options.labelFontSize)?this.sessionVariables.labelFontSize:this.options.labelFontSize,t.angle=this.labelAngle=d(this.options.labelAngle)?this.sessionVariables.labelAngle:this.labelAngle,t.wrap=this.labelWrap=d(this.options.labelWrap)?this.sessionVariables.labelWrap:this.options.labelWrap,t.maxHeight=this.sessionVariables.labelMaxHeight,t.measureText();else if("left"===this._position||"right"===this._position)if(l=d(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,h=void 0===this.options.labelWrap||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=l,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelAngle=d(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,s=0;s<this._labels.length;s++)if(!this._labels[s].breaksLabelType){for(g=(t=this._labels[s].textBlock).measureText(),f=s+1;f<this._labels.length;f++)if(!this._labels[f].breaksLabelType){e=(e=this._labels[f].textBlock).measureText();break}n.push(t.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,n),a=l*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(h-t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),d(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle?d(this.options.labelWrap)?d(this.options.labelWrap)&&(d(this.options.labelMaxWidth)?d(e)||(c=g.height+e.height>>0)-2*h>m&&(m=c-2*h,c>=2*h&&c<2.4*h?(d(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):c>=2.4*h&&c<2.8*h?(this.sessionVariables.labelMaxHeight=a,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):c>=2.8*h&&c<3.2*h?(this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelWrap=!0,d(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=d(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):c>=3.2*h&&c<3.6*h?(this.sessionVariables.labelMaxHeight=a,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):c>3.6*h&&c<10*h?(d(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=l,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelAngle=d(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):c>10*h&&c<50*h&&(d(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=d(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelMaxWidth=l,this.sessionVariables.labelAngle=d(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle)):(this.sessionVariables.labelMaxHeight=h,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:l,this.sessionVariables.labelMaxHeight=h):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=0===this.labelAngle?l:Math.min((a-h*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),h),d(this.options.labelWrap)?d(this.options.labelWrap)&&(this.labelWrap&&!d(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth>this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=a):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:l,this.sessionVariables.labelMaxHeight=0===this.labelAngle?h:a,d(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=0===this.labelAngle?h:a,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=l):(this.sessionVariables.labelMaxHeight=h,d(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap))}for(a=0;a<this._labels.length;a++)(t=this._labels[a].textBlock).maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,t.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,t.angle=this.labelAngle=this.sessionVariables.labelAngle,t.wrap=this.labelWrap=this.sessionVariables.labelWrap,t.maxHeight=this.sessionVariables.labelMaxHeight,t.measureText()}else for(s=0;s<this._labels.length;s++)(t=this._labels[s].textBlock).maxWidth=this.labelMaxWidth=d(this.options.labelMaxWidth)?this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,t.fontSize=this.labelFontSize=d(this.options.labelFontSize)?this.sessionVariables.labelFontSize:this.options.labelFontSize,t.angle=this.labelAngle=d(this.options.labelAngle)?this.sessionVariables.labelAngle:this.labelAngle,t.wrap=this.labelWrap=d(this.options.labelWrap)?this.sessionVariables.labelWrap:this.options.labelWrap,t.maxHeight=this.sessionVariables.labelMaxHeight,t.measureText();for(s=0;s<this.stripLines.length;s++){var b;"outside"===(l=this.stripLines[s]).labelPlacement?(h=this.sessionVariables.labelMaxWidth,"bottom"!==this._position&&"top"!==this._position||(b=d(l.options.labelWrap)?this.sessionVariables.labelMaxHeight:l.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize),"left"!==this._position&&"right"!==this._position||(b=d(l.options.labelWrap)?this.sessionVariables.labelMaxHeight:l.labelWrap?.8*this.chart.width>>0:1.5*this.labelFontSize),d(l.labelBackgroundColor)&&(l.labelBackgroundColor="#EEEEEE")):(h="bottom"===this._position||"top"===this._position?.9*this.chart.width>>0:.9*this.chart.height>>0,b=d(l.options.labelWrap)||l.labelWrap?"bottom"===this._position||"top"===this._position?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*this.labelFontSize,d(l.labelBackgroundColor)&&(l.labelBackgroundColor=d(l.startValue)&&0!==l.startValue?G?"transparent":null:"#EEEEEE")),t=new P(this.ctx,{x:0,y:0,backgroundColor:l.labelBackgroundColor,borderColor:l.labelBorderColor,borderThickness:l.labelBorderThickness,cornerRadius:l.labelCornerRadius,maxWidth:l.options.labelMaxWidth?l.options.labelMaxWidth:h,maxHeight:b,angle:this.labelAngle,text:l.labelFormatter?l.labelFormatter({chart:this.chart,axis:this,stripLine:l}):l.label,horizontalAlign:"left",fontSize:"outside"===l.labelPlacement?l.options.labelFontSize?l.labelFontSize:this.labelFontSize:l.labelFontSize,fontFamily:"outside"===l.labelPlacement?l.options.labelFontFamily?l.labelFontFamily:this.labelFontFamily:l.labelFontFamily,fontWeight:"outside"===l.labelPlacement?l.options.labelFontWeight?l.labelFontWeight:this.labelFontWeight:l.labelFontWeight,fontColor:l.labelFontColor||l.color,fontStyle:"outside"===l.labelPlacement?l.options.labelFontStyle?l.labelFontStyle:this.fontWeight:l.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:l.value,textBlock:t,effectiveHeight:null,stripLine:l})}},N.prototype.createLabelsAndCalculateWidth=function(){var t=0,e=0;this._labels=[],this._stripLineLabels=[];var n=this.chart.isNavigator?0:5;if("left"===this._position||"right"===this._position){for(this.createLabels(),e=0;e<this._labels.length;e++){var i=this._labels[e].textBlock,r=i.measureText(),o=0;t<(o=0===this.labelAngle?r.width:r.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(r.height-i.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))&&(t=o),this._labels[e].effectiveWidth=o}for(e=0;e<this._stripLineLabels.length;e++)"outside"===this._stripLineLabels[e].stripLine.labelPlacement&&this._stripLineLabels[e].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[e].stripLine.value<=this.viewportMaximum&&(r=(i=this._stripLineLabels[e].textBlock).measureText(),t<(o=0===this.labelAngle?r.width:r.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(r.height-i.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))&&(t=o),this._stripLineLabels[e].effectiveWidth=o)}return e=this.title?this._titleTextBlock.measureText().height+2:0,"inside"===this.labelPlacement?i=e+n:e+t+this.tickLength+n},N.prototype.createLabelsAndCalculateHeight=function(){var t=0;this._labels=[],this._stripLineLabels=[];var e,n=0,i=this.chart.isNavigator?0:5;if(this.createLabels(),"bottom"===this._position||"top"===this._position){for(n=0;n<this._labels.length;n++){var r=(e=this._labels[n].textBlock).measureText(),o=0;t<(o=0===this.labelAngle?r.height:r.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(r.height-e.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))&&(t=o),this._labels[n].effectiveHeight=o}for(n=0;n<this._stripLineLabels.length;n++)"outside"===this._stripLineLabels[n].stripLine.labelPlacement&&this._stripLineLabels[n].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[n].stripLine.value<=this.viewportMaximum&&(r=(e=this._stripLineLabels[n].textBlock).measureText(),t<(o=0===this.labelAngle?r.height:r.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(r.height-e.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))&&(t=o),this._stripLineLabels[n].effectiveHeight=o)}return e=this.title?this._titleTextBlock.measureText().height+2:0,"inside"===this.labelPlacement?n=e+i:e+t+this.tickLength+i},N.setLayout=function(t,e,n,i,r,o){var s,a,l,h,c=t[0]?t[0].chart:e[0].chart,u=c.isNavigator?0:10,p=c._axes;if(t&&0<t.length)for(var m=0;m<t.length;m++)t[m]&&t[m].calculateAxisParameters();if(e&&0<e.length)for(m=0;m<e.length;m++)e[m].calculateAxisParameters();if(n&&0<n.length)for(m=0;m<n.length;m++)n[m].calculateAxisParameters();if(i&&0<i.length)for(m=0;m<i.length;m++)i[m].calculateAxisParameters();for(m=0;m<p.length;m++)if(p[m]&&p[m].scaleBreaks&&p[m].scaleBreaks._appliedBreaks.length)for(var f=p[m].scaleBreaks._appliedBreaks,g=0;g<f.length&&!(f[g].startValue>p[m].viewportMaximum);g++)f[g].endValue<p[m].viewportMinimum||(d(p[m].scaleBreaks.firstBreakIndex)&&(p[m].scaleBreaks.firstBreakIndex=g),f[g].startValue>=p[m].viewPortMinimum&&(p[m].scaleBreaks.lastBreakIndex=g));var y,b,v,C,S,x=g=0,_=0,k=0,w=0,T=0,I=0,A=a=0;for(f=v=C=S=!1,m=0;m<p.length;m++)p[m]&&p[m].title&&(p[m]._titleTextBlock=new P(p[m].ctx,{text:p[m].title,horizontalAlign:"center",fontSize:p[m].titleFontSize,fontFamily:p[m].titleFontFamily,fontWeight:p[m].titleFontWeight,fontColor:p[m].titleFontColor,fontStyle:p[m].titleFontStyle,borderColor:p[m].titleBorderColor,borderThickness:p[m].titleBorderThickness,backgroundColor:p[m].titleBackgroundColor,cornerRadius:p[m].titleCornerRadius,textBaseline:"top"}));for(m=0;m<p.length;m++)if(p[m].title)switch(p[m]._position){case"left":p[m]._titleTextBlock.maxWidth=p[m].titleMaxWidth||o.height,p[m]._titleTextBlock.maxHeight=p[m].titleWrap?.8*o.width:1.5*p[m].titleFontSize,p[m]._titleTextBlock.angle=-90;break;case"right":p[m]._titleTextBlock.maxWidth=p[m].titleMaxWidth||o.height,p[m]._titleTextBlock.maxHeight=p[m].titleWrap?.8*o.width:1.5*p[m].titleFontSize,p[m]._titleTextBlock.angle=90;break;default:p[m]._titleTextBlock.maxWidth=p[m].titleMaxWidth||o.width,p[m]._titleTextBlock.maxHeight=p[m].titleWrap?.8*o.height:1.5*p[m].titleFontSize,p[m]._titleTextBlock.angle=0}if("normal"===r){k=[],w=[],T=[],I=[];for(var M=[],E=[],D=[],F=[];4>g;){var L=0,R=0,B=0,N=0,O=r=0,V=0,W=0,H=0,G=0,z=0,U=0;if(n&&0<n.length)for(T=[],m=z=0;m<n.length;m++)T.push(Math.ceil(n[m]?n[m].createLabelsAndCalculateWidth():0)),z+=T[m],V+=n[m]&&!c.isNavigator?n[m].margin:0;else T.push(Math.ceil(n[0]?n[0].createLabelsAndCalculateWidth():0));if(D.push(T),i&&0<i.length)for(I=[],m=U=0;m<i.length;m++)I.push(Math.ceil(i[m]?i[m].createLabelsAndCalculateWidth():0)),U+=I[m],W+=i[m]?i[m].margin:0;else I.push(Math.ceil(i[0]?i[0].createLabelsAndCalculateWidth():0));if(F.push(I),s=Math.round(o.x1+z+V),l=Math.round(o.x2-U-W>c.width-u?c.width-u:o.x2-U-W),t&&0<t.length)for(k=[],m=H=0;m<t.length;m++)t[m]&&(t[m].lineCoordinates={}),t[m].lineCoordinates.width=Math.abs(l-s),t[m].title&&(t[m]._titleTextBlock.maxWidth=0<t[m].titleMaxWidth&&t[m].titleMaxWidth<t[m].lineCoordinates.width?t[m].titleMaxWidth:t[m].lineCoordinates.width),k.push(Math.ceil(t[m]?t[m].createLabelsAndCalculateHeight():0)),H+=k[m],r+=t[m]&&!c.isNavigator?t[m].margin:0;else k.push(Math.ceil(t[0]?t[0].createLabelsAndCalculateHeight():0));if(M.push(k),e&&0<e.length)for(w=[],m=G=0;m<e.length;m++)e[m]&&(e[m].lineCoordinates={}),e[m].lineCoordinates.width=Math.abs(l-s),e[m].title&&(e[m]._titleTextBlock.maxWidth=0<e[m].titleMaxWidth&&e[m].titleMaxWidth<e[m].lineCoordinates.width?e[m].titleMaxWidth:e[m].lineCoordinates.width),w.push(Math.ceil(e[m]?e[m].createLabelsAndCalculateHeight():0)),G+=w[m],O+=e[m]&&!c.isNavigator?e[m].margin:0;else w.push(Math.ceil(e[0]?e[0].createLabelsAndCalculateHeight():0));if(E.push(w),t&&0<t.length)for(m=0;m<t.length;m++)t[m]&&(t[m].lineCoordinates.x1=s,l=Math.round(o.x2-U-W>c.width-u?c.width-u:o.x2-U-W),t[m]._labels&&1<t[m]._labels.length&&(a=h=0,a="dateTime"===t[m].valueType?t[m]._labels[t[m]._labels.length-2]:t[m]._labels[t[m]._labels.length-1],x=(h=t[m]._labels[1]).textBlock.width*Math.cos(Math.PI/180*Math.abs(h.textBlock.angle))+(h.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(h.textBlock.angle)),_=a.textBlock.width*Math.cos(Math.PI/180*Math.abs(a.textBlock.angle))+(a.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(a.textBlock.angle))),!t[m]||!t[m].labelAutoFit||d(y)||d(b)||c.isNavigator||(a=0,0<t[m].labelAngle?b+_>l&&(a+=0<t[m].labelAngle?b+_-l-U:0):0>t[m].labelAngle?y-x<s&&y-x<t[m].viewportMinimum&&(A=s-(V+t[m].tickLength+T+y-x+t[m].labelFontSize/2)):0===t[m].labelAngle&&(b+_>l&&(a=b+_/2-l-U),y-x<s&&y-x<t[m].viewportMinimum&&(A=s-V-t[m].tickLength-T-y+x/2)),t[m].viewportMaximum===t[m].maximum&&t[m].viewportMinimum===t[m].minimum&&0<t[m].labelAngle&&0<a?l-=a:t[m].viewportMaximum===t[m].maximum&&t[m].viewportMinimum===t[m].minimum&&0>t[m].labelAngle&&0<A?s+=A:t[m].viewportMaximum===t[m].maximum&&t[m].viewportMinimum===t[m].minimum&&0===t[m].labelAngle&&(0<A&&(s+=A),0<a&&(l-=a))),c.panEnabled?H=c.sessionVariables.axisX.height:c.sessionVariables.axisX.height=H,a=Math.round(o.y2-H-r+L),h=Math.round(o.y2),t[m].lineCoordinates.x2=l,t[m].lineCoordinates.width=l-s,t[m].lineCoordinates.y1=a,t[m].lineCoordinates.y2=a,t[m].bounds={x1:s,y1:a,x2:l,y2:h-(H+r-k[m]-L),width:l-s,height:h-a}),L+=k[m]+t[m].margin;if(e&&0<e.length)for(m=0;m<e.length;m++)e[m].lineCoordinates.x1=Math.round(o.x1+z+V),e[m].lineCoordinates.x2=Math.round(o.x2-U-W>c.width-u?c.width-u:o.x2-U-W),e[m].lineCoordinates.width=Math.abs(l-s),e[m]._labels&&1<e[m]._labels.length&&(a="dateTime"===e[m].valueType?e[m]._labels[e[m]._labels.length-2]:e[m]._labels[e[m]._labels.length-1],x=(h=e[m]._labels[1]).textBlock.width*Math.cos(Math.PI/180*Math.abs(h.textBlock.angle))+(h.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(h.textBlock.angle)),_=a.textBlock.width*Math.cos(Math.PI/180*Math.abs(a.textBlock.angle))+(a.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(a.textBlock.angle))),c.panEnabled?G=c.sessionVariables.axisX2.height:c.sessionVariables.axisX2.height=G,a=Math.round(o.y1),h=Math.round(o.y2+e[m].margin),e[m].lineCoordinates.y1=a+G+O-R,e[m].lineCoordinates.y2=a,e[m].bounds={x1:s,y1:a+(G+O-w[m]-R),x2:l,y2:h,width:l-s,height:h-a},R+=w[m]+e[m].margin;if(n&&0<n.length)for(m=0;m<n.length;m++)V=c.isNavigator?0:10,n[m]&&(s=Math.round(t[0]?t[0].lineCoordinates.x1:e[0].lineCoordinates.x1),V=n[m]._labels&&0<n[m]._labels.length?n[m]._labels[n[m]._labels.length-1].textBlock.height/2:u,a=Math.round(o.y1+G+O<Math.max(V,u)?Math.max(V,u):o.y1+G+O),l=Math.round(t[0]?t[0].lineCoordinates.x1:e[0].lineCoordinates.x1),V=0<t.length?0:n[m]._labels&&0<n[m]._labels.length?n[m]._labels[0].textBlock.height/2:u,h=Math.round(o.y2-H-r-V),n[m].lineCoordinates={x1:l-B,y1:a,x2:l-B,y2:h,height:Math.abs(h-a)},n[m].bounds={x1:s-(T[m]+B),y1:a,x2:l,y2:h,width:l-s,height:h-a},n[m].title&&(n[m]._titleTextBlock.maxWidth=0<n[m].titleMaxWidth&&n[m].titleMaxWidth<n[m].lineCoordinates.height?n[m].titleMaxWidth:n[m].lineCoordinates.height),B+=T[m]+n[m].margin);if(i&&0<i.length)for(m=0;m<i.length;m++)i[m]&&(s=Math.round(t[0]?t[0].lineCoordinates.x2:e[0].lineCoordinates.x2),l=Math.round(s),V=i[m]._labels&&0<i[m]._labels.length?i[m]._labels[i[m]._labels.length-1].textBlock.height/2:0,a=Math.round(o.y1+G+O<Math.max(V,u)?Math.max(V,u):o.y1+G+O),V=0<t.length?0:i[m]._labels&&0<i[m]._labels.length?i[m]._labels[0].textBlock.height/2:0,h=Math.round(o.y2-(H+r+V)),i[m].lineCoordinates={x1:s+N,y1:a,x2:s+N,y2:h,height:Math.abs(h-a)},i[m].bounds={x1:s,y1:a,x2:l+(I[m]+N),y2:h,width:l-s,height:h-a},i[m].title&&(i[m]._titleTextBlock.maxWidth=0<i[m].titleMaxWidth&&i[m].titleMaxWidth<i[m].lineCoordinates.height?i[m].titleMaxWidth:i[m].lineCoordinates.height),N+=I[m]+i[m].margin);if(t&&0<t.length)for(m=0;m<t.length;m++)t[m]&&(t[m].calculateValueToPixelConversionParameters(),t[m].calculateBreaksSizeInValues(),t[m]._labels&&1<t[m]._labels.length&&(y=(t[m].logarithmic?Math.log(t[m]._labels[1].position/t[m].viewportMinimum)/t[m].conversionParameters.lnLogarithmBase:t[m]._labels[1].position-t[m].viewportMinimum)*Math.abs(t[m].conversionParameters.pixelPerUnit)+t[m].lineCoordinates.x1,s=t[m].getApparentDifference(t[m].viewportMinimum,s=t[m]._labels[t[m]._labels.length-("dateTime"===t[m].valueType?2:1)].position),b=t[m].logarithmic?(1<s?Math.log(s)/t[m].conversionParameters.lnLogarithmBase*Math.abs(t[m].conversionParameters.pixelPerUnit):0)+t[m].lineCoordinates.x1:(0<s?s*Math.abs(t[m].conversionParameters.pixelPerUnit):0)+t[m].lineCoordinates.x1));if(e&&0<e.length)for(m=0;m<e.length;m++)e[m].calculateValueToPixelConversionParameters(),e[m].calculateBreaksSizeInValues(),e[m]._labels&&1<e[m]._labels.length&&(y=(e[m].logarithmic?Math.log(e[m]._labels[1].position/e[m].viewportMinimum)/e[m].conversionParameters.lnLogarithmBase:e[m]._labels[1].position-e[m].viewportMinimum)*Math.abs(e[m].conversionParameters.pixelPerUnit)+e[m].lineCoordinates.x1,s=e[m].getApparentDifference(e[m].viewportMinimum,s=e[m]._labels[e[m]._labels.length-("dateTime"===e[m].valueType?2:1)].position),b=e[m].logarithmic?(1<s?Math.log(s)/e[m].conversionParameters.lnLogarithmBase*Math.abs(e[m].conversionParameters.pixelPerUnit):0)+e[m].lineCoordinates.x1:(0<s?s*Math.abs(e[m].conversionParameters.pixelPerUnit):0)+e[m].lineCoordinates.x1);for(m=0;m<p.length;m++)"axisY"===p[m].type&&(p[m].calculateValueToPixelConversionParameters(),p[m].calculateBreaksSizeInValues());if(0<g){if(t&&0<t.length)for(m=0;m<t.length;m++)f=M[g-1][m]===M[g][m];else f=!0;if(e&&0<e.length)for(m=0;m<e.length;m++)v=E[g-1][m]===E[g][m];else v=!0;if(n&&0<n.length)for(m=0;m<n.length;m++)C=D[g-1][m]===D[g][m];else C=!0;if(i&&0<i.length)for(m=0;m<i.length;m++)S=F[g-1][m]===F[g][m];else S=!0}if(f&&v&&C&&S)break;g++}if(t&&0<t.length)for(m=0;m<t.length;m++)t[m].calculateStripLinesThicknessInValues(),t[m].calculateBreaksInPixels();if(e&&0<e.length)for(m=0;m<e.length;m++)e[m].calculateStripLinesThicknessInValues(),e[m].calculateBreaksInPixels();if(n&&0<n.length)for(m=0;m<n.length;m++)n[m].calculateStripLinesThicknessInValues(),n[m].calculateBreaksInPixels();if(i&&0<i.length)for(m=0;m<i.length;m++)i[m].calculateStripLinesThicknessInValues(),i[m].calculateBreaksInPixels()}else{for(u=[],y=[],A=[],x=[],b=[],_=[],M=[],E=[];4>g;){if(H=N=R=B=W=V=O=r=F=D=L=G=0,t&&0<t.length)for(A=[],m=N=0;m<t.length;m++)A.push(Math.ceil(t[m]?t[m].createLabelsAndCalculateWidth():0)),N+=A[m],r+=t[m]&&!c.isNavigator?t[m].margin:0;else A.push(Math.ceil(t[0]?t[0].createLabelsAndCalculateWidth():0));if(M.push(A),e&&0<e.length)for(x=[],m=H=0;m<e.length;m++)x.push(Math.ceil(e[m]?e[m].createLabelsAndCalculateWidth():0)),H+=x[m],O+=e[m]?e[m].margin:0;else x.push(Math.ceil(e[0]?e[0].createLabelsAndCalculateWidth():0));if(E.push(x),n&&0<n.length)for(m=0;m<n.length;m++)n[m].lineCoordinates={},s=Math.round(o.x1+N+r),l=Math.round(o.x2-H-O>c.width-10?c.width-10:o.x2-H-O),n[m].labelAutoFit&&!d(k)&&(0<!t.length&&(s=0>n[m].labelAngle?Math.max(s,k):0===n[m].labelAngle?Math.max(s,k/2):s),0<!e.length&&(l=0<n[m].labelAngle?l-w/2:0===n[m].labelAngle?l-w/2:l)),n[m].lineCoordinates.x1=s,n[m].lineCoordinates.x2=l,n[m].lineCoordinates.width=Math.abs(l-s),n[m].title&&(n[m]._titleTextBlock.maxWidth=0<n[m].titleMaxWidth&&n[m].titleMaxWidth<n[m].lineCoordinates.width?n[m].titleMaxWidth:n[m].lineCoordinates.width);if(i&&0<i.length)for(m=0;m<i.length;m++)i[m].lineCoordinates={},s=Math.round(o.x1+N+r),l=Math.round(o.x2-H-O>i[m].chart.width-10?i[m].chart.width-10:o.x2-H-O),i[m]&&i[m].labelAutoFit&&!d(T)&&(0<!t.length&&(s=0<i[m].labelAngle?Math.max(s,T):0===i[m].labelAngle?Math.max(s,T/2):s),0<!e.length&&(l-=I/2)),i[m].lineCoordinates.x1=s,i[m].lineCoordinates.x2=l,i[m].lineCoordinates.width=Math.abs(l-s),i[m].title&&(i[m]._titleTextBlock.maxWidth=0<i[m].titleMaxWidth&&i[m].titleMaxWidth<i[m].lineCoordinates.width?i[m].titleMaxWidth:i[m].lineCoordinates.width);if(n&&0<n.length)for(u=[],m=B=0;m<n.length;m++)u.push(Math.ceil(n[m]?n[m].createLabelsAndCalculateHeight():0)),B+=u[m]+n[m].margin,V+=n[m].margin;else u.push(Math.ceil(n[0]?n[0].createLabelsAndCalculateHeight():0));if(b.push(u),i&&0<i.length)for(y=[],m=R=0;m<i.length;m++)y.push(Math.ceil(i[m]?i[m].createLabelsAndCalculateHeight():0)),R+=y[m],W+=i[m].margin;else y.push(Math.ceil(i[0]?i[0].createLabelsAndCalculateHeight():0));if(_.push(y),n&&0<n.length)for(m=0;m<n.length;m++)0<n[m]._labels.length&&(a=n[m]._labels[n[m]._labels.length-1],k=(h=n[m]._labels[0]).textBlock.width*Math.cos(Math.PI/180*Math.abs(h.textBlock.angle))+(h.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(h.textBlock.angle)),w=a.textBlock.width*Math.cos(Math.PI/180*Math.abs(a.textBlock.angle))+(a.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(a.textBlock.angle)));if(i&&0<i.length)for(m=0;m<i.length;m++)i[m]&&0<i[m]._labels.length&&(a=i[m]._labels[i[m]._labels.length-1],T=(h=i[m]._labels[0]).textBlock.width*Math.cos(Math.PI/180*Math.abs(h.textBlock.angle))+(h.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(h.textBlock.angle)),I=a.textBlock.width*Math.cos(Math.PI/180*Math.abs(a.textBlock.angle))+(a.textBlock.height-a.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(a.textBlock.angle)));if(c.panEnabled)for(m=0;m<n.length;m++)u[m]=c.sessionVariables.axisY.height;else for(m=0;m<n.length;m++)c.sessionVariables.axisY.height=u[m];if(n&&0<n.length)for(m=n.length-1;0<=m;m--)a=Math.round(o.y2),h=Math.round(o.y2>n[m].chart.height-10?n[m].chart.height-10:o.y2),n[m].lineCoordinates.y1=a-(u[m]+n[m].margin+G),n[m].lineCoordinates.y2=a-(u[m]+n[m].margin+G),n[m].bounds={x1:s,y1:a-(u[m]+G+n[m].margin),x2:l,y2:h-(G+n[m].margin),width:l-s,height:u[m]},n[m].title&&(n[m]._titleTextBlock.maxWidth=0<n[m].titleMaxWidth&&n[m].titleMaxWidth<n[m].lineCoordinates.width?n[m].titleMaxWidth:n[m].lineCoordinates.width),G+=u[m]+n[m].margin;if(i&&0<i.length)for(m=i.length-1;0<=m;m--)i[m]&&(a=Math.round(o.y1),h=Math.round(o.y1+(y[m]+i[m].margin+L)),i[m].lineCoordinates.y1=h,i[m].lineCoordinates.y2=h,i[m].bounds={x1:s,y1:a+(i[m].margin+L),x2:l,y2:h,width:l-s,height:R},i[m].title&&(i[m]._titleTextBlock.maxWidth=0<i[m].titleMaxWidth&&i[m].titleMaxWidth<i[m].lineCoordinates.width?i[m].titleMaxWidth:i[m].lineCoordinates.width),L+=y[m]+i[m].margin);if(t&&0<t.length)for(m=0;m<t.length;m++){if(V=t[m]._labels&&0<t[m]._labels.length?t[m]._labels[0].textBlock.fontSize/2:0,s=Math.round(o.x1+r),a=i&&0<i.length?Math.round(i[0]?i[0].lineCoordinates.y2:o.y1<Math.max(V,10)?Math.max(V,10):o.y1):o.y1<Math.max(V,10)?Math.max(V,10):o.y1,l=Math.round(o.x1+N+r),h=n&&0<n.length?Math.round(n[0]?n[0].lineCoordinates.y1:o.y2-B>c.height-Math.max(V,10)?c.height-Math.max(V,10):o.y2-B):o.y2>c.height-Math.max(V,10)?c.height-Math.max(V,10):o.y2,n&&0<n.length)for(V=0;V<n.length;V++)n[V]&&n[V].labelAutoFit&&(l=0>n[V].labelAngle?Math.max(l,k):0===n[V].labelAngle?Math.max(l,k/2):l,s=0>n[V].labelAngle||0===n[V].labelAngle?l-N:s);if(i&&0<i.length)for(V=0;V<i.length;V++)i[V]&&i[V].labelAutoFit&&(s=(l=i[V].lineCoordinates.x1)-N);t[m].lineCoordinates={x1:l-D,y1:a,x2:l-D,y2:h,height:Math.abs(h-a)},t[m].bounds={x1:l-(A[m]+D),y1:a,x2:l,y2:h,width:l-s,height:h-a},t[m].title&&(t[m]._titleTextBlock.maxWidth=0<t[m].titleMaxWidth&&t[m].titleMaxWidth<t[m].lineCoordinates.height?t[m].titleMaxWidth:t[m].lineCoordinates.height),t[m].calculateValueToPixelConversionParameters(),t[m].calculateBreaksSizeInValues(),D+=A[m]+t[m].margin}if(e&&0<e.length)for(m=0;m<e.length;m++){if(V=e[m]._labels&&0<e[m]._labels.length?e[m]._labels[0].textBlock.fontSize/2:0,s=Math.round(o.x1-r),a=i&&0<i.length?Math.round(i[0]?i[0].lineCoordinates.y2:o.y1<Math.max(V,10)?Math.max(V,10):o.y1):o.y1<Math.max(V,10)?Math.max(V,10):o.y1,l=Math.round(o.x2-H-O),h=n&&0<n.length?Math.round(n[0]?n[0].lineCoordinates.y1:o.y2-B>c.height-Math.max(V,10)?c.height-Math.max(V,10):o.y2-B):o.y2>c.height-Math.max(V,10)?c.height-Math.max(V,10):o.y2,n&&0<n.length)for(V=0;V<n.length;V++)n[V]&&n[V].labelAutoFit&&(l=0>n[V].labelAngle?Math.max(l,k):0===n[V].labelAngle?Math.max(l,k/2):l,s=0>n[V].labelAngle||0===n[V].labelAngle?l-H:s);if(i&&0<i.length)for(V=0;V<i.length;V++)i[V]&&i[V].labelAutoFit&&(s=(l=i[V].lineCoordinates.x2)-H);e[m].lineCoordinates={x1:l+F,y1:a,x2:l+F,y2:h,height:Math.abs(h-a)},e[m].bounds={x1:s,y1:a,x2:l+x[m]+F,y2:h,width:l-s,height:h-a},e[m].title&&(e[m]._titleTextBlock.maxWidth=0<e[m].titleMaxWidth&&e[m].titleMaxWidth<e[m].lineCoordinates.height?e[m].titleMaxWidth:e[m].lineCoordinates.height),e[m].calculateValueToPixelConversionParameters(),e[m].calculateBreaksSizeInValues(),F+=x[m]+e[m].margin}for(m=0;m<p.length;m++)"axisY"===p[m].type&&(p[m].calculateValueToPixelConversionParameters(),p[m].calculateBreaksSizeInValues());if(0<g){if(t&&0<t.length)for(m=0;m<t.length;m++)f=M[g-1][m]===M[g][m];else f=!0;if(e&&0<e.length)for(m=0;m<e.length;m++)v=E[g-1][m]===E[g][m];else v=!0;if(n&&0<n.length)for(m=0;m<n.length;m++)C=b[g-1][m]===b[g][m];else C=!0;if(i&&0<i.length)for(m=0;m<i.length;m++)S=_[g-1][m]===_[g][m];else S=!0}if(f&&v&&C&&S)break;g++}if(n&&0<n.length)for(m=0;m<n.length;m++)n[m].calculateStripLinesThicknessInValues(),n[m].calculateBreaksInPixels();if(i&&0<i.length)for(m=0;m<i.length;m++)i[m].calculateStripLinesThicknessInValues(),i[m].calculateBreaksInPixels();if(t&&0<t.length)for(m=0;m<t.length;m++)t[m].calculateStripLinesThicknessInValues(),t[m].calculateBreaksInPixels();if(e&&0<e.length)for(m=0;m<e.length;m++)e[m].calculateStripLinesThicknessInValues(),e[m].calculateBreaksInPixels()}},N.render=function(t,e,n,i,r){var o=t[0]?t[0].chart:e[0].chart;r=o.ctx;var s=o._axes;if(o.alignVerticalAxes&&o.alignVerticalAxes(),r.save(),r.beginPath(),t[0]&&r.rect(5,t[0].bounds.y1,t[0].chart.width-10,t[0].bounds.height),e[0]&&r.rect(5,e[e.length-1].bounds.y1,e[0].chart.width-10,e[0].bounds.height),r.clip(),t&&0<t.length)for(var a=0;a<t.length;a++)t[a].renderLabelsTicksAndTitle();if(e&&0<e.length)for(a=0;a<e.length;a++)e[a].renderLabelsTicksAndTitle();if(r.restore(),n&&0<n.length)for(a=0;a<n.length;a++)n[a].renderLabelsTicksAndTitle();if(i&&0<i.length)for(a=0;a<i.length;a++)i[a].renderLabelsTicksAndTitle();if(o.preparePlotArea(),o=o.plotArea,r.save(),r.beginPath(),r.rect(o.x1,o.y1,Math.abs(o.x2-o.x1),Math.abs(o.y2-o.y1)),r.clip(),t&&0<t.length)for(a=0;a<s.length;a++)s[a].renderStripLinesOfThicknessType("value");if(e&&0<e.length)for(a=0;a<e.length;a++)e[a].renderStripLinesOfThicknessType("value");if(n&&0<n.length)for(a=0;a<n.length;a++)n[a].renderStripLinesOfThicknessType("value");if(i&&0<i.length)for(a=0;a<i.length;a++)i[a].renderStripLinesOfThicknessType("value");if(t&&0<t.length)for(a=0;a<t.length;a++)t[a].renderInterlacedColors();if(e&&0<e.length)for(a=0;a<e.length;a++)e[a].renderInterlacedColors();if(n&&0<n.length)for(a=0;a<n.length;a++)n[a].renderInterlacedColors();if(i&&0<i.length)for(a=0;a<i.length;a++)i[a].renderInterlacedColors();if(r.restore(),t&&0<t.length)for(a=0;a<t.length;a++)t[a].renderGrid(),G&&(t[a].createMask(),t[a].renderBreaksBackground());if(e&&0<e.length)for(a=0;a<e.length;a++)e[a].renderGrid(),G&&(e[a].createMask(),e[a].renderBreaksBackground());if(n&&0<n.length)for(a=0;a<n.length;a++)n[a].renderGrid(),G&&(n[a].createMask(),n[a].renderBreaksBackground());if(i&&0<i.length)for(a=0;a<i.length;a++)i[a].renderGrid(),G&&(i[a].createMask(),i[a].renderBreaksBackground());if(t&&0<t.length)for(a=0;a<t.length;a++)t[a].renderAxisLine();if(e&&0<e.length)for(a=0;a<e.length;a++)e[a].renderAxisLine();if(n&&0<n.length)for(a=0;a<n.length;a++)n[a].renderAxisLine();if(i&&0<i.length)for(a=0;a<i.length;a++)i[a].renderAxisLine();if(t&&0<t.length)for(a=0;a<t.length;a++)t[a].renderStripLinesOfThicknessType("pixel");if(e&&0<e.length)for(a=0;a<e.length;a++)e[a].renderStripLinesOfThicknessType("pixel");if(n&&0<n.length)for(a=0;a<n.length;a++)n[a].renderStripLinesOfThicknessType("pixel");if(i&&0<i.length)for(a=0;a<i.length;a++)i[a].renderStripLinesOfThicknessType("pixel")},N.prototype.calculateStripLinesThicknessInValues=function(){for(var t=0;t<this.stripLines.length;t++)if(null!==this.stripLines[t].startValue&&null!==this.stripLines[t].endValue){var e=Math.min(this.stripLines[t].startValue,this.stripLines[t].endValue),n=Math.max(this.stripLines[t].startValue,this.stripLines[t].endValue);e=this.getApparentDifference(e,n),this.stripLines[t].value=this.logarithmic?this.stripLines[t].value*Math.sqrt(Math.log(this.stripLines[t].endValue/this.stripLines[t].startValue)/Math.log(e)):this.stripLines[t].value+(Math.abs(this.stripLines[t].endValue-this.stripLines[t].startValue)-e)/2,this.stripLines[t].thickness=e,this.stripLines[t]._thicknessType="value"}},N.prototype.calculateBreaksSizeInValues=function(){for(var t,e="left"===this._position||"right"===this._position?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,n=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],i=this.conversionParameters.pixelPerUnit||e/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),r=this.scaleBreaks&&!d(this.scaleBreaks.options.spacing),o=0;o<n.length;o++)t=r||!d(n[o].options.spacing),n[o].spacing=u(n[o].spacing,e,8,t?.1*e:8,t?0:3)<<0,n[o].size=0>n[o].spacing?0:Math.abs(n[o].spacing/i),this.logarithmic&&(n[o].size=Math.pow(this.logarithmBase,n[o].size))},N.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length)){var t=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];t.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var e=0;e<t.length&&!(t[e].startValue>this.conversionParameters.maximum);e++)t[e].endValue<this.conversionParameters.minimum||(d(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=e),t[e].startValue>=this.conversionParameters.minimum&&(t[e].startPixel=this.convertValueToPixel(t[e].startValue),this.scaleBreaks.lastBreakIndex=e),t[e].endValue<=this.conversionParameters.maximum&&(t[e].endPixel=this.convertValueToPixel(t[e].endValue)))}},N.prototype.renderLabelsTicksAndTitle=function(){var t,e,n=this,i=!1,r=0,o=0,s=1,a=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(s=1.2),void 0===this.options.interval){if("bottom"===this._position||"top"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){r=[],s=0!==this.labelAngle&&360!==this.labelAngle?1:1.2;for(var l,h=this.viewportMaximum,c=this.lineCoordinates.width/Math.log(this.range),u=this._labels.length-1;0<=u&&!((t=this._labels[u]).position<this.viewportMinimum);u--)t.position>this.viewportMaximum||!(u===this._labels.length-1||l<Math.log(h/t.position)*c/s)||(r.push(t),h=t.position,l=t.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+t.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=r}else{for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||(r+=l=t.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+t.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));r>this.lineCoordinates.width*s&&this.labelAutoFit&&(i=!0)}if("left"===this._position||"right"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){var d;for(r=[],h=this.viewportMaximum,c=this.lineCoordinates.height/Math.log(this.range),u=this._labels.length-1;0<=u&&!((t=this._labels[u]).position<this.viewportMinimum);u--)t.position>this.viewportMaximum||!(u===this._labels.length-1||d<Math.log(h/t.position)*c)||(r.push(t),h=t.position,d=t.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+t.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=r}else{for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||(o+=d=t.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+t.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));o>this.lineCoordinates.height*s&&this.labelAutoFit&&(i=!0)}}if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort((function(t,e){return t.position-e.position})),u=0,"bottom"===this._position){for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||t.position>this.viewportMaximum||i&&0!=a++%2&&this.labelAutoFit||(e=this.getPixelCoordinatesOnAxis(t.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=1==this.ctx.lineWidth%2?.5+(e.x<<0):e.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,e.y<<0),this.ctx.lineTo(o,e.y+this.tickLength<<0),this.ctx.stroke()),0===t.textBlock.angle?(e.x-=t.textBlock.width/2,e.y="inside"===this.labelPlacement?e.y-(this.tickLength+t.textBlock.fontSize/2):e.y+this.tickLength+t.textBlock.fontSize/2):(e.x="inside"===this.labelPlacement?0>this.labelAngle?e.x:e.x-t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):e.x-(0>this.labelAngle?t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),e.y="inside"===this.labelPlacement?0>this.labelAngle?e.y-this.tickLength-5:e.y-this.tickLength-Math.abs(t.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5):e.y+this.tickLength+Math.abs(0>this.labelAngle?t.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),t.textBlock.x=e.x,t.textBlock.y=e.y);"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(u=0;u<n._labels.length;u++)if(!((t=n._labels[u]).position<n.viewportMinimum||t.position>n.viewportMaximum||i&&0!=a++%2&&n.labelAutoFit)&&(e=n.getPixelCoordinatesOnAxis(t.position),n.tickThickness)){n.ctx.lineWidth=n.tickThickness,n.ctx.strokeStyle=n.tickColor;var r=1==n.ctx.lineWidth%2?.5+(e.x<<0):e.x<<0;n.ctx.save(),n.ctx.beginPath(),n.ctx.moveTo(r,e.y<<0),n.ctx.lineTo(r,e.y-n.tickLength<<0),n.ctx.stroke(),n.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height-3,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("top"===this._position){for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||t.position>this.viewportMaximum||i&&0!=a++%2&&this.labelAutoFit||(e=this.getPixelCoordinatesOnAxis(t.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=1==this.ctx.lineWidth%2?.5+(e.x<<0):e.x<<0,this.ctx.beginPath(),this.ctx.moveTo(o,e.y<<0),this.ctx.lineTo(o,e.y-this.tickLength<<0),this.ctx.stroke()),0===t.textBlock.angle?(e.x-=t.textBlock.width/2,e.y="inside"===this.labelPlacement?e.y+this.labelFontSize/2+this.tickLength+5:e.y-(this.tickLength+t.textBlock.height-t.textBlock.fontSize/2)):(e.x="inside"===this.labelPlacement?0<this.labelAngle?e.x:e.x-t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):e.x+(t.textBlock.height-this.tickLength-this.labelFontSize)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),e.y="inside"===this.labelPlacement?0<this.labelAngle?e.y+this.tickLength+5:e.y-t.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength+5:e.y-(this.tickLength+((t.textBlock.height-t.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?t.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))),t.textBlock.x=e.x,t.textBlock.y=e.y);"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(u=0;u<n._labels.length;u++)if(!((t=n._labels[u]).position<n.viewportMinimum||t.position>n.viewportMaximum||i&&0!=a++%2&&n.labelAutoFit)&&(e=n.getPixelCoordinatesOnAxis(t.position),n.tickThickness)){n.ctx.lineWidth=n.tickThickness,n.ctx.strokeStyle=n.tickColor;var r=1==this.ctx.lineWidth%2?.5+(e.x<<0):e.x<<0;n.ctx.save(),n.ctx.beginPath(),n.ctx.moveTo(r,e.y<<0),n.ctx.lineTo(r,e.y+n.tickLength<<0),n.ctx.stroke(),n.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("left"===this._position){for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||t.position>this.viewportMaximum||i&&0!=a++%2&&this.labelAutoFit||(e=this.getPixelCoordinatesOnAxis(t.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=1==this.ctx.lineWidth%2?.5+(e.y<<0):e.y<<0,this.ctx.beginPath(),this.ctx.moveTo(e.x<<0,o),this.ctx.lineTo(e.x-this.tickLength<<0,o),this.ctx.stroke()),0===this.labelAngle?(t.textBlock.y=e.y,t.textBlock.x="inside"===this.labelPlacement?e.x+this.tickLength+5:e.x-t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5):(t.textBlock.y="inside"===this.labelPlacement?e.y:e.y-t.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),t.textBlock.x="inside"===this.labelPlacement?e.x+this.tickLength+5:0<this.labelAngle?e.x-t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:e.x-t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(t.textBlock.height-t.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength));"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(u=0;u<n._labels.length;u++)if(!((t=n._labels[u]).position<n.viewportMinimum||t.position>n.viewportMaximum||i&&0!=a++%2&&n.labelAutoFit)&&(e=n.getPixelCoordinatesOnAxis(t.position),n.tickThickness)){n.ctx.lineWidth=n.tickThickness,n.ctx.strokeStyle=n.tickColor;var r=1==n.ctx.lineWidth%2?.5+(e.y<<0):e.y<<0;n.ctx.save(),n.ctx.beginPath(),n.ctx.moveTo(e.x<<0,r),n.ctx.lineTo(e.x+n.tickLength<<0,r),n.ctx.stroke(),n.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+1,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("right"===this._position){for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||t.position>this.viewportMaximum||i&&0!=a++%2&&this.labelAutoFit||(e=this.getPixelCoordinatesOnAxis(t.position),this.tickThickness&&"inside"!=this.labelPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,o=1==this.ctx.lineWidth%2?.5+(e.y<<0):e.y<<0,this.ctx.beginPath(),this.ctx.moveTo(e.x<<0,o),this.ctx.lineTo(e.x+this.tickLength<<0,o),this.ctx.stroke()),0===this.labelAngle?(t.textBlock.y=e.y,t.textBlock.x="inside"===this.labelPlacement?e.x-t.textBlock.width-this.tickLength-5:e.x+this.tickLength+5):(t.textBlock.y="inside"===this.labelPlacement?e.y-t.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0>this.labelAngle?e.y:e.y-(t.textBlock.height-t.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),t.textBlock.x="inside"===this.labelPlacement?e.x-t.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:0<this.labelAngle?e.x+(t.textBlock.height-t.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:e.x+this.tickLength+5));"inside"===this.labelPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(u=0;u<n._labels.length;u++)if(!((t=n._labels[u]).position<n.viewportMinimum||t.position>n.viewportMaximum||i&&0!=a++%2&&n.labelAutoFit)&&(e=n.getPixelCoordinatesOnAxis(t.position),n.tickThickness)){n.ctx.lineWidth=n.tickThickness,n.ctx.strokeStyle=n.tickColor;var r=1==n.ctx.lineWidth%2?.5+(e.y<<0):e.y<<0;n.ctx.save(),n.ctx.beginPath(),n.ctx.moveTo(e.x<<0,r),n.ctx.lineTo(e.x-n.tickLength<<0,r),n.ctx.stroke(),n.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-1,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(a=0,"inside"===this.labelPlacement)this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(u=0;u<n._labels.length;u++)(t=n._labels[u]).position<n.viewportMinimum||t.position>n.viewportMaximum||i&&0!=a++%2&&n.labelAutoFit||(n.ctx.save(),n.ctx.beginPath(),t.textBlock.render(!0),n.ctx.restore())}),this);else for(u=0;u<this._labels.length;u++)(t=this._labels[u]).position<this.viewportMinimum||t.position>this.viewportMaximum||i&&0!=a++%2&&this.labelAutoFit||t.textBlock.render(!0)},N.prototype.renderInterlacedColors=function(){var t,e,n=this.chart.plotArea.ctx,i=this.chart.plotArea,r=0;if(t=!0,"bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(n.fillStyle=this.interlacedColor,r=0;r<this._labels.length;r++)t?(e=this.getPixelCoordinatesOnAxis(this._labels[r].position),t=this.getPixelCoordinatesOnAxis(r+1>this._labels.length-1?this.viewportMaximum:this._labels[r+1].position),n.fillRect(i.x1,Math.min(e.y,t.y),Math.abs(i.x1-i.x2),Math.abs(t.y-e.y)),t=!1):t=!0}else for(n.fillStyle=this.interlacedColor,r=0;r<this._labels.length;r++)t?(t=this.getPixelCoordinatesOnAxis(this._labels[r].position),e=this.getPixelCoordinatesOnAxis(r+1>this._labels.length-1?this.viewportMaximum:this._labels[r+1].position),n.fillRect(Math.min(e.x,t.x),i.y1,Math.abs(e.x-t.x),Math.abs(i.y1-i.y2)),t=!1):t=!0;n.beginPath()},N.prototype.renderStripLinesOfThicknessType=function(t){if(this.stripLines&&0<this.stripLines.length&&t){var e,n=this,i=0,r=0,o=!1,s=!1,a=[],l=[];for(s=!1,i=0;i<this.stripLines.length;i++){var h=this.stripLines[i];h._thicknessType===t&&("pixel"===t&&(h.value<this.viewportMinimum||h.value>this.viewportMaximum||d(h.value)||isNaN(this.range))||a.push(h))}for(i=0;i<this._stripLineLabels.length;i++)if(h=this.stripLines[i],!((e=this._stripLineLabels[i]).position<this.viewportMinimum||e.position>this.viewportMaximum||isNaN(this.range))){if(t=this.getPixelCoordinatesOnAxis(e.position),"outside"===e.stripLine.labelPlacement)if(h&&(this.ctx.strokeStyle=h.color,"pixel"===h._thicknessType&&(this.ctx.lineWidth=h.thickness)),"bottom"===this._position){var c=1==this.ctx.lineWidth%2?.5+(t.x<<0):t.x<<0;this.ctx.beginPath(),this.ctx.moveTo(c,t.y<<0),this.ctx.lineTo(c,t.y+this.tickLength<<0),this.ctx.stroke(),0===this.labelAngle?(t.x-=e.textBlock.width/2,t.y+=this.tickLength+e.textBlock.fontSize/2):(t.x-=0>this.labelAngle?e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,t.y+=this.tickLength+Math.abs(0>this.labelAngle?e.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5))}else"top"===this._position?(c=1==this.ctx.lineWidth%2?.5+(t.x<<0):t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(c,t.y<<0),this.ctx.lineTo(c,t.y-this.tickLength<<0),this.ctx.stroke(),0===this.labelAngle?(t.x-=e.textBlock.width/2,t.y-=this.tickLength+e.textBlock.height):(t.x+=(e.textBlock.height-this.tickLength-this.labelFontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),t.y-=this.tickLength+(e.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?e.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))):"left"===this._position?(c=1==this.ctx.lineWidth%2?.5+(t.y<<0):t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,c),this.ctx.lineTo(t.x-this.tickLength<<0,c),this.ctx.stroke(),0===this.labelAngle?t.x=t.x-e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(t.y-=e.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),t.x=0<this.labelAngle?t.x-e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:t.x-e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(e.textBlock.height-e.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength)):"right"===this._position&&(c=1==this.ctx.lineWidth%2?.5+(t.y<<0):t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,c),this.ctx.lineTo(t.x+this.tickLength<<0,c),this.ctx.stroke(),0===this.labelAngle?t.x=t.x+this.tickLength+5:(t.y=0>this.labelAngle?t.y:t.y-(e.textBlock.height-e.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),t.x=0<this.labelAngle?t.x+(e.textBlock.height-e.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:t.x+this.tickLength+5));else e.textBlock.angle=-90,"bottom"===this._position?(e.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.height-3,e.textBlock.measureText(),t.x-e.textBlock.height>this.chart.plotArea.x1?d(h.startValue)?t.x-=e.textBlock.height-e.textBlock.fontSize/2:t.x-=e.textBlock.height/2-e.textBlock.fontSize/2+3:(e.textBlock.angle=90,d(h.startValue)?t.x+=e.textBlock.height-e.textBlock.fontSize/2:t.x+=e.textBlock.height/2-e.textBlock.fontSize/2+3),t.y=-90===e.textBlock.angle?"near"===e.stripLine.labelAlign?this.chart.plotArea.y2-3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+e.textBlock.width)/2:this.chart.plotArea.y1+e.textBlock.width+3:"near"===e.stripLine.labelAlign?this.chart.plotArea.y2-e.textBlock.width-3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-e.textBlock.width)/2:this.chart.plotArea.y1+3):"top"===this._position?(e.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.height-3,e.textBlock.measureText(),t.x-e.textBlock.height>this.chart.plotArea.x1?d(h.startValue)?t.x-=e.textBlock.height-e.textBlock.fontSize/2:t.x-=e.textBlock.height/2-e.textBlock.fontSize/2+3:(e.textBlock.angle=90,d(h.startValue)?t.x+=e.textBlock.height-e.textBlock.fontSize/2:t.x+=e.textBlock.height/2-e.textBlock.fontSize/2+3),t.y=-90===e.textBlock.angle?"near"===e.stripLine.labelAlign?this.chart.plotArea.y1+e.textBlock.width+3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+e.textBlock.width)/2:this.chart.plotArea.y2-3:"near"===e.stripLine.labelAlign?this.chart.plotArea.y1+3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-e.textBlock.width)/2:this.chart.plotArea.y2-e.textBlock.width-3):"left"===this._position?(e.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.width-3,e.textBlock.angle=0,e.textBlock.measureText(),t.y-e.textBlock.height>this.chart.plotArea.y1?d(h.startValue)?t.y-=e.textBlock.height-e.textBlock.fontSize/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize+3:t.y-e.textBlock.height<this.chart.plotArea.y2?t.y+=e.textBlock.fontSize/2+3:d(h.startValue)?t.y-=e.textBlock.height-e.textBlock.fontSize/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize+3,t.x="near"===e.stripLine.labelAlign?this.chart.plotArea.x1+3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-e.textBlock.width/2:this.chart.plotArea.x2-e.textBlock.width-3):"right"===this._position&&(e.textBlock.maxWidth=this.options.stripLines[i].labelMaxWidth?this.options.stripLines[i].labelMaxWidth:this.chart.plotArea.width-3,e.textBlock.angle=0,e.textBlock.measureText(),t.y-+e.textBlock.height>this.chart.plotArea.y1?d(h.startValue)?t.y-=e.textBlock.height-e.textBlock.fontSize/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize/2-3:t.y-e.textBlock.height<this.chart.plotArea.y2?t.y+=e.textBlock.fontSize/2+3:d(h.startValue)?t.y-=e.textBlock.height-e.textBlock.fontSize/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize/2+3,t.x="near"===e.stripLine.labelAlign?this.chart.plotArea.x2-e.textBlock.width-3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-e.textBlock.width/2:this.chart.plotArea.x1+3);e.textBlock.x=t.x,e.textBlock.y=t.y,l.push(e)}if(!s){for(s=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),i=0;i<a.length;i++)(h=a[i]).showOnTop?o||(o=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),r=0;r<a.length;r++)(h=a[r]).showOnTop&&h.render();this.ctx.restore()}),h)):h.render();for(i=0;i<l.length;i++)(e=l[i]).stripLine.showOnTop?s||(s=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(r=0;r<l.length;r++)"inside"===(e=l[r]).stripLine.labelPlacement&&e.stripLine.showOnTop&&(n.ctx.save(),n.ctx.beginPath(),n.ctx.rect(n.chart.plotArea.x1,n.chart.plotArea.y1,n.chart.plotArea.width,n.chart.plotArea.height),n.ctx.clip(),e.textBlock.render(!0),n.ctx.restore())}),e.textBlock)):"inside"===e.stripLine.labelPlacement&&e.textBlock.render(!0);this.ctx.restore(),s=!0}if(s)for(s=!1,i=0;i<l.length;i++)(e=l[i]).stripLine.showOnTop?s||(s=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(r=0;r<l.length;r++)"outside"===(e=l[r]).stripLine.labelPlacement&&e.stripLine.showOnTop&&e.textBlock.render(!0)}),e.textBlock)):"outside"===e.stripLine.labelPlacement&&e.textBlock.render(!0)}},N.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},N.prototype.createMask=function(){if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){var t=this.scaleBreaks._appliedBreaks;G?(this.maskCanvas=x(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var e=0;e<t.length;e++)t[e].endValue<this.viewportMinimum||t[e].startValue>this.viewportMaximum||isNaN(this.range)||t[e].render(this.maskCtx);this.maskCtx.restore()}},N.prototype.renderCrosshair=function(t,e){this.crosshair.render(t,e)},N.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var t=this.chart.ctx;t.save();var e,n=this.chart.plotArea;if(t.lineWidth=this.gridThickness,t.strokeStyle=this.gridColor,t.setLineDash&&t.setLineDash(g(this.gridDashType,this.gridThickness)),"bottom"===this._position||"top"===this._position)for(i=0;i<this._labels.length;i++)this._labels[i].position<this.viewportMinimum||this._labels[i].position>this.viewportMaximum||this._labels[i].breaksLabelType||(t.beginPath(),e=this.getPixelCoordinatesOnAxis(this._labels[i].position),t.moveTo(e=1==t.lineWidth%2?.5+(e.x<<0):e.x<<0,n.y1<<0),t.lineTo(e,n.y2<<0),t.stroke());else if("left"===this._position||"right"===this._position)for(var i=0;i<this._labels.length;i++)this._labels[i].position<this.viewportMinimum||this._labels[i].position>this.viewportMaximum||this._labels[i].breaksLabelType||(t.beginPath(),e=this.getPixelCoordinatesOnAxis(this._labels[i].position),t.moveTo(n.x1<<0,e=1==t.lineWidth%2?.5+(e.y<<0):e.y<<0),t.lineTo(n.x2<<0,e),t.stroke());t.restore()}},N.prototype.renderAxisLine=function(){var t,e,n=this.chart.ctx,i=G?this.chart._preRenderCtx:n,r=Math.ceil(this.tickThickness/(this.reversed?-2:2)),o=Math.ceil(this.tickThickness/(this.reversed?2:-2));if(i.save(),"bottom"===this._position||"top"===this._position){if(this.lineThickness){this.reversed?(t=this.lineCoordinates.x2,e=this.lineCoordinates.x1):(t=this.lineCoordinates.x1,e=this.lineCoordinates.x2),i.lineWidth=this.lineThickness,i.strokeStyle=this.lineColor?this.lineColor:"black",i.setLineDash&&i.setLineDash(g(this.lineDashType,this.lineThickness));var s=1==this.lineThickness%2?.5+(this.lineCoordinates.y1<<0):this.lineCoordinates.y1<<0;if(i.beginPath(),this.scaleBreaks&&!d(this.scaleBreaks.firstBreakIndex))if(d(this.scaleBreaks.lastBreakIndex))t=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+o;else for(var a=this.scaleBreaks.firstBreakIndex;a<=this.scaleBreaks.lastBreakIndex;a++)i.moveTo(t,s),i.lineTo(this.scaleBreaks._appliedBreaks[a].startPixel+r,s),t=this.scaleBreaks._appliedBreaks[a].endPixel+o;t&&(i.moveTo(t,s),i.lineTo(e,s)),i.stroke()}}else if(("left"===this._position||"right"===this._position)&&this.lineThickness){if(this.reversed?(t=this.lineCoordinates.y1,e=this.lineCoordinates.y2):(t=this.lineCoordinates.y2,e=this.lineCoordinates.y1),i.lineWidth=this.lineThickness,i.strokeStyle=this.lineColor,i.setLineDash&&i.setLineDash(g(this.lineDashType,this.lineThickness)),s=1==this.lineThickness%2?.5+(this.lineCoordinates.x1<<0):this.lineCoordinates.x1<<0,i.beginPath(),this.scaleBreaks&&!d(this.scaleBreaks.firstBreakIndex))if(d(this.scaleBreaks.lastBreakIndex))t=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+r;else for(a=this.scaleBreaks.firstBreakIndex;a<=this.scaleBreaks.lastBreakIndex;a++)i.moveTo(s,t),i.lineTo(s,this.scaleBreaks._appliedBreaks[a].startPixel+o),t=this.scaleBreaks._appliedBreaks[a].endPixel+r;t&&(i.moveTo(s,t),i.lineTo(s,e)),i.stroke()}G&&(n.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),i.clearRect(0,0,this.chart.width,this.chart.height)),i.restore()},N.prototype.getPixelCoordinatesOnAxis=function(t){var e={};return"bottom"!==this._position&&"top"!==this._position||(e.x=this.convertValueToPixel(t),e.y=this.lineCoordinates.y1),"left"!==this._position&&"right"!==this._position||(e.y=this.convertValueToPixel(t),e.x=this.lineCoordinates.x2),e},N.prototype.convertPixelToValue=function(t){if(void 0===t)return null;var e,n=0,i=0,r=(n=!0,this.scaleBreaks?this.scaleBreaks._appliedBreaks:[]);if(i="number"==typeof t?t:"left"===this._position||"right"===this._position?t.y:t.x,this.logarithmic){if(t=e=Math.pow(this.logarithmBase,(i-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),i<=this.conversionParameters.reference==("left"===this._position||"right"===this._position)!==this.reversed){for(i=0;i<r.length;i++)if(!(r[i].endValue<this.conversionParameters.minimum))if(n)if(r[i].startValue<this.conversionParameters.minimum){if(1<r[i].size&&this.conversionParameters.minimum*Math.pow(r[i].endValue/r[i].startValue,Math.log(e)/Math.log(r[i].size))<r[i].endValue){t=Math.pow(r[i].endValue/r[i].startValue,Math.log(e)/Math.log(r[i].size));break}t*=r[i].endValue/this.conversionParameters.minimum/Math.pow(r[i].size,Math.log(r[i].endValue/this.conversionParameters.minimum)/Math.log(r[i].endValue/r[i].startValue)),e/=Math.pow(r[i].size,Math.log(r[i].endValue/this.conversionParameters.minimum)/Math.log(r[i].endValue/r[i].startValue)),n=!1}else{if(!(e>r[i].startValue/this.conversionParameters.minimum))break;if((e/=r[i].startValue/this.conversionParameters.minimum)<r[i].size){t*=Math.pow(r[i].endValue/r[i].startValue,1===r[i].size?1:Math.log(e)/Math.log(r[i].size))/e;break}t*=r[i].endValue/r[i].startValue/r[i].size,e/=r[i].size,n=!1}else{if(!(e>r[i].startValue/r[i-1].endValue))break;if((e/=r[i].startValue/r[i-1].endValue)<r[i].size){t*=Math.pow(r[i].endValue/r[i].startValue,1===r[i].size?1:Math.log(e)/Math.log(r[i].size))/e;break}t*=r[i].endValue/r[i].startValue/r[i].size,e/=r[i].size}}else for(i=r.length-1;0<=i;i--)if(!(r[i].startValue>this.conversionParameters.minimum))if(n)if(r[i].endValue>this.conversionParameters.minimum){if(1<r[i].size&&this.conversionParameters.minimum*Math.pow(r[i].endValue/r[i].startValue,Math.log(e)/Math.log(r[i].size))>r[i].startValue){t=Math.pow(r[i].endValue/r[i].startValue,Math.log(e)/Math.log(r[i].size));break}t*=r[i].startValue/this.conversionParameters.minimum*Math.pow(r[i].size,Math.log(r[i].startValue/this.conversionParameters.minimum)/Math.log(r[i].endValue/r[i].startValue))*e,e*=Math.pow(r[i].size,Math.log(this.conversionParameters.minimum/r[i].startValue)/Math.log(r[i].endValue/r[i].startValue)),n=!1}else{if(!(e<r[i].endValue/this.conversionParameters.minimum))break;if((e/=r[i].endValue/this.conversionParameters.minimum)>1/r[i].size){t*=Math.pow(r[i].endValue/r[i].startValue,1>=r[i].size?1:Math.log(e)/Math.log(r[i].size))*e;break}t/=r[i].endValue/r[i].startValue/r[i].size,e*=r[i].size,n=!1}else{if(!(e<r[i].endValue/r[i+1].startValue))break;if((e/=r[i].endValue/r[i+1].startValue)>1/r[i].size){t*=Math.pow(r[i].endValue/r[i].startValue,1>=r[i].size?1:Math.log(e)/Math.log(r[i].size))*e;break}t/=r[i].endValue/r[i].startValue/r[i].size,e*=r[i].size}n=t*this.viewportMinimum}else{if(t=e=(i-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,i<=this.conversionParameters.reference==("left"===this._position||"right"===this._position)!==this.reversed){for(i=0;i<r.length;i++)if(!(r[i].endValue<this.conversionParameters.minimum))if(n)if(r[i].startValue<this.conversionParameters.minimum){if(r[i].size&&this.conversionParameters.minimum+e*(r[i].endValue-r[i].startValue)/r[i].size<r[i].endValue){t=0>=r[i].size?0:e*(r[i].endValue-r[i].startValue)/r[i].size;break}t+=r[i].endValue-this.conversionParameters.minimum-r[i].size*(r[i].endValue-this.conversionParameters.minimum)/(r[i].endValue-r[i].startValue),e-=r[i].size*(r[i].endValue-this.conversionParameters.minimum)/(r[i].endValue-r[i].startValue),n=!1}else{if(!(e>r[i].startValue-this.conversionParameters.minimum))break;if((e-=r[i].startValue-this.conversionParameters.minimum)<r[i].size){t+=(r[i].endValue-r[i].startValue)*(0===r[i].size?1:e/r[i].size)-e;break}t+=r[i].endValue-r[i].startValue-r[i].size,e-=r[i].size,n=!1}else{if(!(e>r[i].startValue-r[i-1].endValue))break;if((e-=r[i].startValue-r[i-1].endValue)<r[i].size){t+=(r[i].endValue-r[i].startValue)*(0===r[i].size?1:e/r[i].size)-e;break}t+=r[i].endValue-r[i].startValue-r[i].size,e-=r[i].size}}else for(i=r.length-1;0<=i;i--)if(!(r[i].startValue>this.conversionParameters.minimum))if(n)if(r[i].endValue>this.conversionParameters.minimum){if(r[i].size&&this.conversionParameters.minimum+e*(r[i].endValue-r[i].startValue)/r[i].size>r[i].startValue){t=0>=r[i].size?0:e*(r[i].endValue-r[i].startValue)/r[i].size;break}t+=r[i].startValue-this.conversionParameters.minimum+r[i].size*(this.conversionParameters.minimum-r[i].startValue)/(r[i].endValue-r[i].startValue),e+=r[i].size*(this.conversionParameters.minimum-r[i].startValue)/(r[i].endValue-r[i].startValue),n=!1}else{if(!(e<r[i].endValue-this.conversionParameters.minimum))break;if((e-=r[i].endValue-this.conversionParameters.minimum)>-1*r[i].size){t+=(r[i].endValue-r[i].startValue)*(0===r[i].size?1:e/r[i].size)+e;break}t-=r[i].endValue-r[i].startValue-r[i].size,e+=r[i].size,n=!1}else{if(!(e<r[i].endValue-r[i+1].startValue))break;if((e-=r[i].endValue-r[i+1].startValue)>-1*r[i].size){t+=(r[i].endValue-r[i].startValue)*(0===r[i].size?1:e/r[i].size)+e;break}t-=r[i].endValue-r[i].startValue-r[i].size,e+=r[i].size}n=this.conversionParameters.minimum+t}return n},N.prototype.convertValueToPixel=function(t){return t=this.getApparentDifference(this.conversionParameters.minimum,t,t),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(t/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:"axisX"===this.type?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(t-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(t-this.conversionParameters.minimum)+.5},N.prototype.getApparentDifference=function(t,e,n,i){var r=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic){n=d(n)?e/t:n;for(var o=0;o<r.length&&!(e<r[o].startValue);o++)t>r[o].endValue||(t<=r[o].startValue&&e>=r[o].endValue?n=n/r[o].endValue*r[o].startValue*r[o].size:t>=r[o].startValue&&e>=r[o].endValue?n=n/r[o].endValue*t*Math.pow(r[o].size,Math.log(r[o].endValue/t)/Math.log(r[o].endValue/r[o].startValue)):t<=r[o].startValue&&e<=r[o].endValue?n=n/e*r[o].startValue*Math.pow(r[o].size,Math.log(e/r[o].startValue)/Math.log(r[o].endValue/r[o].startValue)):!i&&t>r[o].startValue&&e<r[o].endValue&&(n=t*Math.pow(r[o].size,Math.log(e/t)/Math.log(r[o].endValue/r[o].startValue))))}else for(n=d(n)?Math.abs(e-t):n,o=0;o<r.length&&!(e<r[o].startValue);o++)t>r[o].endValue||(t<=r[o].startValue&&e>=r[o].endValue?n=n-r[o].endValue+r[o].startValue+r[o].size:t>r[o].startValue&&e>=r[o].endValue?n=n-r[o].endValue+t+r[o].size*(r[o].endValue-t)/(r[o].endValue-r[o].startValue):t<=r[o].startValue&&e<r[o].endValue?n=n-e+r[o].startValue+r[o].size*(e-r[o].startValue)/(r[o].endValue-r[o].startValue):!i&&t>r[o].startValue&&e<r[o].endValue&&(n=t+r[o].size*(e-t)/(r[o].endValue-r[o].startValue)));return n},N.prototype.setViewPortRange=function(t,e){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(t,e),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(t,e)},N.prototype.getXValueAt=function(t){if(!t)return null;var e=null;return"left"===this._position?e=this.convertPixelToValue(t.y):"bottom"===this._position&&(e=this.convertPixelToValue(t.x)),e},N.prototype.calculateValueToPixelConversionParameters=function(t){t=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var e={pixelPerUnit:null,minimum:null,reference:null},n=this.lineCoordinates.width,i=this.lineCoordinates.height;if(n="bottom"===this._position||"top"===this._position?n:i,i=Math.abs(this.range),this.logarithmic)for(var r=0;r<t.length&&!(this.viewportMaximum<t[r].startValue);r++)this.viewportMinimum>t[r].endValue||(this.viewportMinimum>=t[r].startValue&&this.viewportMaximum<=t[r].endValue?n=0:this.viewportMinimum<=t[r].startValue&&this.viewportMaximum>=t[r].endValue?(i=i/t[r].endValue*t[r].startValue,n=0<t[r].spacing.toString().indexOf("%")?n*(1-parseFloat(t[r].spacing)/100):n-Math.min(t[r].spacing,.1*n)):this.viewportMinimum>t[r].startValue&&this.viewportMaximum>=t[r].endValue?(i=i/t[r].endValue*this.viewportMinimum,n=0<t[r].spacing.toString().indexOf("%")?n*(1-parseFloat(t[r].spacing)/100*Math.log(t[r].endValue/this.viewportMinimum)/Math.log(t[r].endValue/t[r].startValue)):n-Math.min(t[r].spacing,.1*n)*Math.log(t[r].endValue/this.viewportMinimum)/Math.log(t[r].endValue/t[r].startValue)):this.viewportMinimum<=t[r].startValue&&this.viewportMaximum<t[r].endValue&&(i=i/this.viewportMaximum*t[r].startValue,n=0<t[r].spacing.toString().indexOf("%")?n*(1-parseFloat(t[r].spacing)/100*Math.log(this.viewportMaximum/t[r].startValue)/Math.log(t[r].endValue/t[r].startValue)):n-Math.min(t[r].spacing,.1*n)*Math.log(this.viewportMaximum/t[r].startValue)/Math.log(t[r].endValue/t[r].startValue)));else for(r=0;r<t.length&&!(this.viewportMaximum<t[r].startValue);r++)this.viewportMinimum>t[r].endValue||(this.viewportMinimum>=t[r].startValue&&this.viewportMaximum<=t[r].endValue?n=0:this.viewportMinimum<=t[r].startValue&&this.viewportMaximum>=t[r].endValue?(i=i-t[r].endValue+t[r].startValue,n=0<t[r].spacing.toString().indexOf("%")?n*(1-parseFloat(t[r].spacing)/100):n-Math.min(t[r].spacing,.1*n)):this.viewportMinimum>t[r].startValue&&this.viewportMaximum>=t[r].endValue?(i=i-t[r].endValue+this.viewportMinimum,n=0<t[r].spacing.toString().indexOf("%")?n*(1-parseFloat(t[r].spacing)/100*(t[r].endValue-this.viewportMinimum)/(t[r].endValue-t[r].startValue)):n-Math.min(t[r].spacing,.1*n)*(t[r].endValue-this.viewportMinimum)/(t[r].endValue-t[r].startValue)):this.viewportMinimum<=t[r].startValue&&this.viewportMaximum<t[r].endValue&&(i=i-this.viewportMaximum+t[r].startValue,n=0<t[r].spacing.toString().indexOf("%")?n*(1-parseFloat(t[r].spacing)/100*(this.viewportMaximum-t[r].startValue)/(t[r].endValue-t[r].startValue)):n-Math.min(t[r].spacing,.1*n)*(this.viewportMaximum-t[r].startValue)/(t[r].endValue-t[r].startValue)));e.minimum=this.viewportMinimum,e.maximum=this.viewportMaximum,e.range=i,"bottom"!==this._position&&"top"!==this._position||(this.logarithmic?(e.lnLogarithmBase=Math.log(this.logarithmBase),e.pixelPerUnit=(this.reversed?-1:1)*n*e.lnLogarithmBase/Math.log(Math.abs(i))):e.pixelPerUnit=(this.reversed?-1:1)*n/Math.abs(i),e.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),"left"!==this._position&&"right"!==this._position||(this.logarithmic?(e.lnLogarithmBase=Math.log(this.logarithmBase),e.pixelPerUnit=(this.reversed?1:-1)*n*e.lnLogarithmBase/Math.log(Math.abs(i))):e.pixelPerUnit=(this.reversed?1:-1)*n/Math.abs(i),e.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=e},N.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var t=this.chart.layoutManager.getFreeSpace(),e=!1,n=!1;"bottom"===this._position||"top"===this._position?(this.maxWidth=t.width,this.maxHeight=t.height):(this.maxWidth=t.height,this.maxHeight=t.width),t="axisX"===this.type?"xySwapped"===this.chart.plotInfo.axisPlacement?62:70:"xySwapped"===this.chart.plotInfo.axisPlacement?50:40;var i,r,o,s=4;if("axisX"===this.type&&(s=600>this.maxWidth?8:6),t=Math.max(s,Math.floor(this.maxWidth/t)),s=0,!d(this.options.viewportMinimum)&&!d(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),!d(this.options.viewportMinimum)||d(this.sessionVariables.newViewportMinimum)||isNaN(this.sessionVariables.newViewportMinimum)?(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum):this.viewportMinimum=this.sessionVariables.newViewportMinimum,!d(this.options.viewportMaximum)||d(this.sessionVariables.newViewportMaximum)||isNaN(this.sessionVariables.newViewportMaximum)?(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum):this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.scaleBreaks)for(s=0;s<this.scaleBreaks._appliedBreaks.length;s++)if((!d(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[s].startValue||!d(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[s].startValue||!d(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[s].startValue)&&(!d(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[s].endValue||!d(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[s].endValue||!d(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[s].endValue)){this.scaleBreaks._appliedBreaks.splice(s,1);break}if("axisX"===this.type){if(this.dataSeries&&0<this.dataSeries.length)for(i=0;i<this.dataSeries.length;i++)"dateTime"===this.dataSeries[i].xValueType&&(n=!0);0==(r=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax)-(i=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin)&&(r+=s=void 0===this.options.interval?.4:this.options.interval,i-=s),1/0!==this.dataInfo.minDiff?o=this.dataInfo.minDiff:1<r-i?o=.5*Math.abs(r-i):(o=1,n&&(e=!0))}else"axisY"===this.type&&(i=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,r=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(i)||isFinite(r)?isFinite(i)?isFinite(r)||(r=i):i=r:(r=void 0===this.options.interval?-1/0:this.options.interval,i=void 0!==this.options.interval||isFinite(this.dataInfo.minDiff)?0:1/0),0===i&&0===r?(r+=9,i=0):0==r-i?(r+=s=Math.min(Math.abs(.01*Math.abs(r)),5),i-=s):i>r?(s=Math.min(.01*Math.abs(this.getApparentDifference(r,i,null,!0)),5),0<=r?i=r-s:r=isFinite(i)?i+s:0):(s=Math.min(.01*Math.abs(this.getApparentDifference(i,r,null,!0)),.05),0!==r&&(r+=s),0!==i&&(i-=s)),o=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<r-i?.5*Math.abs(r-i):1,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&0<i&&(i=0),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&0>r&&(r=0));s=this.getApparentDifference(isNaN(this.viewportMinimum)||null===this.viewportMinimum?i:this.viewportMinimum,isNaN(this.viewportMaximum)||null===this.viewportMaximum?r:this.viewportMaximum,null,!0),"axisX"===this.type&&n?(this.intervalType||(s/1<=t?(this.interval=1,this.intervalType="millisecond"):s/2<=t?(this.interval=2,this.intervalType="millisecond"):s/5<=t?(this.interval=5,this.intervalType="millisecond"):s/10<=t?(this.interval=10,this.intervalType="millisecond"):s/20<=t?(this.interval=20,this.intervalType="millisecond"):s/50<=t?(this.interval=50,this.intervalType="millisecond"):s/100<=t?(this.interval=100,this.intervalType="millisecond"):s/200<=t?(this.interval=200,this.intervalType="millisecond"):s/250<=t?(this.interval=250,this.intervalType="millisecond"):s/300<=t?(this.interval=300,this.intervalType="millisecond"):s/400<=t?(this.interval=400,this.intervalType="millisecond"):s/500<=t?(this.interval=500,this.intervalType="millisecond"):s/(1*Z.secondDuration)<=t?(this.interval=1,this.intervalType="second"):s/(2*Z.secondDuration)<=t?(this.interval=2,this.intervalType="second"):s/(5*Z.secondDuration)<=t?(this.interval=5,this.intervalType="second"):s/(10*Z.secondDuration)<=t?(this.interval=10,this.intervalType="second"):s/(15*Z.secondDuration)<=t?(this.interval=15,this.intervalType="second"):s/(20*Z.secondDuration)<=t?(this.interval=20,this.intervalType="second"):s/(30*Z.secondDuration)<=t?(this.interval=30,this.intervalType="second"):s/(1*Z.minuteDuration)<=t?(this.interval=1,this.intervalType="minute"):s/(2*Z.minuteDuration)<=t?(this.interval=2,this.intervalType="minute"):s/(5*Z.minuteDuration)<=t?(this.interval=5,this.intervalType="minute"):s/(10*Z.minuteDuration)<=t?(this.interval=10,this.intervalType="minute"):s/(15*Z.minuteDuration)<=t?(this.interval=15,this.intervalType="minute"):s/(20*Z.minuteDuration)<=t?(this.interval=20,this.intervalType="minute"):s/(30*Z.minuteDuration)<=t?(this.interval=30,this.intervalType="minute"):s/(1*Z.hourDuration)<=t?(this.interval=1,this.intervalType="hour"):s/(2*Z.hourDuration)<=t?(this.interval=2,this.intervalType="hour"):s/(3*Z.hourDuration)<=t?(this.interval=3,this.intervalType="hour"):s/(6*Z.hourDuration)<=t?(this.interval=6,this.intervalType="hour"):s/(1*Z.dayDuration)<=t?(this.interval=1,this.intervalType="day"):s/(2*Z.dayDuration)<=t?(this.interval=2,this.intervalType="day"):s/(4*Z.dayDuration)<=t?(this.interval=4,this.intervalType="day"):s/(1*Z.weekDuration)<=t?(this.interval=1,this.intervalType="week"):s/(2*Z.weekDuration)<=t?(this.interval=2,this.intervalType="week"):s/(3*Z.weekDuration)<=t?(this.interval=3,this.intervalType="week"):s/(1*Z.monthDuration)<=t?(this.interval=1,this.intervalType="month"):s/(2*Z.monthDuration)<=t?(this.interval=2,this.intervalType="month"):s/(3*Z.monthDuration)<=t?(this.interval=3,this.intervalType="month"):s/(6*Z.monthDuration)<=t?(this.interval=6,this.intervalType="month"):(this.interval=s/(1*Z.yearDuration)<=t?1:s/(2*Z.yearDuration)<=t?2:s/(4*Z.yearDuration)<=t?4:Math.floor(N.getNiceNumber(s/(t-1),!0)/Z.yearDuration),this.intervalType="year")),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=i-o/2),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=r+o/2),e?this.autoValueFormatString="MMM DD YYYY HH:mm":"year"===this.intervalType?this.autoValueFormatString="YYYY":"month"===this.intervalType?this.autoValueFormatString="MMM YYYY":"week"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"day"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.autoValueFormatString="hh:mm TT":"minute"===this.intervalType?this.autoValueFormatString="hh:mm TT":"second"===this.intervalType?this.autoValueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",s=N.getNiceNumber(s,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:N.getNiceNumber(s/(t-1),!0),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?i-o/2:Math.floor(i/this.interval)*this.interval),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?r+o/2:Math.ceil(r/this.interval)*this.interval),0===this.viewportMaximum&&0===this.viewportMinimum&&(0===this.options.viewportMinimum?this.viewportMaximum+=10:0===this.options.viewportMaximum&&(this.viewportMinimum-=10),this.options&&void 0===this.options.interval&&(this.interval=N.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(t-1),!0)))),null!==this.minimum&&null!==this.maximum||("axisX"===this.type?(0==(r=null!==this.maximum?this.maximum:this.dataInfo.max)-(i=null!==this.minimum?this.minimum:this.dataInfo.min)&&(r+=s=void 0===this.options.interval?.4:this.options.interval,i-=s),o=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<r-i?.5*Math.abs(r-i):1):"axisY"===this.type&&(i=null!==this.minimum?this.minimum:this.dataInfo.min,r=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(i)||isFinite(r)?0===i&&0===r?(r+=9,i=0):0==r-i?(r+=s=Math.min(Math.abs(.01*Math.abs(r)),5),i-=s):i>r?(s=Math.min(.01*Math.abs(this.getApparentDifference(r,i,null,!0)),5),0<=r?i=r-s:r=isFinite(i)?i+s:0):(s=Math.min(.01*Math.abs(this.getApparentDifference(i,r,null,!0)),.05),0!==r&&(r+=s),0!==i&&(i-=s)):(r=void 0===this.options.interval?-1/0:this.options.interval,i=void 0!==this.options.interval||isFinite(this.dataInfo.minDiff)?0:1/0),o=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<r-i?.5*Math.abs(r-i):1,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&0<i&&(i=0),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&0>r&&(r=0)),Math.abs(this.getApparentDifference(i,r,null,!0)),"axisX"===this.type&&n?(this.valueType="dateTime",(null===this.minimum||isNaN(this.minimum))&&(this.minimum=i-o/2),(null===this.maximum||isNaN(this.maximum))&&(this.maximum=r+o/2)):(this.intervalType=this.valueType="number",null===this.minimum&&(this.minimum="axisX"===this.type?i-o/2:Math.floor(i/this.interval)*this.interval,this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),null===this.maximum&&(this.maximum="axisX"===this.type?r+o/2:Math.ceil(r/this.interval)*this.interval,this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),0===this.maximum&&0===this.minimum&&(0===this.options.minimum?this.maximum+=10:0===this.options.maximum&&(this.minimum-=10)))),d(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),d(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,this.intervalStartPosition="axisX"===this.type&&n?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=N.generateValueFormatString(this.range,2))}},N.prototype.calculateLogarithmicAxisParameters=function(){var t,e,n,i,r,o=this.chart.layoutManager.getFreeSpace(),s=Math.log(this.logarithmBase);if("bottom"===this._position||"top"===this._position?(this.maxWidth=o.width,this.maxHeight=o.height):(this.maxWidth=o.height,this.maxHeight=o.width),o="axisX"===this.type?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3),r=1,(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks)for(r=0;r<this.scaleBreaks._appliedBreaks.length;r++)if((!d(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[r].startValue||!d(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[r].startValue||!d(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[r].startValue)&&(!d(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[r].endValue||!d(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[r].endValue||!d(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[r].endValue)){this.scaleBreaks._appliedBreaks.splice(r,1);break}"axisX"===this.type?(1==(n=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax)/(e=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin)&&(n*=r=Math.pow(this.logarithmBase,void 0===this.options.interval?.4:this.options.interval),e/=r),i=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n/e>this.logarithmBase?n/e*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(n=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,0>=(e=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin)&&!isFinite(n)?(n=void 0===this.options.interval?0:this.options.interval,e=1):0>=e?e=n:isFinite(n)||(n=e),1===e&&1===n?(n*=this.logarithmBase-1/this.logarithmBase,e=1):1==n/e?(n*=r=Math.min(n*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),e/=r):e>n?(r=Math.min(e/n*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=n?e=n/r:n=e*r):(r=Math.min(n/e*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==n&&(n*=r),1!==e&&(e/=r)),i=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n/e>this.logarithmBase?n/e*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&1<e&&(e=1),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&1>n&&(n=1)),r=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?n:this.viewportMaximum)/(isNaN(this.viewportMinimum)||null===this.viewportMinimum?e:this.viewportMinimum);var a=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?n:this.viewportMaximum)-(isNaN(this.viewportMinimum)||null===this.viewportMinimum?e:this.viewportMinimum);if(this.intervalType="number",r=Math.pow(this.logarithmBase,N.getNiceNumber(Math.abs(Math.log(r)/s),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=N.getNiceExponent(Math.log(r)/s/(o-1),!0),t=N.getNiceNumber(a/(o-1),!0)),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?e/Math.sqrt(i):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(e)/s/this.interval))),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?n*Math.sqrt(i):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(n)/s/this.interval))),1===this.viewportMaximum&&1===this.viewportMinimum&&(1===this.options.viewportMinimum?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.viewportMaximum&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&void 0===this.options.interval&&(this.interval=N.getNiceExponent(Math.ceil(Math.log(r)/s)/(o-1)),t=N.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(o-1),!0))),null!==this.minimum&&null!==this.maximum||("axisX"===this.type?(1==(n=null!==this.maximum?this.maximum:this.dataInfo.max)/(e=null!==this.minimum?this.minimum:this.dataInfo.min)&&(n*=r=Math.pow(this.logarithmBase,void 0===this.options.interval?.4:this.options.interval),e/=r),i=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n/e>this.logarithmBase?n/e*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(e=null!==this.minimum?this.minimum:this.dataInfo.min,n=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(e)||isFinite(n)?1===e&&1===n?(n*=this.logarithmBase,e/=this.logarithmBase):1==n/e?(n*=r=Math.pow(this.logarithmBase,this.interval),e/=r):e>n?(r=Math.min(e/n*.01,5),1<=n?e=n/r:n=e*r):(r=Math.min(n/e*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==n&&(n*=r),1!==e&&(e/=r)):(n=void 0===this.options.interval?0:this.options.interval,e=1),i=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n/e>this.logarithmBase?n/e*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&1<e&&(e=1),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&1>n&&(n=1)),this.intervalType="number",null===this.minimum&&(this.minimum="axisX"===this.type?e/Math.sqrt(i):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(e)/s/this.interval)),this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?void 0===this.sessionVariables.newViewportMinimum?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)),null===this.maximum&&(this.maximum="axisX"===this.type?n*Math.sqrt(i):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(n)/s/this.interval)),this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?void 0===this.sessionVariables.newViewportMaximum?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)),1===this.maximum&&1===this.minimum&&(1===this.options.minimum?this.maximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.maximum&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),e=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(s*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=o,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>o?2:3)){for(s=Math.floor(this.viewportMinimum/t+.5)*t;s<this.viewportMinimum;)s+=t;this.equidistantInterval=!1,this.intervalStartPosition=s,this.interval=t}else this.options.interval||(t=Math.ceil(this.interval),this.range>this.interval&&(this.interval=t,e=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(s*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=e;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(s=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,!isNaN(s)&&isFinite(s)||(s=2),2<s))for(r=0;r<s-2;r++)this.valueFormatString+="#"},N.generateValueFormatString=function(t,e){var n="#,##0.",i=e;1>t&&(i+=Math.floor(Math.abs(Math.log(t)/Math.LN10)),isNaN(i)||!isFinite(i))&&(i=e);for(var r=0;r<i;r++)n+="#";return n},N.getNiceExponent=function(t,e){var n=Math.floor(Math.log(t)/Math.LN10),i=t/Math.pow(10,n);return i=0>n?1>=i?1:5>=i?5:10:Math.max(Math.floor(i),1),-20>n?Number(i*Math.pow(10,n)):Number((i*Math.pow(10,n)).toFixed(20))},N.getNiceNumber=function(t,e){var n=Math.floor(Math.log(t)/Math.LN10),i=t/Math.pow(10,n);return i=e?1.5>i?1:3>i?2:7>i?5:10:1>=i?1:2>=i?2:5>=i?5:10,-20>n?Number(i*Math.pow(10,n)):Number((i*Math.pow(10,n)).toFixed(20))},N.prototype.getLabelStartPoint=function(){var t=Z[this.intervalType+"Duration"]*this.interval;return t=new Date(Math.floor(this.viewportMinimum/t)*t),"millisecond"!==this.intervalType&&("second"===this.intervalType?0<t.getMilliseconds()&&(t.setSeconds(t.getSeconds()+1),t.setMilliseconds(0)):"minute"===this.intervalType?(0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMinutes(t.getMinutes()+1),t.setSeconds(0),t.setMilliseconds(0)):"hour"===this.intervalType?(0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"day"===this.intervalType?(0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"week"===this.intervalType?(0<t.getDay()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+(7-t.getDay())),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"month"===this.intervalType?(1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMonth(t.getMonth()+1),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"year"===this.intervalType&&(0<t.getMonth()||1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setFullYear(t.getFullYear()+1),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0))),t},n(O,I),n(V,I),V.prototype.createUserOptions=function(t){if(void 0!==t||this.options._isPlaceholder){var e=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(p(this.parent[this.optionsName]),e=this.parent.options[this.optionsName].indexOf(this.options)),this.options=void 0===t?{}:t,this.parent.options[this.optionsName][e]=this.options}},V.prototype.render=function(t){if(0!==this.spacing||0!==this.options.lineThickness&&(void 0!==this.options.lineThickness||0!==this.parent.lineThickness)){var e=this.ctx,n=this.ctx.globalAlpha;this.ctx=t||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var i,r,o,s,a,l,h=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),u=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,c(this.id),t=Math.max(this.spacing,3);var d=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=d,this.ctx.setLineDash&&this.ctx.setLineDash(g(this.lineDashType,d)),"bottom"===this.scaleBreaks.parent._position||"top"===this.scaleBreaks.parent._position){if(r=1==d%2?.5+(u.x<<0):u.x<<0,"top"===this.scaleBreaks.parent._position?(u=this.chart.plotArea.y1,o=this.chart.plotArea.y2+d/2+.5<<0):(u=this.chart.plotArea.y2,o=this.chart.plotArea.y1-d/2+.5<<0,t*=-1),this.bounds={x1:(h=1==d%2?.5+(h.x<<0):h.x<<0)-d/2,y1:u,x2:r+d/2,y2:o},this.ctx.moveTo(h,u),"straight"===this.type||"top"===this.scaleBreaks.parent._position&&0>=t||"bottom"===this.scaleBreaks.parent._position&&0<=t)this.ctx.lineTo(h,o),this.ctx.lineTo(r,o),this.ctx.lineTo(r,u);else if("wavy"===this.type){s=h,i=.5,l=(o-(a=u))/t/3;for(var p=0;p<l;p++)this.ctx.bezierCurveTo(s+i*t,a+t,s+i*t,a+2*t,s,a+3*t),a+=3*t,i*=-1;for(this.ctx.bezierCurveTo(s+i*t,a+t,s+i*t,a+2*t,s,a+3*t),i*=-1,this.ctx.lineTo(s=r,a),p=0;p<l;p++)this.ctx.bezierCurveTo(s+i*t,a-t,s+i*t,a-2*t,s,a-3*t),a-=3*t,i*=-1}else if("zigzag"===this.type){for(i=-1,s=h+t,l=(o-(a=u+t))/t/2,p=0;p<l;p++)this.ctx.lineTo(s,a),s+=2*i*t,a+=2*t,i*=-1;for(this.ctx.lineTo(s,a),s+=r-h,p=0;p<l+1;p++)this.ctx.lineTo(s,a),s+=2*i*t,a-=2*t,i*=-1;this.ctx.lineTo(s+i*t,a+t)}}else if("left"===this.scaleBreaks.parent._position||"right"===this.scaleBreaks.parent._position)if(o=1==d%2?.5+(h.y<<0):h.y<<0,"left"===this.scaleBreaks.parent._position?(h=this.chart.plotArea.x1,r=this.chart.plotArea.x2+d/2+.5<<0):(h=this.chart.plotArea.x2,r=this.chart.plotArea.x1-d/2+.5<<0,t*=-1),this.bounds={x1:h,y1:(u=1==d%2?.5+(u.y<<0):u.y<<0)-d/2,x2:r,y2:o+d/2},this.ctx.moveTo(h,u),"straight"===this.type||"left"===this.scaleBreaks.parent._position&&0>=t||"right"===this.scaleBreaks.parent._position&&0<=t)this.ctx.lineTo(r,u),this.ctx.lineTo(r,o),this.ctx.lineTo(h,o);else if("wavy"===this.type){for(a=u,i=.5,l=(r-(s=h))/t/3,p=0;p<l;p++)this.ctx.bezierCurveTo(s+t,a+i*t,s+2*t,a+i*t,s+3*t,a),s+=3*t,i*=-1;for(this.ctx.bezierCurveTo(s+t,a+i*t,s+2*t,a+i*t,s+3*t,a),i*=-1,this.ctx.lineTo(s,a=o),p=0;p<l;p++)this.ctx.bezierCurveTo(s-t,a+i*t,s-2*t,a+i*t,s-3*t,a),s-=3*t,i*=-1}else if("zigzag"===this.type){for(i=1,a=u-t,l=(r-(s=h+t))/t/2,p=0;p<l;p++)this.ctx.lineTo(s,a),a+=2*i*t,s+=2*t,i*=-1;for(this.ctx.lineTo(s,a),a+=o-u,p=0;p<l+1;p++)this.ctx.lineTo(s,a),a+=2*i*t,s-=2*t,i*=-1;this.ctx.lineTo(s+t,a+i*t)}0<d&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=n,this.ctx=e}},n(z,I),z.prototype.createUserOptions=function(t){if(void 0!==t||this.options._isPlaceholder){var e=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(p(this.parent.stripLines),e=this.parent.options.stripLines.indexOf(this.options)),this.options=void 0===t?{}:t,this.parent.options.stripLines[e]=this.options}},z.prototype.render=function(){this.ctx.save();var t=this.parent.getPixelCoordinatesOnAxis(this.value),e=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness);if(0<e){var n=null===this.opacity?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var i,r,o,s,a=this.ctx.globalAlpha;this.ctx.globalAlpha=n,c(this.id),this.ctx.lineWidth=e,this.ctx.setLineDash&&this.ctx.setLineDash(g(this.lineDashType,e)),"bottom"===this.parent._position||"top"===this.parent._position?(i=r=1==this.ctx.lineWidth%2?.5+(t.x<<0):t.x<<0,this.bounds={x1:i-e/2,y1:o=this.chart.plotArea.y1,x2:r+e/2,y2:s=this.chart.plotArea.y2}):"left"!==this.parent._position&&"right"!==this.parent._position||(o=s=1==this.ctx.lineWidth%2?.5+(t.y<<0):t.y<<0,this.bounds={x1:i=this.chart.plotArea.x1,y1:o-e/2,x2:r=this.chart.plotArea.x2,y2:s+e/2}),this.ctx.moveTo(i,o),this.ctx.lineTo(r,s),this.ctx.stroke(),this.ctx.globalAlpha=a}this.ctx.restore()},n(U,I),U.prototype.render=function(t,e){var n,i,r,o,s=null,a=s=null,l="";if(!this.valueFormatString)if("dateTime"===this.parent.valueType)this.valueFormatString=this.parent.valueFormatString;else{var h=0;h="xySwapped"===this.chart.plotInfo.axisPlacement?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0),this.valueFormatString=N.generateValueFormatString(this.parent.range,h)}a=null===this.opacity?1:this.opacity,h=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness);var c=this.chart.overlaidCanvasCtx,u=c.globalAlpha;if(c.globalAlpha=a,c.beginPath(),c.strokeStyle=this.color,c.lineWidth=h,c.save(),this.labelFontSize=d(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize,"left"===this.parent._position||"right"===this.parent._position?(this.labelMaxWidth=d(this.options.labelMaxWidth)?this.parent.bounds.x2-this.parent.bounds.x1:this.labelMaxWidth,this.labelMaxHeight=d(this.options.labelWrap)||this.labelWrap?3*this.chart.height:2*this.labelFontSize):"top"!==this.parent._position&&"bottom"!==this.parent._position||(this.labelMaxWidth=d(this.options.labelMaxWidth)?3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=d(this.options.labelWrap)||this.labelWrap?this.parent.bounds.height:2*this.labelFontSize),0<h&&c.setLineDash&&c.setLineDash(g(this.lineDashType,h)),a=new P(c,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:l,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var p=0;if(s=[],"xySwapped"===this.chart.plotInfo.axisPlacement){var m=null;"bottom"===this.parent._position||"top"===this.parent._position?p=this.parent.dataSeries[0].axisX.convertPixelToValue({y:e}):"left"!==this.parent._position&&"right"!==this.parent._position||(p=this.parent.convertPixelToValue({y:e}));for(var f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(m.dataSeries=this.parent.dataSeries[f],null!==m.dataPoint.y&&s.push(m));if(m=null,0===s.length)return;if(s.sort((function(t,e){return t.distance-e.distance})),m=Math.abs(t-this.parent.convertValueToPixel(s[0].dataPoint.y)),f=0,"rangeBar"===s[0].dataSeries.type||"error"===s[0].dataSeries.type){m=Math.abs(t-this.parent.convertValueToPixel(s[f].dataPoint.y[0]));var y=0;for(p=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(t-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else(y=Math.abs(t-this.parent.convertValueToPixel(s[p].dataPoint.y)))<m&&(m=y,f=p)}else if("stackedBar"===s[0].dataSeries.type){m=Math.abs(t-this.parent.convertValueToPixel(s[0].dataPoint.y));var b=y=0;for(p=f=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(t-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else b+=s[p].dataPoint.y,(y=Math.abs(t-this.parent.convertValueToPixel(b)))<m&&(m=y,f=p)}else if("stackedBar100"===s[0].dataSeries.type){m=Math.abs(t-this.parent.convertValueToPixel(s[0].dataPoint.y));var v=b=y=0;for(p=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(t-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else b+=s[p].dataPoint.y,v=s[p].dataPoint.x.getTime?s[p].dataPoint.x.getTime():s[p].dataPoint.x,v=b/s[p].dataSeries.plotUnit.dataPointYSums[v]*100,(y=Math.abs(t-this.parent.convertValueToPixel(v)))<m&&(m=y,f=p)}else for(m=Math.abs(t-this.parent.convertValueToPixel(s[0].dataPoint.y)),p=f=y=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(t-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else(y=Math.abs(t-this.parent.convertValueToPixel(s[p].dataPoint.y)))<m&&(m=y,f=p);if(l=s[f],"bottom"===this.parent._position||"top"===this.parent._position){if(n=0,"rangeBar"===this.parent.dataSeries[f].type||"error"===this.parent.dataSeries[f].type){for(m=Math.abs(t-this.parent.convertValueToPixel(l.dataPoint.y[0])),p=y=0;p<l.dataPoint.y.length;p++)(y=Math.abs(t-this.parent.convertValueToPixel(l.dataPoint.y[p])))<m&&(m=y,n=p);s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataPoint.y[n])<<0):this.parent.convertValueToPixel(l.dataPoint.y[n])<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.y[n]}):d(this.options.label)?ot(l.dataPoint.y[n],this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar"===this.parent.dataSeries[f].type){for(m=Math.abs(t-this.parent.convertValueToPixel(s[0].dataPoint.y)),b=y=0,p=f;0<=p;p--)b+=s[p].dataPoint.y,(y=Math.abs(t-this.parent.convertValueToPixel(b)))<m&&(m=y,n=p);s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(b)<<0):this.parent.convertValueToPixel(b)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.y}):d(this.options.label)?ot(l.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar100"===this.parent.dataSeries[f].type){for(m=Math.abs(t-this.parent.convertValueToPixel(s[0].dataPoint.y)),v=b=y=0,p=f;0<=p;p--)b+=s[p].dataPoint.y,v=s[p].dataPoint.x.getTime?s[p].dataPoint.x.getTime():s[p].dataPoint.x,v=b/s[p].dataSeries.plotUnit.dataPointYSums[v]*100,(y=Math.abs(t-this.parent.convertValueToPixel(v)))<m&&(m=y,n=p);s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(v)<<0):this.parent.convertValueToPixel(v)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v}):d(this.options.label)?ot(v,this.valueFormatString,this.chart._cultureInfo):this.label}else s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataPoint.y)<<0):this.parent.convertValueToPixel(l.dataPoint.y)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.y}):d(this.options.label)?ot(l.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label;n=i=s,this.bounds={x1:n-h/2,y1:r=this.chart.plotArea.y1,x2:i+h/2,y2:o=this.chart.plotArea.y2},a.x=n-a.measureText().width/2,a.x+a.width>this.chart.bounds.x2?a.x=this.chart.bounds.x2-a.width:a.x<this.chart.bounds.x1&&(a.x=this.chart.bounds.x1),a.y=this.parent.lineCoordinates.y2+a.fontSize/2+2}else if("left"===this.parent._position||"right"===this.parent._position){if(r=o=s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataPoint.x)<<0):this.parent.convertValueToPixel(l.dataPoint.x)<<0,this.bounds={x1:n=this.chart.plotArea.x1,y1:r-h/2,x2:i=this.chart.plotArea.x2,y2:o+h/2},v=!1,this.parent.labels)for(s=Math.ceil(this.parent.interval),p=0;p<this.parent.viewportMaximum;p+=s){if(!this.parent.labels[p]){v=!1;break}v=!0}if(v){if("axisX"===this.parent.type)for(p=this.parent.convertPixelToValue({y:e}),m=null,f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.x}):d(this.options.label)?m.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.x}):d(this.options.label)?rt(l.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.x}):d(this.options.label)?ot(l.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);a.y=o+a.fontSize/2-a.measureText().height/2+2,a.y-a.fontSize/2<this.chart.bounds.y1?a.y=this.chart.bounds.y1+a.fontSize/2+2:a.y+a.measureText().height-a.fontSize/2>this.chart.bounds.y2&&(a.y=this.chart.bounds.y2-a.measureText().height+a.fontSize/2),"left"===this.parent._position?a.x=this.parent.lineCoordinates.x2-a.measureText().width:"right"===this.parent._position&&(a.x=this.parent.lineCoordinates.x2)}}else if("bottom"===this.parent._position||"top"===this.parent._position){for(p=this.parent.convertPixelToValue({x:t}),f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(m.dataSeries=this.parent.dataSeries[f],null!==m.dataPoint.y&&s.push(m));if(0===s.length)return;if(s.sort((function(t,e){return t.distance-e.distance})),l=s[0],n=i=s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataPoint.x)<<0):this.parent.convertValueToPixel(l.dataPoint.x)<<0,this.bounds={x1:n-h/2,y1:r=this.chart.plotArea.y1,x2:i+h/2,y2:o=this.chart.plotArea.y2},v=!1,this.parent.labels)for(s=Math.ceil(this.parent.interval),p=0;p<this.parent.viewportMaximum;p+=s){if(!this.parent.labels[p]){v=!1;break}v=!0}if(v){if("axisX"===this.parent.type)for(p=this.parent.convertPixelToValue({x:t}),m=null,f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.x}):d(this.options.label)?m.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.x}):d(this.options.label)?rt(l.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.x}):d(this.options.label)?ot(l.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label);a.x=n-a.measureText().width/2,a.x+a.width>this.chart.bounds.x2&&(a.x=this.chart.bounds.x2-a.width),a.x<this.chart.bounds.x1&&(a.x=this.chart.bounds.x1),"bottom"===this.parent._position?a.y=this.parent.lineCoordinates.y2+a.fontSize/2+2:"top"===this.parent._position&&(a.y=this.parent.lineCoordinates.y1-a.height+a.fontSize/2+2)}else if("left"===this.parent._position||"right"===this.parent._position){for(!d(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(p=this.parent.dataSeries[0].axisX.convertPixelToValue({x:t})),f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(m.dataSeries=this.parent.dataSeries[f],null!==m.dataPoint.y&&s.push(m));if(0===s.length)return;if(s.sort((function(t,e){return t.distance-e.distance})),f=0,"rangeColumn"===s[0].dataSeries.type||"rangeArea"===s[0].dataSeries.type||"error"===s[0].dataSeries.type||"rangeSplineArea"===s[0].dataSeries.type||"candlestick"===s[0].dataSeries.type||"ohlc"===s[0].dataSeries.type||"boxAndWhisker"===s[0].dataSeries.type)for(m=Math.abs(e-this.parent.convertValueToPixel(s[0].dataPoint.y[0])),p=y=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(e-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else(y=Math.abs(e-this.parent.convertValueToPixel(s[p].dataPoint.y)))<m&&(m=y,f=p);else if("stackedColumn"===s[0].dataSeries.type||"stackedArea"===s[0].dataSeries.type)for(m=Math.abs(e-this.parent.convertValueToPixel(s[0].dataPoint.y)),p=b=y=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(e-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else b+=s[p].dataPoint.y,(y=Math.abs(e-this.parent.convertValueToPixel(b)))<m&&(m=y,f=p);else if("stackedColumn100"===s[0].dataSeries.type||"stackedArea100"===s[0].dataSeries.type)for(m=Math.abs(e-this.parent.convertValueToPixel(s[0].dataPoint.y)),p=v=b=y=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(e-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else b+=s[p].dataPoint.y,v=s[p].dataPoint.x.getTime?s[p].dataPoint.x.getTime():s[p].dataPoint.x,v=b/s[p].dataSeries.plotUnit.dataPointYSums[v]*100,(y=Math.abs(e-this.parent.convertValueToPixel(v)))<m&&(m=y,f=p);else for(m=Math.abs(e-this.parent.convertValueToPixel(s[0].dataPoint.y)),p=y=0;p<s.length;p++)if(s[p].dataPoint.y&&s[p].dataPoint.y.length)for(l=0;l<s[p].dataPoint.y.length;l++)(y=Math.abs(e-this.parent.convertValueToPixel(s[p].dataPoint.y[l])))<m&&(m=y,f=p);else(y=Math.abs(e-this.parent.convertValueToPixel(s[p].dataPoint.y)))<m&&(m=y,f=p);if(l=s[f],n=0,"rangeColumn"===this.parent.dataSeries[f].type||"rangeArea"===this.parent.dataSeries[f].type||"error"===this.parent.dataSeries[f].type||"rangeSplineArea"===this.parent.dataSeries[f].type||"candlestick"===this.parent.dataSeries[f].type||"ohlc"===this.parent.dataSeries[f].type||"boxAndWhisker"===this.parent.dataSeries[f].type){for(m=Math.abs(e-this.parent.convertValueToPixel(l.dataPoint.y[0])),p=y=0;p<l.dataPoint.y.length;p++)(y=Math.abs(e-this.parent.convertValueToPixel(l.dataPoint.y[p])))<m&&(m=y,n=p);s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataPoint.y[n])<<0):this.parent.convertValueToPixel(l.dataPoint.y[n])<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.y[n]}):d(this.options.label)?ot(l.dataPoint.y[n],this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedColumn"===this.parent.dataSeries[f].type||"stackedArea"===this.parent.dataSeries[f].type){for(m=Math.abs(e-this.parent.convertValueToPixel(s[0].dataPoint.y)),b=y=0,p=f;0<=p;p--)b+=s[p].dataPoint.y,(y=Math.abs(e-this.parent.convertValueToPixel(b)))<m&&(m=y,n=p);s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(b)<<0):this.parent.convertValueToPixel(b)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.y}):d(this.options.label)?ot(l.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedColumn100"===this.parent.dataSeries[f].type||"stackedArea100"===this.parent.dataSeries[f].type){for(m=Math.abs(e-this.parent.convertValueToPixel(s[0].dataPoint.y)),b=y=0,p=f;0<=p;p--)b+=s[p].dataPoint.y,v=s[p].dataPoint.x.getTime?s[p].dataPoint.x.getTime():s[p].dataPoint.x,v=b/s[p].dataSeries.plotUnit.dataPointYSums[v]*100,(y=Math.abs(e-this.parent.convertValueToPixel(v)))<m&&(m=y,n=p);s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(v)<<0):this.parent.convertValueToPixel(v)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v}):d(this.options.label)?ot(v,this.valueFormatString,this.chart._cultureInfo):this.label}else"waterfall"===this.parent.dataSeries[f].type?(s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataSeries.dataPointEOs[l.index].cumulativeSum)<<0):this.parent.convertValueToPixel(l.dataSeries.dataPointEOs[l.index].cumulativeSum)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataSeries.dataPointEOs[l.index].cumulativeSum}):d(this.options.label)?ot(l.dataSeries.dataPointEOs[l.index].cumulativeSum,this.valueFormatString,this.chart._cultureInfo):this.label):(s=1==c.lineWidth%2?.5+(this.parent.convertValueToPixel(l.dataPoint.y)<<0):this.parent.convertValueToPixel(l.dataPoint.y)<<0,a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:l.dataPoint.y}):d(this.options.label)?ot(l.dataPoint.y,this.valueFormatString,this.chart._cultureInfo):this.label);r=o=s,this.bounds={x1:n=this.chart.plotArea.x1,y1:r-h/2,x2:i=this.chart.plotArea.x2,y2:o+h/2},a.y=o+a.fontSize/2-a.measureText().height/2+2,a.y-a.fontSize/2<this.chart.bounds.y1?a.y=this.chart.bounds.y1+a.fontSize/2+2:a.y+a.measureText().height-a.fontSize/2>this.chart.bounds.y2&&(a.y=this.chart.bounds.y2-a.measureText().height+a.fontSize/2),"left"===this.parent._position?a.x=this.parent.lineCoordinates.x2-a.measureText().width:"right"===this.parent._position&&(a.x=this.parent.lineCoordinates.x2)}s=null,("bottom"===this.parent._position||"top"===this.parent._position)&&n>=this.parent.convertValueToPixel(this.parent.viewportMinimum)&&i<=this.parent.convertValueToPixel(this.parent.viewportMaximum)&&(0<h&&(c.moveTo(n,r),c.lineTo(i,o),c.stroke()),c.restore(),!d(a.text)&&("number"==typeof a.text.valueOf()||0<a.text.length)&&a.render(!0)),("left"===this.parent._position||"right"===this.parent._position)&&o>=this.parent.convertValueToPixel(this.parent.viewportMaximum)&&r<=this.parent.convertValueToPixel(this.parent.viewportMinimum)&&(0<h&&(c.moveTo(n,r),c.lineTo(i,o),c.stroke()),c.restore(),!d(a.text)&&("number"==typeof a.text.valueOf()||0<a.text.length)&&a.render(!0))}else{if("bottom"===this.parent._position||"top"===this.parent._position?(n=i=s=1==c.lineWidth%2?.5+(t<<0):t<<0,this.bounds={x1:n-h/2,y1:r=this.chart.plotArea.y1,x2:i+h/2,y2:o=this.chart.plotArea.y2}):"left"!==this.parent._position&&"right"!==this.parent._position||(r=o=s=1==c.lineWidth%2?.5+(e<<0):e<<0,this.bounds={x1:n=this.chart.plotArea.x1,y1:r-h/2,x2:i=this.chart.plotArea.x2,y2:o+h/2}),"xySwapped"===this.chart.plotInfo.axisPlacement)if("left"===this.parent._position||"right"===this.parent._position){if(v=!1,this.parent.labels)for(s=Math.ceil(this.parent.interval),p=0;p<this.parent.viewportMaximum;p+=s){if(!this.parent.labels[p]){v=!1;break}v=!0}if(v){if("axisX"===this.parent.type)for(p=this.parent.convertPixelToValue({y:e}),m=null,f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(t)}):d(this.options.label)?m.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(e)}):d(this.options.label)?rt(this.parent.convertPixelToValue(e),this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(e)}):d(this.options.label)?ot(this.parent.convertPixelToValue(e),this.valueFormatString,this.chart._cultureInfo):this.label);a.y=e+a.fontSize/2-a.measureText().height/2+2,a.y-a.fontSize/2<this.chart.bounds.y1?a.y=this.chart.bounds.y1+a.fontSize/2+2:a.y+a.measureText().height-a.fontSize/2>this.chart.bounds.y2&&(a.y=this.chart.bounds.y2-a.measureText().height+a.fontSize/2),"left"===this.parent._position?a.x=this.parent.lineCoordinates.x1-a.measureText().width:"right"===this.parent._position&&(a.x=this.parent.lineCoordinates.x2)}else"bottom"!==this.parent._position&&"top"!==this.parent._position||(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(t)}):d(this.options.label)?ot(this.parent.convertPixelToValue(t),this.valueFormatString,this.chart._cultureInfo):this.label,a.x=n-a.measureText().width/2,a.x+a.width>this.chart.bounds.x2&&(a.x=this.chart.bounds.x2-a.width),a.x<this.chart.bounds.x1&&(a.x=this.chart.bounds.x1),"bottom"===this.parent._position&&(a.y=this.parent.lineCoordinates.y2+a.fontSize/2+2),"top"===this.parent._position&&(a.y=this.parent.lineCoordinates.y1-a.height+a.fontSize/2+2));else if("bottom"===this.parent._position||"top"===this.parent._position){if(v=!1,l="",this.parent.labels)for(s=Math.ceil(this.parent.interval),p=0;p<this.parent.viewportMaximum;p+=s){if(!this.parent.labels[p]){v=!1;break}v=!0}if(v){if("axisX"===this.parent.type)for(p=this.parent.convertPixelToValue({x:t}),m=null,f=0;f<this.parent.dataSeries.length;f++)(m=this.parent.dataSeries[f].getDataPointAtX(p,!0))&&0<=m.index&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(t)}):d(this.options.label)?m.dataPoint.label:this.label)}else"dateTime"===this.parent.valueType?a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(t)}):d(this.options.label)?rt(this.parent.convertPixelToValue(t),this.valueFormatString,this.chart._cultureInfo):this.label:"number"===this.parent.valueType&&(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:0<this.parent.dataSeries.length?this.parent.convertPixelToValue(t):""}):d(this.options.label)?ot(this.parent.convertPixelToValue(t),this.valueFormatString,this.chart._cultureInfo):this.label);a.x=n-a.measureText().width/2,a.x+a.width>this.chart.bounds.x2&&(a.x=this.chart.bounds.x2-a.width),a.x<this.chart.bounds.x1&&(a.x=this.chart.bounds.x1),"bottom"===this.parent._position?a.y=this.parent.lineCoordinates.y2+a.fontSize/2+2:"top"===this.parent._position&&(a.y=this.parent.lineCoordinates.y1-a.height+a.fontSize/2+2)}else"left"!==this.parent._position&&"right"!==this.parent._position||(a.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:this.parent.convertPixelToValue(e)}):d(this.options.label)?ot(this.parent.convertPixelToValue(e),this.valueFormatString,this.chart._cultureInfo):this.label,a.y=e+a.fontSize/2-a.measureText().height/2+2,a.y-a.fontSize/2<this.chart.bounds.y1?a.y=this.chart.bounds.y1+a.fontSize/2+2:a.y+a.measureText().height-a.fontSize/2>this.chart.bounds.y2&&(a.y=this.chart.bounds.y2-a.measureText().height+a.fontSize/2),"left"===this.parent._position?a.x=this.parent.lineCoordinates.x2-a.measureText().width:"right"===this.parent._position&&(a.x=this.parent.lineCoordinates.x2));0<h&&(c.moveTo(n,r),c.lineTo(i,o),c.stroke()),c.restore(),!d(a.text)&&("number"==typeof a.text.valueOf()||0<a.text.length)&&a.render(!0)}c.globalAlpha=u},n(Y,I),Y.prototype._initialize=function(){var t;this.enabled&&(this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none",t='<div style=" width: auto;height: auto;min-width: 50px;',t+="line-height: auto;",t+="margin: 0px 0px 0px 0px;",t+="padding: 5px;",t+="font-family: Calibri, Arial, Georgia, serif;",t+="font-weight: normal;",t+="font-style: "+(G?"italic;":"normal;"),t+="font-size: 14px;",t+="color: #000000;",t+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",t+="text-align: left;",t+="border: 2px solid gray;",t+=G?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",t+="text-indent: 0px;",t+="white-space: nowrap;",t+="border-radius: 5px;",t+="-moz-user-select:none;",t+="-khtml-user-select: none;",t+="-webkit-user-select: none;",t+="-ms-user-select: none;",t+="user-select: none;",G||(t+="filter: alpha(opacity = 90);",t+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),this.container.innerHTML=t+='} "> Sample Tooltip</div>',this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container))},Y.prototype.mouseMoveHandler=function(t,e){this._lastUpdated&&4>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(t,e))},Y.prototype._updateToolTip=function(t,n,i){if(i=void 0===i||i,this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if(void 0===t||void 0===n){if(isNaN(this._prevX)||isNaN(this._prevY))return;t=this._prevX,n=this._prevY}else this._prevX=t,this._prevY=n;var r=null,o=null,s=[],a=0;if(this.shared&&this.enabled&&"none"!==this.chart.plotInfo.axisPlacement){if("xySwapped"===this.chart.plotInfo.axisPlacement){var l=[];if(this.chart.axisX)for(var h=0;h<this.chart.axisX.length;h++){a=this.chart.axisX[h].convertPixelToValue({y:n});var c=null;for(r=0;r<this.chart.axisX[h].dataSeries.length;r++)(c=this.chart.axisX[h].dataSeries[r].getDataPointAtX(a,i))&&0<=c.index&&(c.dataSeries=this.chart.axisX[h].dataSeries[r],null!==c.dataPoint.y&&l.push(c));c=null}if(this.chart.axisX2)for(h=0;h<this.chart.axisX2.length;h++){for(a=this.chart.axisX2[h].convertPixelToValue({y:n}),c=null,r=0;r<this.chart.axisX2[h].dataSeries.length;r++)(c=this.chart.axisX2[h].dataSeries[r].getDataPointAtX(a,i))&&0<=c.index&&(c.dataSeries=this.chart.axisX2[h].dataSeries[r],null!==c.dataPoint.y&&l.push(c));c=null}}else{if(l=[],this.chart.axisX)for(h=0;h<this.chart.axisX.length;h++)for(a=this.chart.axisX[h].convertPixelToValue({x:t}),c=null,r=0;r<this.chart.axisX[h].dataSeries.length;r++)(c=this.chart.axisX[h].dataSeries[r].getDataPointAtX(a,i))&&0<=c.index&&(c.dataSeries=this.chart.axisX[h].dataSeries[r],null!==c.dataPoint.y&&l.push(c));if(this.chart.axisX2)for(h=0;h<this.chart.axisX2.length;h++)for(a=this.chart.axisX2[h].convertPixelToValue({x:t}),c=null,r=0;r<this.chart.axisX2[h].dataSeries.length;r++)(c=this.chart.axisX2[h].dataSeries[r].getDataPointAtX(a,i))&&0<=c.index&&(c.dataSeries=this.chart.axisX2[h].dataSeries[r],null!==c.dataPoint.y&&l.push(c))}if(0===l.length)return;for(l.sort((function(t,e){return t.distance-e.distance})),i=l[0],r=0;r<l.length;r++)l[r].dataPoint.x.valueOf()===i.dataPoint.x.valueOf()&&s.push(l[r]);l=null}else{if(c=this.chart.getDataPointAtXY(t,n,i))this.currentDataPointIndex=c.dataPointIndex,this.currentSeriesIndex=c.dataSeries.index;else if(G)if(0<(c=b(t,n,this.chart._eventManager.ghostCtx))&&void 0!==this.chart._eventManager.objectMap[c]){if("legendItem"===(c=this.chart._eventManager.objectMap[c]).objectType)return;this.currentSeriesIndex=c.dataSeriesIndex,this.currentDataPointIndex=0<=c.dataPointIndex?c.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(o=this.chart.data[this.currentSeriesIndex],c={},0<=this.currentDataPointIndex)r=o.dataPoints[this.currentDataPointIndex],c.dataSeries=o,c.dataPoint=r,c.index=this.currentDataPointIndex,c.distance=Math.abs(r.x-a),"waterfall"===o.type&&(c.cumulativeSumYStartValue=o.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,c.cumulativeSum=o.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else{if(!this.enabled||"line"!==o.type&&"stepLine"!==o.type&&"spline"!==o.type&&"area"!==o.type&&"stepArea"!==o.type&&"splineArea"!==o.type&&"stackedArea"!==o.type&&"stackedArea100"!==o.type&&"rangeArea"!==o.type&&"rangeSplineArea"!==o.type&&"candlestick"!==o.type&&"ohlc"!==o.type&&"boxAndWhisker"!==o.type)return;a=o.axisX.convertPixelToValue({x:t}),d(c=o.getDataPointAtX(a,i))||(c.dataSeries=o,this.currentDataPointIndex=c.index,r=c.dataPoint)}if(!d(c)&&!d(c.dataPoint)&&!d(c.dataPoint.y))if(c.dataSeries.axisY)if(0<c.dataPoint.y.length){for(r=i=0;r<c.dataPoint.y.length;r++)c.dataPoint.y[r]<c.dataSeries.axisY.viewportMinimum?i--:c.dataPoint.y[r]>c.dataSeries.axisY.viewportMaximum&&i++;i<c.dataPoint.y.length&&i>-c.dataPoint.y.length&&s.push(c)}else"column"===o.type||"bar"===o.type?0>c.dataPoint.y?0>c.dataSeries.axisY.viewportMinimum&&c.dataSeries.axisY.viewportMaximum>=c.dataPoint.y&&s.push(c):c.dataSeries.axisY.viewportMinimum<=c.dataPoint.y&&0<=c.dataSeries.axisY.viewportMaximum&&s.push(c):"bubble"===o.type?c.dataPoint.y>=c.dataSeries.axisY.viewportMinimum-(i=this.chart._eventManager.objectMap[o.dataPointIds[c.index]].size/2)&&c.dataPoint.y<=c.dataSeries.axisY.viewportMaximum+i&&s.push(c):"waterfall"===o.type?(i=0,c.cumulativeSumYStartValue<c.dataSeries.axisY.viewportMinimum?i--:c.cumulativeSumYStartValue>c.dataSeries.axisY.viewportMaximum&&i++,c.cumulativeSum<c.dataSeries.axisY.viewportMinimum?i--:c.cumulativeSum>c.dataSeries.axisY.viewportMaximum&&i++,2>i&&-2<i&&s.push(c)):(0<=c.dataSeries.type.indexOf("100")||"stackedColumn"===o.type||"stackedBar"===o.type||c.dataPoint.y>=c.dataSeries.axisY.viewportMinimum&&c.dataPoint.y<=c.dataSeries.axisY.viewportMaximum)&&s.push(c);else s.push(c)}}if(0<s.length){if(this.highlightObjects(s),this.enabled)if(i="",null!==(i=this.getToolTipInnerHTML({entries:s}))){this.contentDiv.innerHTML=i,i=!1,"none"===this.container.style.display&&(i=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:G?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor=this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor="waterfall"===s[0].dataSeries.type?this.options.borderColor?this.options.borderColor:s[0].dataPoint.color?s[0].dataPoint.color:0<s[0].dataPoint.y?s[0].dataSeries.risingColor:s[0].dataSeries.fallingColor:"error"===s[0].dataSeries.type?this.options.borderColor?this.options.borderColor:s[0].dataSeries.color?s[0].dataSeries.color:s[0].dataSeries._colorSet[o.index%s[0].dataSeries._colorSet.length]:this.options.borderColor?this.options.borderColor:s[0].dataPoint.color?s[0].dataPoint.color:s[0].dataSeries.color?s[0].dataSeries.color:s[0].dataSeries._colorSet[s[0].index%s[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:G?"italic":"normal"}catch(e){}"pie"===s[0].dataSeries.type||"doughnut"===s[0].dataSeries.type||"funnel"===s[0].dataSeries.type||"pyramid"===s[0].dataSeries.type||"bar"===s[0].dataSeries.type||"rangeBar"===s[0].dataSeries.type||"stackedBar"===s[0].dataSeries.type||"stackedBar100"===s[0].dataSeries.type?t=t-10-this.container.clientWidth:(t=s[0].dataSeries.axisX.convertValueToPixel(s[0].dataPoint.x)-this.container.clientWidth<<0,t-=10),0>t&&(t+=this.container.clientWidth+20),t+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(t=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),0<(n=10-(n=1!==s.length||this.shared||"line"!==s[0].dataSeries.type&&"stepLine"!==s[0].dataSeries.type&&"spline"!==s[0].dataSeries.type&&"area"!==s[0].dataSeries.type&&"stepArea"!==s[0].dataSeries.type&&"splineArea"!==s[0].dataSeries.type?"bar"===s[0].dataSeries.type||"rangeBar"===s[0].dataSeries.type||"stackedBar"===s[0].dataSeries.type||"stackedBar100"===s[0].dataSeries.type?s[0].dataSeries.axisX.convertValueToPixel(s[0].dataPoint.x):n:s[0].dataSeries.axisY.convertValueToPixel(s[0].dataPoint.y)))+this.container.clientHeight+5&&(n-=n+this.container.clientHeight+5-0),this.fixMozTransitionDelay(t,n),!this.animationEnabled||i?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=t+"px",this.container.style.bottom=n+"px"}else this.hide(!1)}else this.hide()}},Y.prototype.highlightObjects=function(t){var e=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),e.clearRect(0,0,this.chart.width,this.chart.height),e.save();var n=this.chart.plotArea,i=0;for(e.beginPath(),e.rect(n.x1,n.y1,n.x2-n.x1,n.y2-n.y1),e.clip(),n=0;n<t.length;n++){var r=t[n];if((r=this.chart._eventManager.objectMap[r.dataSeries.dataPointIds[r.index]])&&r.objectType&&"dataPoint"===r.objectType){var s=(i=this.chart.data[r.dataSeriesIndex]).dataPoints[r.dataPointIndex],a=r.dataPointIndex;!1===s.highlightEnabled||!0!==i.highlightEnabled&&!0!==s.highlightEnabled||("line"===i.type||"stepLine"===i.type||"spline"===i.type||"scatter"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type?((s=i.getMarkerProperties(a,r.x1,r.y1,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*s.size<<0,10),s.borderColor=s.borderColor||"#FFFFFF",s.borderThickness=s.borderThickness||Math.ceil(.1*s.size),tt.drawMarkers([s]),void 0!==r.y2&&((s=i.getMarkerProperties(a,r.x1,r.y2,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*s.size<<0,10),s.borderColor=s.borderColor||"#FFFFFF",s.borderThickness=s.borderThickness||Math.ceil(.1*s.size),tt.drawMarkers([s]))):"bubble"===i.type?((s=i.getMarkerProperties(a,r.x1,r.y1,this.chart.overlaidCanvasCtx)).size=r.size,s.color="white",s.borderColor="white",e.globalAlpha=.3,tt.drawMarkers([s]),e.globalAlpha=1):"column"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"bar"===i.type||"rangeBar"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"rangeColumn"===i.type||"waterfall"===i.type?ut(e,r.x1,r.y1,r.x2,r.y2,"white",0,null,!1,!1,!1,!1,.3):"pie"===i.type||"doughnut"===i.type?K(e,r.center,r.radius,"white",i.type,r.startAngle,r.endAngle,.3,r.percentInnerRadius):"funnel"===i.type||"pyramid"===i.type?$(e,r.funnelSection,.3,"white"):"candlestick"===i.type?(e.globalAlpha=1,e.strokeStyle=r.color,e.lineWidth=2*r.borderThickness,i=0==e.lineWidth%2?0:.5,e.beginPath(),e.moveTo(r.x3-i,Math.min(r.y2,r.y3)),e.lineTo(r.x3-i,Math.min(r.y1,r.y4)),e.stroke(),e.beginPath(),e.moveTo(r.x3-i,Math.max(r.y1,r.y4)),e.lineTo(r.x3-i,Math.max(r.y2,r.y3)),e.stroke(),ut(e,r.x1,Math.min(r.y1,r.y4),r.x2,Math.max(r.y1,r.y4),"transparent",2*r.borderThickness,r.color,!1,!1,!1,!1),e.globalAlpha=1):"ohlc"===i.type?(e.globalAlpha=1,e.strokeStyle=r.color,e.lineWidth=2*r.borderThickness,i=0==e.lineWidth%2?0:.5,e.beginPath(),e.moveTo(r.x3-i,r.y2),e.lineTo(r.x3-i,r.y3),e.stroke(),e.beginPath(),e.moveTo(r.x3,r.y1),e.lineTo(r.x1,r.y1),e.stroke(),e.beginPath(),e.moveTo(r.x3,r.y4),e.lineTo(r.x2,r.y4),e.stroke(),e.globalAlpha=1):"boxAndWhisker"===i.type?(e.save(),e.globalAlpha=1,e.strokeStyle=r.stemColor,e.lineWidth=2*r.stemThickness,0<r.stemThickness&&(e.beginPath(),e.moveTo(r.x3,r.y2+r.borderThickness/2),e.lineTo(r.x3,r.y1+r.whiskerThickness/2),e.stroke(),e.beginPath(),e.moveTo(r.x3,r.y4-r.whiskerThickness/2),e.lineTo(r.x3,r.y3-r.borderThickness/2),e.stroke()),e.beginPath(),ut(e,r.x1-r.borderThickness/2,Math.max(r.y2+r.borderThickness/2,r.y3+r.borderThickness/2),r.x2+r.borderThickness/2,Math.min(r.y2-r.borderThickness/2,r.y3-r.borderThickness/2),"transparent",r.borderThickness,r.color,!1,!1,!1,!1),e.globalAlpha=1,e.strokeStyle=r.whiskerColor,e.lineWidth=2*r.whiskerThickness,0<r.whiskerThickness&&(e.beginPath(),e.moveTo(Math.floor(r.x3-r.whiskerLength/2),r.y4),e.lineTo(Math.ceil(r.x3+r.whiskerLength/2),r.y4),e.stroke(),e.beginPath(),e.moveTo(Math.floor(r.x3-r.whiskerLength/2),r.y1),e.lineTo(Math.ceil(r.x3+r.whiskerLength/2),r.y1),e.stroke()),e.globalAlpha=1,e.strokeStyle=r.lineColor,e.lineWidth=2*r.lineThickness,0<r.lineThickness&&(e.beginPath(),e.moveTo(r.x1,r.y5),e.lineTo(r.x2,r.y5),e.stroke()),e.restore(),e.globalAlpha=1):"error"===i.type&&o(e,r.x1,r.y1,r.x2,r.y2,"white",r.whiskerProperties,r.stemProperties,r.isXYSwapped,.3))}}e.restore(),e.globalAlpha=1,e.beginPath()},Y.prototype.getToolTipInnerHTML=function(t){t=t.entries;for(var e=null,n=null,i=null,r=0,o="",s=!0,a=0;a<t.length;a++)if(t[a].dataSeries.toolTipContent||t[a].dataPoint.toolTipContent){s=!1;break}if(s&&(this.content&&"function"==typeof this.content||this.contentFormatter))t={chart:this.chart,toolTip:this.options,entries:t},e=this.contentFormatter?this.contentFormatter(t):this.content(t);else if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){var l=null,h="";for(a=0;a<t.length;a++)n=t[a].dataSeries,i=t[a].dataPoint,r=t[a].index,o="",0===a&&s&&!this.content&&(this.chart.axisX&&0<this.chart.axisX.length?h+=void 0!==this.chart.axisX[0].labels[i.x]?this.chart.axisX[0].labels[i.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(h+=void 0!==this.chart.axisX2[0].labels[i.x]?this.chart.axisX2[0].labels[i.x]:"{x}"),h=this.chart.replaceKeywordsWithValue(h+="</br>",i,n,r)),null===i.toolTipContent||void 0===i.toolTipContent&&null===n.options.toolTipContent||("line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"column"===n.type||"bar"===n.type||"scatter"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type||"waterfall"===n.type?(this.chart.axisX&&1<this.chart.axisX.length&&(o+=l!=n.axisXIndex?n.axisX.title?n.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),o+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}",l=n.axisXIndex):"bubble"===n.type?(this.chart.axisX&&1<this.chart.axisX.length&&(o+=l!=n.axisXIndex?n.axisX.title?n.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),o+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}"):"rangeColumn"===n.type||"rangeBar"===n.type||"rangeArea"===n.type||"rangeSplineArea"===n.type||"error"===n.type?(this.chart.axisX&&1<this.chart.axisX.length&&(o+=l!=n.axisXIndex?n.axisX.title?n.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),o+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}"):"candlestick"===n.type||"ohlc"===n.type?(this.chart.axisX&&1<this.chart.axisX.length&&(o+=l!=n.axisXIndex?n.axisX.title?n.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),o+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}"):"boxAndWhisker"===n.type&&(this.chart.axisX&&1<this.chart.axisX.length&&(o+=l!=n.axisXIndex?n.axisX.title?n.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),o+=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>{name}:</span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===e&&(e=""),!0===this.reversed?(e=this.chart.replaceKeywordsWithValue(o,i,n,r)+e,a<t.length-1&&(e="</br>"+e)):(e+=this.chart.replaceKeywordsWithValue(o,i,n,r),a<t.length-1&&(e+="</br>")));null!==e&&(e=h+e)}else{if(n=t[0].dataSeries,null===(i=t[0].dataPoint).toolTipContent||void 0===i.toolTipContent&&null===n.options.toolTipContent)return null;"line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"column"===n.type||"bar"===n.type||"scatter"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type||"waterfall"===n.type?o=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":"bubble"===n.type?o=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"===n.type||"doughnut"===n.type||"funnel"===n.type||"pyramid"===n.type?o=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.name?"{name}:</span>&nbsp;&nbsp;":i.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":"rangeColumn"===n.type||"rangeBar"===n.type||"rangeArea"===n.type||"rangeSplineArea"===n.type||"error"===n.type?o=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":"candlestick"===n.type||"ohlc"===n.type?o=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":"boxAndWhisker"===n.type&&(o=i.toolTipContent?i.toolTipContent:n.toolTipContent?n.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.options.fontColor?"":"'color:{color};'")+"\"'>"+(i.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;&nbsp;{y[0]}<br/>Q1: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===e&&(e=""),e+=this.chart.replaceKeywordsWithValue(o,i,n,r=t[0].index)}return e},Y.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var t=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=t,this.container.style.MsTransition=t,this.container.style.transition=t,this.container.style.MozTransition=this.mozContainerTransition}},Y.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},Y.prototype.hide=function(t){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,(void 0===t||t)&&this.chart.resetOverlayedCanvas())},Y.prototype.show=function(t,e,n){this._updateToolTip(t,e,void 0!==n&&n)},Y.prototype.fixMozTransitionDelay=function(t,e){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var n=parseFloat(this.container.style.left),i=(n=isNaN(n)?0:n,parseFloat(this.container.style.bottom));i=isNaN(i)?0:i,this.mozContainerTransition=10<Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))?this.getContainerTransition(.1):this.getContainerTransition(0)}},Y.prototype.getContainerTransition=function(t){return"left "+t+"s ease-out 0s, bottom "+t+"s ease-out 0s"},X.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],G&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},X.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},X.prototype.mouseEventHandler=function(t){if("mousemove"===t.type||"click"===t.type){var e=[],n=st(t),i=null;if((i=this.chart.getObjectAtXY(n.x,n.y,!1))&&void 0!==this.objectMap[i])if("dataPoint"===(i=this.objectMap[i]).objectType){var r=this.chart.data[i.dataSeriesIndex],o=r.dataPoints[i.dataPointIndex],s=i.dataPointIndex;i.eventParameter={x:n.x,y:n.y,dataPoint:o,dataSeries:r.options,dataPointIndex:s,dataSeriesIndex:r.index,chart:this.chart},i.eventContext={context:o,userContext:o,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(i),(i=this.objectMap[r.id]).eventParameter={x:n.x,y:n.y,dataPoint:o,dataSeries:r.options,dataPointIndex:s,dataSeriesIndex:r.index,chart:this.chart},i.eventContext={context:r,userContext:r.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(this.objectMap[r.id])}else"legendItem"===i.objectType&&(i.eventParameter={x:n.x,y:n.y,dataSeries:(r=this.chart.data[i.dataSeriesIndex]).options,dataPoint:o=null!==i.dataPointIndex?r.dataPoints[i.dataPointIndex]:null,dataPointIndex:i.dataPointIndex,dataSeriesIndex:i.dataSeriesIndex,chart:this.chart},i.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},e.push(i));for(r=[],n=0;n<this.mouseoveredObjectMaps.length;n++){for(o=!0,i=0;i<e.length;i++)if(e[i].id===this.mouseoveredObjectMaps[n].id){o=!1;break}o?this.fireEvent(this.mouseoveredObjectMaps[n],"mouseout",t):r.push(this.mouseoveredObjectMaps[n])}for(this.mouseoveredObjectMaps=r,n=0;n<e.length;n++){for(r=!1,i=0;i<this.mouseoveredObjectMaps.length;i++)if(e[n].id===this.mouseoveredObjectMaps[i].id){r=!0;break}r||(this.fireEvent(e[n],"mouseover",t),this.mouseoveredObjectMaps.push(e[n])),"click"===t.type?this.fireEvent(e[n],"click",t):"mousemove"===t.type&&this.fireEvent(e[n],"mousemove",t)}}},X.prototype.fireEvent=function(t,e,n){if(t&&e){var i=t.eventParameter,r=t.eventContext,o=t.eventContext.userContext;o&&r&&o[r[e]]&&o[r[e]].call(o,i),"mouseout"!==e?o.cursor&&o.cursor!==n.target.style.cursor&&(n.target.style.cursor=o.cursor):(n.target.style.cursor=this.chart._defaultCursor,delete t.eventParameter,delete t.eventContext),"click"===e&&"dataPoint"===t.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[t.dataSeriesIndex],i),"click"===e&&"dataPoint"===t.objectType&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[t.dataSeriesIndex],i)}},j.prototype.animate=function(t,e,n,i,r){var o=this;for(this.chart.isAnimating=!0,r=r||Q.easing.linear,n&&this.animations.push({startTime:(new Date).getTime()+(t||0),duration:e,animationCallback:n,onComplete:i}),t=[];0<this.animations.length;)e=this.animations.shift(),n=(new Date).getTime(),i=0,e.startTime<=n&&(i=r(Math.min(n-e.startTime,e.duration),0,1,e.duration),i=Math.min(i,1),isNaN(i)||!isFinite(i))&&(i=1),1>i&&t.push(e),e.animationCallback(i),1<=i&&e.onComplete&&e.onComplete();this.animations=t,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,(function(){o.animate.call(o)})):this.chart.isAnimating=!1},j.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var Q={yScaleAnimation:function(t,e){if(0!==t){var n=e.dest,i=e.source.canvas,r=e.animationBase;n.drawImage(i,0,0,i.width,i.height,0,r-r*t,n.canvas.width/ct,t*n.canvas.height/ct)}},xScaleAnimation:function(t,e){if(0!==t){var n=e.dest,i=e.source.canvas,r=e.animationBase;n.drawImage(i,0,0,i.width,i.height,r-r*t,0,t*n.canvas.width/ct,n.canvas.height/ct)}},xClipAnimation:function(t,e){if(0!==t){var n=e.dest,i=e.source.canvas;n.save(),0<t&&n.drawImage(i,0,0,i.width*t,i.height,0,0,i.width*t/ct,i.height/ct),n.restore()}},fadeInAnimation:function(t,e){if(0!==t){var n=e.dest,i=e.source.canvas;n.save(),n.globalAlpha=t,n.drawImage(i,0,0,i.width,i.height,0,0,n.canvas.width/ct,n.canvas.height/ct),n.restore()}},easing:{linear:function(t,e,n,i){return n*t/i+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e}}},tt={drawMarker:function(t,e,n,i,r,o,s,a){if(n){var l=1;n.fillStyle=o||"#000000",n.strokeStyle=s||"#000000",n.lineWidth=a||0,n.setLineDash&&n.setLineDash(g("solid",a)),"circle"===i?(n.moveTo(t,e),n.beginPath(),n.arc(t,e,r/2,0,2*Math.PI,!1),o&&n.fill(),a&&(s?n.stroke():(l=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=l))):"square"===i?(n.beginPath(),n.rect(t-r/2,e-r/2,r,r),o&&n.fill(),a&&(s?n.stroke():(l=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=l))):"triangle"===i?(n.beginPath(),n.moveTo(t-r/2,e+r/2),n.lineTo(t+r/2,e+r/2),n.lineTo(t,e-r/2),n.closePath(),o&&n.fill(),a&&(s?n.stroke():(l=n.globalAlpha,n.globalAlpha=.15,n.strokeStyle="black",n.stroke(),n.globalAlpha=l)),n.beginPath()):"cross"===i&&(n.strokeStyle=o,n.lineWidth=r/4,n.beginPath(),n.moveTo(t-r/2,e-r/2),n.lineTo(t+r/2,e+r/2),n.stroke(),n.moveTo(t+r/2,e-r/2),n.lineTo(t-r/2,e+r/2),n.stroke())}},drawMarkers:function(t){for(var e=0;e<t.length;e++){var n=t[e];tt.drawMarker(n.x,n.y,n.ctx,n.type,n.size,n.color,n.borderColor,n.borderThickness)}}};return e}(),gt.Chart.version="v2.3.2 GA"}(),document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new u(this))}function e(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(t){t.namespaces.g_vml_||t.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),t.namespaces.g_o_||t.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),t.styleSheets.ex_canvas_||((t=t.createStyleSheet()).owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function i(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function r(t){(t=t.srcElement).firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function o(t,e){for(var n=[[1,0,0],[0,1,0],[0,0,1]],i=0;3>i;i++)for(var r=0;3>r;r++){for(var o=0,s=0;3>s;s++)o+=t[i][s]*e[s][r];n[i][r]=o}return n}function s(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function a(t){var e=t.indexOf("(",3),n=t.indexOf(")",e+1);return 4==(e=t.substring(e+1,n).split(",")).length&&"a"==t.charAt(3)||(e[3]=1),e}function l(t,e,n){return Math.min(n,Math.max(e,t))}function h(t,e,n){return 0>n&&n++,1<n&&n--,1>6*n?t+6*(e-t)*n:1>2*n?e:2>3*n?t+6*(e-t)*(2/3-n):t}function c(t){if(t in L)return L[t];var e,n=1;if("#"==(t=String(t)).charAt(0))e=t;else if(/^rgb/.test(t)){n=a(t),e="#";for(var i,r=0;3>r;r++)i=-1!=n[r].indexOf("%")?Math.floor(parseFloat(n[r])/100*255):+n[r],e+=M[l(i,0,255)];n=+n[3]}else if(/^hsl/.test(t)){if(r=n=a(t),0>(e=parseFloat(r[0])/360%360)&&e++,i=l(parseFloat(r[1])/100,0,1),r=l(parseFloat(r[2])/100,0,1),0==i)i=r=e=r;else{var o=.5>r?r*(1+i):r+i-r*i,s=2*r-o;i=h(s,o,e+1/3),r=h(s,o,e),e=h(s,o,e-1/3)}e="#"+M[Math.floor(255*i)]+M[Math.floor(255*r)]+M[Math.floor(255*e)],n=n[3]}else e=F[t]||t;return L[t]={color:e,alpha:n}}function u(t){this.m_=[[1,0,0],[0,1,0],[0,0,1]],this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*T,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",n=t.ownerDocument.createElement("div");n.style.cssText=e,t.appendChild(n),(e=n.cloneNode(!1)).style.backgroundColor="red",e.style.filter="alpha(opacity=0)",t.appendChild(e),this.element_=n,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function d(t,e,n,i){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:n.x,cp2y:n.y,x:i.x,y:i.y}),t.currentX_=i.x,t.currentY_=i.y}function p(t,e){var n=(i=c(t.strokeStyle)).color,i=i.alpha*t.globalAlpha,r=t.lineScale_*t.lineWidth;1>r&&(i*=r),e.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',B[t.lineCap]||"square",'"',' weight="',r,'px"',' color="',n,'" />')}function m(t,e,n,i){var r=t.fillStyle,o=t.arcScaleX_,s=t.arcScaleY_,a=i.x-n.x,l=i.y-n.y;if(r instanceof y){var h=0,u=i=0,d=0,p=1;if("gradient"==r.type_){h=r.x1_/o,n=r.y1_/s;var m=f(t,r.x0_/o,r.y0_/s);h=f(t,h,n),0>(h=180*Math.atan2(h.x-m.x,h.y-m.y)/Math.PI)&&(h+=360),1e-6>h&&(h=0)}else i=((m=f(t,r.x0_,r.y0_)).x-n.x)/a,u=(m.y-n.y)/l,p=C.max(a/=o*T,l/=s*T),p=2*r.r1_/p-(d=2*r.r0_/p);(o=r.colors_).sort((function(t,e){return t.offset-e.offset})),m=o[0].color,n=o[(s=o.length)-1].color,a=o[0].alpha*t.globalAlpha,t=o[s-1].alpha*t.globalAlpha,l=[];for(var g=0;g<s;g++){var v=o[g];l.push(v.offset*p+d+" "+v.color)}e.push('<g_vml_:fill type="',r.type_,'"',' method="none" focus="100%"',' color="',m,'"',' color2="',n,'"',' colors="',l.join(","),'"',' opacity="',t,'"',' g_o_:opacity2="',a,'"',' angle="',h,'"',' focusposition="',i,",",u,'" />')}else r instanceof b?a&&l&&e.push("<g_vml_:fill",' position="',-n.x/a*o*o,",",-n.y/l*s*s,'"',' type="tile"',' src="',r.src_,'" />'):(r=c(t.fillStyle),e.push('<g_vml_:fill color="',r.color,'" opacity="',r.alpha*t.globalAlpha,'" />'))}function f(t,e,n){return{x:T*(e*(t=t.m_)[0][0]+n*t[1][0]+t[2][0])-I,y:T*(e*t[0][1]+n*t[1][1]+t[2][1])-I}}function g(t,e,n){isFinite(e[0][0])&&isFinite(e[0][1])&&isFinite(e[1][0])&&isFinite(e[1][1])&&isFinite(e[2][0])&&isFinite(e[2][1])&&(t.m_=e,n&&(t.lineScale_=w(k(e[0][0]*e[1][1]-e[0][1]*e[1][0]))))}function y(t){this.type_=t,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function b(t,e){if(!t||1!=t.nodeType||"IMG"!=t.tagName)throw new v("TYPE_MISMATCH_ERR");if("complete"!=t.readyState)throw new v("INVALID_STATE_ERR");switch(e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:throw new v("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function v(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var C=Math,S=C.round,x=C.sin,_=C.cos,k=C.abs,w=C.sqrt,T=10,I=T/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var A=Array.prototype.slice;n(document);var P={init:function(t){(t=t||document).createElement("canvas"),t.attachEvent("onreadystatechange",function(t,e,n){var i=A.call(arguments,2);return function(){return t.apply(e,i.concat(A.call(arguments)))}}(this.init_,this,t))},init_:function(t){t=t.getElementsByTagName("canvas");for(var e=0;e<t.length;e++)this.initElement(t[e])},initElement:function(e){if(!e.getContext){e.getContext=t,n(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",i),e.attachEvent("onresize",r);var o=e.attributes;o.width&&o.width.specified?e.style.width=o.width.nodeValue+"px":e.width=e.clientWidth,o.height&&o.height.specified?e.style.height=o.height.nodeValue+"px":e.height=e.clientHeight}return e}};P.init();for(var M=[],E=0;16>E;E++)for(var D=0;16>D;D++)M[16*E+D]=E.toString(16)+D.toString(16);var F={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},L={},R={},B={butt:"flat",round:"round"};(E=u.prototype).clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},E.beginPath=function(){this.currentPath_=[]},E.moveTo=function(t,e){var n=f(this,t,e);this.currentPath_.push({type:"moveTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},E.lineTo=function(t,e){var n=f(this,t,e);this.currentPath_.push({type:"lineTo",x:n.x,y:n.y}),this.currentX_=n.x,this.currentY_=n.y},E.bezierCurveTo=function(t,e,n,i,r,o){r=f(this,r,o),d(this,t=f(this,t,e),n=f(this,n,i),r)},E.quadraticCurveTo=function(t,e,n,i){t=f(this,t,e),n=f(this,n,i),d(this,i={x:this.currentX_+2/3*(t.x-this.currentX_),y:this.currentY_+2/3*(t.y-this.currentY_)},{x:i.x+(n.x-this.currentX_)/3,y:i.y+(n.y-this.currentY_)/3},n)},E.arc=function(t,e,n,i,r,o){n*=T;var s=o?"at":"wa",a=t+_(i)*n-I,l=e+x(i)*n-I;i=t+_(r)*n-I,r=e+x(r)*n-I,a!=i||o||(a+=.125),t=f(this,t,e),a=f(this,a,l),i=f(this,i,r),this.currentPath_.push({type:s,x:t.x,y:t.y,radius:n,xStart:a.x,yStart:a.y,xEnd:i.x,yEnd:i.y})},E.rect=function(t,e,n,i){this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath()},E.strokeRect=function(t,e,n,i){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath(),this.stroke(),this.currentPath_=r},E.fillRect=function(t,e,n,i){var r=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.closePath(),this.fill(),this.currentPath_=r},E.createLinearGradient=function(t,e,n,i){var r=new y("gradient");return r.x0_=t,r.y0_=e,r.x1_=n,r.y1_=i,r},E.createRadialGradient=function(t,e,n,i,r,o){var s=new y("gradientradial");return s.x0_=t,s.y0_=e,s.r0_=n,s.x1_=i,s.y1_=r,s.r1_=o,s},E.drawImage=function(t,e){var n,i,r,o,s,a,l,h;r=t.runtimeStyle.width,o=t.runtimeStyle.height,t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var c=t.width,u=t.height;if(t.runtimeStyle.width=r,t.runtimeStyle.height=o,3==arguments.length)n=arguments[1],i=arguments[2],s=a=0,l=r=c,h=o=u;else if(5==arguments.length)n=arguments[1],i=arguments[2],r=arguments[3],o=arguments[4],s=a=0,l=c,h=u;else{if(9!=arguments.length)throw Error("Invalid number of arguments");s=arguments[1],a=arguments[2],l=arguments[3],h=arguments[4],n=arguments[5],i=arguments[6],r=arguments[7],o=arguments[8]}var d=f(this,n,i),p=[];if(p.push(" <g_vml_:group",' coordsize="',10*T,",",10*T,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var m=[];m.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",S(d.x/T),",","Dy=",S(d.y/T),"");var g=f(this,n+r,i),y=f(this,n,i+o);n=f(this,n+r,i+o),d.x=C.max(d.x,g.x,y.x,n.x),d.y=C.max(d.y,g.y,y.y,n.y),p.push("padding:0 ",S(d.x/T),"px ",S(d.y/T),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",m.join(""),", sizingmethod='clip');")}else p.push("top:",S(d.y/T),"px;left:",S(d.x/T),"px;");p.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',T*r,"px;"," height:",T*o,'px"',' cropleft="',s/c,'"',' croptop="',a/u,'"',' cropright="',(c-s-l)/c,'"',' cropbottom="',(u-a-h)/u,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},E.stroke=function(t){var e=[];e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*T,",",10*T,'"',' stroked="',!t,'"',' path="');for(var n={x:null,y:null},i={x:null,y:null},r=0;r<this.currentPath_.length;r++){var o=this.currentPath_[r];switch(o.type){case"moveTo":e.push(" m ",S(o.x),",",S(o.y));break;case"lineTo":e.push(" l ",S(o.x),",",S(o.y));break;case"close":e.push(" x "),o=null;break;case"bezierCurveTo":e.push(" c ",S(o.cp1x),",",S(o.cp1y),",",S(o.cp2x),",",S(o.cp2y),",",S(o.x),",",S(o.y));break;case"at":case"wa":e.push(" ",o.type," ",S(o.x-this.arcScaleX_*o.radius),",",S(o.y-this.arcScaleY_*o.radius)," ",S(o.x+this.arcScaleX_*o.radius),",",S(o.y+this.arcScaleY_*o.radius)," ",S(o.xStart),",",S(o.yStart)," ",S(o.xEnd),",",S(o.yEnd))}o&&((null==n.x||o.x<n.x)&&(n.x=o.x),(null==i.x||o.x>i.x)&&(i.x=o.x),(null==n.y||o.y<n.y)&&(n.y=o.y),(null==i.y||o.y>i.y)&&(i.y=o.y))}e.push(' ">'),t?m(this,e,n,i):p(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},E.fill=function(){this.stroke(!0)},E.closePath=function(){this.currentPath_.push({type:"close"})},E.save=function(){var t={};s(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=o([[1,0,0],[0,1,0],[0,0,1]],this.m_)},E.restore=function(){this.aStack_.length&&(s(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},E.translate=function(t,e){g(this,o([[1,0,0],[0,1,0],[t,e,1]],this.m_),!1)},E.rotate=function(t){var e=_(t);g(this,o([[e,t=x(t),0],[-t,e,0],[0,0,1]],this.m_),!1)},E.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e,g(this,o([[t,0,0],[0,e,0],[0,0,1]],this.m_),!0)},E.transform=function(t,e,n,i,r,s){g(this,o([[t,e,0],[n,i,0],[r,s,1]],this.m_),!0)},E.setTransform=function(t,e,n,i,r,o){g(this,[[t,e,0],[n,i,0],[r,o,1]],!0)},E.drawText_=function(t,n,i,r,o){var s=this.m_;r=0;var a,l=1e3,h=0,c=[];if(R[a=this.font])a=R[a];else{var u=document.createElement("div").style;try{u.font=a}catch(y){}a=R[a]={style:u.fontStyle||"normal",variant:u.fontVariant||"normal",weight:u.fontWeight||"normal",size:u.fontSize||10,family:u.fontFamily||"sans-serif"}}u=a;var d=this.element_;for(var g in a={},u)a[g]=u[g];switch(g=parseFloat(d.currentStyle.fontSize),d=parseFloat(u.size),a.size="number"==typeof u.size?u.size:-1!=u.size.indexOf("px")?d:-1!=u.size.indexOf("em")?g*d:-1!=u.size.indexOf("%")?g/100*d:-1!=u.size.indexOf("pt")?d/.75:g,a.size*=.981,g=a.style+" "+a.variant+" "+a.weight+" "+a.size+"px "+a.family,d=this.element_.currentStyle,u=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":u="ltr"==d.direction?"right":"left";break;case"start":u="rtl"==d.direction?"right":"left";break;default:u="left"}switch(this.textBaseline){case"hanging":case"top":h=a.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":h=-a.size/2.25}switch(u){case"right":r=1e3,l=.05;break;case"center":r=l=500}n=f(this,n+0,i+h),c.push('<g_vml_:line from="',-r,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!o,'" stroked="',!!o,'" style="position:absolute;width:1px;height:1px;">'),o?p(this,c):m(this,c,{x:-r,y:0},{x:l,y:a.size}),o=s[0][0].toFixed(3)+","+s[1][0].toFixed(3)+","+s[0][1].toFixed(3)+","+s[1][1].toFixed(3)+",0,0",n=S(n.x/T)+","+S(n.y/T),c.push('<g_vml_:skew on="t" matrix="',o,'" ',' offset="',n,'" origin="',r,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',e(t),'" style="v-text-align:',u,";font:",e(g),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",c.join(""))},E.fillText=function(t,e,n,i){this.drawText_(t,e,n,i,!1)},E.strokeText=function(t,e,n,i){this.drawText_(t,e,n,i,!0)},E.measureText=function(t){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var e=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(e.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},E.clip=function(){},E.arcTo=function(){},E.createPattern=function(t,e){return new b(t,e)},y.prototype.addColorStop=function(t,e){e=c(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})},(E=v.prototype=Error()).INDEX_SIZE_ERR=1,E.DOMSTRING_SIZE_ERR=2,E.HIERARCHY_REQUEST_ERR=3,E.WRONG_DOCUMENT_ERR=4,E.INVALID_CHARACTER_ERR=5,E.NO_DATA_ALLOWED_ERR=6,E.NO_MODIFICATION_ALLOWED_ERR=7,E.NOT_FOUND_ERR=8,E.NOT_SUPPORTED_ERR=9,E.INUSE_ATTRIBUTE_ERR=10,E.INVALID_STATE_ERR=11,E.SYNTAX_ERR=12,E.INVALID_MODIFICATION_ERR=13,E.NAMESPACE_ERR=14,E.INVALID_ACCESS_ERR=15,E.VALIDATION_ERR=16,E.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=P,CanvasRenderingContext2D=u,CanvasGradient=y,CanvasPattern=b,DOMException=v}()},Wcq6:function(t,e,n){"use strict";var i,r=(i=n("wj3C"))&&"object"==typeof i&&"default"in i?i.default:i;t.exports=r},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return r})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return h})),n.d(e,"__awaiter",(function(){return c})),n.d(e,"__generator",(function(){return u})),n.d(e,"__exportStar",(function(){return d})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return m})),n.d(e,"__spread",(function(){return f})),n.d(e,"__spreadArrays",(function(){return g})),n.d(e,"__await",(function(){return y})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return v})),n.d(e,"__asyncValues",(function(){return C})),n.d(e,"__makeTemplateObject",(function(){return S})),n.d(e,"__importStar",(function(){return x})),n.d(e,"__importDefault",(function(){return _}));var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function a(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,i){e(n,i,t)}}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(e){o(e)}}function a(t){try{l(i.throw(t))}catch(e){o(e)}}function l(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function u(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||a(t,e)}))})}function a(t,e){try{(n=r[t](e)).value instanceof y?Promise.resolve(n.value.v).then(l,h):c(o[0][2],n)}catch(i){c(o[0][3],i)}var n}function l(t){a("next",t)}function h(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function v(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:y(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function C(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _(t){return t&&t.__esModule?t:{default:t}}},"q/0M":function(t,e,n){"use strict";function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return l})),n.d(e,"setLogLevel",(function(){return h}));var r=[],o=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s=o.INFO,a=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var s=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,i(["["+s+"]  "+t.name+":"],n));break;case o.INFO:console.info.apply(console,i(["["+s+"]  "+t.name+":"],n));break;case o.WARN:console.warn.apply(console,i(["["+s+"]  "+t.name+":"],n));break;case o.ERROR:console.error.apply(console,i(["["+s+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},l=function(){function t(t){this.name=t,this._logLevel=s,this._logHandler=a,r.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,i([this,o.ERROR],t))},t}();function h(t){r.forEach((function(e){e.logLevel=t}))}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n("mrSG"),o=n("zVF4"),s=n("S+S0"),a=n("q/0M"),l=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i),h=new o.ErrorFactory("app","Firebase",l),c="[DEFAULT]",u=new a.Logger("@firebase/app"),d=function(){function t(t,e,n){var i,a,l=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return l}),"PUBLIC"));try{for(var h=r.__values(this.firebase_.INTERNAL.components.values()),c=h.next();!c.done;c=h.next())this._addComponent(c.value)}catch(u){i={error:u}}finally{try{c&&!c.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=c),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=c),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){u.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var s=r;void 0===s.name&&(s.name=c);var a=s.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(o.contains(e,a))throw h.create("duplicate-app",{appName:a});var l=new t(n,s,i);return e[a]=l,l},app:s,apps:null,SDK_VERSION:"7.5.1",INTERNAL:{registerComponent:function(a){var l,c,d=a.name;if(n.has(d))return u.debug("There were multiple attempts to register component "+d+"."),"PUBLIC"===a.type?i[d]:null;if(n.set(d,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=s()),"function"!=typeof t[d])throw h.create("invalid-app-argument",{appName:d});return t[d]()};void 0!==a.serviceProps&&o.deepExtend(p,a.serviceProps),i[d]=p,t.prototype[d]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,d);return n.apply(this,a.multipleInstances?t:[])}}try{for(var m=r.__values(Object.keys(e)),f=m.next();!f.done;f=m.next())e[f.value]._addComponent(a)}catch(g){l={error:g}}finally{try{f&&!f.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}return"PUBLIC"===a.type?i[d]:null},removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function s(t){if(!o.contains(e,t=t||c))throw h.create("no-app",{appName:t});return e[t]}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),s.App=t,i}(d);return e.INTERNAL=r.__assign(r.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}();if(o.isBrowser()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&u.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),f.apply(void 0,t)};var g=p;e.default=g,e.firebase=g},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return ai})),n.d(e,"EventType",(function(){return li})),n.d(e,"WebChannel",(function(){return hi})),n.d(e,"XhrIo",(function(){return ci})),n.d(e,"createWebChannelTransport",(function(){return si}));var i,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=r;function a(t){return"string"==typeof t}function l(t){return"number"==typeof t}function h(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function c(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function d(t){return"array"==u(t)}function p(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function C(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now||function(){return+new Date};function x(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[f]||(this[f]=++g))},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var k=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},w=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=a(t)?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var P,M=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function E(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var F=s.navigator;if(F){var L=F.userAgent;if(L){P=L;break t}}P=""}function R(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function B(t){var e,n={};for(e in t)n[e]=t[e];return n}var N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<N.length;o++)n=N[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function V(t){return V[" "](t),t}V[" "]=c;var W,H,G=E(P,"Opera"),z=E(P,"Trident")||E(P,"MSIE"),U=E(P,"Edge"),Y=U||z,X=E(P,"Gecko")&&!(E(P.toLowerCase(),"webkit")&&!E(P,"Edge"))&&!(E(P,"Trident")||E(P,"MSIE"))&&!E(P,"Edge"),q=E(P.toLowerCase(),"webkit")&&!E(P,"Edge");function j(){var t=s.document;return t?t.documentMode:void 0}t:{var K="",$=(H=P,X?/rv:([^\);]+)(\)|;)/.exec(H):U?/Edge\/([\d\.]+)/.exec(H):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(H):q?/WebKit\/(\S+)/.exec(H):G?/(?:Version)[ \/]?(\S+)/.exec(H):void 0);if($&&(K=$?$[1]:""),z){var Q=j();if(null!=Q&&Q>parseFloat(K)){W=String(Q);break t}}W=K}var J,Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=M(String(W)).split("."),i=M(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var s=n[o]||"",a=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=D(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==s[2].length,0==a[2].length)||D(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var et=s.document;J=et&&z?j()||("CSS1Compat"==et.compatMode?parseInt(W,10):5):void 0;var nt=!z||9<=Number(J),it=z&&!tt("9"),rt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(X){t:{try{V(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},x(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,it)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var lt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ct(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.da=r,this.key=++ht,this.X=this.Z=!1}function ut(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function dt(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var i,r=t.a[n],o=k(r,e);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function mt(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==i)return r}return-1}dt.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=mt(t,e,i,r);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ct(e,this.src,o,!!i,r)).Z=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),gt={};function yt(t,e,n,i,r){if(i&&i.once)return function t(e,n,i,r,o){if(d(n)){for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);return null}return i=kt(i),e&&e[lt]?e.Ba(n,i,m(r)?!!r.capture:!!r,o):bt(e,n,i,!0,r,o)}(t,e,n,i,r);if(d(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,i,r);return null}return n=kt(n),t&&t[lt]?t.Aa(e,n,m(i)?!!i.capture:!!i,r):bt(t,e,n,!1,i,r)}function bt(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=m(r)?!!r.capture:!!r;if(s&&!nt)return null;var a=xt(t);if(a||(t[ft]=a=new dt(t)),(n=a.add(e,n,i,s,o)).proxy)return n;if(i=function(){var t=St,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)rt||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ct(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function vt(t){if(!l(t)&&t&&!t.X){var e=t.src;if(e&&e[lt])pt(e.c,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ct(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=xt(e))?(pt(n,t),0==n.b&&(n.src=null,e[ft]=null)):ut(t)}}}function Ct(t){return t in gt?gt[t]:gt[t]="on"+t}function St(t,e){return!!t.X||function(t,e){var n=t.listener,i=t.da||t.src;return t.Z&&vt(t),n.call(i,e)}(t,nt?new st(e,this):e=new st(e||h("window.event"),this))}function xt(t){return(t=t[ft])instanceof dt?t:null}var _t="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(t){return"function"==u(t)?t:(t[_t]||(t[_t]=function(e){return t.handleEvent(e)}),t[_t])}function wt(){_.call(this),this.c=new dt(this),this.J=this,this.B=null}function Tt(t,e,n,i){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,l=s.da||s.src;s.Z&&pt(t.c,s),r=!1!==a.call(l,i)&&r}}return r&&0!=i.Ja}x(wt,_),wt.prototype[lt]=!0,(i=wt.prototype).addEventListener=function(t,e,n,i){yt(this,t,e,n,i)},i.removeEventListener=function(t,e,n,i){!function t(e,n,i,r,o){if(d(n))for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);else r=m(r)?!!r.capture:!!r,i=kt(i),e&&e[lt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(i=mt(s=e.a[n],i,r,o))&&(ut(s[i]),Array.prototype.splice.call(s,i,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=xt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=mt(n,i,r,o)),(i=-1<e?n[e]:null)&&vt(i))}(this,t,e,n,i)},i.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var i=t.type||t;if(a(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var r=t;O(t=new ot(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];r=Tt(s,i,!0,t)&&r}if(r=Tt(s=t.a=n,i,!0,t)&&r,r=Tt(s,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Tt(s=t.a=e[o],i,!1,t)&&r;return r},i.G=function(){if(wt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)ut(n[i]);delete e.a[t],e.b--}}this.B=null},i.Aa=function(t,e,n,i){return this.c.add(String(t),e,!1,n,i)},i.Ba=function(t,e,n,i){return this.c.add(String(t),e,!0,n,i)};var It=s.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Pt(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Mt,Et=new At((function(){return new Ft}),(function(t){t.reset()}));function Dt(){var t=Nt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ft(){this.next=this.b=this.a=null}function Lt(t){s.setTimeout((function(){throw t}),0)}function Rt(t,e){Mt||function(){var t=s.Promise.resolve(void 0);Mt=function(){t.then(Ot)}}(),Bt||(Mt(),Bt=!0),Nt.add(t,e)}Pt.prototype.add=function(t,e){var n=Et.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ft.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ft.prototype.reset=function(){this.next=this.b=this.a=null};var Bt=!1,Nt=new Pt;function Ot(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(n){Lt(n)}var e=Et;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Bt=!1}function Vt(t,e){wt.call(this),this.b=t||1,this.a=e||s,this.f=v(this.gb,this),this.g=S()}function Wt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Ht(t,e,n){if("function"==u(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Gt(t,e,n){_.call(this),this.f=null!=n?v(t,n):t,this.c=e,this.b=v(this.ab,this),this.a=[]}function zt(t){t.U=Ht(t.b,t.c),t.f.apply(null,t.a)}function Ut(t){_.call(this),this.b=t,this.a={}}x(Vt,wt),(i=Vt.prototype).ba=!1,i.L=null,i.gb=function(){if(this.ba){var t=S()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Wt(this),this.start()))}},i.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=S())},i.G=function(){Vt.N.G.call(this),Wt(this),delete this.a},x(Gt,_),(i=Gt.prototype).ea=!1,i.U=null,i.Ua=function(t){this.a=arguments,this.U?this.ea=!0:zt(this)},i.G=function(){Gt.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},i.ab=function(){this.U=null,this.ea&&(this.ea=!1,zt(this))},x(Ut,_);var Yt=[];function Xt(t,e,n,i){d(n)||(n&&(Yt[0]=n.toString()),n=Yt);for(var r=0;r<n.length;r++){var o=yt(e,n[r],i||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function qt(t){R(t.a,(function(t,e){this.a.hasOwnProperty(e)&&vt(t)}),t),t.a={}}function jt(){}Ut.prototype.G=function(){Ut.N.G.call(this),qt(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=new wt;function $t(t){ot.call(this,"serverreachability",t)}function Qt(t){Kt.dispatchEvent(new $t(Kt,t))}function Jt(t){ot.call(this,"statevent",t)}function Zt(t){Kt.dispatchEvent(new Jt(Kt,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=u(t))throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}x($t,ot),x(Jt,ot),x(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ie={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function re(){}function oe(){}re.prototype.a=null;var se,ae={OPEN:"a",ib:"b",Na:"c",rb:"d"};function le(){ot.call(this,"d")}function he(){ot.call(this,"c")}function ce(){}function ue(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Ut(this),this.O=de,this.P=new Vt(t=Y?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}x(le,ot),x(he,ot),x(ce,re),se=new ce;var de=45e3,pe={},me={};function fe(t,e,n){t.F=1,t.f=We(Fe(e)),t.l=n,t.H=!0,ye(t,null)}function ge(t,e,n,i){t.F=1,t.f=We(Fe(e)),t.l=null,t.H=n,ye(t,i)}function ye(t,e){t.v=S(),Ce(t),t.D=Fe(t.f),Ve(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Gt(v(t.Ka,t,t.a),t.J)),Xt(t.I,t.a,"readystatechange",t.eb),e=t.h?B(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Qt(1)}function be(t,e,n){for(var i=!0;!t.m&&t.A<n.length;){var r=ve(t,n);if(r==me){4==e&&(t.c=4,Zt(14),i=!1);break}if(r==pe){t.c=4,Zt(15),i=!1;break}we(t,r)}4==e&&0==n.length&&(t.c=1,Zt(16),i=!1),t.b=t.b&&i,i||(ke(t),_e(t))}function ve(t,e){var n=t.A,i=e.indexOf("\n",n);return-1==i?me:(n=Number(e.substring(n,i)),isNaN(n)?pe:(i+=1)+n>e.length?me:(e=e.substr(i,n),t.A=i+n,e))}function Ce(t){t.R=S()+t.O,Se(t,t.O)}function Se(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(v(t.bb,t),e)}function xe(t){t.i&&(s.clearTimeout(t.i),t.i=null)}function _e(t){t.g.Da()||t.m||t.g.na(t)}function ke(t){xe(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Wt(t.P),qt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function we(t,e){try{t.g.Ga(t,e),Qt(4)}catch(n){}}function Te(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||a(t))w(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(p(t)||a(t)){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;r=(i=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(p(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t)).length;for(var o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}}function Ie(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Ie)for(n=t.K(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Ae(t,e){Me(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pe(t))}function Pe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Me(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Me(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function Me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(i=ue.prototype).setTimeout=function(t){this.O=t},i.eb=function(t){t=t.target;var e=this.B;e&&3==Fn(t)?e.Ua():this.Ka(t)},i.Ka=function(t){try{if(t==this.a)t:{var e=Fn(this.a),n=this.a.ya(),i=this.a.T();if(!(3>e||3==e&&!Y&&!this.a.aa())){this.m||4!=e||7==n||Qt(8==n||0>=i?3:2),xe(this);var r=this.a.T();this.o=r;var o=this.a.aa();if(this.b=200==r){if(this.S&&!this.s){e:{if(this.a){var s=Ln(this.a,"X-HTTP-Initial-Response");if(s&&!A(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Zt(12),ke(this),_e(this);break t}this.s=!0,we(this,a)}this.H?(be(this,e,o),Y&&this.b&&3==e&&(Xt(this.I,this.P,"tick",this.cb),this.P.start())):we(this,o),4==e&&ke(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,Ce(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.c=3,Zt(12)):(this.c=0,Zt(13)),ke(this),_e(this)}}}catch(l){}},i.cb=function(){if(this.a){var t=Fn(this.a),e=this.a.aa();this.A<e.length&&(xe(this),be(this,t,e),this.b&&4!=t&&Ce(this))}},i.cancel=function(){this.m=!0,ke(this)},i.bb=function(){this.i=null;var t=S();0<=t-this.R?(2!=this.F&&(Qt(3),Zt(17)),ke(this),this.c=2,_e(this)):Se(this,this.R-t)},(i=Ie.prototype).C=function(){Pe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},i.K=function(){return Pe(this),this.a.concat()},i.get=function(t,e){return Me(this.b,t)?this.b[t]:e},i.set=function(t,e){Me(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},i.forEach=function(t,e){for(var n=this.K(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var Ee=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function De(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof De?(this.h=void 0!==e?e:t.h,Le(this,t.f),this.j=t.j,Re(this,t.b),Be(this,t.i),this.a=t.a,Ne(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Ee))?(this.h=!!e,Le(this,n[1]||"",!0),this.j=He(n[2]||""),Re(this,n[3]||"",!0),Be(this,n[4]),this.a=He(n[5]||"",!0),Ne(this,n[6]||"",!0),this.g=He(n[7]||"")):(this.h=!!e,this.c=new Ke(null,this.h))}function Fe(t){return new De(t)}function Le(t,e,n){t.f=n?He(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Re(t,e,n){t.b=n?He(e,!0):e}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Ne(t,e,n){e instanceof Ke?(t.c=e,function(t,e){e&&!t.f&&($e(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qe(this,e),Ze(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=Ge(e,qe)),t.c=new Ke(e,t.h))}function Oe(t,e,n){t.c.set(e,n)}function Ve(t,e,n){d(n)||(n=[String(n)]),Ze(t.c,e,n)}function We(t){return Oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^S()).toString(36)),t}function He(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ge(t,e,n){return a(t)?(t=encodeURI(t).replace(e,ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ge(e,Ue,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ge(e,Ue,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ge(n,"/"==n.charAt(0)?Xe:Ye,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ge(n,je)),t.join("")},De.prototype.resolve=function(t){var e=Fe(this),n=!!t.f;n?Le(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Re(e,t.b):n=null!=t.i;var i=t.a;if(n)Be(e,t.i);else if(n=!!t.a){if("/"!=i.charAt(0))if(this.b&&!this.a)i="/"+i;else{var r=e.a.lastIndexOf("/");-1!=r&&(i=e.a.substr(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(E(r,"./")||E(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.a=i:n=""!==t.c.toString(),n?Ne(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Ue=/[#\/\?@]/g,Ye=/[#\?:]/g,Xe=/[#\?]/g,qe=/[#\?@]/g,je=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $e(t){t.a||(t.a=new Ie,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qe(t,e){$e(t),e=en(t,e),Me(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function Je(t,e){return $e(t),e=en(t,e),Me(t.a.b,e)}function Ze(t,e,n){Qe(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),I(n)),t.b+=n.length)}function tn(t){var e=new Ke;return e.c=t.c,t.a&&(e.a=new Ie(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)Zt(4),e?(Zt(10),Xn(t.a,t,!1)):(Zt(11),Xn(t.a,t,!0));else{t.b=new ue(t,void 0,void 0),t.b.h=t.h,e=Qn(e=t.a,e.Y()?t.f:null,t.i),Zt(4),Ve(e,"TYPE","xmlhttp");var n=t.a.j,i=t.a.I;n&&i&&Oe(e,n,i),ge(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function sn(){this.a=new Ie}function an(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[f]||(t[f]=++g)):e.charAt(0)+t}function ln(t,e){this.b=t,this.a=e}function hn(t){this.g=t||cn,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.ka&&s.ka.Ea&&s.ka.Ea()&&s.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(i=Ke.prototype).add=function(t,e){$e(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},i.forEach=function(t,e){$e(this),this.a.forEach((function(n,i){w(n,(function(n){t.call(e,n,i,this)}),this)}),this)},i.K=function(){$e(this);for(var t=this.a.C(),e=this.a.K(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},i.C=function(t){$e(this);var e=[];if(a(t))Je(this,t)&&(e=T(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},i.set=function(t,e){return $e(this),this.c=null,Je(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},i.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.C(i);for(var o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}}return this.c=t.join("&")},x((function(){}),(function(){})),(i=nn.prototype).M=null,i.$=function(t){return this.a.$(t)},i.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},i.Da=function(){return!1},i.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Ln(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Ln(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var i=this.a.ja.a.parse(e)}catch(r){return(e=this.a).m=this.c,void Kn(e,2)}this.f=i[0]}else(e=this.a).m=this.c,Kn(e,2)}else 1==this.M&&(this.g?Zt(6):"11111"==e?(Zt(5),this.g=!0,(!z||10<=Number(J))&&(this.c=200,this.b.cancel(),Zt(11),Xn(this.a,this,!0))):(Zt(7),this.g=!1))},i.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Zt(11),Xn(this.a,this,!0)):(Zt(10),Xn(this.a,this,!1)));else{0==this.M?Zt(8):1==this.M&&Zt(9);var t=this.a;t.m=this.c,Kn(t,2)}},i.Y=function(){return this.a.Y()},i.ma=function(){return this.a.ma()},sn.prototype.add=function(t){this.a.set(an(t),t)},sn.prototype.C=function(){return this.a.C()};var cn=10;function un(t,e){!t.a&&(E(e,"spdy")||E(e,"quic")||E(e,"h2"))&&(t.f=t.g,t.a=new sn,t.b&&(fn(t,t.b),t.b=null))}function dn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function pn(t){return t.b?1:t.a?t.a.a.c:0}function mn(t,e){return t.b?t=t.b==e:t.a?(e=an(e),t=Me(t.a.a.b,e)):t=!1,t}function fn(t,e){t.a?t.a.add(e):t.b=e}function gn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=an(e),n=Me(t.a.a.b,n)),n&&Ae(t.a.a,an(e)))}function yn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return w(t.a.C(),(function(t){e=e.concat(t.j)})),e}return I(t.c)}function bn(){}function vn(){this.a=new bn}function Cn(t,e,n){var i=n||"";try{Te(t,(function(t,n){var r=t;m(t)&&(r=It(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Sn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(o){}}hn.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(w(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},bn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},bn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var xn=s.JSON.parse;function _n(t){wt.call(this),this.headers=new Ie,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=kn,this.D=this.F=!1}x(_n,wt);var kn="",wn=/^https?$/i,Tn=["POST","PUT"];function In(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Pn(t),En(t)}function Pn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Mn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Fn(t)||2!=t.T()))if(t.l&&4==Fn(t))Ht(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==Fn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var a=String(t.A).match(Ee)[1]||null;if(!a&&s.self&&s.self.location){var l=s.self.location.protocol;a=l.substr(0,l.length-1)}r=!wn.test(a?a.toLowerCase():"")}e=r}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",Pn(t))}finally{En(t)}}}function En(t,e){if(t.a){Dn(t);var n=t.a,i=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(r){}}}function Dn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function Fn(t){return t.a?t.a.readyState:0}function Ln(t,e){return t.a?t.a.getResponseHeader(e):null}function Rn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}if(i)return t;if(n=function(t){var e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(i=t.indexOf("?"))||i>n){i=n;var r=""}else r=t.substring(i+1,n);n=(t=[t.substr(0,i),r,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Oe(t,e,n),t}function Bn(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!h("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=h("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=h("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=h("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=h("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(t&&t.concurrentRequestLimit),this.ja=new vn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Nn(t){if(On(t),3==t.u){var e=t.P++,n=Fe(t.B);Oe(n,"SID",t.H),Oe(n,"RID",e),Oe(n,"TYPE","terminate"),Gn(t,n),(e=new ue(t,e,void 0)).F=2,e.f=We(Fe(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=S(),Ce(e)}$n(t)}function On(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(s.clearTimeout(t.l),t.l=null),qn(t),t.b.cancel(),t.h&&(l(t.h)&&s.clearTimeout(t.h),t.h=null)}function Vn(t,e){t.f.push(new ln(t.Ra++,e)),3==t.u&&Wn(t)}function Wn(t){dn(t.b)||t.h||(t.h=!0,Rt(t.Ia,t),t.A=0)}function Hn(t,e){var n;n=e?e.W:t.P++;var i=Fe(t.B);Oe(i,"SID",t.H),Oe(i,"RID",n),Oe(i,"AID",t.O),Gn(t,i),t.g&&t.i&&Rn(i,t.g,t.i),n=new ue(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=zn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),fn(t.b,n),fe(n,i,e)}function Gn(t,e){t.c&&Te({},(function(t,n){Oe(e,n,t)}))}function zn(t,e,n){n=Math.min(t.f.length,n);var i=t.c?v(t.c.Ta,t.c,t):null;t:for(var r=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=r[0].b)):o=0:s.push("ofs="+o);for(var a=!0,l=0;l<n;l++){var h=r[l].b,c=r[l].a;if(0>(h-=o))o=Math.max(0,r[l].b-100),a=!1;else try{Cn(c,s,"req"+h+"_")}catch(u){i&&i(c)}}if(a){i=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,i}function Un(t){t.a||t.l||(t.S=1,Rt(t.Ha,t),t.v=0)}function Yn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(v(t.Ha,t),jn(t,t.v)),t.v++,0))}function Xn(t,e,n){var i=e.l;i&&un(t.b,i),t.ia=t.oa&&n,t.m=e.c,t.B=Qn(t,null,t.ha),Wn(t)}function qn(t){null!=t.s&&(s.clearTimeout(t.s),t.s=null)}function jn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function Kn(t,e){if(2==e){var n=null;t.c&&(n=null);var i=v(t.fb,t);n||(n=new De("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Le(n,"https"),We(n)),function(t,e){var n=new jt;if(s.Image){var i=new Image;i.onload=C(Sn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=C(Sn,n,i,"TestLoadImage: error",!1,e),i.onabort=C(Sn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=C(Sn,n,i,"TestLoadImage: timeout",!1,e),s.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Zt(2);t.u=0,t.c&&t.c.ta(e),$n(t),On(t)}function $n(t){t.u=0,t.m=-1,t.c&&(0==yn(t.b).length&&0==t.f.length||(t.b.c.length=0,I(t.f),t.f.length=0),t.c.sa())}function Qn(t,e,n){var i=function(t){return t instanceof De?Fe(t):new De(t,void 0)}(n);if(""!=i.b)e&&Re(i,e+"."+i.b),Be(i,i.i);else{var r=s.location;i=function(t,e,n,i){var r=new De(null,void 0);return t&&Le(r,t),e&&Re(r,e),n&&Be(r,n),i&&(r.a=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.V&&R(t.V,(function(t,e){Oe(i,e,t)})),n=t.I,(e=t.j)&&n&&Oe(i,e,n),Oe(i,"VER",t.wa),Gn(t,i),i}function Jn(){}function Zn(){if(z&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function ti(t,e){wt.call(this),this.a=new Bn(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var i,r=arguments[n];0==r.lastIndexOf("/",0)?e=r:((i=""==e)||(i=0<=(i=e.length-1)&&e.indexOf("/",i)==i),e+=i?r:"/"+r)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ii(this)}function ei(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ni(){he.call(this),this.status=1}function ii(t){this.a=t}(i=_n.prototype).ca=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=v(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void An(this,o)}t=n||"";var r=new Ie(this.headers);i&&Te(i,(function(t,e){r.set(e,t)})),i=function(t){t:{for(var e=In,n=t.length,i=a(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(r.K()),n=s.FormData&&t instanceof s.FormData,!(0<=k(Tn,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(t){return z&&tt(9)&&l(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=v(this.Ca,this)):this.m=Ht(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){An(this,o)}},i.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),En(this))},i.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),En(this,!0)),_n.N.G.call(this)},i.Fa=function(){this.j||(this.w||this.l||this.g?Mn(this):this.$a())},i.$a=function(){Mn(this)},i.T=function(){try{return 2<Fn(this)?this.a.status:-1}catch(H){return-1}},i.za=function(){try{return 2<Fn(this)?this.a.statusText:""}catch(H){return""}},i.aa=function(){try{return this.a?this.a.responseText:""}catch(H){return""}},i.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xn(e)}},i.ya=function(){return this.h},i.Ya=function(){return a(this.f)?this.f:String(this.f)},(i=Bn.prototype).wa=8,i.u=1,i.Da=function(){return 0==this.u},i.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new ue(this,t=this.P++,void 0),i=this.i;if(this.J&&(i?O(i=B(i),this.J):i=this.J),null===this.g&&(n.h=i),this.W)t:{for(var r=e=0;r<this.f.length;r++){var o=this.f[r];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=r;break t}if(4096===e||r===this.f.length-1){e=r+1;break t}}e=1e3}else e=1e3;e=zn(this,n,e),Oe(r=Fe(this.B),"RID",t),Oe(r,"CVER",22),this.o&&this.j&&Oe(r,"X-HTTP-Session-Id",this.j),Gn(this,r),this.g&&i&&Rn(r,this.g,i),fn(this.b,n),this.W?(Oe(r,"$req",e),Oe(r,"SID","null"),n.S=!0,fe(n,r,null)):fe(n,r,e),this.u=2}}else 3==this.u&&(t?Hn(this,t):0==this.f.length||dn(this.b)||Hn(this))},i.Ha=function(){this.l=null,this.a=new ue(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Fe(this.pa);Oe(t,"RID","rpc"),Oe(t,"SID",this.H),Oe(t,"CI",this.ia?"0":"1"),Oe(t,"AID",this.O),Gn(this,t),Oe(t,"TYPE","xmlhttp"),this.g&&this.i&&Rn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ge(this.a,t,!0,this.ga)},i.Ga=function(t,e){if(0!=this.u&&(this.a==t||mn(this.b,t)))if(this.m=t.o,!t.s&&mn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(d(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;qn(this),this.a.cancel(),this.a=null}Yn(this),Zt(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(v(this.Za,this),6e3));if(1>=pn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Kn(this,11)}else if((t.s||this.a==t)&&qn(this),!A(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var i=e[n];if(this.O=i[0],i=i[1],2==this.u)if("c"==i[0]){this.H=i[1],this.ga=i[2];var r=i[3];null!=r&&(this.wa=r),null!=(i=i[5])&&l(i)&&0<i&&(this.D=1.5*i),this.o&&(i=t.a)&&((r=Ln(i,"X-Client-Wire-Protocol"))&&un(this.b,r),this.j&&(i=Ln(i,"X-HTTP-Session-Id")))&&(this.I=i,Oe(this.B,this.j,i)),this.u=3,this.c&&this.c.va(),i=t,this.pa=Qn(this,this.Y()?this.ga:null,this.ha),i.s?(gn(this.b,i),(r=this.D)&&i.setTimeout(r),i.i&&(xe(i),Ce(i)),this.a=i):Un(this),0<this.f.length&&Wn(this)}else"stop"!=i[0]&&"close"!=i[0]||Kn(this,7);else 3==this.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Kn(this,7):Nn(this):"noop"!=i[0]&&this.c&&this.c.ua(i),this.v=0)}},i.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Yn(this),Zt(19))},i.na=function(t){var e=null;if(this.a==t){qn(this),this.a=null;var n=2}else{if(!mn(this.b,t))return;e=t.j,gn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=S()-t.v,Kt.dispatchEvent(new te(Kt,t.l?t.l.length:0,e,this.A)),Wn(this)):Un(this);else{var i=t.c;if(3==i||0==i&&0<this.m||!(1==n&&function(t,e){return!(pn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ee(v(t.Ia,t,e),jn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Yn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),i){case 1:Kn(this,5);break;case 4:Kn(this,10);break;case 3:Kn(this,6);break;default:Kn(this,2)}}},i.fb=function(t){Zt(t?2:1)},i.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new _n(this.La)).F=this.R,t},i.ma=function(){return!!this.c&&!0},i.Y=function(){return this.R},(i=Jn.prototype).va=function(){},i.ua=function(){},i.ta=function(){},i.sa=function(){},i.Ta=function(){},Zn.prototype.a=function(t,e){return new ti(t,e)},x(ti,wt),(i=ti.prototype).addEventListener=function(t,e,n,i){ti.N.addEventListener.call(this,t,e,n,i)},i.removeEventListener=function(t,e,n,i){ti.N.removeEventListener.call(this,t,e,n,i)},i.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,i=this.b||void 0;Zt(0),t.ha=n,t.V=i||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Rn(e,t.g,t.i)),(t=t.w).i=n,e=Qn(t.a,null,t.i),Zt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(Ve(e,"MODE","init"),!t.a.o&&t.a.j&&Ve(e,"X-HTTP-Session-Id",t.a.j),t.b=new ue(t,void 0,void 0),t.b.h=t.h,ge(t.b,e,!1,null),t.M=0)},i.close=function(){Nn(this.a)},i.Xa=function(t){if(a(t)){var e={};e.__data__=t,Vn(this.a,e)}else this.h?((e={}).__data__=It(t),Vn(this.a,e)):Vn(this.a,t)},i.G=function(){this.a.c=null,delete this.f,Nn(this.a),delete this.a,ti.N.G.call(this)},x(ei,le),x(ni,he),x(ii,Jn),ii.prototype.va=function(){this.a.dispatchEvent("a")},ii.prototype.ua=function(t){this.a.dispatchEvent(new ei(t))},ii.prototype.ta=function(t){this.a.dispatchEvent(new ni(t))},ii.prototype.sa=function(){this.a.dispatchEvent("b")};var ri=C((function(t,e){function n(){}n.prototype=t.prototype;var i=new n;return t.apply(i,Array.prototype.slice.call(arguments,1)),i}),Zn);Zn.prototype.createWebChannel=Zn.prototype.a,ti.prototype.send=ti.prototype.Xa,ti.prototype.open=ti.prototype.Wa,ti.prototype.close=ti.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,ie.COMPLETE="complete",oe.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",wt.prototype.listen=wt.prototype.Aa,_n.prototype.listenOnce=_n.prototype.Ba,_n.prototype.getLastError=_n.prototype.Ya,_n.prototype.getLastErrorCode=_n.prototype.ya,_n.prototype.getStatus=_n.prototype.T,_n.prototype.getStatusText=_n.prototype.za,_n.prototype.getResponseJson=_n.prototype.Va,_n.prototype.getResponseText=_n.prototype.aa,_n.prototype.send=_n.prototype.ca;var oi={createWebChannelTransport:ri,ErrorCode:ne,EventType:ie,WebChannel:oe,XhrIo:_n},si=oi.createWebChannelTransport,ai=oi.ErrorCode,li=oi.EventType,hi=oi.WebChannel,ci=oi.XhrIo;e.default=oi},yLV6:function(t,e,n){var i;!function(r,o,s,a){"use strict";var l,h=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),u="function",d=Math.round,p=Math.abs,m=Date.now;function f(t,e,n){return setTimeout(x(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function b(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var v=b((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===a)&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),C=b((function(t,e){return v(t,e,!0)}),"merge","Use `assign`.");function S(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&l(i,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function _(t,e){return typeof t==u?t.apply(e&&e[0]||a,e):t}function k(t,e){return t===a?e:t}function w(t,e,n){y(P(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){y(P(e),(function(e){t.removeEventListener(e,n,!1)}))}function I(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function A(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function M(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function E(t){return Array.prototype.slice.call(t,0)}function D(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];M(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function F(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<h.length;){if((i=(n=h[o])?n+r:e)in t)return i;o++}return a}var L=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var B="ontouchstart"in r,N=F(r,"PointerEvent")!==a,O=B&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V=25,W=1,H=2,G=4,z=8,U=1,Y=2,X=4,q=8,j=16,K=Y|X,$=q|j,Q=K|$,J=["x","y"],Z=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_(t.options.enable,[t])&&n.handler(e)},this.init()}function et(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&W&&i-r==0,s=e&(G|z)&&i-r==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=nt(e)),r>1&&!n.firstMultiple?n.firstMultiple=nt(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,h=e.center=it(i);e.timeStamp=m(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=at(l,h),e.distance=st(l,h),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==W&&o.eventType!==G||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var c,u,d=rt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=p(d.x)>p(d.y)?d.x:d.y,e.scale=s?(c=s.pointers,st((u=i)[0],u[1],Z)/st(c[0],c[1],Z)):1,e.rotation=s?function(t,e){return at(e[1],e[0],Z)+at(t[1],t[0],Z)}(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=z&&(l>V||s.velocity===a)){var h=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=rt(l,h,c);i=u.x,r=u.y,n=p(u.x)>p(u.y)?u.x:u.y,o=ot(h,c),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var f=t.element;I(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function nt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:m(),pointers:e,center:it(e),deltaX:t.deltaX,deltaY:t.deltaY}}function it(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:d(n/e),y:d(i/e)}}function rt(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return t===e?U:p(t)>=p(e)?t<0?Y:X:e<0?q:j}function st(t,e,n){n||(n=J);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function at(t,e,n){return n||(n=J),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(R(this.element),this.evWin,this.domHandler)}};var lt={mousedown:W,mousemove:H,mouseup:G},ht="mousedown",ct="mousemove mouseup";function ut(){this.evEl=ht,this.evWin=ct,this.pressed=!1,tt.apply(this,arguments)}S(ut,tt,{handler:function(t){var e=lt[t.type];e&W&&0===t.button&&(this.pressed=!0),e&H&&1!==t.which&&(e=G),this.pressed&&(e&G&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var dt={pointerdown:W,pointermove:H,pointerup:G,pointercancel:z,pointerout:z},pt={2:"touch",3:"pen",4:"mouse",5:"kinect"},mt="pointerdown",ft="pointermove pointerup pointercancel";function gt(){this.evEl=mt,this.evWin=ft,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(mt="MSPointerDown",ft="MSPointerMove MSPointerUp MSPointerCancel"),S(gt,tt,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=dt[i],o=pt[t.pointerType]||t.pointerType,s="touch"==o,a=M(e,t.pointerId,"pointerId");r&W&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(G|z)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var yt={touchstart:W,touchmove:H,touchend:G,touchcancel:z},bt="touchstart",vt="touchstart touchmove touchend touchcancel";function Ct(){this.evTarget=bt,this.evWin=vt,this.started=!1,tt.apply(this,arguments)}function St(t,e){var n=E(t.touches),i=E(t.changedTouches);return e&(G|z)&&(n=D(n.concat(i),"identifier",!0)),[n,i]}S(Ct,tt,{handler:function(t){var e=yt[t.type];if(e===W&&(this.started=!0),this.started){var n=St.call(this,t,e);e&(G|z)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var xt={touchstart:W,touchmove:H,touchend:G,touchcancel:z},_t="touchstart touchmove touchend touchcancel";function kt(){this.evTarget=_t,this.targetIds={},tt.apply(this,arguments)}function wt(t,e){var n=E(t.touches),i=this.targetIds;if(e&(W|H)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=E(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return I(t.target,l)})),e===W)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(G|z)&&delete i[s[r].identifier],r++;return a.length?[D(o.concat(a),"identifier",!0),a]:void 0}S(kt,tt,{handler:function(t){var e=xt[t.type],n=wt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Tt=2500,It=25;function At(){tt.apply(this,arguments);var t=x(this.handler,this);this.touch=new kt(this.manager,t),this.mouse=new ut(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Pt(t,e){t&W?(this.primaryTouch=e.changedPointers[0].identifier,Mt.call(this,e)):t&(G|z)&&Mt.call(this,e)}function Mt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),Tt)}}function Et(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=It&&s<=It)return!0}return!1}S(At,tt,{handler:function(t,e,n){var i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)Pt.call(this,e,n);else if(i&&Et.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Dt=F(c.style,"touchAction"),Ft=Dt!==a,Lt=function(){if(!Ft)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)})),t}();function Rt(t,e){this.manager=t,this.set(e)}Rt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ft&&this.manager.element.style&&Lt[t]&&(this.manager.element.style[Dt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){_(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(A(t,"none"))return"none";var e=A(t,"pan-x"),n=A(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":A(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=A(i,"none")&&!Lt.none,o=A(i,"pan-y")&&!Lt["pan-y"],s=A(i,"pan-x")&&!Lt["pan-x"];if(r&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!o)return r||o&&n&K||s&&n&$?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Bt=1,Nt=2,Ot=4,Vt=8,Wt=Vt,Ht=16;function Gt(t){this.options=l({},this.defaults,t||{}),this.id=L++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=Bt,this.simultaneous={},this.requireFail=[]}function zt(t){return t&Ht?"cancel":t&Vt?"end":t&Ot?"move":t&Nt?"start":""}function Ut(t){return t==j?"down":t==q?"up":t==Y?"left":t==X?"right":""}function Yt(t,e){var n=e.manager;return n?n.get(t):t}function Xt(){Gt.apply(this,arguments)}function qt(){Xt.apply(this,arguments),this.pX=null,this.pY=null}function jt(){Xt.apply(this,arguments)}function Kt(){Gt.apply(this,arguments),this._timer=null,this._input=null}function $t(){Xt.apply(this,arguments)}function Qt(){Xt.apply(this,arguments)}function Jt(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Zt(t,e){return(e=e||{}).recognizers=k(e.recognizers,Zt.defaults.preset),new te(t,e)}function te(t,e){var n;this.options=l({},Zt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?gt:O?kt:B?At:ut))(n,et),this.touchAction=new Rt(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,i=t.element;i.style&&(y(t.options.cssProps,(function(r,o){n=F(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Gt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Yt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)?this:(t=Yt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===M(e,t=Yt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=Yt(t,this);var e=M(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<Vt&&i(e.options.event+zt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=Vt&&i(e.options.event+zt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Bt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!_(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Wt|Ht|32)&&(this.state=Bt),this.state=this.process(e),this.state&(Nt|Ot|Vt|Ht)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},S(Xt,Gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(Nt|Ot),r=this.attrTest(t);return i&&(n&z||!r)?e|Ht:i||r?n&G?e|Vt:e&Nt?e|Ot:Nt:32}}),S(qt,Xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Q},getTouchAction:function(){var t=this.options.direction,e=[];return t&K&&e.push("pan-y"),t&$&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&K?(r=0===o?U:o<0?Y:X,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?U:s<0?q:j,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Xt.prototype.attrTest.call(this,t)&&(this.state&Nt||!(this.state&Nt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Ut(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),S(jt,Xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Nt)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),S(Kt,Gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(G|z)&&!r)this.reset();else if(t.eventType&W)this.reset(),this._timer=f((function(){this.state=Wt,this.tryEmit()}),e.time,this);else if(t.eventType&G)return Wt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Wt&&(t&&t.eventType&G?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),S($t,Xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Nt)}}),S(Qt,Xt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|$,pointers:1},getTouchAction:function(){return qt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(K|$)?e=t.overallVelocity:n&K?e=t.overallVelocityX:n&$&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&G},emit:function(t){var e=Ut(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),S(Jt,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&W&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=G)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||st(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=Wt,this.tryEmit()}),e.interval,this),Nt):Wt}return 32},failTimeout:function(){return this._timer=f((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Wt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Zt.VERSION="2.0.7",Zt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[$t,{enable:!1}],[jt,{enable:!1},["rotate"]],[Qt,{direction:K}],[qt,{direction:K},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Wt)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(Nt|Ot|Vt)&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Gt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=M(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return y(P(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return y(P(t),(function(t){e?n[t]&&n[t].splice(M(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Zt,{INPUT_START:W,INPUT_MOVE:H,INPUT_END:G,INPUT_CANCEL:z,STATE_POSSIBLE:Bt,STATE_BEGAN:Nt,STATE_CHANGED:Ot,STATE_ENDED:Vt,STATE_RECOGNIZED:Wt,STATE_CANCELLED:Ht,STATE_FAILED:32,DIRECTION_NONE:U,DIRECTION_LEFT:Y,DIRECTION_RIGHT:X,DIRECTION_UP:q,DIRECTION_DOWN:j,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:$,DIRECTION_ALL:Q,Manager:te,Input:tt,TouchAction:Rt,TouchInput:kt,MouseInput:ut,PointerEventInput:gt,TouchMouseInput:At,SingleTouchInput:Ct,Recognizer:Gt,AttrRecognizer:Xt,Tap:Jt,Pan:qt,Swipe:Qt,Pinch:jt,Rotate:$t,Press:Kt,on:w,off:T,each:y,merge:C,extend:v,assign:l,inherit:S,bindFn:x,prefixed:F}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Zt,(i=(function(){return Zt}).call(e,n,e,t))===a||(t.exports=i)}(window,document)},zUnb:function(t,e,n){"use strict";function i(t){return"function"==typeof t}n.r(e),n("yLV6");let r=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function s(t){setTimeout(()=>{throw t})}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},l=Array.isArray||(t=>t&&"number"==typeof t.length);function h(t){return null!==t&&"object"==typeof t}function c(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}c.prototype=Object.create(Error.prototype);const u=c;let d=(()=>{class t{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:r,_unsubscribe:o,_subscriptions:s}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let a=-1,c=r?r.length:0;for(;n;)n.remove(this),n=++a<c&&r[a]||null;if(i(o))try{o.call(this)}catch(d){e=!0,t=d instanceof u?p(d.errors):[d]}if(l(s))for(a=-1,c=s.length;++a<c;){const n=s[a];if(h(n))try{n.unsubscribe()}catch(d){e=!0,t=t||[],d instanceof u?t=t.concat(p(d.errors)):t.push(d)}}if(e)throw new u(t)}add(e){let n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){const t=this._subscriptions;t?t.push(n):this._subscriptions=[n]}return n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof u?e.errors:e),[])}const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class f extends d{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof f?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[m](){return this}static create(t,e,n){const i=new f(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class g extends f{constructor(t,e,n,r){let o;super(),this._parentSubscriber=t;let s=this;i(e)?o=e:e&&(o=e.next,n=e.error,r=e.complete,e!==a&&(i((s=Object.create(e)).unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(s(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(){}function v(...t){return C(t)}function C(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:b}let S=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof f)return t;if(t[m])return t[m]()}return t||e||n?new f(t,e,n):new f(a)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),o.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=x(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:C(t)(this)}toPromise(t){return new(t=x(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function x(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function _(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}_.prototype=Object.create(Error.prototype);const k=_;class w extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class T extends f{constructor(t){super(t),this.destination=t}}let I=(()=>{class t extends S{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[m](){return new T(this)}lift(t){const e=new A(this,this);return e.operator=t,e}next(t){if(this.closed)throw new k;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new k;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new k;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new k;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new k;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new S;return t.source=this,t}}return t.create=(t,e)=>new A(t,e),t})();class A extends I{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function P(t){return t&&"function"==typeof t.schedule}class M extends f{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const E=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()},D=t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s),e);function F(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const L=F(),R=t=>e=>{const n=t[L]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e},B=t=>e=>{const n=t[y]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)},N=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const V=t=>{if(t instanceof S)return e=>t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e);if(t&&"function"==typeof t[y])return B(t);if(N(t))return E(t);if(O(t))return D(t);if(t&&"function"==typeof t[L])return R(t);{const e=h(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};function W(t,e,n,i,r=new M(t,n,i)){if(!r.closed)return V(e)(r)}class H extends f{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function G(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new z(t,e))}}class z{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new U(t,this.project,this.thisArg))}}class U extends f{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Y(t,e){return new S(e?n=>{const i=new d;let r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i}:E(t))}function X(t,e){if(!e)return t instanceof S?t:new S(V(t));if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new S(e?n=>{const i=new d;return i.add(e.schedule(()=>{const r=t[y]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i}:B(t))}(t,e);if(O(t))return function(t,e){return new S(e?n=>{const i=new d;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i}:D(t))}(t,e);if(N(t))return Y(t,e);if(function(t){return t&&"function"==typeof t[L]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new S(e?n=>{const i=new d;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[L](),i.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())})))})),i}:R(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function q(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(q((n,i)=>X(t(n,i)).pipe(G((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new j(t,n)))}class j{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new K(t,this.project,this.concurrent))}}class K extends H{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new M(this,void 0,void 0);this.destination.add(i),W(this,t,e,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,i,r){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function $(t){return t}function Q(t=Number.POSITIVE_INFINITY){return q($,t)}function J(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return P(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof S?t[0]:Q(e)(Y(t,n))}function Z(){return function(t){return t.lift(new tt(t))}}class tt{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new et(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class et extends f{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}const nt=class extends S{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new d).add(this.source.subscribe(new rt(this.getSubject(),this))),t.closed?(this._connection=null,t=d.EMPTY):this._connection=t),t}refCount(){return Z()(this)}}.prototype,it={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:nt._subscribe},_isComplete:{value:nt._isComplete,writable:!0},getSubject:{value:nt.getSubject},connect:{value:nt.connect},refCount:{value:nt.refCount}};class rt extends T{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function ot(){return new I}function st(){return t=>Z()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,it);return i.source=e,i.subjectFactory=n,i}}(ot)(t))}const at="__parameters__";function lt(t,e,n){const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(at)?t[at]:Object.defineProperty(t,at,{value:[]})[at];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r}const ht=lt("Inject",t=>({token:t})),ct=lt("Optional"),ut=lt("Self"),dt=lt("SkipSelf");var pt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function mt(t){for(let e in t)if(t[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gt(t){const e=t[yt];return e&&e.token===t?e:null}const yt=mt({ngInjectableDef:mt});function bt(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const vt=mt({__forward_ref__:mt});function Ct(t){return t.__forward_ref__=Ct,t.toString=function(){return bt(this())},t}function St(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(vt)&&e.__forward_ref__===Ct?e():t}const xt="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,kt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt="undefined"!=typeof global&&global,Tt=xt||wt||_t||kt;class It{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=ft({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const At=new It("INJECTOR",-1),Pt=new Object,Mt="ngTempTokenPath",Et="ngTokenPath",Dt=/\n/gm,Ft="\u0275",Lt="__source",Rt=mt({provide:String,useValue:mt});let Bt,Nt=void 0;function Ot(t){const e=Nt;return Nt=t,e}function Vt(t,e=pt.Default){if(void 0===Nt)throw new Error("inject() must be called from an injection context");return null===Nt?function(t,e,n){const i=gt(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&pt.Optional)return null;throw new Error(`Injector: NOT_FOUND [${bt(t)}]`)}(t,0,e):Nt.get(t,e&pt.Optional?null:void 0,e)}function Wt(t,e=pt.Default){return(Bt||Vt)(t,e)}const Ht=Wt;class Gt{get(t,e=Pt){if(e===Pt){const e=new Error(`NullInjectorError: No provider for ${bt(t)}!`);throw e.name="NullInjectorError",e}return e}}function zt(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==Ft?t.substr(2):t;let r=bt(e);if(e instanceof Array)r=e.map(bt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):bt(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Dt,"\n  ")}`}class Ut{}class Yt{}function Xt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function qt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const jt=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),Kt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Tt))(),$t="ngDebugContext",Qt="ngOriginalError",Jt="ngErrorLogger";function Zt(t){return t[$t]}function te(t){return t[Qt]}function ee(t,...e){t.error(...e)}class ne{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t[Jt]||ee}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Zt(t)?Zt(t):this._findContext(te(t)):null}_findOriginalError(t){let e=te(t);for(;e&&te(e);)e=te(e);return e}}let ie=!0,re=!1;function oe(){return re=!0,ie}class se{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(i){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const ae=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,le=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function he(t){return(t=String(t)).match(ae)||t.match(le)?t:(oe()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function ce(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ue(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const de=ce("area,br,col,hr,img,wbr"),pe=ce("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),me=ce("rp,rt"),fe=ue(me,pe),ge=ue(de,ue(pe,ce("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ue(me,ce("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fe),ye=ce("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),be=ce("srcset"),ve=ue(ye,be,ce("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ce("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ce=ce("script,style,template");class Se{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ge.hasOwnProperty(e))return this.sanitizedSomething=!0,!Ce.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,o=e.toLowerCase();if(!ve.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;ye[o]&&(s=he(s)),be[o]&&(i=s,s=(i=String(i)).split(",").map(t=>he(t.trim())).join(", ")),this.buf.push(" ",e,'="',ke(s),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ge.hasOwnProperty(e)&&!de.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ke(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const xe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_e=/([^\#-~ |!])/g;function ke(t){return t.replace(/&/g,"&amp;").replace(xe,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(_e,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let we;function Te(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Ie=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class Ae{}const Pe=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),Me=/^url\(([^)]+)\)$/,Ee=/([A-Z])/g;function De(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}let Fe=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Le(),t})();const Le=(...t)=>{},Re=new It("The presence of this token marks an injector as being the root injector."),Be=function(t,e,n){return new ze(t,e,n)};let Ne=(()=>{class t{static create(t,e){return Array.isArray(t)?Be(t,e,""):Be(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Pt,t.NULL=new Gt,t.ngInjectableDef=ft({token:t,providedIn:"any",factory:()=>Wt(At)}),t.__NG_ELEMENT_ID__=-1,t})();const Oe=function(t){return t},Ve=[],We=Oe,He=function(){return Array.prototype.slice.call(arguments)},Ge="\u0275";class ze{constructor(t,e=Ne.NULL,n=null){this.parent=e,this.source=n;const i=this._records=new Map;i.set(Ne,{token:Ne,fn:Oe,deps:Ve,value:this,useNew:!1}),i.set(At,{token:At,fn:Oe,deps:Ve,value:this,useNew:!1}),function t(e,n){if(n)if((n=St(n))instanceof Array)for(let i=0;i<n.length;i++)t(e,n[i]);else{if("function"==typeof n)throw Ye("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw Ye("Unexpected provider",n);{let t=St(n.provide);const i=function(t){const e=function(t){let e=Ve;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let i=6,r=St(n[t]);if(r instanceof Array)for(let t=0,e=r;t<e.length;t++){const n=e[t];n instanceof ct||n==ct?i|=1:n instanceof dt||n==dt?i&=-3:n instanceof ut||n==ut?i&=-5:r=n instanceof ht?n.token:St(n)}e.push({token:r,options:i})}}else if(t.useExisting)e=[{token:St(t.useExisting),options:6}];else if(!(n||Rt in t))throw Ye("'deps' required",t);return e}(t);let n=Oe,i=Ve,r=!1,o=St(t.provide);if(Rt in t)i=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)r=!0,n=St(t.useClass);else{if("function"!=typeof o)throw Ye("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);r=!0,n=o}return{deps:e,fn:n,useNew:r,value:i}}(n);if(!0===n.multi){let i=e.get(t);if(i){if(i.fn!==He)throw Ue(t)}else e.set(t,i={token:n.provide,deps:[],useNew:!1,fn:He,value:Ve});i.deps.push({token:t=n,options:6})}const r=e.get(t);if(r&&r.fn==He)throw Ue(t);e.set(t,i)}}}(i,t)}get(t,e,n=pt.Default){const i=this._records.get(t);try{return function t(e,n,i,r,o,s){try{return function(e,n,i,r,o,s){let a;if(!n||s&pt.SkipSelf)s&pt.Self||(a=r.get(e,o,pt.Default));else{if((a=n.value)==We)throw Error(Ge+"Circular dependency");if(a===Ve){n.value=We;let e=void 0,o=n.useNew,s=n.fn,l=n.deps,h=Ve;if(l.length){h=[];for(let e=0;e<l.length;e++){const n=l[e],o=n.options,s=2&o?i.get(n.token):void 0;h.push(t(n.token,s,i,s||4&o?r:Ne.NULL,1&o?null:Ne.THROW_IF_NOT_FOUND,pt.Default))}}n.value=a=o?new s(...h):s.apply(e,h)}}return a}(e,n,i,r,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a[Mt]=a[Mt]||[]).unshift(e),n&&n.value==We&&(n.value=Ve),a}}(t,i,this._records,this.parent,e,n)}catch(r){return function(t,e,n,i){const r=t[Mt];throw e[Lt]&&r.unshift(e[Lt]),t.message=zt("\n"+t.message,r,"StaticInjectorError",i),t[Et]=r,t[Mt]=null,t}(r,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(bt(n))),`StaticInjector[${t.join(", ")}]`}}function Ue(t){return Ye("Cannot mix multi providers and regular providers",t)}function Ye(t,e){return new Error(zt(t,e,"StaticInjectorError"))}const Xe=new It("AnalyzeForEntryComponents");let qe=null;function je(){if(!qe){const t=Tt.Symbol;if(t&&t.iterator)qe=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(qe=n)}}}return qe}function Ke(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function $e(t,e){const n=Je(t),i=Je(e);if(n&&i)return function(t,e,n){const i=t[je()](),r=e[je()]();for(;;){const t=i.next(),e=r.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,$e);{const r=t&&("object"==typeof t||"function"==typeof t),o=e&&("object"==typeof e||"function"==typeof e);return!(n||!r||i||!o)||Ke(t,e)}}class Qe{constructor(t){this.wrapped=t}static wrap(t){return new Qe(t)}static unwrap(t){return Qe.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Qe}}function Je(t){return!!Ze(t)&&(Array.isArray(t)||!(t instanceof Map)&&je()in t)}function Ze(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function tn(t){return!!t&&"function"==typeof t.then}function en(t){return!!t&&"function"==typeof t.subscribe}class nn{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class rn{}class on{}function sn(t){const e=Error(`No component factory found for ${bt(t)}. Did you add it to @NgModule.entryComponents?`);return e[an]=t,e}const an="ngComponent";class ln{resolveComponentFactory(t){throw sn(t)}}let hn=(()=>{class t{}return t.NULL=new ln,t})();class cn{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let i=0;i<t.length;i++){const e=t[i];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw sn(t);return new un(e,this._ngModule)}}class un extends on{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,i){return this.factory.create(t,e,n,i||this.ngModule)}}function dn(...t){}let pn=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>mn(t),t})();const mn=dn;class fn{}class gn{}const yn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let bn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>vn(),t})();const vn=dn;class Cn{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Sn=new Cn("8.2.14");class xn{constructor(){}supports(t){return Je(t)}create(t){return new kn(t)}}const _n=(t,e)=>e;class kn{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_n}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const o=!n||e&&e.currentIndex<An(n,i,r)?e:n,s=An(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);const t=s-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,o=i+n;e<=o&&o<t&&(r[n]=i+1)}r[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Je(t))throw new Error(`Error trying to diff '${bt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)i=this._trackByFn(e,n=t[e]),null!==r&&Ke(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,n,i,e)),Ke(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),o=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[je()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Ke(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,t,i,e)),Ke(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Ke(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Ke(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new wn(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new In),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new In),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class wn{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Tn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Ke(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class In{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Tn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function An(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class Pn{constructor(){}supports(t){return t instanceof Map||Ze(t)}create(){return new Mn}}class Mn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ze(t)))throw new Error(`Error trying to diff '${bt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new En(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Ke(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class En{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Dn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new dt,new ct]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=ft({token:t,providedIn:"root",factory:()=>new t([new xn])}),t})(),Fn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new dt,new ct]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=ft({token:t,providedIn:"root",factory:()=>new t([new Pn])}),t})();const Ln=[new Pn],Rn=new Dn([new xn]),Bn=new Fn(Ln);let Nn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>On(t,pn),t})();const On=dn;let Vn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Wn(t,pn),t})();const Wn=dn;function Hn(t,e,n,i){let r=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return i&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Gn(n,e),n}(r,t)}function Gn(t,e){t[$t]=e,t[Jt]=e.logError.bind(e)}function zn(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function Un(t,e,n){const i=t.state,r=1792&i;return r===e?(t.state=-1793&i|n,t.initIndex=-1,!0):r===n}function Yn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Xn(t,e){return t.nodes[e]}function qn(t,e){return t.nodes[e]}function jn(t,e){return t.nodes[e]}function Kn(t,e){return t.nodes[e]}function $n(t,e){return t.nodes[e]}const Qn={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Jn=()=>{},Zn=new Map;function ti(t){let e=Zn.get(t);return e||(e=bt(t)+"_"+Zn.size,Zn.set(t,e)),e}function ei(t,e,n,i){if(Qe.isWrapped(i)){i=Qe.unwrap(i);const r=t.def.nodes[e].bindingIndex+n,o=Qe.unwrap(t.oldValues[r]);t.oldValues[r]=new Qe(o)}return i}const ni="$$undefined",ii="$$empty";function ri(t){return{id:ni,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let oi=0;function si(t,e,n,i){return!(!(2&t.state)&&Ke(t.oldValues[e.bindingIndex+n],i))}function ai(t,e,n,i){return!!si(t,e,n,i)&&(t.oldValues[e.bindingIndex+n]=i,!0)}function li(t,e,n,i){const r=t.oldValues[e.bindingIndex+n];if(1&t.state||!$e(r,i)){const o=e.bindings[n].name;throw Hn(Qn.createDebugContext(t,e.nodeIndex),`${o}: ${r}`,`${o}: ${i}`,0!=(1&t.state))}}function hi(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function ci(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function ui(t,e,n,i){try{return hi(33554432&t.def.nodes[e].flags?qn(t,e).componentView:t),Qn.handleEvent(t,e,n,i)}catch(r){t.root.errorHandler.handleError(r)}}function di(t){return t.parent?qn(t.parent,t.parentNodeDef.nodeIndex):null}function pi(t){return t.parent?t.parentNodeDef.parent:null}function mi(t,e){switch(201347067&e.flags){case 1:return qn(t,e.nodeIndex).renderElement;case 2:return Xn(t,e.nodeIndex).renderText}}function fi(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function gi(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function yi(t){return 1<<t%32}function bi(t){const e={};let n=0;const i={};return t&&t.forEach(([t,r])=>{"number"==typeof t?(e[t]=r,n|=yi(t)):i[t]=r}),{matchedQueries:e,references:i,matchedQueryIds:n}}function vi(t,e){return t.map(t=>{let n,i;return Array.isArray(t)?[i,n]=t:(i=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,Lt,{value:e,configurable:!0}),{flags:i,token:n,tokenKey:ti(n)}})}function Ci(t,e,n){let i=n.renderParent;return i?0==(1&i.flags)||0==(33554432&i.flags)||i.element.componentRendererType&&i.element.componentRendererType.encapsulation===jt.Native?qn(t,n.renderParent.nodeIndex).renderElement:void 0:e}const Si=new WeakMap;function xi(t){let e=Si.get(t);return e||((e=t(()=>Jn)).factory=t,Si.set(t,e)),e}function _i(t,e,n,i,r){3===e&&(n=t.renderer.parentNode(mi(t,t.def.lastRenderRootNode))),ki(t,e,0,t.def.nodes.length-1,n,i,r)}function ki(t,e,n,i,r,o,s){for(let a=n;a<=i;a++){const n=t.def.nodes[a];11&n.flags&&Ti(t,n,e,r,o,s),a+=n.childCount}}function wi(t,e,n,i,r,o){let s=t;for(;s&&!fi(s);)s=s.parent;const a=s.parent,l=pi(s),h=l.nodeIndex+l.childCount;for(let c=l.nodeIndex+1;c<=h;c++){const t=a.def.nodes[c];t.ngContentIndex===e&&Ti(a,t,n,i,r,o),c+=t.childCount}if(!a.parent){const s=t.root.projectableNodes[e];if(s)for(let e=0;e<s.length;e++)Ii(t,s[e],n,i,r,o)}}function Ti(t,e,n,i,r,o){if(8&e.flags)wi(t,e.ngContent.index,n,i,r,o);else{const s=mi(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Ii(t,s,n,i,r,o),32&e.bindingFlags&&Ii(qn(t,e.nodeIndex).componentView,s,n,i,r,o)):Ii(t,s,n,i,r,o),16777216&e.flags){const s=qn(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<s.length;t++)_i(s[t],n,i,r,o)}1&e.flags&&!e.element.name&&ki(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,i,r,o)}}function Ii(t,e,n,i,r,o){const s=t.renderer;switch(n){case 1:s.appendChild(i,e);break;case 2:s.insertBefore(i,e,r);break;case 3:s.removeChild(i,e);break;case 0:o.push(e)}}const Ai=/^:([^:]+):(.+)$/;function Pi(t){if(":"===t[0]){const e=t.match(Ai);return[e[1],e[2]]}return["",t]}function Mi(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}function Ei(t,e,n,i,r,o,s,a,l,h,c,u,d,p,m,f,g,y,b,v){switch(t){case 1:return e+Di(n)+i;case 2:return e+Di(n)+i+Di(r)+o;case 3:return e+Di(n)+i+Di(r)+o+Di(s)+a;case 4:return e+Di(n)+i+Di(r)+o+Di(s)+a+Di(l)+h;case 5:return e+Di(n)+i+Di(r)+o+Di(s)+a+Di(l)+h+Di(c)+u;case 6:return e+Di(n)+i+Di(r)+o+Di(s)+a+Di(l)+h+Di(c)+u+Di(d)+p;case 7:return e+Di(n)+i+Di(r)+o+Di(s)+a+Di(l)+h+Di(c)+u+Di(d)+p+Di(m)+f;case 8:return e+Di(n)+i+Di(r)+o+Di(s)+a+Di(l)+h+Di(c)+u+Di(d)+p+Di(m)+f+Di(g)+y;case 9:return e+Di(n)+i+Di(r)+o+Di(s)+a+Di(l)+h+Di(c)+u+Di(d)+p+Di(m)+f+Di(g)+y+Di(b)+v;default:throw new Error("Does not support more than 9 expressions")}}function Di(t){return null!=t?t.toString():""}const Fi=new Object,Li=ti(Ne),Ri=ti(At),Bi=ti(Ut);function Ni(t,e,n,i){return n=St(n),{index:-1,deps:vi(i,bt(e)),flags:t,token:e,value:n}}function Oi(t,e,n=Ne.THROW_IF_NOT_FOUND){const i=Ot(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const s=e.tokenKey;switch(s){case Li:case Ri:case Bi:return t}const a=t._def.providersByKey[s];let l;if(a){let e=t._providers[a.index];return void 0===e&&(e=t._providers[a.index]=Vi(t,a)),e===Fi?void 0:e}if((l=gt(e.token))&&(r=t,null!=(o=l).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(r,o.providedIn)||"root"===o.providedIn&&r._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:l.factory,deps:[],index:n,token:e.token},t._providers[n]=Fi,t._providers[n]=Vi(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{Ot(i)}var r,o}function Vi(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const i=n.length;switch(i){case 0:return new e;case 1:return new e(Oi(t,n[0]));case 2:return new e(Oi(t,n[0]),Oi(t,n[1]));case 3:return new e(Oi(t,n[0]),Oi(t,n[1]),Oi(t,n[2]));default:const r=new Array(i);for(let e=0;e<i;e++)r[e]=Oi(t,n[e]);return new e(...r)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const i=n.length;switch(i){case 0:return e();case 1:return e(Oi(t,n[0]));case 2:return e(Oi(t,n[0]),Oi(t,n[1]));case 3:return e(Oi(t,n[0]),Oi(t,n[1]),Oi(t,n[2]));default:const r=Array(i);for(let e=0;e<i;e++)r[e]=Oi(t,n[e]);return e(...r)}}(t,e.value,e.deps);break;case 2048:n=Oi(t,e.deps[0]);break;case 256:n=e.value}return n===Fi||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Fi:n}function Wi(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const i=n[e];return i.viewContainerParent=null,qt(n,e),Qn.dirtyParentQueries(i),Gi(i),i}function Hi(t,e,n){const i=e?mi(e,e.def.lastRenderRootNode):t.renderElement,r=n.renderer.parentNode(i),o=n.renderer.nextSibling(i);_i(n,2,r,o,void 0)}function Gi(t){_i(t,3,null,null,void 0)}const zi=new Object;function Ui(t,e,n,i,r,o){return new Yi(t,e,n,i,r,o)}class Yi extends on{constructor(t,e,n,i,r,o){super(),this.selector=t,this.componentType=e,this._inputs=i,this._outputs=r,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,i){if(!i)throw new Error("ngModule should be provided");const r=xi(this.viewDefFactory),o=r.nodes[0].element.componentProvider.nodeIndex,s=Qn.createRootView(t,e||[],n,r,i,zi),a=jn(s,o).instance;return n&&s.renderer.setAttribute(qn(s,0).renderElement,"ng-version",Sn.full),new Xi(s,new $i(s),a)}}class Xi extends rn{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new pn(qn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new tr(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function qi(t,e,n){return new ji(t,e,n)}class ji{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new pn(this._data.renderElement)}get injector(){return new tr(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=pi(t),t=t.parent;return t?new tr(t,e):new tr(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Wi(this._data,t);Qn.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new $i(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const o=n||this.parentInjector;r||t instanceof un||(r=o.get(Ut));const s=t.create(o,i,void 0,r);return this.insert(s.hostView,e),s}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,i){let r=e.viewContainer._embeddedViews;null==n&&(n=r.length),i.viewContainerParent=t,Xt(r,n,i),function(t,e){const n=di(e);if(!n||n===t||16&e.state)return;e.state|=16;let i=n.template._projectedViews;i||(i=n.template._projectedViews=[]),i.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,i),Qn.dirtyParentQueries(i),Hi(e,n>0?r[n-1]:null,i)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,n){const i=t.viewContainer._embeddedViews,r=i[e];qt(i,e),null==n&&(n=i.length),Xt(i,n,r),Qn.dirtyParentQueries(r),Gi(r),Hi(t,n>0?i[n-1]:null,r)}(this._data,n,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Wi(this._data,t);e&&Qn.destroyView(e)}detach(t){const e=Wi(this._data,t);return e?new $i(e):null}}function Ki(t){return new $i(t)}class $i{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return _i(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){hi(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Qn.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Qn.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Qn.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Gi(this._view),Qn.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Qi(t,e){return new Ji(t,e)}class Ji extends Nn{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new $i(Qn.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new pn(qn(this._parentView,this._def.nodeIndex).renderElement)}}function Zi(t,e){return new tr(t,e)}class tr{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Ne.THROW_IF_NOT_FOUND){return Qn.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:ti(t)},e)}}function er(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=qn(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return Xn(t,n.nodeIndex).renderText;if(20240&n.flags)return jn(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function nr(t){return new ir(t.renderer)}class ir{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,i]=Pi(e),r=this.delegate.createElement(i,n);return t&&this.delegate.appendChild(t,r),r}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),i=this.delegate.nextSibling(t);for(let r=0;r<e.length;r++)this.delegate.insertBefore(n,e[r],i)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],i=this.delegate.parentNode(n);this.delegate.removeChild(i,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[i,r]=Pi(e);null!=n?this.delegate.setAttribute(t,r,n,i):this.delegate.removeAttribute(t,r,i)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function rr(t,e,n,i){return new or(t,e,n,i)}class or{constructor(t,e,n,i){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=i,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let i=0;i<e.providers.length;i++){const r=e.providers[i];4096&r.flags||void 0===n[i]&&(n[i]=Vi(t,r))}}(this)}get(t,e=Ne.THROW_IF_NOT_FOUND,n=pt.Default){let i=0;return n&pt.SkipSelf?i|=1:n&pt.Self&&(i|=4),Oi(this,{token:t,tokenKey:ti(t),flags:i},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(hn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${bt(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,i=new Set;for(let r=0;r<n.providers.length;r++)if(131072&n.providers[r].flags){const e=t._providers[r];if(e&&e!==Fi){const t=e.ngOnDestroy;"function"!=typeof t||i.has(e)||(t.apply(e),i.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const sr=ti(fn),ar=ti(bn),lr=ti(pn),hr=ti(Vn),cr=ti(Nn),ur=ti(Fe),dr=ti(Ne),pr=ti(At);function mr(t,e,n,i,r,o,s,a){const l=[];if(s)for(let c in s){const[t,e]=s[c];l[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const h=[];if(a)for(let c in a)h.push({type:1,propName:c,target:null,eventName:a[c]});return yr(t,e|=16384,n,i,r,r,o,l,h)}function fr(t,e,n){return yr(-1,t|=16,null,0,e,e,n)}function gr(t,e,n,i,r){return yr(-1,t,e,0,n,i,r)}function yr(t,e,n,i,r,o,s,a,l){const{matchedQueries:h,references:c,matchedQueryIds:u}=bi(n);l||(l=[]),a||(a=[]),o=St(o);const d=vi(s,bt(r));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:h,matchedQueryIds:u,references:c,ngContentIndex:-1,childCount:i,bindings:a,bindingFlags:Mi(a),outputs:l,element:null,provider:{token:r,value:o,deps:d},text:null,query:null,ngContent:null}}function br(t,e){return xr(t,e)}function vr(t,e){let n=t;for(;n.parent&&!fi(n);)n=n.parent;return _r(n.parent,pi(n),!0,e.provider.value,e.provider.deps)}function Cr(t,e){const n=_r(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let i=0;i<e.outputs.length;i++){const r=e.outputs[i],o=n[r.propName];if(!en(o))throw new Error(`@Output ${r.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(Sr(t,e.parent.nodeIndex,r.eventName));t.disposables[e.outputIndex+i]=n.unsubscribe.bind(n)}}return n}function Sr(t,e,n){return i=>ui(t,e,n,i)}function xr(t,e){const n=(8192&e.flags)>0,i=e.provider;switch(201347067&e.flags){case 512:return _r(t,e.parent,n,i.value,i.deps);case 1024:return function(t,e,n,i,r){const o=r.length;switch(o){case 0:return i();case 1:return i(wr(t,e,n,r[0]));case 2:return i(wr(t,e,n,r[0]),wr(t,e,n,r[1]));case 3:return i(wr(t,e,n,r[0]),wr(t,e,n,r[1]),wr(t,e,n,r[2]));default:const s=Array(o);for(let i=0;i<o;i++)s[i]=wr(t,e,n,r[i]);return i(...s)}}(t,e.parent,n,i.value,i.deps);case 2048:return wr(t,e.parent,n,i.deps[0]);case 256:return i.value}}function _r(t,e,n,i,r){const o=r.length;switch(o){case 0:return new i;case 1:return new i(wr(t,e,n,r[0]));case 2:return new i(wr(t,e,n,r[0]),wr(t,e,n,r[1]));case 3:return new i(wr(t,e,n,r[0]),wr(t,e,n,r[1]),wr(t,e,n,r[2]));default:const s=new Array(o);for(let i=0;i<o;i++)s[i]=wr(t,e,n,r[i]);return new i(...s)}}const kr={};function wr(t,e,n,i,r=Ne.THROW_IF_NOT_FOUND){if(8&i.flags)return i.token;const o=t;2&i.flags&&(r=null);const s=i.tokenKey;s===ur&&(n=!(!e||!e.element.componentView)),e&&1&i.flags&&(n=!1,e=e.parent);let a=t;for(;a;){if(e)switch(s){case sr:return nr(Tr(a,e,n));case ar:return Tr(a,e,n).renderer;case lr:return new pn(qn(a,e.nodeIndex).renderElement);case hr:return qn(a,e.nodeIndex).viewContainer;case cr:if(e.element.template)return qn(a,e.nodeIndex).template;break;case ur:return Ki(Tr(a,e,n));case dr:case pr:return Zi(a,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[s];if(t){let e=jn(a,t.nodeIndex);return e||(e={instance:xr(a,t)},a.nodes[t.nodeIndex]=e),e.instance}}n=fi(a),e=pi(a),a=a.parent,4&i.flags&&(a=null)}const l=o.root.injector.get(i.token,kr);return l!==kr||r===kr?l:o.root.ngModule.injector.get(i.token,r)}function Tr(t,e,n){let i;if(n)i=qn(t,e.nodeIndex).componentView;else for(i=t;i.parent&&!fi(i);)i=i.parent;return i}function Ir(t,e,n,i,r,o){if(32768&n.flags){const e=qn(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[i].name]=r,524288&n.flags){o=o||{};const e=Qe.unwrap(t.oldValues[n.bindingIndex+i]);o[n.bindings[i].nonMinifiedName]=new nn(e,r,0!=(2&t.state))}return t.oldValues[n.bindingIndex+i]=r,o}function Ar(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let i=0;for(let r=0;r<n.length;r++){const o=n[r];let s=o.parent;for(!s&&o.flags&e&&Mr(t,r,o.flags&e,i++),0==(o.childFlags&e)&&(r+=o.childCount);s&&1&s.flags&&r===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(i=Pr(t,s,e,i)),s=s.parent}}function Pr(t,e,n,i){for(let r=e.nodeIndex+1;r<=e.nodeIndex+e.childCount;r++){const e=t.def.nodes[r];e.flags&n&&Mr(t,r,e.flags&n,i++),r+=e.childCount}return i}function Mr(t,e,n,i){const r=jn(t,e);if(!r)return;const o=r.instance;o&&(Qn.setCurrentNode(t,e),1048576&n&&Yn(t,512,i)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Yn(t,768,i)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const Er=new It("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Kt}),Dr={},Fr=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Lr=void 0;var Rr=["en",[["a","p"],["AM","PM"],Lr],[["AM","PM"],Lr,Lr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lr,"{1} 'at' {0}",Lr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];const Br="en-US";let Nr=Br;function Or(t){var e;e="Expected localeId to be defined",null==t&&function(t){throw new Error(`ASSERTION ERROR: ${t}`)}(e),"string"==typeof t&&(Nr=t.toLowerCase().replace(/_/g,"-"))}class Vr extends I{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,o=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(i,r,o);return t instanceof d&&t.add(s),s}}function Wr(){return this._results[je()]()}class Hr{constructor(){this.dirty=!0,this._results=[],this.changes=new Vr,this.length=0;const t=je(),e=Hr.prototype;e[t]||(e[t]=Wr)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Gr=new It("Application Initializer");class zr{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();tn(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const Ur=new It("AppId");function Yr(){return`${Xr()}${Xr()}${Xr()}`}function Xr(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qr=new It("Platform Initializer"),jr=new It("Platform ID"),Kr=new It("appBootstrapListener");class $r{log(t){console.log(t)}warn(t){console.warn(t)}}const Qr=new It("LocaleId"),Jr=!1;function Zr(){throw new Error("Runtime compiler is not loaded")}const to=Zr,eo=Zr,no=Zr,io=Zr;class ro{constructor(){this.compileModuleSync=to,this.compileModuleAsync=eo,this.compileModuleAndAllComponentsSync=no,this.compileModuleAndAllComponentsAsync=io}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class oo{}let so,ao;function lo(){const t=Tt.wtf;return!(!t||!(so=t.trace)||(ao=so.events,0))}const ho=lo();function co(t,e){return null}const uo=ho?function(t,e=null){return ao.createScope(t,e)}:(t,e)=>co,po=ho?function(t,e){return so.leaveScope(t,e),e}:(t,e)=>e,mo=(()=>Promise.resolve(0))();function fo(t){"undefined"==typeof Zone?mo.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class go{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vr(!1),this.onMicrotaskEmpty=new Vr(!1),this.onStable=new Vr(!1),this.onError=new Vr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,i,r,o,s)=>{try{return Co(e),t.invokeTask(i,r,o,s)}finally{So(e)}},onInvoke:(t,n,i,r,o,s,a)=>{try{return Co(e),t.invoke(i,r,o,s,a)}finally{So(e)}},onHasTask:(t,n,i,r)=>{t.hasTask(i,r),n===i&&("microTask"==r.change?(e.hasPendingMicrotasks=r.microTask,vo(e)):"macroTask"==r.change&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(t,n,i,r)=>(t.handleError(i,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!go.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(go.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,bo,yo,yo);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function yo(){}const bo={};function vo(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Co(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function So(t){t._nesting--,vo(t)}class xo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vr,this.onMicrotaskEmpty=new Vr,this.onStable=new Vr,this.onError=new Vr}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class _o{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{go.assertNotInAngularZone(),fo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fo(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class ko{constructor(){this._applications=new Map,Io.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Io.findTestabilityInTree(this,t,e)}}class wo{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let To,Io=new wo,Ao=function(t,e,n){return t.get(oo).createCompiler([e]).compileModuleAsync(n)},Po=function(t){return t instanceof un};const Mo=new It("AllowMultipleToken");class Eo{constructor(t,e){this.name=t,this.token=e}}function Do(t,e,n=[]){const i=`Platform: ${e}`,r=new It(i);return(e=[])=>{let o=Fo();if(!o||o.injector.get(Mo,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0});!function(t){if(To&&!To.destroyed&&!To.injector.get(Mo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");To=t.get(Lo);const e=t.get(qr,null);e&&e.forEach(t=>t())}(Ne.create({providers:t,name:i}))}return function(t){const e=Fo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function Fo(){return To&&!To.destroyed?To:null}class Lo{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(r=e?e.ngZone:void 0)?new xo:("zone.js"===r?void 0:r)||new go({enableLongStackTrace:oe()}),i=[{provide:go,useValue:n}];var r;return n.run(()=>{const e=Ne.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),o=r.injector.get(ne,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return Jr&&Or(r.injector.get(Qr,Br)||Br),r.onDestroy(()=>No(this._modules,r)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const i=n();return tn(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,n,()=>{const t=r.injector.get(zr);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=Ro({},e);return Ao(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Bo);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${bt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Ro(t,e){return Array.isArray(e)?e.reduce(Ro,t):Object.assign({},t,e)}let Bo=(()=>{class t{constructor(t,e,n,i,r,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=oe(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new S(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new S(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{go.assertNotInAngularZone(),fo(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{go.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=J(s,a.pipe(st()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof on?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=Po(n)?null:this._injector.get(Ut),r=n.create(Ne.NULL,[],e||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const o=r.injector.get(_o,null);return o&&r.injector.get(ko).registerApplication(r.location.nativeElement,o),this._loadComponent(r),oe()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,po(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;No(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Kr,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),No(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=uo("ApplicationRef#tick()"),t})();function No(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Oo{}const Vo="#",Wo="NgFactory";class Ho{}const Go={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class zo{constructor(t,e){this._compiler=t,this._config=e||Go}load(t){return!Jr&&this._compiler instanceof ro?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split(Vo);return void 0===i&&(i="default"),n("zn8P")(e).then(t=>t[i]).then(t=>Uo(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split(Vo),r=Wo;return void 0===i&&(i="default",r=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>Uo(t,e,i))}}function Uo(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class Yo{constructor(t,e){this.name=t,this.callback=e}}class Xo{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof qo&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class qo extends Xo{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,i){e.childNodes.forEach(e=>{e instanceof qo&&(n(e)&&i.push(e),t(e,n,i))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,i){e instanceof qo&&e.childNodes.forEach(e=>{n(e)&&i.push(e),e instanceof qo&&t(e,n,i)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof qo)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const jo=new Map,Ko=function(t){return jo.get(t)||null};function $o(t){jo.set(t.nativeNode,t)}const Qo=Do(null,"core",[{provide:jr,useValue:"unknown"},{provide:Lo,deps:[Ne]},{provide:ko,deps:[]},{provide:$r,deps:[]}]);function Jo(){return Rn}function Zo(){return Bn}function ts(t){return t?(Jr&&Or(t),t):Br}function es(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class ns{constructor(t){}}function is(t,e,n,i,r,o){t|=1;const{matchedQueries:s,references:a,matchedQueryIds:l}=bi(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:l,references:a,ngContentIndex:n,childCount:i,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?xi(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:r||Jn},provider:null,text:null,query:null,ngContent:null}}function rs(t,e,n,i,r,o,s=[],a,l,h,c,u){h||(h=Jn);const{matchedQueries:d,references:p,matchedQueryIds:m}=bi(n);let f=null,g=null;o&&([f,g]=Pi(o)),a=a||[];const y=new Array(a.length);for(let C=0;C<a.length;C++){const[t,e,n]=a[C],[i,r]=Pi(e);let o=void 0,s=void 0;switch(15&t){case 4:s=n;break;case 1:case 8:o=n}y[C]={flags:t,ns:i,name:r,nonMinifiedName:r,securityContext:o,suffix:s}}l=l||[];const b=new Array(l.length);for(let C=0;C<l.length;C++){const[t,e]=l[C];b[C]={type:0,target:t,eventName:e,propName:null}}const v=(s=s||[]).map(([t,e])=>{const[n,i]=Pi(t);return[n,i,e]});return u=function(t){if(t&&t.id===ni){const e=null!=t.encapsulation&&t.encapsulation!==jt.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${oi++}`:ii}return t&&t.id===ii&&(t=null),t||null}(u),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:m,references:p,ngContentIndex:i,childCount:r,bindings:y,bindingFlags:Mi(y),outputs:b,element:{ns:f,name:g,attrs:v,template:null,componentProvider:null,componentView:c||null,componentRendererType:u,publicProviders:null,allProviders:null,handleEvent:h||Jn},provider:null,text:null,query:null,ngContent:null}}function os(t,e,n){const i=n.element,r=t.root.selectorOrNode,o=t.renderer;let s;if(t.parent||!r){s=i.name?o.createElement(i.name,i.ns):o.createComment("");const r=Ci(t,e,n);r&&o.appendChild(r,s)}else s=o.selectRootElement(r,!!i.componentRendererType&&i.componentRendererType.encapsulation===jt.ShadowDom);if(i.attrs)for(let a=0;a<i.attrs.length;a++){const[t,e,n]=i.attrs[a];o.setAttribute(s,e,n,t)}return s}function ss(t,e,n,i){for(let s=0;s<n.outputs.length;s++){const a=n.outputs[s],l=as(t,n.nodeIndex,(o=a.eventName,(r=a.target)?`${r}:${o}`:o));let h=a.target,c=t;"component"===a.target&&(h=null,c=e);const u=c.renderer.listen(h||i,a.eventName,l);t.disposables[n.outputIndex+s]=u}var r,o}function as(t,e,n){return i=>ui(t,e,n,i)}function ls(t,e,n,i){if(!ai(t,e,n,i))return!1;const r=e.bindings[n],o=qn(t,e.nodeIndex),s=o.renderElement,a=r.name;switch(15&r.flags){case 1:!function(t,e,n,i,r,o){const s=e.securityContext;let a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const l=t.renderer;null!=o?l.setAttribute(n,r,a,i):l.removeAttribute(n,r,i)}(t,r,s,r.ns,a,i);break;case 2:!function(t,e,n,i){const r=t.renderer;i?r.addClass(e,n):r.removeClass(e,n)}(t,s,a,i);break;case 4:!function(t,e,n,i,r){let o=t.root.sanitizer.sanitize(Ie.STYLE,r);if(null!=o){o=o.toString();const t=e.suffix;null!=t&&(o+=t)}else o=null;const s=t.renderer;null!=o?s.setStyle(n,i,o):s.removeStyle(n,i)}(t,r,s,a,i);break;case 8:!function(t,e,n,i,r){const o=e.securityContext;let s=o?t.root.sanitizer.sanitize(o,r):r;t.renderer.setProperty(n,i,s)}(33554432&e.flags&&32&r.flags?o.componentView:t,r,s,a,i)}return!0}function hs(t,e,n){let i=[];for(let r in n)i.push({propName:r,bindingType:n[r]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:yi(e),bindings:i},ngContent:null}}function cs(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&gi(t);){let n=t.parentNodeDef;t=t.parent;const i=n.nodeIndex+n.childCount;for(let r=0;r<=i;r++){const i=t.def.nodes[r];67108864&i.flags&&536870912&i.flags&&(i.query.filterId&e)===i.query.filterId&&$n(t,r).setDirty(),!(1&i.flags&&r+i.childCount<n.nodeIndex)&&67108864&i.childFlags&&536870912&i.childFlags||(r+=i.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&$n(t,n).setDirty(),n+=e.childCount}}function us(t,e){const n=$n(t,e.nodeIndex);if(!n.dirty)return;let i,r=void 0;if(67108864&e.flags){const n=e.parent.parent;r=ds(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),i=jn(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(r=ds(t,0,t.def.nodes.length-1,e.query,[]),i=t.component);n.reset(r);const o=e.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const t=o[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,s=!0}i[t.propName]=e}s&&n.notifyOnChanges()}function ds(t,e,n,i,r){for(let o=e;o<=n;o++){const e=t.def.nodes[o],n=e.matchedQueries[i.id];if(null!=n&&r.push(ps(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&i.filterId)===i.filterId){const n=qn(t,o);if((e.childMatchedQueries&i.filterId)===i.filterId&&(ds(t,o+1,o+e.childCount,i,r),o+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const o=t[e],s=di(o);s&&s===n&&ds(o,0,o.def.nodes.length-1,i,r)}}const s=n.template._projectedViews;if(s)for(let t=0;t<s.length;t++){const e=s[t];ds(e,0,e.def.nodes.length-1,i,r)}}(e.childMatchedQueries&i.filterId)!==i.filterId&&(o+=e.childCount)}return r}function ps(t,e,n){if(null!=n)switch(n){case 1:return qn(t,e.nodeIndex).renderElement;case 0:return new pn(qn(t,e.nodeIndex).renderElement);case 2:return qn(t,e.nodeIndex).template;case 3:return qn(t,e.nodeIndex).viewContainer;case 4:return jn(t,e.nodeIndex).instance}}function ms(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function fs(t,e,n){const i=Ci(t,e,n);i&&wi(t,n.ngContent.index,1,i,null,void 0)}function gs(t,e,n){const i=new Array(n.length-1);for(let r=1;r<n.length;r++)i[r-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[r]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:i,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ys(t,e,n){let i;const r=t.renderer;i=r.createText(n.text.prefix);const o=Ci(t,e,n);return o&&r.appendChild(o,i),{renderText:i}}function bs(t,e){return(null!=t?t.toString():"")+e.suffix}function vs(t,e,n,i){let r=0,o=0,s=0,a=0,l=0,h=null,c=null,u=!1,d=!1,p=null;for(let m=0;m<e.length;m++){const t=e[m];if(t.nodeIndex=m,t.parent=h,t.bindingIndex=r,t.outputIndex=o,t.renderParent=c,s|=t.flags,l|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=h?h.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,u=!1,d=!1,t.element.template&&(l|=t.element.template.nodeMatchedQueries)}if(Ss(h,t,e.length),r+=t.bindings.length,o+=t.outputs.length,!c&&3&t.flags&&(p=t),20224&t.flags){u||(u=!0,h.element.publicProviders=Object.create(h.element.publicProviders),h.element.allProviders=h.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?h.element.publicProviders[ti(t.provider.token)]=t:(d||(d=!0,h.element.allProviders=Object.create(h.element.publicProviders)),h.element.allProviders[ti(t.provider.token)]=t),e&&(h.element.componentProvider=t)}if(h?(h.childFlags|=t.flags,h.directChildFlags|=t.flags,h.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(h.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)h=t,Cs(t)||(c=t);else for(;h&&m===h.nodeIndex+h.childCount;){const t=h.parent;t&&(t.childFlags|=h.childFlags,t.childMatchedQueries|=h.childMatchedQueries),c=(h=t)&&Cs(h)?h.renderParent:h}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:l,flags:t,nodes:e,updateDirectives:n||Jn,updateRenderer:i||Jn,handleEvent:(t,n,i,r)=>e[n].element.handleEvent(t,i,r),bindingCount:r,outputCount:o,lastRenderRootNode:p}}function Cs(t){return 0!=(1&t.flags)&&null===t.element.name}function Ss(t,e,n){const i=e.element&&e.element.template;if(i){if(!i.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(i.lastRenderRootNode&&16777216&i.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const i=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=i&&e.nodeIndex+e.childCount>i)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function xs(t,e,n,i){const r=ws(t.root,t.renderer,t,e,n);return Ts(r,t.component,i),Is(r),r}function _s(t,e,n){const i=ws(t,t.renderer,null,null,e);return Ts(i,n,n),Is(i),i}function ks(t,e,n,i){const r=e.element.componentRendererType;let o;return o=r?t.root.rendererFactory.createRenderer(i,r):t.root.renderer,ws(t.root,o,t,e.element.componentProvider,n)}function ws(t,e,n,i,r){const o=new Array(r.nodes.length),s=r.outputCount?new Array(r.outputCount):null;return{def:r,parent:n,viewContainerParent:null,parentNodeDef:i,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(r.bindingCount),disposables:s,initIndex:-1}}function Ts(t,e,n){t.component=e,t.context=n}function Is(t){let e;fi(t)&&(e=qn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,i=t.nodes;for(let r=0;r<n.nodes.length;r++){const o=n.nodes[r];let s;switch(Qn.setCurrentNode(t,r),201347067&o.flags){case 1:const n=os(t,e,o);let a=void 0;if(33554432&o.flags){const e=xi(o.element.componentView);a=Qn.createComponentView(t,o,e,n)}ss(t,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?Qi(t,o):void 0},16777216&o.flags&&(s.viewContainer=qi(t,o,s));break;case 2:s=ys(t,e,o);break;case 512:case 1024:case 2048:case 256:(s=i[r])||4096&o.flags||(s={instance:br(t,o)});break;case 16:s={instance:vr(t,o)};break;case 16384:(s=i[r])||(s={instance:Cr(t,o)}),32768&o.flags&&Ts(qn(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Hr;break;case 8:fs(t,e,o),s=void 0}i[r]=s}Bs(t,Rs.CreateViewNodes),Ws(t,201326592,268435456,0)}function As(t){Es(t),Qn.updateDirectives(t,1),Ns(t,Rs.CheckNoChanges),Qn.updateRenderer(t,1),Bs(t,Rs.CheckNoChanges),t.state&=-97}function Ps(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Un(t,0,256),Es(t),Qn.updateDirectives(t,0),Ns(t,Rs.CheckAndUpdate),Ws(t,67108864,536870912,0);let e=Un(t,256,512);Ar(t,2097152|(e?1048576:0)),Qn.updateRenderer(t,0),Bs(t,Rs.CheckAndUpdate),Ws(t,134217728,536870912,0),Ar(t,8388608|((e=Un(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Un(t,768,1024)}function Ms(t,e,n,i,r,o,s,a,l,h,c,u,d){return 0===n?function(t,e,n,i,r,o,s,a,l,h,c,u){switch(201347067&e.flags){case 1:return function(t,e,n,i,r,o,s,a,l,h,c,u){const d=e.bindings.length;let p=!1;return d>0&&ls(t,e,0,n)&&(p=!0),d>1&&ls(t,e,1,i)&&(p=!0),d>2&&ls(t,e,2,r)&&(p=!0),d>3&&ls(t,e,3,o)&&(p=!0),d>4&&ls(t,e,4,s)&&(p=!0),d>5&&ls(t,e,5,a)&&(p=!0),d>6&&ls(t,e,6,l)&&(p=!0),d>7&&ls(t,e,7,h)&&(p=!0),d>8&&ls(t,e,8,c)&&(p=!0),d>9&&ls(t,e,9,u)&&(p=!0),p}(t,e,n,i,r,o,s,a,l,h,c,u);case 2:return function(t,e,n,i,r,o,s,a,l,h,c,u){let d=!1;const p=e.bindings,m=p.length;if(m>0&&ai(t,e,0,n)&&(d=!0),m>1&&ai(t,e,1,i)&&(d=!0),m>2&&ai(t,e,2,r)&&(d=!0),m>3&&ai(t,e,3,o)&&(d=!0),m>4&&ai(t,e,4,s)&&(d=!0),m>5&&ai(t,e,5,a)&&(d=!0),m>6&&ai(t,e,6,l)&&(d=!0),m>7&&ai(t,e,7,h)&&(d=!0),m>8&&ai(t,e,8,c)&&(d=!0),m>9&&ai(t,e,9,u)&&(d=!0),d){let d=e.text.prefix;m>0&&(d+=bs(n,p[0])),m>1&&(d+=bs(i,p[1])),m>2&&(d+=bs(r,p[2])),m>3&&(d+=bs(o,p[3])),m>4&&(d+=bs(s,p[4])),m>5&&(d+=bs(a,p[5])),m>6&&(d+=bs(l,p[6])),m>7&&(d+=bs(h,p[7])),m>8&&(d+=bs(c,p[8])),m>9&&(d+=bs(u,p[9]));const f=Xn(t,e.nodeIndex).renderText;t.renderer.setValue(f,d)}return d}(t,e,n,i,r,o,s,a,l,h,c,u);case 16384:return function(t,e,n,i,r,o,s,a,l,h,c,u){const d=jn(t,e.nodeIndex),p=d.instance;let m=!1,f=void 0;const g=e.bindings.length;return g>0&&si(t,e,0,n)&&(m=!0,f=Ir(t,d,e,0,n,f)),g>1&&si(t,e,1,i)&&(m=!0,f=Ir(t,d,e,1,i,f)),g>2&&si(t,e,2,r)&&(m=!0,f=Ir(t,d,e,2,r,f)),g>3&&si(t,e,3,o)&&(m=!0,f=Ir(t,d,e,3,o,f)),g>4&&si(t,e,4,s)&&(m=!0,f=Ir(t,d,e,4,s,f)),g>5&&si(t,e,5,a)&&(m=!0,f=Ir(t,d,e,5,a,f)),g>6&&si(t,e,6,l)&&(m=!0,f=Ir(t,d,e,6,l,f)),g>7&&si(t,e,7,h)&&(m=!0,f=Ir(t,d,e,7,h,f)),g>8&&si(t,e,8,c)&&(m=!0,f=Ir(t,d,e,8,c,f)),g>9&&si(t,e,9,u)&&(m=!0,f=Ir(t,d,e,9,u,f)),f&&p.ngOnChanges(f),65536&e.flags&&Yn(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),m}(t,e,n,i,r,o,s,a,l,h,c,u);case 32:case 64:case 128:return function(t,e,n,i,r,o,s,a,l,h,c,u){const d=e.bindings;let p=!1;const m=d.length;if(m>0&&ai(t,e,0,n)&&(p=!0),m>1&&ai(t,e,1,i)&&(p=!0),m>2&&ai(t,e,2,r)&&(p=!0),m>3&&ai(t,e,3,o)&&(p=!0),m>4&&ai(t,e,4,s)&&(p=!0),m>5&&ai(t,e,5,a)&&(p=!0),m>6&&ai(t,e,6,l)&&(p=!0),m>7&&ai(t,e,7,h)&&(p=!0),m>8&&ai(t,e,8,c)&&(p=!0),m>9&&ai(t,e,9,u)&&(p=!0),p){const p=Kn(t,e.nodeIndex);let f;switch(201347067&e.flags){case 32:f=new Array(d.length),m>0&&(f[0]=n),m>1&&(f[1]=i),m>2&&(f[2]=r),m>3&&(f[3]=o),m>4&&(f[4]=s),m>5&&(f[5]=a),m>6&&(f[6]=l),m>7&&(f[7]=h),m>8&&(f[8]=c),m>9&&(f[9]=u);break;case 64:f={},m>0&&(f[d[0].name]=n),m>1&&(f[d[1].name]=i),m>2&&(f[d[2].name]=r),m>3&&(f[d[3].name]=o),m>4&&(f[d[4].name]=s),m>5&&(f[d[5].name]=a),m>6&&(f[d[6].name]=l),m>7&&(f[d[7].name]=h),m>8&&(f[d[8].name]=c),m>9&&(f[d[9].name]=u);break;case 128:const t=n;switch(m){case 1:f=t.transform(n);break;case 2:f=t.transform(i);break;case 3:f=t.transform(i,r);break;case 4:f=t.transform(i,r,o);break;case 5:f=t.transform(i,r,o,s);break;case 6:f=t.transform(i,r,o,s,a);break;case 7:f=t.transform(i,r,o,s,a,l);break;case 8:f=t.transform(i,r,o,s,a,l,h);break;case 9:f=t.transform(i,r,o,s,a,l,h,c);break;case 10:f=t.transform(i,r,o,s,a,l,h,c,u)}}p.value=f}return p}(t,e,n,i,r,o,s,a,l,h,c,u);default:throw"unreachable"}}(t,e,i,r,o,s,a,l,h,c,u,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let i=!1;for(let r=0;r<n.length;r++)ls(t,e,r,n[r])&&(i=!0);return i}(t,e,n);case 2:return function(t,e,n){const i=e.bindings;let r=!1;for(let o=0;o<n.length;o++)ai(t,e,o,n[o])&&(r=!0);if(r){let r="";for(let t=0;t<n.length;t++)r+=bs(n[t],i[t]);r=e.text.prefix+r;const o=Xn(t,e.nodeIndex).renderText;t.renderer.setValue(o,r)}return r}(t,e,n);case 16384:return function(t,e,n){const i=jn(t,e.nodeIndex),r=i.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)si(t,e,a,n[a])&&(o=!0,s=Ir(t,i,e,a,n[a],s));return s&&r.ngOnChanges(s),65536&e.flags&&Yn(t,256,e.nodeIndex)&&r.ngOnInit(),262144&e.flags&&r.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const i=e.bindings;let r=!1;for(let o=0;o<n.length;o++)ai(t,e,o,n[o])&&(r=!0);if(r){const r=Kn(t,e.nodeIndex);let o;switch(201347067&e.flags){case 32:o=n;break;case 64:o={};for(let r=0;r<n.length;r++)o[i[r].name]=n[r];break;case 128:const t=n[0],e=n.slice(1);o=t.transform(...e)}r.value=o}return r}(t,e,n);default:throw"unreachable"}}(t,e,i)}function Es(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const i=e.nodes[n];if(4&i.flags){const e=qn(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const i=e[n];i.state|=32,ci(i,t)}}else 0==(4&i.childFlags)&&(n+=i.childCount)}}function Ds(t,e,n,i,r,o,s,a,l,h,c,u,d){return 0===n?function(t,e,n,i,r,o,s,a,l,h,c,u){const d=e.bindings.length;d>0&&li(t,e,0,n),d>1&&li(t,e,1,i),d>2&&li(t,e,2,r),d>3&&li(t,e,3,o),d>4&&li(t,e,4,s),d>5&&li(t,e,5,a),d>6&&li(t,e,6,l),d>7&&li(t,e,7,h),d>8&&li(t,e,8,c),d>9&&li(t,e,9,u)}(t,e,i,r,o,s,a,l,h,c,u,d):function(t,e,n){for(let i=0;i<n.length;i++)li(t,e,i,n[i])}(t,e,i),!1}function Fs(t,e){if($n(t,e.nodeIndex).dirty)throw Hn(Qn.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function Ls(t){if(!(128&t.state)){if(Ns(t,Rs.Destroy),Bs(t,Rs.Destroy),Ar(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=di(t);if(e){const n=e.template._projectedViews;n&&(qt(n,n.indexOf(t)),Qn.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(qn(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Xn(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&$n(t,n).destroy()}}(t),fi(t)&&t.renderer.destroy(),t.state|=128}}const Rs=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Bs(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];33554432&r.flags?Os(qn(t,i).componentView,e):0==(33554432&r.childFlags)&&(i+=r.childCount)}}function Ns(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let i=0;i<n.nodes.length;i++){const r=n.nodes[i];if(16777216&r.flags){const n=qn(t,i).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Os(n[t],e)}else 0==(16777216&r.childFlags)&&(i+=r.childCount)}}function Os(t,e){const n=t.state;switch(e){case Rs.CheckNoChanges:0==(128&n)&&(12==(12&n)?As(t):64&n&&Vs(t,Rs.CheckNoChangesProjectedViews));break;case Rs.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?As(t):64&n&&Vs(t,e));break;case Rs.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Ps(t):64&n&&Vs(t,Rs.CheckAndUpdateProjectedViews));break;case Rs.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Ps(t):64&n&&Vs(t,e));break;case Rs.Destroy:Ls(t);break;case Rs.CreateViewNodes:Is(t)}}function Vs(t,e){Ns(t,e),Bs(t,e)}function Ws(t,e,n,i){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const r=t.def.nodes.length;for(let o=0;o<r;o++){const r=t.def.nodes[o];if(r.flags&e&&r.flags&n)switch(Qn.setCurrentNode(t,r.nodeIndex),i){case 0:us(t,r);break;case 1:Fs(t,r)}r.childFlags&e&&r.childFlags&n||(o+=r.childCount)}}let Hs=!1;function Gs(t,e,n,i,r,o){const s=r.injector.get(gn);return _s(Us(t,r,s,e,n),i,o)}function zs(t,e,n,i,r,o){const s=r.injector.get(gn),a=Us(t,r,new xa(s),e,n),l=ta(i);return Ca(sa.create,_s,null,[a,l,o])}function Us(t,e,n,i,r){const o=e.injector.get(Ae),s=e.injector.get(ne),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:i,selectorOrNode:r,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function Ys(t,e,n,i){const r=ta(n);return Ca(sa.create,xs,null,[t,e,r,i])}function Xs(t,e,n,i){return n=$s.get(e.element.componentProvider.provider.token)||ta(n),Ca(sa.create,ks,null,[t,e,n,i])}function qs(t,e,n,i){return rr(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===js.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const i=js.get(t.token);3840&t.flags&&i&&(e=!0,n=n||i.deprecatedBehavior)}),t.modules.forEach(t=>{Ks.forEach((i,r)=>{gt(r).providedIn===t&&(e=!0,n=n||i.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const i=t.providers[e];n&&(i.flags|=4096);const r=js.get(i.token);r&&(i.flags=-3841&i.flags|r.flags,i.deps=vi(r.deps),i.value=r.value)}if(Ks.size>0){let e=new Set(t.modules);Ks.forEach((i,r)=>{if(e.has(gt(r).providedIn)){let e={token:r,flags:i.flags|(n?4096:0),deps:vi(i.deps),value:i.value,index:t.providers.length};t.providers.push(e),t.providersByKey[ti(r)]=e}})}}(t=t.factory(()=>Jn)),t):t}(i))}const js=new Map,Ks=new Map,$s=new Map;function Qs(t){let e;js.set(t.token,t),"function"==typeof t.token&&(e=gt(t.token))&&"function"==typeof e.providedIn&&Ks.set(t.token,t)}function Js(t,e){const n=xi(e.viewDefFactory),i=xi(n.nodes[0].element.componentView);$s.set(t,i)}function Zs(){js.clear(),Ks.clear(),$s.clear()}function ta(t){if(0===js.size)return t;const e=function(t){const e=[];let n=null;for(let i=0;i<t.nodes.length;i++){const r=t.nodes[i];1&r.flags&&(n=r),n&&3840&r.flags&&js.has(r.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Jn);for(let i=0;i<e.length;i++)n(t,e[i]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=js.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=vi(n.deps),t.value=n.value)}}}}function ea(t,e,n,i,r,o,s,a,l,h,c,u,d){const p=t.def.nodes[e];return Ms(t,p,n,i,r,o,s,a,l,h,c,u,d),224&p.flags?Kn(t,e).value:void 0}function na(t,e,n,i,r,o,s,a,l,h,c,u,d){const p=t.def.nodes[e];return Ds(t,p,n,i,r,o,s,a,l,h,c,u,d),224&p.flags?Kn(t,e).value:void 0}function ia(t){return Ca(sa.detectChanges,Ps,null,[t])}function ra(t){return Ca(sa.checkNoChanges,As,null,[t])}function oa(t){return Ca(sa.destroy,Ls,null,[t])}const sa=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let aa,la,ha;function ca(t,e){la=t,ha=e}function ua(t,e,n,i){return ca(t,e),Ca(sa.handleEvent,t.def.handleEvent,null,[t,e,n,i])}function da(t,e){if(128&t.state)throw zn(sa[aa]);return ca(t,ga(t,0)),t.def.updateDirectives((function(t,n,i,...r){const o=t.def.nodes[n];return 0===e?ma(t,o,i,r):fa(t,o,i,r),16384&o.flags&&ca(t,ga(t,n)),224&o.flags?Kn(t,o.nodeIndex).value:void 0}),t)}function pa(t,e){if(128&t.state)throw zn(sa[aa]);return ca(t,ya(t,0)),t.def.updateRenderer((function(t,n,i,...r){const o=t.def.nodes[n];return 0===e?ma(t,o,i,r):fa(t,o,i,r),3&o.flags&&ca(t,ya(t,n)),224&o.flags?Kn(t,o.nodeIndex).value:void 0}),t)}function ma(t,e,n,i){if(Ms(t,e,n,...i)){const s=1===n?i[0]:i;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const i=e.bindings[t],a=s[t];8&i.flags&&(n[(r=i.nonMinifiedName,o=void 0,o=r.replace(/[$@]/g,"_"),`ng-reflect-${r=o.replace(Ee,(...t)=>"-"+t[1].toLowerCase())}`)]=De(a))}const i=e.parent,a=qn(t,i.nodeIndex).renderElement;if(i.element.name)for(let e in n){const i=n[e];null!=i?t.renderer.setAttribute(a,e,i):t.renderer.removeAttribute(a,e)}else t.renderer.setValue(a,`bindings=${JSON.stringify(n,null,2)}`)}}var r,o}function fa(t,e,n,i){Ds(t,e,n,...i)}function ga(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function ya(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class ba{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,i=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&i;)n=pi(i),i=i.parent;this.elDef=n,this.elView=i}get elOrCompView(){return qn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Zi(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){va(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&va(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!fi(t);)t=t.parent;return t.parent?qn(t.parent,pi(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?mi(this.view,this.nodeDef):mi(this.elView,this.elDef)}logError(t,...e){let n,i;2&this.nodeDef.flags?(n=this.view.def,i=this.nodeDef.nodeIndex):(n=this.elView.def,i=this.elDef.nodeIndex);const r=function(t,e){let n=-1;for(let i=0;i<=e;i++)3&t.nodes[i].flags&&n++;return n}(n,i);let o=-1;n.factory(()=>++o===r?t.error.bind(t,...e):Jn),o<r&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function va(t,e,n){for(let i in e.references)n[i]=ps(t,e,e.references[i])}function Ca(t,e,n,i){const r=aa,o=la,s=ha;try{aa=t;const a=e.apply(n,i);return la=o,ha=s,aa=r,a}catch(h){if(Zt(h)||!la)throw h;throw a=h,l=Sa(),a instanceof Error||(a=new Error(a.toString())),Gn(a,l),a}var a,l}function Sa(){return la?new ba(la,ha):null}class xa{constructor(t){this.delegate=t}createRenderer(t,e){return new _a(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class _a{constructor(t){this.delegate=t,this.debugContextFactory=Sa,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Ko(t);!function(t){jo.delete(t.nativeNode)}(e),e instanceof Xo&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),i=this.createDebugContext(n);if(i){const e=new qo(n,null,i);e.name=t,$o(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&$o(new Xo(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&$o(new Xo(e,null,n)),e}appendChild(t,e){const n=Ko(t),i=Ko(e);n&&i&&n instanceof qo&&n.addChild(i),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const i=Ko(t),r=Ko(e),o=Ko(n);i&&r&&i instanceof qo&&i.insertBefore(o,r),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Ko(t),i=Ko(e);n&&i&&n instanceof qo&&n.removeChild(i),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),i=Sa();return i&&$o(new qo(n,null,i)),n}setAttribute(t,e,n,i){const r=Ko(t);r&&r instanceof qo&&(r.attributes[i?i+":"+e:e]=n),this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){const i=Ko(t);i&&i instanceof qo&&(i.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Ko(t);n&&n instanceof qo&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Ko(t);n&&n instanceof qo&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,i){const r=Ko(t);r&&r instanceof qo&&(r.styles[e]=n),this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){const i=Ko(t);i&&i instanceof qo&&(i.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const i=Ko(t);i&&i instanceof qo&&(i.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const i=Ko(t);i&&i.listeners.push(new Yo(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function ka(t,e,n){return new wa(t,e,n)}class wa extends Yt{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(Hs)return;Hs=!0;const t=oe()?{setCurrentNode:ca,createRootView:zs,createEmbeddedView:Ys,createComponentView:Xs,createNgModuleRef:qs,overrideProvider:Qs,overrideComponentView:Js,clearOverrides:Zs,checkAndUpdateView:ia,checkNoChangesView:ra,destroyView:oa,createDebugContext:(t,e)=>new ba(t,e),handleEvent:ua,updateDirectives:da,updateRenderer:pa}:{setCurrentNode:()=>{},createRootView:Gs,createEmbeddedView:xs,createComponentView:ks,createNgModuleRef:rr,overrideProvider:Jn,overrideComponentView:Jn,clearOverrides:Jn,checkAndUpdateView:Ps,checkNoChangesView:As,destroyView:Ls,createDebugContext:(t,e)=>new ba(t,e),handleEvent:(t,e,n,i)=>t.def.handleEvent(t,e,n,i),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?ea:na,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?ea:na,t)};Qn.setCurrentNode=t.setCurrentNode,Qn.createRootView=t.createRootView,Qn.createEmbeddedView=t.createEmbeddedView,Qn.createComponentView=t.createComponentView,Qn.createNgModuleRef=t.createNgModuleRef,Qn.overrideProvider=t.overrideProvider,Qn.overrideComponentView=t.overrideComponentView,Qn.clearOverrides=t.clearOverrides,Qn.checkAndUpdateView=t.checkAndUpdateView,Qn.checkNoChangesView=t.checkNoChangesView,Qn.destroyView=t.destroyView,Qn.resolveDep=wr,Qn.createDebugContext=t.createDebugContext,Qn.handleEvent=t.handleEvent,Qn.updateDirectives=t.updateDirectives,Qn.updateRenderer=t.updateRenderer,Qn.dirtyParentQueries=cs}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),i={};for(const r in t.providersByKey)i[r]=t.providersByKey[r];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:i}}(xi(this._ngModuleDefFactory));return Qn.createNgModuleRef(this.moduleType,t||Ne.NULL,this._bootstrapComponents,e)}}class Ta{}class Ia{constructor(){this.title="broknet-prototype"}}class Aa{}const Pa=new It("Location Initialized");class Ma{}const Ea=new It("appBaseHref");class Da{constructor(t,e){this._subject=new Vr,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Da.stripTrailingSlash(Fa(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Da.normalizeQueryParams(e))}normalize(t){return Da.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Fa(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Da.normalizeQueryParams(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Da.normalizeQueryParams(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}function Fa(t){return t.replace(/\/index.html$/,"")}class La extends Ma{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Da.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+Da.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+Da.normalizeQueryParams(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class Ra extends Ma{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Da.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Da.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+Da.normalizeQueryParams(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+Da.normalizeQueryParams(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const Ba=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),Na=function(t){return function(t){const e=t.toLowerCase().replace(/_/g,"-");let n=Dr[e];if(n)return n;const i=e.split("-")[0];if(n=Dr[i])return n;if("en"===i)return Rr;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Fr.PluralCase]},Oa=new It("UseV4Plurals");class Va{}class Wa extends Va{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):Na(e||this.locale)(t)){case Ba.Zero:return"zero";case Ba.One:return"one";case Ba.Two:return"two";case Ba.Few:return"few";case Ba.Many:return"many";default:return"other"}}}function Ha(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}class Ga{}class za{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Je(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${bt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}let Ua=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})();class Ya extends Ua{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}}class Xa{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class qa{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){oe()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Xa(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new ja(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const o=new ja(t,r);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class ja{constructor(t,e){this.record=t,this.view=e}}class Ka{constructor(t,e){this._viewContainer=t,this._context=new $a,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class $a{constructor(){this.$implicit=null,this.ngIf=null}}function Qa(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}class Ja{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}class Za{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}class tl{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Ja(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}class el{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class nl{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const il=new nl,rl=new el;class ol{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Ke(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,Qe.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(t){if(tn(t))return il;if(en(t))return rl;throw Error(`InvalidPipeArgument: '${t}' for pipe '${bt(ol)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}class sl{}const al=new It("DocumentToken"),ll="browser",hl="server";function cl(t){return t===hl}let ul=(()=>{class t{}return t.ngInjectableDef=ft({token:t,providedIn:"root",factory:()=>new dl(Wt(al),window,Wt(ne))}),t})();class dl{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}const pl=new S(t=>t.complete());function ml(t){return t?function(t){return new S(e=>t.schedule(()=>e.complete()))}(t):pl}function fl(t){const e=new S(e=>{e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}function gl(...t){let e=t[t.length-1];switch(P(e)?t.pop():e=void 0,t.length){case 0:return ml(e);case 1:return e?Y(t,e):fl(t[0]);default:return Y(t,e)}}class yl extends I{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new k;return this._value}next(t){super.next(this._value=t)}}function bl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}bl.prototype=Object.create(Error.prototype);const vl=bl,Cl={};function Sl(...t){let e=null,n=null;return P(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),Y(t,n).lift(new xl(e))}class xl{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new _l(t,this.resultSelector))}}class _l extends H{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Cl),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(W(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,i,r){const o=this.values,s=this.toRespond?o[n]===Cl?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function kl(t){return new S(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?X(n):ml()).subscribe(e)})}function wl(){return Q(1)}function Tl(t,e){return function(n){return n.lift(new Il(t,e))}}class Il{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Al(t,this.predicate,this.thisArg))}}class Al extends f{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Pl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Pl.prototype=Object.create(Error.prototype);const Ml=Pl;function El(t){return function(e){return 0===t?ml():e.lift(new Dl(t))}}class Dl{constructor(t){if(this.total=t,this.total<0)throw new Ml}call(t,e){return e.subscribe(new Fl(t,this.total))}}class Fl extends f{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function Ll(t,e,n){return function(i){return i.lift(new Rl(t,e,n))}}class Rl{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Bl(t,this.nextOrObserver,this.error,this.complete))}}class Bl extends f{constructor(t,e,n,r){super(t),this._tapNext=b,this._tapError=b,this._tapComplete=b,this._tapError=n||b,this._tapComplete=r||b,i(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||b,this._tapError=e.error||b,this._tapComplete=e.complete||b)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}const Nl=(t=Ol)=>Ll({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw t()}});function Ol(){return new vl}function Vl(t=null){return e=>e.lift(new Wl(t))}class Wl{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Hl(t,this.defaultValue))}}class Hl extends f{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Gl(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Tl((e,n)=>t(e,n,i)):$,El(1),n?Vl(e):Nl(()=>new vl))}function zl(t){return function(e){const n=new Ul(t),i=e.lift(n);return n.caught=i}}class Ul{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Yl(t,this.selector,this.caught))}}class Yl extends H{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new M(this,void 0,void 0);this.add(i),W(this,n,void 0,void 0,i)}}}function Xl(t){return e=>0===t?ml():e.lift(new ql(t))}class ql{constructor(t){if(this.total=t,this.total<0)throw new Ml}call(t,e){return e.subscribe(new jl(t,this.total))}}class jl extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Kl(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Tl((e,n)=>t(e,n,i)):$,Xl(1),n?Vl(e):Nl(()=>new vl))}class $l{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Ql(t,this.predicate,this.thisArg,this.source))}}class Ql extends f{constructor(t,e,n,i){super(t),this.predicate=e,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Jl(t,e){return"function"==typeof e?n=>n.pipe(Jl((n,i)=>X(t(n,i)).pipe(G((t,r)=>e(n,t,i,r))))):e=>e.lift(new Zl(t))}class Zl{constructor(t){this.project=t}call(t,e){return e.subscribe(new th(t,this.project))}}class th extends H{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)}_innerSub(t,e,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new M(this,void 0,void 0);this.destination.add(r),this.innerSubscription=W(this,t,e,n,r)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,i,r){this.destination.next(e)}}function eh(...t){return wl()(gl(...t))}function nh(...t){return e=>{let n=t[t.length-1];P(n)?t.pop():n=null;const i=t.length;return eh(1!==i||n?i>0?Y(t,n):ml(n):fl(t[0]),e)}}function ih(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new rh(t,e,n))}}class rh{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new oh(t,this.accumulator,this.seed,this.hasSeed))}}class oh extends f{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function sh(t,e){return q(t,e,1)}function ah(t){return e=>e.lift(new lh(t))}class lh{constructor(t){this.callback=t}call(t,e){return e.subscribe(new hh(t,this.callback))}}class hh extends f{constructor(t,e){super(t),this.add(new d(e))}}let ch=null;function uh(){return ch}class dh{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class ph extends dh{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(e).forEach(n=>{null!=this.getStyle(t,n)&&(this._transitionEnd=e[n])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const mh={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},fh=3,gh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bh=(()=>{if(Tt.Node)return Tt.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class vh extends ph{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new vh,ch||(ch=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return mh}contains(t,e){return bh.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const i=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return i.setAttribute(t,e),i}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const i=this.getStyle(t,e)||"";return n?i==n:i.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,i){t.setAttributeNS(e,n,i)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===fh&&yh.hasOwnProperty(e)&&(e=yh[e]))}return gh[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=Sh||(Sh=document.querySelector("base"))?Sh.getAttribute("href"):null;return null==e?null:(n=e,Ch||(Ch=document.createElement("a")),Ch.setAttribute("href",n),"/"===Ch.pathname.charAt(0)?Ch.pathname:"/"+Ch.pathname);var n}resetBaseElement(){Sh=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Ha(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let Ch,Sh=null;function xh(){return!!window.history.pushState}const _h=new It("TRANSITION_ID"),kh=[{provide:Gr,useFactory:function(t,e,n){return()=>{n.get(zr).donePromise.then(()=>{const n=uh();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[_h,al,Ne],multi:!0}];class wh{static init(){var t;t=new wh,Io=t}addToWindow(t){Tt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Tt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Tt.getAllAngularRootElements=()=>t.getAllRootElements(),Tt.frameworkStabilizers||(Tt.frameworkStabilizers=[]),Tt.frameworkStabilizers.push(t=>{const e=Tt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,0==--n&&t(i)};e.forEach((function(t){t.whenStable(r)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?uh().isShadowRoot(e)?this.findTestabilityInTree(t,uh().getHost(e),!0):this.findTestabilityInTree(t,uh().parentElement(e),!0):null}}function Th(t,e){"undefined"!=typeof COMPILED&&COMPILED||((Tt.ng=Tt.ng||{})[t]=e)}const Ih=(()=>({ApplicationRef:Bo,NgZone:go}))();function Ah(t){return Ko(t)}const Ph=new It("EventManagerPlugins");class Mh{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class Eh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=uh().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}class Dh{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class Fh extends Dh{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>uh().remove(t))}}const Lh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Rh=/%COMP%/g,Bh="_nghost-%COMP%",Nh="_ngcontent-%COMP%";function Oh(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Oh(t,r,n):(r=r.replace(Rh,t),n.push(r))}return n}function Vh(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class Wh{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Hh(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case jt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Uh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case jt.Native:case jt.ShadowDom:return new Yh(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Oh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class Hh{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Lh[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=Lh[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=Lh[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&yn.DashCase?t.style.setProperty(e,n,i&yn.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&yn.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){zh(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return zh(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Vh(n)):this.eventManager.addEventListener(t,e,Vh(n))}}const Gh=(()=>"@".charCodeAt(0))();function zh(t,e){if(t.charCodeAt(0)===Gh)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Uh extends Hh{constructor(t,e,n,i){super(t),this.component=n;const r=Oh(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr=Nh.replace(Rh,i+"-"+n.id),this.hostAttr=Bh.replace(Rh,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Yh extends Hh{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===jt.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=Oh(i.id,i.styles,[]);for(let o=0;o<r.length;o++){const t=document.createElement("style");t.textContent=r[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const Xh=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),qh=Xh("addEventListener"),jh=Xh("removeEventListener"),Kh={},$h="FALSE",Qh="ANGULAR",Jh="addEventListener",Zh="removeEventListener",tc="__zone_symbol__propagationStopped",ec="__zone_symbol__stopImmediatePropagation",nc=(()=>{const t="undefined"!=typeof Zone&&Zone[Xh("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),ic=function(t){return!!nc&&nc.hasOwnProperty(t)},rc=function(t){const e=Kh[t.type];if(!e)return;const n=this[e];if(!n)return;const i=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,i):t.handler.apply(this,i)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[tc];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,i):t.handler.apply(this,i)}}};class oc extends Eh{constructor(t,e,n){super(t),this.ngZone=e,n&&cl(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[ec])return;const t=Event.prototype[ec]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[tc]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let i=n;if(!t[qh]||go.isInAngularZone()&&!ic(e))t[Jh](e,i,!1);else{let n=Kh[e];n||(n=Kh[e]=Xh(Qh+e+$h));let r=t[n];const o=r&&r.length>0;r||(r=t[n]=[]);const s=ic(e)?Zone.root:Zone.current;if(0===r.length)r.push({zone:s,handler:i});else{let t=!1;for(let e=0;e<r.length;e++)if(r[e].handler===i){t=!0;break}t||r.push({zone:s,handler:i})}o||t[qh](e,rc,!1)}return()=>this.removeEventListener(t,e,i)}removeEventListener(t,e,n){let i=t[jh];if(!i)return t[Zh].apply(t,[e,n,!1]);let r=Kh[e],o=r&&t[r];if(!o)return t[Zh].apply(t,[e,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&i.apply(t,[e,rc,!1]):t[Zh].apply(t,[e,n,!1])}}const sc={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ac=new It("HammerGestureConfig"),lc=new It("HammerLoader");class hc{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class cc extends Eh{constructor(t,e,n,i){super(t),this._config=e,this.console=n,this.loader=i}supports(t){return!(!sc.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const i=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let i=!1,r=()=>{i=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(r=()=>{});i||(r=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),r=()=>{}}),()=>{r()}}return i.runOutsideAngular(()=>{const r=this._config.buildHammer(t),o=function(t){i.runGuarded((function(){n(t)}))};return r.on(e,o),()=>{r.off(e,o),"function"==typeof r.destroy&&r.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const uc=["alt","control","meta","shift"],dc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class pc extends Eh{constructor(t){super(t)}supports(t){return null!=pc.parseEventName(t)}addEventListener(t,e,n){const i=pc.parseEventName(e),r=pc.eventCallback(i.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>uh().onAndCancel(t,i.domEventName,r))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const i=pc._normalizeKey(e.pop());let r="";if(uc.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r+=t+".")}),r+=i,0!=e.length||0===i.length)return null;const o={};return o.domEventName=n,o.fullKey=r,o}static getEventFullKey(t){let e="",n=uh().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),uc.forEach(i=>{i!=n&&(0,dc[i])(t)&&(e+=i+".")}),e+=n}static eventCallback(t,e,n){return i=>{pc.getEventFullKey(i)===t&&n.runGuarded(()=>e(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}class mc{}class fc extends mc{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case Ie.NONE:return e;case Ie.HTML:return e instanceof yc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),function(t,e){let n=null;try{we=we||new se(t);let i=e?String(e):"";n=we.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=we.getInertBodyElement(i)}while(i!==o);const s=new Se,a=s.sanitizeChildren(Te(n)||n);return oe()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=Te(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)));case Ie.STYLE:return e instanceof bc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),function(t){if(!(t=String(t).trim()))return"";const e=t.match(Me);return e&&he(e[1])===e[1]||t.match(Pe)&&function(t){let e=!0,n=!0;for(let i=0;i<t.length;i++){const r=t.charAt(i);"'"===r&&n?e=!e:'"'===r&&e&&(n=!n)}return e&&n}(t)?t:(oe()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}(e));case Ie.SCRIPT:if(e instanceof vc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case Ie.URL:return e instanceof Sc||e instanceof Cc?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),he(String(e)));case Ie.RESOURCE_URL:if(e instanceof Sc)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof gc)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new yc(t)}bypassSecurityTrustStyle(t){return new bc(t)}bypassSecurityTrustScript(t){return new vc(t)}bypassSecurityTrustUrl(t){return new Cc(t)}bypassSecurityTrustResourceUrl(t){return new Sc(t)}}class gc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class yc extends gc{getTypeName(){return"HTML"}}class bc extends gc{getTypeName(){return"Style"}}class vc extends gc{getTypeName(){return"Script"}}class Cc extends gc{getTypeName(){return"URL"}}class Sc extends gc{getTypeName(){return"ResourceURL"}}const xc=Do(Qo,"browser",[{provide:jr,useValue:ll},{provide:qr,useValue:function(){vh.makeCurrent(),wh.init()},multi:!0},{provide:Aa,useClass:class extends Aa{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=uh().getLocation(),this._history=uh().getHistory()}getBaseHrefFromDOM(){return uh().getBaseHref(this._doc)}onPopState(t){uh().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){uh().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){xh()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){xh()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[al]},{provide:al,useFactory:function(){return document},deps:[]}]);function _c(){return new ne}class kc{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:kc,providers:[{provide:Ur,useValue:t.appId},{provide:_h,useExisting:Ur},kh]}}}"undefined"!=typeof window&&window;class wc{constructor(t,e){this.id=t,this.url=e}}class Tc extends wc{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ic extends wc{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ac extends wc{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pc extends wc{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Mc extends wc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ec extends wc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dc extends wc{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fc extends wc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lc extends wc{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rc{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bc{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oc{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vc{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hc{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Gc{}const zc="primary";class Uc{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Yc(t){return new Uc(t)}const Xc="ngNavigationCancelingError";function qc(t){const e=Error("NavigationCancelingError: "+t);return e[Xc]=!0,e}function jc(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const e=i[o],n=t[o];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}class Kc{constructor(t,e){this.routes=t,this.module=e}}function $c(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];Qc(i,Jc(e,i))}}function Qc(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==zc)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&$c(t.children,e)}function Jc(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Zc(t){const e=t.children&&t.children.map(Zc),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==zc&&(n.component=Gc),n}function tu(t,e){const n=Object.keys(t),i=Object.keys(e);if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(t[r=n[o]]!==e[r])return!1;return!0}function eu(t){return Array.prototype.concat.apply([],t)}function nu(t){return t.length>0?t[t.length-1]:null}function iu(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ru(t){return en(t)?t:tn(t)?X(Promise.resolve(t)):gl(t)}function ou(t,e,n){return n?function(t,e){return tu(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!hu(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!hu(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!hu(n.segments,r))return!1;for(const e in i.children){if(!n.children[e])return!1;if(!t(n.children[e],i.children[e]))return!1}return!0}{const t=r.slice(0,n.segments.length),o=r.slice(n.segments.length);return!!hu(n.segments,t)&&!!n.children[zc]&&e(n.children[zc],i,o)}}(e,n,n.segments)}(t.root,e.root)}class su{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yc(this.queryParams)),this._queryParamMap}toString(){return pu.serialize(this)}}class au{constructor(t,e){this.segments=t,this.children=e,this.parent=null,iu(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mu(this)}}class lu{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Yc(this.parameters)),this._parameterMap}toString(){return Cu(this)}}function hu(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function cu(t,e){let n=[];return iu(t.children,(t,i)=>{i===zc&&(n=n.concat(e(t,i)))}),iu(t.children,(t,i)=>{i!==zc&&(n=n.concat(e(t,i)))}),n}class uu{}class du{parse(t){const e=new wu(t);return new su(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return mu(e);if(n){const n=e.children[zc]?t(e.children[zc],!1):"",i=[];return iu(e.children,(e,n)=>{n!==zc&&i.push(`${n}:${t(e,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=cu(e,(n,i)=>i===zc?[t(e.children[zc],!1)]:[`${i}:${t(n,!1)}`]);return`${mu(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${gu(e)}=${gu(t)}`).join("&"):`${gu(e)}=${gu(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const pu=new du;function mu(t){return t.segments.map(t=>Cu(t)).join("/")}function fu(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gu(t){return fu(t).replace(/%3B/gi,";")}function yu(t){return fu(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bu(t){return decodeURIComponent(t)}function vu(t){return bu(t.replace(/\+/g,"%20"))}function Cu(t){return`${yu(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${yu(t)}=${yu(e[t])}`).join("")}`;var e}const Su=/^[^\/()?;=#]+/;function xu(t){const e=t.match(Su);return e?e[0]:""}const _u=/^[^=?&#]+/,ku=/^[^?&#]+/;class wu{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new au([],{}):new au([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[zc]=new au(t,e)),n}parseSegment(){const t=xu(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new lu(bu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=xu(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=xu(this.remaining);t&&this.capture(n=t)}t[bu(e)]=bu(n)}parseQueryParam(t){const e=function(t){const e=t.match(_u);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ku);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const i=vu(e),r=vu(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(t[i]=e=[e]),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=xu(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=zc);const o=this.parseChildren();e[r]=1===Object.keys(o).length?o[zc]:new au([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Tu{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Iu(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Iu(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Au(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Au(t,this._root).map(t=>t.value)}}function Iu(t,e){if(t===e.value)return e;for(const n of e.children){const e=Iu(t,n);if(e)return e}return null}function Au(t,e){if(t===e.value)return[e];for(const n of e.children){const i=Au(t,n);if(i.length)return i.unshift(e),i}return[]}class Pu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Mu(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Eu extends Tu{constructor(t,e){super(t),this.snapshot=e,Nu(this,t)}toString(){return this.snapshot.toString()}}function Du(t,e){const n=function(t,e){const n=new Ru([],{},{},"",{},zc,e,null,t.root,-1,{});return new Bu("",new Pu(n,[]))}(t,e),i=new yl([new lu("",{})]),r=new yl({}),o=new yl({}),s=new yl({}),a=new yl(""),l=new Fu(i,r,s,a,o,zc,e,n.root);return l.snapshot=n.root,new Eu(new Pu(l,[]),n)}class Fu{constructor(t,e,n,i,r,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(G(t=>Yc(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(G(t=>Yc(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Lu(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Ru{constructor(t,e,n,i,r,o,s,a,l,h,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=h,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Bu extends Tu{constructor(t,e){super(e),this.url=t,Nu(this,e)}toString(){return Ou(this._root)}}function Nu(t,e){e.value._routerState=t,e.children.forEach(e=>Nu(t,e))}function Ou(t){const e=t.children.length>0?` { ${t.children.map(Ou).join(", ")} } `:"";return`${t.value}${e}`}function Vu(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,tu(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),tu(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!tu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),tu(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Wu(t,e){var n,i;return tu(t.params,e.params)&&hu(n=t.url,i=e.url)&&n.every((t,e)=>tu(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Wu(t.parent,e.parent))}function Hu(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Gu(t,e,n,i,r){let o={};return i&&iu(i,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new su(n.root===t?e:function t(e,n,i){const r={};return iu(e.children,(e,o)=>{r[o]=e===n?i:t(e,n,i)}),new au(e.segments,r)}(n.root,t,e),o,r)}class zu{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Hu(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(i&&i!==nu(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uu{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Yu(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[zc]:`${t}`}function Xu(t,e,n){if(t||(t=new au([],{})),0===t.segments.length&&t.hasChildren())return qu(t,e,n);const i=function(t,e,n){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;const e=t.segments[r],s=Yu(n[i]),a=i<n.length-1?n[i+1]:null;if(r>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Qu(s,a,e))return o;i+=2}else{if(!Qu(s,{},e))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new au(t.segments.slice(0,i.pathIndex),{});return e.children[zc]=new au(t.segments.slice(i.pathIndex),t.children),qu(e,0,r)}return i.match&&0===r.length?new au(t.segments,{}):i.match&&!t.hasChildren()?ju(t,e,n):i.match?qu(t,0,r):ju(t,e,n)}function qu(t,e,n){if(0===n.length)return new au(t.segments,{});{const i=function(t){return"object"!=typeof t[0]?{[zc]:t}:void 0===t[0].outlets?{[zc]:t}:t[0].outlets}(n),r={};return iu(i,(n,i)=>{null!==n&&(r[i]=Xu(t.children[i],e,n))}),iu(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new au(t.segments,r)}}function ju(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&void 0!==n[r].outlets){const t=Ku(n[r].outlets);return new au(i,t)}if(0===r&&Hu(n[0])){i.push(new lu(t.segments[e].path,n[0])),r++;continue}const o=Yu(n[r]),s=r<n.length-1?n[r+1]:null;o&&s&&Hu(s)?(i.push(new lu(o,$u(s))),r+=2):(i.push(new lu(o,{})),r++)}return new au(i,{})}function Ku(t){const e={};return iu(t,(t,n)=>{null!==t&&(e[n]=ju(new au([],{}),0,t))}),e}function $u(t){const e={};return iu(t,(t,n)=>e[n]=`${t}`),e}function Qu(t,e,n){return t==n.path&&tu(e,n.parameters)}const Ju=(t,e,n)=>G(i=>(new Zu(e,i.targetRouterState,i.currentRouterState,n).activate(t),i));class Zu{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Vu(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Mu(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),iu(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const i=Mu(t),r=t.value.component?n.children:e;iu(i,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const i=Mu(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new Wc(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Oc(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Vu(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),td(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function td(t){Vu(t.value),t.children.forEach(td)}function ed(t){return"function"==typeof t}function nd(t){return t instanceof su}class id{constructor(t){this.segmentGroup=t||null}}class rd{constructor(t){this.urlTree=t}}function od(t){return new S(e=>e.error(new id(t)))}function sd(t){return new S(e=>e.error(new rd(t)))}function ad(t){return new S(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ld{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(Ut)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,zc).pipe(G(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(zl(t=>{if(t instanceof rd)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof id)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,zc).pipe(G(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(zl(t=>{if(t instanceof id)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new au([],{[zc]:t}):t;return new su(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(G(t=>new au([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return gl({});const n=[],i=[],r={};return iu(t,(t,o)=>{const s=e(o,t).pipe(G(t=>r[o]=t));o===zc?n.push(s):i.push(s)}),gl.apply(null,n.concat(i)).pipe(wl(),Gl(),G(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(t,e,i,n))}expandSegment(t,e,n,i,r,o){return gl(...n).pipe(G(s=>this.expandSegmentAgainstRoute(t,e,n,s,i,r,o).pipe(zl(t=>{if(t instanceof id)return gl(null);throw t}))),wl(),Kl(t=>!!t),zl((t,n)=>{if(t instanceof vl||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,i,r))return gl(new au([],{}));throw new id(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,i,r,o,s){return dd(i)!==o?od(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):od(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?sd(r):this.lineralizeSegments(n,r).pipe(q(n=>{const r=new au(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:h}=hd(e,i,r);if(!s)return od(e);const c=this.applyRedirectCommands(a,i.redirectTo,h);return i.redirectTo.startsWith("/")?sd(c):this.lineralizeSegments(i,c).pipe(q(i=>this.expandSegment(t,e,n,i.concat(r.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(G(t=>(n._loadedConfig=t,new au(i,{})))):gl(new au(i,{}));const{matched:r,consumedSegments:o,lastChild:s}=hd(e,n,i);if(!r)return od(e);const a=i.slice(s);return this.getChildConfig(t,n,i).pipe(q(t=>{const n=t.module,i=t.routes,{segmentGroup:r,slicedSegments:s}=function(t,e,n,i){return n.length>0&&function(t,e,n){return n.some(n=>ud(t,e,n)&&dd(n)!==zc)}(t,n,i)?{segmentGroup:cd(new au(e,function(t,e){const n={};n[zc]=e;for(const i of t)""===i.path&&dd(i)!==zc&&(n[dd(i)]=new au([],{}));return n}(i,new au(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>ud(t,e,n))}(t,n,i)?{segmentGroup:cd(new au(t.segments,function(t,e,n,i){const r={};for(const o of n)ud(t,e,o)&&!i[dd(o)]&&(r[dd(o)]=new au([],{}));return Object.assign({},i,r)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,i);return 0===s.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(G(t=>new au(o,t))):0===i.length&&0===s.length?gl(new au(o,{})):this.expandSegment(n,r,i,s,zc,!0).pipe(G(t=>new au(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?gl(new Kc(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?gl(e._loadedConfig):function(t,e,n){const i=e.canLoad;return i&&0!==i.length?X(i).pipe(G(i=>{const r=t.get(i);let o;if(function(t){return t&&ed(t.canLoad)}(r))o=r.canLoad(e,n);else{if(!ed(r))throw new Error("Invalid CanLoad guard");o=r(e,n)}return ru(o)})).pipe(wl(),(r=t=>!0===t,t=>t.lift(new $l(r,void 0,t)))):gl(!0);var r}(t.injector,e,n).pipe(q(n=>n?this.configLoader.load(t.injector,e).pipe(G(t=>(e._loadedConfig=t,t))):function(t){return new S(e=>e.error(qc(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):gl(new Kc([],t))}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return gl(n);if(i.numberOfChildren>1||!i.children[zc])return ad(t.redirectTo);i=i.children[zc]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new su(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return iu(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let o={};return iu(e.children,(e,r)=>{o[r]=this.createSegmentGroup(t,e,n,i)}),new au(r,o)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function hd(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(e.matcher||jc)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function cd(t){if(1===t.numberOfChildren&&t.children[zc]){const e=t.children[zc];return new au(t.segments.concat(e.segments),e.children)}return t}function ud(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function dd(t){return t.outlet||zc}class pd{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class md{constructor(t,e){this.component=t,this.route=e}}function fd(t,e,n){const i=t._root;return function t(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mu(n);return e.children.forEach(e=>{!function(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,l=i?i.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const h=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!hu(t.url,e.url);case"pathParamsOrQueryParamsChange":return!hu(t.url,e.url)||!tu(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wu(t,e)||!tu(t.queryParams,e.queryParams);case"paramsChange":default:return!Wu(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);h?o.canActivateChecks.push(new pd(r)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?l?l.children:null:i,r,o),h&&o.canDeactivateChecks.push(new md(l&&l.outlet&&l.outlet.component||null,a))}else a&&yd(n,l,o),o.canActivateChecks.push(new pd(r)),t(e,null,s.component?l?l.children:null:i,r,o)}(e,s[e.value.outlet],i,r.concat([e.value]),o),delete s[e.value.outlet]}),iu(s,(t,e)=>yd(t,i.getContext(e),o)),o}(i,e?e._root:null,n,[i.value])}function gd(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function yd(t,e,n){const i=Mu(t),r=t.value;iu(i,(t,i)=>{yd(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new md(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}const bd=Symbol("INITIAL_VALUE");function vd(){return Jl(t=>Sl(...t.map(t=>t.pipe(Xl(1),nh(bd)))).pipe(ih((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==bd)return t;if(i===bd&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||nd(i))return i}return t},t)},bd),Tl(t=>t!==bd),G(t=>nd(t)?t:!0===t),Xl(1)))}function Cd(t,e){return null!==t&&e&&e(new Vc(t)),gl(!0)}function Sd(t,e){return null!==t&&e&&e(new Nc(t)),gl(!0)}function xd(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?gl(i.map(i=>kl(()=>{const r=gd(i,e,n);let o;if(function(t){return t&&ed(t.canActivate)}(r))o=ru(r.canActivate(e,t));else{if(!ed(r))throw new Error("Invalid CanActivate guard");o=ru(r(e,t))}return o.pipe(Kl())}))).pipe(vd()):gl(!0)}function _d(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>kl(()=>gl(e.guards.map(r=>{const o=gd(r,e.node,n);let s;if(function(t){return t&&ed(t.canActivateChild)}(o))s=ru(o.canActivateChild(i,t));else{if(!ed(o))throw new Error("Invalid CanActivateChild guard");s=ru(o(i,t))}return s.pipe(Kl())})).pipe(vd())));return gl(r).pipe(vd())}class kd{}class wd{constructor(t,e,n,i,r,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){try{const t=Ad(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,zc),n=new Ru([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zc,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Pu(n,e),r=new Bu(this.url,i);return this.inheritParamsAndData(r._root),gl(r)}catch(t){return new S(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Lu(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=cu(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),i=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${i}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===zc?-1:e.value.outlet===zc?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,i){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,i)}catch(r){if(!(r instanceof kd))throw r}if(this.noLeftoversInUrl(e,n,i))return[];throw new kd}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo)throw new kd;if((t.outlet||zc)!==i)throw new kd;let r,o=[],s=[];if("**"===t.path){const o=n.length>0?nu(n).parameters:{};r=new Ru(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ed(t),i,t.component,t,Td(e),Id(e)+n.length,Dd(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new kd;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(e.matcher||jc)(n,t,e);if(!i)throw new kd;const r={};iu(i.posParams,(t,e)=>{r[e]=t.path});const o=i.consumed.length>0?Object.assign({},r,i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),r=new Ru(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ed(t),i,t.component,t,Td(e),Id(e)+o.length,Dd(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:h}=Ad(e,o,s,a,this.relativeLinkResolution);if(0===h.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new Pu(r,t)]}if(0===a.length&&0===h.length)return[new Pu(r,[])];const c=this.processSegment(a,l,h,zc);return[new Pu(r,c)]}}function Td(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Id(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ad(t,e,n,i,r){if(n.length>0&&function(t,e,n){return n.some(n=>Pd(t,e,n)&&Md(n)!==zc)}(t,n,i)){const r=new au(e,function(t,e,n,i){const r={};r[zc]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Md(o)!==zc){const n=new au([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[Md(o)]=n}return r}(t,e,i,new au(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Pd(t,e,n))}(t,n,i)){const o=new au(t.segments,function(t,e,n,i,r,o){const s={};for(const a of i)if(Pd(t,n,a)&&!r[Md(a)]){const n=new au([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Md(a)]=n}return Object.assign({},r,s)}(t,e,n,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new au(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Pd(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Md(t){return t.outlet||zc}function Ed(t){return t.data||{}}function Dd(t){return t.resolve||{}}function Fd(t,e,n,i){const r=gd(t,e,i);return ru(r.resolve?r.resolve(e,n):r(e,n))}function Ld(t){return function(e){return e.pipe(Jl(e=>{const n=t(e);return n?X(n).pipe(G(()=>e)):X([e])}))}}class Rd{}class Bd{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const Nd=new It("ROUTES");class Od{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(G(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Kc(eu(i.injector.get(Nd)).map(Zc),i)}))}loadModuleFactory(t){return"string"==typeof t?X(this.loader.load(t)):ru(t()).pipe(q(t=>t instanceof Yt?gl(t):X(this.compiler.compileModuleAsync(t))))}}class Vd{}class Wd{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Hd(t){throw t}function Gd(t,e,n){return e.parse("/")}function zd(t,e){return gl(null)}class Ud{constructor(t,e,n,i,r,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=Hd,this.malformedUriErrorHandler=Gd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zd,afterPreactivation:zd},this.urlHandlingStrategy=new Wd,this.routeReuseStrategy=new Bd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(Ut),this.console=r.get($r);const l=r.get(go);this.isNgZoneEnabled=l instanceof go,this.resetConfig(a),this.currentUrlTree=new su(new au([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Od(o,s,t=>this.triggerEvent(new Rc(t)),t=>this.triggerEvent(new Bc(t))),this.routerState=Du(this.currentUrlTree,this.rootComponentType),this.transitions=new yl({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Tl(t=>0!==t.id),G(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Jl(t=>{let n=!1,i=!1;return gl(t).pipe(Ll(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Jl(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return gl(t).pipe(Jl(t=>{const n=this.transitions.getValue();return e.next(new Tc(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?pl:[t]}),Jl(t=>Promise.resolve(t)),function(t,e,n,i){return function(r){return r.pipe(Jl(r=>(function(t,e,n,i,r){return new ld(t,e,n,i,r).apply()})(t,e,n,r.extractedUrl,i).pipe(G(t=>Object.assign({},r,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ll(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return function(o){return o.pipe(q(o=>(function(t,e,n,i,r="emptyOnly",o="legacy"){return new wd(t,e,n,i,r,o).recognize()})(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(G(t=>Object.assign({},o,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ll(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Ll(t=>{const n=new Mc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:o,extras:s}=t,a=new Tc(n,this.serializeUrl(i),r,o);e.next(a);const l=Du(i,this.rootComponentType).snapshot;return gl(Object.assign({},t,{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign({},s,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),pl}),Ld(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),Ll(t=>{const e=new Ec(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),G(t=>Object.assign({},t,{guards:fd(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(q(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?gl(Object.assign({},n,{guardsResult:!0})):function(t,e,n,i){return X(t).pipe(q(t=>(function(t,e,n,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?gl(o.map(o=>{const s=gd(o,e,r);let a;if(function(t){return t&&ed(t.canDeactivate)}(s))a=ru(s.canDeactivate(t,e,n,i));else{if(!ed(s))throw new Error("Invalid CanDeactivate guard");a=ru(s(t,e,n,i))}return a.pipe(Kl())})).pipe(vd()):gl(!0)})(t.component,t.route,n,e,i)),Kl(t=>!0!==t,!0))}(s,i,r,t).pipe(q(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,i){return X(e).pipe(sh(e=>X([Sd(e.route.parent,i),Cd(e.route,i),_d(t,e.path,n),xd(t,e.route,n)]).pipe(wl(),Kl(t=>!0!==t,!0))),Kl(t=>!0!==t,!0))}(i,o,t,e):gl(n)),G(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Ll(t=>{if(nd(t.guardsResult)){const e=qc(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Ll(t=>{const e=new Dc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Tl(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Ac(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ld(t=>{if(t.guards.canActivateChecks.length)return gl(t).pipe(Ll(t=>{const e=new Fc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe(q(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;return r.length?X(r).pipe(sh(n=>(function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return gl({});if(1===r.length){const o=r[0];return Fd(t[o],e,n,i).pipe(G(t=>({[o]:t})))}const o={};return X(r).pipe(q(r=>Fd(t[r],e,n,i).pipe(G(t=>(o[r]=t,t))))).pipe(Gl(),G(()=>o))}(t._resolve,t,e,i).pipe(G(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,Lu(t,n).resolve),null)))})(n.route,i,t,e)),function(t,e){return arguments.length>=2?function(n){return v(ih(t,e),El(1),Vl(e))(n)}:function(e){return v(ih((e,n,i)=>t(e,n,i+1)),El(1))(e)}}((t,e)=>t),G(t=>n)):gl(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Ll(t=>{const e=new Lc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ld(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),G(t=>{const e=function(t,e,n){const i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const o=function(e,n,i){return n.children.map(n=>{for(const r of i.children)if(e.shouldReuseRoute(r.value.snapshot,n.value))return t(e,n,r);return t(e,n)})}(e,n,i);return new Pu(r,o)}{const i=e.retrieve(n.value);if(i){const t=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,t),t}{const i=new Fu(new yl((r=n.value).url),new yl(r.params),new yl(r.queryParams),new yl(r.fragment),new yl(r.data),r.outlet,r.component,r),o=n.children.map(n=>t(e,n));return new Pu(i,o)}}var r}(t,e._root,n?n._root:void 0);return new Eu(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Ll(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Ju(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),Ll({next(){n=!0},complete(){n=!0}}),ah(()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new Ac(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),zl(n=>{if(i=!0,function(t){return t&&t[Xc]}(n)){const i=nd(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new Ac(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),t.resolve(!1),i&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new Pc(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(r){t.reject(r)}}return pl}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,i,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$c(t),this.config=t.map(Zc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=e;oe()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,h=a?this.currentUrlTree.fragment:r;let c=null;if(s)switch(s){case"merge":c=Object.assign({},this.currentUrlTree.queryParams,i);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=i||null}else c=o?this.currentUrlTree.queryParams:i||null;return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,i,r){if(0===n.length)return Gu(e.root,e.root,e,i,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new zu(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return iu(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new zu(n,e,i)}(n);if(o.toRoot())return Gu(e.root,new au([],{}),e,i,r);const s=function(t,e,n){if(t.isAbsolute)return new Uu(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new Uu(n.snapshot._urlSegment,!0,0);const i=Hu(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,!(i=i.parent))throw new Error("Invalid number of '../'");r=i.segments.length}return new Uu(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?qu(s.segmentGroup,s.index,o.commands):Xu(s.segmentGroup,s.index,o.commands);return Gu(s.segmentGroup,a,e,i,r)}(l,this.currentUrlTree,t,c,h)}navigateByUrl(t,e={skipLocationChange:!1}){oe()&&this.isNgZoneEnabled&&!go.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=nd(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(nd(t))return ou(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ou(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ic(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i){const r=this.getTransition();if(r&&"imperative"!==e&&"imperative"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"hashchange"==e&&"popstate"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(r&&"popstate"==e&&"hashchange"===r.source&&r.rawUrl.toString()===t.toString())return Promise.resolve(!0);let o=null,s=null;const a=new Promise((t,e)=>{o=t,s=e}),l=++this.navigationId;return this.setTransition({id:l,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:o,reject:s,promise:a,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),a.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign({},i,{navigationId:n})):this.location.go(r,"",Object.assign({},i,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class Yd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xd,this.attachRef=null}}class Xd{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Yd,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class qd{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Vr,this.deactivateEvents=new Vr,this.name=i||zc,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new jd(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class jd{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Fu?this.route:t===Xd?this.childContexts:this.parent.get(t,e)}}class Kd{}class $d{preload(t,e){return e().pipe(zl(()=>gl(null)))}}class Qd{preload(t,e){return gl(null)}}class Jd{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new Od(e,n,e=>t.triggerEvent(new Rc(e)),e=>t.triggerEvent(new Bc(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Tl(t=>t instanceof Ic),sh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ut);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return X(n).pipe(Q(),G(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(q(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}class Zd{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Tc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ic&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Hc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const tp=new It("ROUTER_CONFIGURATION"),ep=new It("ROUTER_FORROOT_GUARD"),np=[Da,{provide:uu,useClass:du},{provide:Ud,useFactory:hp,deps:[Bo,uu,Xd,Da,Ne,Oo,ro,Nd,tp,[Vd,new ct],[Rd,new ct]]},Xd,{provide:Fu,useFactory:cp,deps:[Ud]},{provide:Oo,useClass:zo},Jd,Qd,$d,{provide:tp,useValue:{enableTracing:!1}}];function ip(){return new Eo("Router",Ud)}class rp{constructor(t,e){}static forRoot(t,e){return{ngModule:rp,providers:[np,lp(t),{provide:ep,useFactory:ap,deps:[[Ud,new ct,new dt]]},{provide:tp,useValue:e||{}},{provide:Ma,useFactory:sp,deps:[Aa,[new ht(Ea),new ct],tp]},{provide:Zd,useFactory:op,deps:[Ud,ul,tp]},{provide:Kd,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:Qd},{provide:Eo,multi:!0,useFactory:ip},[up,{provide:Gr,multi:!0,useFactory:dp,deps:[up]},{provide:mp,useFactory:pp,deps:[up]},{provide:Kr,multi:!0,useExisting:mp}]]}}static forChild(t){return{ngModule:rp,providers:[lp(t)]}}}function op(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Zd(t,e,n)}function sp(t,e,n={}){return n.useHash?new La(t,e):new Ra(t,e)}function ap(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function lp(t){return[{provide:Xe,multi:!0,useValue:t},{provide:Nd,multi:!0,useValue:t}]}function hp(t,e,n,i,r,o,s,a,l={},h,c){const u=new Ud(null,e,n,i,r,o,s,eu(a));if(h&&(u.urlHandlingStrategy=h),c&&(u.routeReuseStrategy=c),l.errorHandler&&(u.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(u.malformedUriErrorHandler=l.malformedUriErrorHandler),l.enableTracing){const t=uh();u.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l.onSameUrlNavigation&&(u.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.urlUpdateStrategy&&(u.urlUpdateStrategy=l.urlUpdateStrategy),l.relativeLinkResolution&&(u.relativeLinkResolution=l.relativeLinkResolution),u}function cp(t){return t.routerState.root}class up{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new I}appInitializer(){return this.injector.get(Pa,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Ud),i=this.injector.get(tp);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?gl(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(tp),n=this.injector.get(Jd),i=this.injector.get(Zd),r=this.injector.get(Ud),o=this.injector.get(Bo);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function dp(t){return t.appInitializer.bind(t)}function pp(t){return t.bootstrapListener.bind(t)}const mp=new It("Router Initializer");var fp=ri({encapsulation:2,styles:[],data:{}});function gp(t){return vs(0,[(t()(),rs(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),mr(1,212992,null,0,qd,[Xd,Vn,hn,[8,null],Fe],null,null)],(function(t,e){t(e,1,0)}),null)}function yp(t){return vs(0,[(t()(),rs(0,0,null,null,1,"ng-component",[],null,null,null,gp,fp)),mr(1,49152,null,0,Gc,[],null,null)],null,null)}var bp=Ui("ng-component",Gc,yp,{},{},[]);class vp{constructor(){}ngOnInit(){}}var Cp=ri({encapsulation:0,styles:[[""]],data:{}});function Sp(t){return vs(0,[(t()(),rs(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(-1,null,["home-page works!"]))],null,null)}function xp(t){return vs(0,[(t()(),rs(0,0,null,null,1,"app-home-page",[],null,null,null,Sp,Cp)),mr(1,114688,null,0,vp,[],null,null)],(function(t,e){t(e,1,0)}),null)}var _p=Ui("app-home-page",vp,xp,{},{},[]);function kp(){throw Error("Host already has a portal attached")}class wp{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&kp(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Tp extends wp{constructor(t,e,n,i){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=i}}class Ip extends wp{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Ap{constructor(){this._isDisposed=!1}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&kp(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof Tp?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Ip?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Pp extends Ap{constructor(t,e,n,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}class Mp{}const Ep=new Cn("8.2.3");function Dp(t){return null!=t&&"false"!==`${t}`}function Fp(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Lp(t){return Array.isArray(t)?t:[t]}function Rp(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Bp(t){return t instanceof pn?t.nativeElement:t}let Np;try{Np="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(sw){Np=!1}let Op,Vp=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?this._platformId===ll:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Np)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(jr,8))},token:t,providedIn:"root"}),t})();class Wp{}const Hp=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Gp(){if(Op)return Op;if("object"!=typeof document||!document)return Op=new Set(Hp);let t=document.createElement("input");return Op=new Set(Hp.filter(e=>(t.setAttribute("type",e),t.type===e)))}let zp;function Up(t){return function(){if(null==zp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zp=!0}))}finally{zp=zp||!1}return zp}()?t:!!t.capture}const Yp=function(){var t={NORMAL:0,NEGATED:1,INVERTED:2};return t[t.NORMAL]="NORMAL",t[t.NEGATED]="NEGATED",t[t.INVERTED]="INVERTED",t}();let Xp,qp;function jp(){if("object"!=typeof document||!document)return Yp.NORMAL;if(!Xp){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.height="1px",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),Xp=Yp.NORMAL,0===t.scrollLeft&&(t.scrollLeft=1,Xp=0===t.scrollLeft?Yp.NEGATED:Yp.INVERTED),t.parentNode.removeChild(t)}return Xp}const Kp=9,$p=13,Qp=27,Jp=32,Zp=35,tm=36,em=37,nm=38,im=39,rm=40,om=48,sm=57,am=65,lm=90;function hm(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class cm extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class um extends cm{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,i=void 0;try{this.work(t)}catch(r){n=!0,i=!!r&&r||new Error(r)}if(n)return this.unsubscribe(),i}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let dm=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class pm extends dm{constructor(t,e=dm.now){super(t,()=>pm.delegate&&pm.delegate!==this?pm.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return pm.delegate&&pm.delegate!==this?pm.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const mm=new pm(um);function fm(t,e=mm){return n=>n.lift(new gm(t,e))}class gm{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new ym(t,this.dueTime,this.scheduler))}}class ym extends f{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(bm,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function bm(t){t.debouncedNext()}class vm{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new I,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new I,this.change=new I,t instanceof Hr&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){if(this._items.length&&this._items.some(t=>"function"!=typeof t.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ll(t=>this._pressedLetters.push(t)),fm(t),Tl(()=>this._pressedLetters.length>0),G(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const i=(this._activeItemIndex+n)%e.length,r=e[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}setActiveItem(t){const e=this._activeItemIndex;this.updateActiveItem(t),this._activeItemIndex!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case Kp:return void this.tabOut.next();case rm:if(this._vertical&&n){this.setNextItemActive();break}return;case nm:if(this._vertical&&n){this.setPreviousItemActive();break}return;case im:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case em:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((n||hm(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=am&&e<=lm||e>=om&&e<=sm)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),i=e[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}updateActiveItemIndex(t){this.updateActiveItem(t)}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const i=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Hr?this._items.toArray():this._items}}class Cm extends vm{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class Sm extends vm{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let xm=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(sw){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){const t=e&&e.nodeName.toLowerCase();if(-1===km(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===t)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}let i=t.nodeName.toLowerCase(),r=km(t);if(t.hasAttribute("contenteditable"))return-1!==r;if("iframe"===i)return!1;if("audio"===i){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}isFocusable(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||_m(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Vp))},token:t,providedIn:"root"}),t})();function _m(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function km(t){if(!_m(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class wm{constructor(t,e,n,i,r=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], `+`[cdkFocusRegion${t}], `+`[cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated `+"attribute will be removed in 8.0.0.",e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated attribute `+"will be removed in 8.0.0.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),oe()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Xl(1)).subscribe(t)}}let Tm=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new wm(t,this._checker,this._ngZone,this._document,e)}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(xm),Wt(go),Wt(al))},token:t,providedIn:"root"}),t})();const Im=650,Am=Up({passive:!0,capture:!0});let Pm=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=t.composedPath?t.composedPath()[0]:t.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,Im)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)}}monitor(t,e=!1){if(!this._platform.isBrowser)return gl(null);const n=Bp(t);if(this._elementInfo.has(n)){let t=this._elementInfo.get(n);return t.checkChildren=e,t.subject.asObservable()}let i={unlisten:()=>{},checkChildren:e,subject:new I};this._elementInfo.set(n,i),this._incrementMonitoredElementCount();let r=t=>this._onFocus(t,n),o=t=>this._onBlur(t,n);return this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",r,!0),n.addEventListener("blur",o,!0)}),i.unlisten=()=>{n.removeEventListener("focus",r,!0),n.removeEventListener("blur",o,!0)},i.subject.asObservable()}stopMonitoring(t){const e=Bp(t),n=this._elementInfo.get(e);n&&(n.unlisten(),n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())}focusVia(t,e,n){const i=Bp(t);this._setOriginForCurrentEventQueue(e),"function"==typeof i.focus&&i.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_setClasses(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(t){let e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==t.target)return;let i=this._origin;i||(i=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,i),this._emitOrigin(n.subject,i),this._lastFocusOrigin=i}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{document.addEventListener("keydown",this._documentKeydownListener,Am),document.addEventListener("mousedown",this._documentMousedownListener,Am),document.addEventListener("touchstart",this._documentTouchstartListener,Am),window.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,Am),document.removeEventListener("mousedown",this._documentMousedownListener,Am),document.removeEventListener("touchstart",this._documentTouchstartListener,Am),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(go),Wt(Vp))},token:t,providedIn:"root"}),t})();class Mm{}const Em=new Cn("8.2.3"),Dm=new It("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});class Fm{constructor(t,e){this._sanityChecksEnabled=t,this._hammerLoader=e,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&oe()&&!this._isTestEnv()}_isTestEnv(){const t=this._window;return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._document||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){Em.full!==Ep.full&&console.warn("The Angular Material version ("+Em.full+") does not match the Angular CDK version ("+Ep.full+").\nPlease ensure the versions of these two packages exactly match.")}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)}}function Lm(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Dp(t)}}}function Rm(t,e){return class extends t{get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...t){super(...t),this.color=e}}}function Bm(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Dp(t)}}}function Nm(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?t:e}}}function Om(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new I}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}let Vm;try{Vm="undefined"!=typeof Intl}catch(sw){Vm=!1}let Wm=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();function Hm(t,e,n){const i=t.nativeElement.classList;n?i.add(e):i.remove(e)}class Gm{}const zm=function(){var t={FADING_IN:0,VISIBLE:1,FADING_OUT:2,HIDDEN:3};return t[t.FADING_IN]="FADING_IN",t[t.VISIBLE]="VISIBLE",t[t.FADING_OUT]="FADING_OUT",t[t.HIDDEN]="HIDDEN",t}();class Um{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=zm.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ym={enterDuration:450,exitDuration:400},Xm=800,qm=Up({passive:!0});class jm{constructor(t,e,n,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._triggerEvents=new Map,this._activeRipples=new Set,this._onMousedown=t=>{const e=function(t){return 0===t.buttons}(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Xm;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))},this._onTouchStart=t=>{if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}},this._onPointerUp=()=>{this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(t.state===zm.VISIBLE||t.config.terminateOnPointerUp&&t.state===zm.FADING_IN)&&t.fadeOut()}))},i.isBrowser&&(this._containerElement=Bp(n),this._triggerEvents.set("mousedown",this._onMousedown).set("mouseup",this._onPointerUp).set("mouseleave",this._onPointerUp).set("touchstart",this._onTouchStart).set("touchend",this._onPointerUp).set("touchcancel",this._onPointerUp))}fadeInRipple(t,e,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign({},Ym,n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const o=n.radius||function(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,i),s=t-i.left,a=e-i.top,l=r.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${s-o}px`,h.style.top=`${a-o}px`,h.style.height=`${2*o}px`,h.style.width=`${2*o}px`,h.style.backgroundColor=n.color||null,h.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(h),window.getComputedStyle(h).getPropertyValue("opacity"),h.style.transform="scale(1)";const c=new Um(this,h,n);return c.state=zm.FADING_IN,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=zm.VISIBLE,n.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,i=Object.assign({},Ym,t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=zm.FADING_OUT,this._runTimeoutOutsideZone(()=>{t.state=zm.HIDDEN,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=Bp(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._ngZone.runOutsideAngular(()=>{this._triggerEvents.forEach((t,n)=>{e.addEventListener(n,t,qm)})}),this._triggerElement=e)}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_removeTriggerEvents(){this._triggerElement&&this._triggerEvents.forEach((t,e)=>{this._triggerElement.removeEventListener(e,t,qm)})}}const Km=new It("mat-ripple-global-options");class $m{constructor(t,e,n,i,r){this._elementRef=t,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new jm(this,e,t,n),"NoopAnimations"===r&&(this._globalOptions.animation={enterDuration:0,exitDuration:0})}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign({},this._globalOptions.animation,this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign({},this.rippleConfig,n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign({},this.rippleConfig,t))}}class Qm{}class Jm{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}class Zm{}class tf{}const ef=Lm(tf);let nf=0;class rf extends ef{constructor(){super(...arguments),this._labelId=`mat-optgroup-label-${nf++}`}}let of=0;class sf{constructor(t,e=!1){this.source=t,this.isUserInput=e}}const af=new It("MAT_OPTION_PARENT_COMPONENT");class lf{constructor(t,e,n,i){this._element=t,this._changeDetectorRef=e,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${of++}`,this.onSelectionChange=new Vr,this._stateChanges=new I}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Dp(t)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,e){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(e)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){t.keyCode!==$p&&t.keyCode!==Jp||hm(t)||(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new sf(this,t))}}class hf{}const cf=new It("mat-label-global-options");function uf(t,e,n,r){return i(n)&&(r=n,n=void 0),r?uf(t,e,n).pipe(G(t=>l(t)?r(...t):r(t))):new S(i=>{!function t(e,n,i,r,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,i,o),s=()=>t.removeEventListener(n,i,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,i),s=()=>t.off(n,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,i),s=()=>t.removeListener(n,i)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,i,r,o)}r.add(s)}(t,e,(function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),i,n)})}function df(t){return!l(t)&&t-parseFloat(t)+1>=0}function pf(t=0,e,n){let i=-1;return df(e)?i=Number(e)<1?1:Number(e):P(e)&&(n=e),P(n)||(n=mm),new S(e=>{const r=df(t)?t:+t-n.now();return n.schedule(mf,r,{index:0,period:i,subscriber:e})})}function mf(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}class ff{}class gf{}const yf="*";function bf(t,e=null){return{type:2,steps:t,options:e}}function vf(t){return{type:6,styles:t,offset:null}}function Cf(t){Promise.resolve(null).then(t)}class Sf{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Cf(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class xf{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?Cf(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const _f="!";class kf{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new wf(t,this.compare,this.keySelector))}}class wf extends f{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function Tf(t){return e=>e.lift(new If(t))}class If{constructor(t){this.notifier=t}call(t,e){const n=new Af(t),i=W(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class Af extends H{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,i,r){this.seenValue=!0,this.complete()}notifyComplete(){}}const Pf=new It("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});class Mf{constructor(t,e,n,i){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=n,this._animationMode=i}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),n=this._elementRef.nativeElement;n.style.left=e.left,n.style.width=e.width}}const Ef=Up({passive:!0}),Df=60,Ff=650,Lf=100;class Rf{constructor(t,e,n,i,r,o,s){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=n,this._dir=i,this._ngZone=r,this._platform=o,this._animationMode=s,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new I,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new I,this._selectedIndex=0,this.selectFocusedIndex=new Vr,this.indexFocused=new Vr,r.runOutsideAngular(()=>{uf(t.nativeElement,"mouseleave").pipe(Tf(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=Fp(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItemIndex(t))}ngAfterViewInit(){uf(this._previousPaginator.nativeElement,"touchstart",Ef).pipe(Tf(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),uf(this._nextPaginator.nativeElement,"touchstart",Ef).pipe(Tf(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:gl(null),e=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Sm(this._items).withHorizontalOrientation(this._getLayoutDirection()).withWrap(),this._keyManager.updateActiveItem(0),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),J(t,e,this._items.changes).pipe(Tf(this._destroyed)).subscribe(()=>{n(),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(Tf(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!hm(t))switch(t.keyCode){case tm:this._keyManager.setFirstItemActive(),t.preventDefault();break;case Zp:this._keyManager.setLastItemActive(),t.preventDefault();break;case $p:case Jp:this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t);break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,n=this._getLayoutDirection();e.scrollLeft="ltr"==n?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){const t=this.scrollDistance,e=this._platform,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,e&&(e.TRIDENT||e.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){const e=this._items?this._items.toArray()[t]:null;if(!e)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:r}=e.elementRef.nativeElement;let o,s;"ltr"==this._getLayoutDirection()?s=(o=i)+r:o=(s=this._tabList.nativeElement.offsetWidth-i)-r;const a=this.scrollDistance,l=this.scrollDistance+n;o<a?this.scrollDistance-=a-o+Df:s>l&&(this.scrollDistance+=s-l+Df)}_checkPaginationEnabled(){const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}_checkScrollingControls(){this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck()}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t){this._stopInterval(),pf(Ff,Lf).pipe(Tf(J(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:n}=this._scrollHeader(t);(0===n||n>=e)&&this._stopInterval()})}_scrollTo(t){const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}class Bf extends Rf{constructor(t,e,n,i,r,o,s){super(t,i,r,e,n,o,s),this._disableRipple=!1,this.color="primary"}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement.classList;e.remove(`mat-background-${this.backgroundColor}`),t&&e.add(`mat-background-${t}`),this._backgroundColor=t}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Dp(t)}_itemSelected(){}ngAfterContentInit(){this._items.changes.pipe(nh(null),Tf(this._destroyed)).subscribe(()=>{this.updateActiveLink()}),super.ngAfterContentInit()}updateActiveLink(t){if(!this._items)return;const e=this._items.toArray();for(let n=0;n<e.length;n++)if(e[n].active)return this.selectedIndex=n,void this._changeDetectorRef.markForCheck();this.selectedIndex=-1,this._inkBar.hide()}}class Nf extends Bf{constructor(t,e,n,i,r,o,s){super(t,e,n,i,r,o,s)}}class Of{}const Vf=Nm(Bm(Lm(Of)));class Wf extends Vf{constructor(t,e,n,i,r,o){super(),this._tabNavBar=t,this.elementRef=e,this._focusMonitor=r,this._isActive=!1,this.rippleConfig=n||{},this.tabIndex=parseInt(i)||0,"NoopAnimations"===o&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0}),r.monitor(e)}get active(){return this._isActive}set active(t){t!==this._isActive&&(this._isActive=t,this._tabNavBar.updateActiveLink(this.elementRef))}get rippleDisabled(){return this.disabled||this.disableRipple||this._tabNavBar.disableRipple||!!this.rippleConfig.disabled}focus(){this.elementRef.nativeElement.focus()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.elementRef)}}class Hf extends Wf{constructor(t,e,n,i,r,o,s,a){super(t,e,r,o,s,a),this._tabLinkRipple=new jm(this,n,e,i),this._tabLinkRipple.setupTriggerEvents(e.nativeElement)}ngOnDestroy(){super.ngOnDestroy(),this._tabLinkRipple._removeTriggerEvents()}}class Gf{}function zf(){return"undefined"!=typeof process}function Uf(t){switch(t.length){case 0:return new Sf;case 1:return t[0];default:return new xf(t)}}function Yf(t,e,n,i,r={},o={}){const s=[],a=[];let l=-1,h=null;if(i.forEach(t=>{const n=t.offset,i=n==l,c=i&&h||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,s),a){case _f:a=r[n];break;case yf:a=o[n];break;default:a=e.normalizeStyleValue(n,i,a,s)}c[i]=a}),i||a.push(c),h=c,l=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function Xf(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&qf(n,"start",t)));break;case"done":t.onDone(()=>i(n&&qf(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&qf(n,"destroy",t)))}}function qf(t,e,n){const i=n.totalTime,r=jf(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),o=t._data;return null!=o&&(r._data=o),r}function jf(t,e,n,i,r="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function Kf(t,e,n){let i;return t instanceof Map?(i=t.get(e))||t.set(e,i=n):(i=t[e])||(i=t[e]=n),i}function $f(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Qf=(t,e)=>!1,Jf=(t,e)=>!1,Zf=(t,e,n)=>[];const tg=zf();(tg||"undefined"!=typeof Element)&&(Qf=(t,e)=>t.contains(e),Jf=(()=>{if(tg||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Jf}})(),Zf=(t,e,n)=>{let i=[];if(n)i.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&i.push(n)}return i});let eg=null,ng=!1;function ig(t){eg||(eg=("undefined"!=typeof document?document.body:null)||{},ng=!!eg.style&&"WebkitAppearance"in eg.style);let e=!0;return eg.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in eg.style)&&ng&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in eg.style),e}const rg=Jf,og=Qf,sg=Zf;function ag(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}class lg{validateStyleProperty(t){return ig(t)}matchesElement(t,e){return rg(t,e)}containsElement(t,e){return og(t,e)}query(t,e,n){return sg(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,o=[],s){return new Sf(n,i)}}let hg=(()=>{class t{}return t.NOOP=new lg,t})();const cg=1e3,ug="{{",dg="ng-enter",pg="ng-leave",mg="ng-trigger",fg=".ng-trigger",gg="ng-animating",yg=".ng-animating";function bg(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:vg(parseFloat(e[1]),e[2])}function vg(t,e){switch(e){case"s":return t*cg;default:return t}}function Cg(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=vg(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(r=vg(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else i=t;if(!n){let n=!1,o=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:o}}(t,e,n)}function Sg(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function xg(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else Sg(t,n);return n}function _g(t,e,n){return n?e+":"+n+";":""}function kg(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=_g(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=_g(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function wg(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=Fg(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),zf()&&kg(t))}function Tg(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=Fg(e);t.style[n]=""}),zf()&&kg(t))}function Ig(t){return Array.isArray(t)?1==t.length?t[0]:bf(t):t}const Ag=new RegExp(`${ug}\\s*(.+?)\\s*}}`,"g");function Pg(t){let e=[];if("string"==typeof t){const n=t.toString();let i;for(;i=Ag.exec(n);)e.push(i[1]);Ag.lastIndex=0}return e}function Mg(t,e,n){const i=t.toString(),r=i.replace(Ag,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function Eg(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Dg=/-+([a-z0-9])/g;function Fg(t){return t.replace(Dg,(...t)=>t[1].toUpperCase())}function Lg(t,e){return 0===t||0===e}function Rg(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let o=e[0],s=[];if(i.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var r=1;r<e.length;r++){let n=e[r];s.forEach((function(e){n[e]=Ng(t,e)}))}}return e}function Bg(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Ng(t,e){return window.getComputedStyle(t)[e]}const Og="*";function Vg(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>(function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],o=i[2],s=i[3];e.push(Gg(r,s)),"<"!=o[0]||r==Og&&s==Og||e.push(Gg(s,r))})(t,n,e)):n.push(t),n}const Wg=new Set(["true","1"]),Hg=new Set(["false","0"]);function Gg(t,e){const n=Wg.has(t)||Hg.has(t),i=Wg.has(e)||Hg.has(e);return(r,o)=>{let s=t==Og||t==r,a=e==Og||e==o;return!s&&n&&"boolean"==typeof r&&(s=r?Wg.has(t):Hg.has(t)),!a&&i&&"boolean"==typeof o&&(a=o?Wg.has(e):Hg.has(e)),s&&a}}const zg=":self",Ug=new RegExp(`s*${zg}s*,?`,"g");function Yg(t,e,n){return new qg(t).build(e,n)}const Xg="";class qg{constructor(t){this._driver=t}build(t,e){const n=new jg(e);return this._resetContextStyleTimingState(n),Bg(this,Ig(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector=Xg,t.collectedStyles={},t.collectedStyles[Xg]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,o.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:o,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,o=i||{};if(n.styles.forEach(t=>{if(Kg(t)){const e=t;Object.keys(e).forEach(t=>{Pg(e[t]).forEach(t=>{o.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=Eg(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Bg(this,Ig(t.animation),e);return{type:1,matchers:Vg(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:$g(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Bg(this,t,e)),options:$g(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=Bg(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:$g(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Qg(Cg(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Qg(0,0,"");return t.dynamic=!0,t.strValue=i,t}return Qg((n=n||Cg(i,e)).duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:vf({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,o=!1;if(!r){o=!0;const t={};n.easing&&(t.easing=n.easing),r=vf(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(r,e);s.isEmptyStep=o,i=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==yf?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(Kg(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf(ug)>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(r!=i&&r>=s.startTime&&i<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=s.startTime),a&&(o[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=Pg(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let o=!1,s=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Kg(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Kg(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),h=0;return null!=l&&(i++,h=n.offset=l),s=s||h<0||h>1,o=o||h<a,a=h,r.push(h),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const h=t.steps.length;let c=0;i>0&&i<h?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(c=1/(h-1));const u=h-1,d=e.currentTime,p=e.currentAnimateTimings,m=p.duration;return l.forEach((t,i)=>{const o=c>0?i==u?1:c*i:r[i],s=o*m;e.currentTime=d+p.delay+s,p.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Bg(this,Ig(t.animation),e),options:$g(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:$g(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:$g(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>t==zg);return e&&(t=t.replace(Ug,"")),[t=t.replace(/@\*/g,fg).replace(/@\w+/g,t=>fg+"-"+t.substr(1)).replace(/:animating/g,yg),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,Kf(e.collectedStyles,e.currentQuerySelector,{});const s=Bg(this,Ig(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:$g(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Cg(t.timings,e.errors,!0);return{type:12,animation:Bg(this,Ig(t.animation),e),timings:n,options:null}}}class jg{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Kg(t){return!Array.isArray(t)&&"object"==typeof t}function $g(t){var e;return t?(t=Sg(t)).params&&(t.params=(e=t.params)?Sg(e):null):t={},t}function Qg(t,e,n){return{duration:t,delay:e,easing:n}}function Jg(t,e,n,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class Zg{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const ty=1,ey=new RegExp(":enter","g"),ny=new RegExp(":leave","g");function iy(t,e,n,i,r,o={},s={},a,l,h=[]){return(new ry).buildKeyframes(t,e,n,i,r,o,s,a,l,h)}class ry{buildKeyframes(t,e,n,i,r,o,s,a,l,h=[]){l=l||new Zg;const c=new sy(t,e,l,i,r,h,[]);c.options=a,c.currentTimeline.setStyles([o],null,c.errors,a),Bg(this,n,c);const u=c.timelines.filter(t=>t.containsAnimation());if(u.length&&Object.keys(s).length){const t=u[u.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,c.errors,a)}return u.length?u.map(t=>t.buildKeyframes()):[Jg(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?bg(n.duration):null,o=null!=n.delay?bg(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,o);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),Bg(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&((i=e.createSubContext(r)).transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=oy);const t=bg(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Bg(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?bg(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);r&&s.delayNextStep(r),Bg(this,o,s),i=Math.max(i,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Cg(e.params?Mg(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?bg(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=oy);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,i)=>{e.currentQueryIndex=i;const s=e.createSubContext(t.options,n);r&&s.delayNextStep(r),n===e.element&&(a=s.currentTimeline),Bg(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const h=l.currentTime;Bg(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-h+(i.startTime-n.currentTimeline.startTime)}}const oy={};class sy{constructor(t,e,n,i,r,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new ay(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=bg(n.duration)),null!=n.delay&&(i.delay=bg(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=Mg(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new sy(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=oy,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new ly(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,o){let s=[];if(i&&s.push(this.element),t.length>0){t=(t=t.replace(ey,"."+this._enterClassName)).replace(ny,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return r||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class ay{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ay(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ty,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||yf,this._currentKeyframe[t]=yf}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},o=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e)).forEach(t=>{n[t]=yf}):xg(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=Mg(o[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:yf),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,o)=>{const s=xg(r,!0);Object.keys(s).forEach(n=>{const i=s[n];i==_f?t.add(n):i==yf&&e.add(n)}),n||(s.offset=o/this.duration),i.push(s)});const r=t.size?Eg(t.values()):[],o=e.size?Eg(e.values()):[];if(n){const t=i[0],e=Sg(t);t.offset=0,e.offset=1,i=[t,e]}return Jg(this.element,i,r,o,this.duration,this.startTime,this.easing,!1)}}class ly extends ay{constructor(t,e,n,i,r,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=n+e,s=e/o,a=xg(t[0],!1);a.offset=0,r.push(a);const l=xg(t[0],!1);l.offset=hy(s),r.push(l);const h=t.length-1;for(let i=1;i<=h;i++){let s=xg(t[i],!1);s.offset=hy((e+s.offset*n)/o),r.push(s)}n=o,e=0,i="",t=r}return Jg(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function hy(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class cy{}class uy extends cy{normalizePropertyName(t,e){return Fg(t)}normalizeStyleValue(t,e,n,i){let r="";const o=n.toString().trim();if(dy[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+r}}const dy=(()=>(function(t){const e={};return t.forEach(t=>e[t]=!0),e})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function py(t,e,n,i,r,o,s,a,l,h,c,u,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:h,postStyleProps:c,totalTime:u,errors:d}}const my={};class fy{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],o=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):o}build(t,e,n,i,r,o,s,a,l,h){const c=[],u=this.ast.options&&this.ast.options.params||my,d=this.buildStyles(n,s&&s.params||my,c),p=a&&a.params||my,m=this.buildStyles(i,p,c),f=new Set,g=new Map,y=new Map,b="void"===i,v={params:Object.assign({},u,p)},C=h?[]:iy(t,e,this.ast.animation,r,o,d,m,v,l,c);let S=0;if(C.forEach(t=>{S=Math.max(t.duration+t.delay,S)}),c.length)return py(e,this._triggerName,n,i,b,d,m,[],[],g,y,S,c);C.forEach(t=>{const n=t.element,i=Kf(g,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=Kf(y,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&f.add(n)});const x=Eg(f.values());return py(e,this._triggerName,n,i,b,d,m,C,x,g,y,S)}}class gy{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},i=Sg(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let o=r[t];o.length>1&&(o=Mg(o,i,e)),n[t]=o})}}),n}}class yy{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new gy(t.style,t.options&&t.options.params||{})}),by(this.states,"true","1"),by(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new fy(t,e,this.states))}),this.fallbackTransition=new fy(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function by(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const vy=new Zg;class Cy{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=Yg(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=Yf(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let o;const s=new Map;if(r?(o=iy(this._driver,e,r,dg,pg,{},{},n,vy,i)).forEach(t=>{const e=Kf(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)}):(i.push("The requested animation doesn't exist or has already been destroyed"),o=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,yf)})});const a=Uf(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=jf(e,"","","");return Xf(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const Sy="ng-animate-queued",xy=".ng-animate-queued",_y="ng-animate-disabled",ky=".ng-animate-disabled",wy="ng-star-inserted",Ty=".ng-star-inserted",Iy=[],Ay={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Py={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},My="__ng_removed";class Ey{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=Sg(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Dy="void",Fy=new Ey(Dy);class Ly{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Gy(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const o=Kf(this._elementListeners,t,[]),s={name:e,phase:n,callback:i};o.push(s);const a=Kf(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(Gy(t,mg),Gy(t,mg+"-"+e),a[e]=Fy),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),o=new By(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(Gy(t,mg),Gy(t,mg+"-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const l=new Ey(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[e]=l,a||(a=Fy),l.value!==Dy&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,l.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Tg(t,n),wg(t,i)})}return}const h=Kf(this._engine.playersByElement,t,[]);h.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=r.matchTransition(a.value,l.value,t,l.params),u=!1;if(!c){if(!i)return;c=r.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:o,isFallbackTransition:u}),u||(Gy(t,Sy),o.onStart(()=>{zy(t,Sy)})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),h.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e,n=!1){this._engine.driver.query(t,fg,!0).forEach(t=>{if(t[My])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)})}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const o=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Dy,i);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Uf(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const i=e.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,o=this._engine.statesByElement.get(t)[i]||Fy,s=new Ey(Dy),a=new By(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:r,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}this.prepareLeaveAnimationListeners(t),i?n.markElementAsRemoved(this.id,t,!1,e):(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}insertNode(t,e){Gy(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,o=this._elementListeners.get(r);o&&o.forEach(e=>{if(e.name==n.triggerName){const i=jf(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,Xf(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(e=>e.element===t)||e}}class Ry{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Ly(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(Ny(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!Ny(e))return;const r=e[My];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Gy(t,_y)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),zy(t,_y))}removeNode(t,e,n,i){if(Ny(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e[My]={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return Ny(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,fg,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,yg,!0)).forEach(t=>this.finishActiveQueriedAnimationOnElement(t))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Uf(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[My];if(e&&e.setForRemoval){if(t[My]=Ay,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,ky)&&this.markElementAsDisabled(t,!1),this.driver.query(t,ky,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Gy(this.collectedEnterElements[n],wy);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Uf(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Zg,i=[],r=new Map,o=[],s=new Map,a=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(t=>{h.add(t);const e=this.driver.query(t,xy,!0);for(let n=0;n<e.length;n++)h.add(e[n])});const c=this.bodyNode,u=Array.from(this.statesByElement.keys()),d=Wy(u,this.collectedEnterElements),p=new Map;let m=0;d.forEach((t,e)=>{const n=dg+m++;p.set(e,n),t.forEach(t=>Gy(t,n))});const f=[],g=new Set,y=new Set;for(let M=0;M<this.collectedLeaveElements.length;M++){const t=this.collectedLeaveElements[M],e=t[My];e&&e.setForRemoval&&(f.push(t),g.add(t),e.hasAnimation?this.driver.query(t,Ty,!0).forEach(t=>g.add(t)):y.add(t))}const b=new Map,v=Wy(u,Array.from(g));v.forEach((t,e)=>{const n=pg+m++;b.set(e,n),t.forEach(t=>Gy(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>zy(t,n))}),v.forEach((t,e)=>{const n=b.get(e);t.forEach(t=>zy(t,n))}),f.forEach(t=>{this.processLeaveNode(t)})});const C=[],S=[];for(let M=this._namespaceList.length-1;M>=0;M--)this._namespaceList[M].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(C.push(e),this.collectedEnterElements.length){const t=r[My];if(t&&t.setForMove)return void e.destroy()}const h=!c||!this.driver.containsElement(c,r),u=b.get(r),d=p.get(r),m=this._buildInstruction(t,n,d,u,h);if(!m.errors||!m.errors.length)return h?(e.onStart(()=>Tg(r,m.fromStyles)),e.onDestroy(()=>wg(r,m.toStyles)),void i.push(e)):t.isFallbackTransition?(e.onStart(()=>Tg(r,m.fromStyles)),e.onDestroy(()=>wg(r,m.toStyles)),void i.push(e)):(m.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,m.timelines),o.push({instruction:m,player:e,element:r}),m.queriedElements.forEach(t=>Kf(s,t,[]).push(e)),m.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void m.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=l.get(e);i||l.set(e,i=new Set),n.forEach(t=>i.add(t))}));S.push(m)});if(S.length){const t=[];S.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),C.forEach(t=>t.destroy()),this.reportError(t)}const x=new Map,_=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(_.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Kf(x,e,[]).push(t),t.destroy()})});const k=f.filter(t=>Yy(t,a,l)),w=new Map;Vy(w,this.driver,y,l,yf).forEach(t=>{Yy(t,a,l)&&k.push(t)});const T=new Map;d.forEach((t,e)=>{Vy(T,this.driver,new Set(t),a,_f)}),k.forEach(t=>{const e=w.get(t),n=T.get(t);w.set(t,Object.assign({},e,n))});const I=[],A=[],P={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(h.has(e))return o.onDestroy(()=>wg(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);let t=P;if(_.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=_.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>_.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,x,r,T,w);if(o.setRealPlayer(n),t===P)I.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=Uf(e)),i.push(o)}}else Tg(e,s.fromStyles),o.onDestroy(()=>wg(e,s.toStyles)),A.push(o),h.has(e)&&i.push(o)}),A.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=Uf(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let M=0;M<f.length;M++){const t=f[M],e=t[My];if(zy(t,pg),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,yg,!0);for(let t=0;t<i.length;t++){let e=s.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?Uy(this,t,i):this.processLeaveNode(t)}return f.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const i=e[My];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==Dy;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&o.push(e)})}}return(n||i)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==i,l=Kf(n,t,[]);this._getPreviousPlayers(t,a,r,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Tg(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,o){const s=e.triggerName,a=e.element,l=[],h=new Set,c=new Set,u=e.timelines.map(e=>{const u=e.element;h.add(u);const d=u[My];if(d&&d.removedBeforeQueried)return new Sf(e.duration,e.delay);const p=u!==a,m=function(t){const e=[];return function t(e,n){for(let i=0;i<e.length;i++){const r=e[i];r instanceof xf?t(r.players,n):n.push(r)}}(t,e),e}((n.get(u)||Iy).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===u),f=r.get(u),g=o.get(u),y=Yf(0,this._normalizer,0,e.keyframes,f,g),b=this._buildPlayer(e,y,m);if(e.subTimeline&&i&&c.add(u),p){const e=new By(t,s,u);e.setRealPlayer(b),l.push(e)}return b});l.forEach(t=>{Kf(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>(function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e)){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e]){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i})(this.playersByQueriedElement,t.element,t))}),h.forEach(t=>Gy(t,gg));const d=Uf(u);return d.onDestroy(()=>{h.forEach(t=>zy(t,gg)),wg(a,e.toStyles)}),c.forEach(t=>{Kf(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Sf(t.duration,t.delay)}}class By{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Sf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Xf(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Kf(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Ny(t){return t&&1===t.nodeType}function Oy(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Vy(t,e,n,i,r){const o=[];n.forEach(t=>o.push(Oy(t)));const s=[];i.forEach((n,i)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i[My]=Py,s.push(i))}),t.set(i,o)});let a=0;return n.forEach(t=>Oy(t,o[a++])),s}function Wy(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=r.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:i.has(s)?1:t(s),r.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}const Hy="$$classes";function Gy(t,e){if(t.classList)t.classList.add(e);else{let n=t[Hy];n||(n=t[Hy]={}),n[e]=!0}}function zy(t,e){if(t.classList)t.classList.remove(e);else{let n=t[Hy];n&&delete n[e]}}function Uy(t,e,n){Uf(n).onDone(()=>t.processLeaveNode(e))}function Yy(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class Xy{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Ry(t,e,n),this._timelineEngine=new Cy(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const o=t+"-"+i;let s=this._triggerCache[o];if(!s){const t=[],e=Yg(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new yy(t,e)}(i,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,i,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=$f(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=$f(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function qy(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=Ky(e[0]),e.length>1&&(i=Ky(e[e.length-1]))):e&&(n=Ky(e)),n||i?new jy(t,n,i):null}let jy=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&wg(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wg(this._element,this._initialStyles),this._endStyles&&(wg(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Tg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Tg(this._element,this._endStyles),this._endStyles=null),wg(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Ky(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];$y(r)&&((e=e||{})[r]=t[r])}return e}function $y(t){return"display"===t||"position"===t}const Qy=3,Jy="animation",Zy="animationend",tb=1e3;class eb{constructor(t,e,n,i,r,o,s){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=ab(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),sb(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),ob(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nb(this._element,this._name,"paused")}resume(){nb(this._element,this._name,"running")}setPosition(t){const e=ib(this._element,this._name);this._position=t*this._duration,sb(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(Qy))*tb;t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),ob(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=ab(t,"").split(","),i=rb(n,e);i>=0&&(n.splice(i,1),sb(t,"",n.join(",")))}(this._element,this._name))}}function nb(t,e,n){sb(t,"PlayState",n,ib(t,e))}function ib(t,e){const n=ab(t,"");return n.indexOf(",")>0?rb(n.split(","),e):rb([n],e)}function rb(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function ob(t,e,n){n?t.removeEventListener(Zy,e):t.addEventListener(Zy,e)}function sb(t,e,n,i){const r=Jy+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function ab(t,e){return t.style[Jy+e]}const lb="forwards",hb="linear";class cb{constructor(t,e,n,i,r,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||hb,this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new eb(this.element,this.animationName,this._duration,this._delay,this.easing,lb,()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Ng(this.element,n))})}this.currentSnapshot=t}}class ub extends Sf{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=ag(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}const db="gen_css_kf_",pb=" ";class mb{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return ig(t)}matchesElement(t,e){return rg(t,e)}containsElement(t,e){return og(t,e)}query(t,e,n){return sg(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>ag(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=pb;const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=pb,Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const o=document.createElement("style");return o.innerHTML=i,o}animate(t,e,n,i,r,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof cb),l={};Lg(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const h=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Rg(t,e,l));if(0==n)return new ub(t,h);const c=`${db}${this._count++}`,u=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(u);const d=qy(t,e),p=new cb(t,e,c,n,i,r,h,d);return p.onDestroy(()=>(function(t){t.parentNode.removeChild(t)})(u)),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class fb{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ng(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class gb{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(yb().toString()),this._cssKeyframesDriver=new mb}validateStyleProperty(t){return ig(t)}matchesElement(t,e){return rg(t,e)}containsElement(t,e){return og(t,e)}query(t,e,n){return sg(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,o);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},h=o.filter(t=>t instanceof fb);Lg(n,i)&&h.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=qy(t,e=Rg(t,e=e.map(t=>xg(t,!1)),l));return new fb(t,e,a,c)}}function yb(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}class bb extends ff{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:jt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?bf(t):t;return Sb(this._renderer,null,e,"register",[n]),new vb(e,this._renderer)}}class vb extends gf{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Cb(this._id,t,e||{},this._renderer)}}class Cb{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Sb(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function Sb(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const xb="@",_b="@.disabled";class kb{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new wb("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(r,t),e.data.animation.forEach(e=>this.engine.registerTrigger(i,r,t,e.name,e)),new Tb(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class wb{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==xb&&e==_b?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Tb extends wb{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==xb?"."==e.charAt(1)&&e==_b?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==xb){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),o="";return r.charAt(0)!=xb&&([r,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}class Ib extends Xy{constructor(t,e,n){super(t.body,e,n)}}function Ab(){return"function"==typeof yb()?new gb:new mb}function Pb(){return new uy}function Mb(t,e,n){return new kb(t,e,n)}const Eb=new It("AnimationModuleType");class Db{}const Fb=new It("cdk-dir-doc",{providedIn:"root",factory:function(){return Ht(al)}});let Lb=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Vr,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Fb,8))},token:t,providedIn:"root"}),t})();class Rb{}var Bb=ri({encapsulation:2,styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:0;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}@media (-ms-high-contrast:active){.mat-option{margin:0 1px}.mat-option.mat-active{border:solid 1px currentColor;margin:0}}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}@media (-ms-high-contrast:active){.mat-option .mat-option-ripple{opacity:.5}}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}"],data:{}});function Nb(t){return vs(0,[(t()(),rs(0,0,null,null,1,"mat-pseudo-checkbox",[["class","mat-option-pseudo-checkbox mat-pseudo-checkbox"]],[[2,"mat-pseudo-checkbox-indeterminate",null],[2,"mat-pseudo-checkbox-checked",null],[2,"mat-pseudo-checkbox-disabled",null],[2,"_mat-animation-noopable",null]],null,null,Wb,Vb)),mr(1,49152,null,0,Jm,[[2,Eb]],{state:[0,"state"],disabled:[1,"disabled"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.selected?"checked":"",n.disabled)}),(function(t,e){t(e,0,0,"indeterminate"===er(e,1).state,"checked"===er(e,1).state,er(e,1).disabled,"NoopAnimations"===er(e,1)._animationMode)}))}function Ob(t){return vs(2,[(t()(),is(16777216,null,null,1,null,Nb)),mr(1,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),rs(2,0,null,null,1,"span",[["class","mat-option-text"]],null,null,null,null,null)),ms(null,0),(t()(),rs(4,0,null,null,1,"div",[["class","mat-option-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),mr(5,212992,null,0,$m,[pn,go,Vp,[2,Km],[2,Eb]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null)],(function(t,e){var n=e.component;t(e,1,0,n.multiple),t(e,5,0,n.disabled||n.disableRipple,n._getHostElement())}),(function(t,e){t(e,4,0,er(e,5).unbounded)}))}var Vb=ri({encapsulation:2,styles:[".mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0,0,.2,.1),background-color 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:'';border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0,0,.2,.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}"],data:{}});function Wb(t){return vs(2,[],null,null)}const Hb="accent",Gb=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class zb{constructor(t){this._elementRef=t}}const Ub=Rm(Lm(Bm(zb)));class Yb extends Ub{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of Gb)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);t.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color=Hb)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}class Xb{}var qb=ri({encapsulation:2,styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media (hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}@media (-ms-high-contrast:active){.mat-button-focus-overlay{background-color:#fff}}@media (-ms-high-contrast:black-on-white){.mat-button-focus-overlay{background-color:#000}}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}@media (-ms-high-contrast:active){.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button{outline:solid 1px}}"],data:{}});function jb(t){return vs(2,[hs(671088640,1,{ripple:0}),(t()(),rs(1,0,null,null,1,"span",[["class","mat-button-wrapper"]],null,null,null,null,null)),ms(null,0),(t()(),rs(3,0,null,null,1,"div",[["class","mat-button-ripple mat-ripple"],["matRipple",""]],[[2,"mat-button-ripple-round",null],[2,"mat-ripple-unbounded",null]],null,null,null,null)),mr(4,212992,[[1,4]],0,$m,[pn,go,Vp,[2,Km],[2,Eb]],{centered:[0,"centered"],disabled:[1,"disabled"],trigger:[2,"trigger"]},null),(t()(),rs(5,0,null,null,0,"div",[["class","mat-button-focus-overlay"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,4,0,n.isIconButton,n._isRippleDisabled(),n._getHostElement())}),(function(t,e){var n=e.component;t(e,3,0,n.isRoundButton||n.isIconButton,er(e,4).unbounded)}))}class Kb{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Dp(t)}get inset(){return this._inset}set inset(t){this._inset=Dp(t)}}class $b{}var Qb=ri({encapsulation:2,styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],data:{}});function Jb(t){return vs(2,[],null,null)}class Zb{}class tv{}class ev{}class nv{constructor(){this.align="start"}}class iv{}class rv{constructor(t){this._animationMode=t}}class ov{}class sv{}var av=ri({encapsulation:2,styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}@media (-ms-high-contrast:active){.mat-card{outline:solid 1px}}.mat-card-actions,.mat-card-content,.mat-card-subtitle{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media (max-width:599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card-content>:first-child,.mat-card>:first-child{margin-top:0}.mat-card-content>:last-child:not(.mat-card-footer),.mat-card>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-subtitle:not(:first-child),.mat-card-title:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],data:{}});function lv(t){return vs(2,[ms(null,0),ms(null,1)],null,null)}var hv=ri({encapsulation:2,styles:[],data:{}});function cv(t){return vs(2,[ms(null,0),(t()(),rs(1,0,null,null,1,"div",[["class","mat-card-header-text"]],null,null,null,null,null)),ms(null,1),ms(null,2)],null,null)}let uv=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.ngInjectableDef=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})(),dv=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Bp(t);return new S(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new I,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(uv))},token:t,providedIn:"root"}),t})();class pv{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new Vr,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Dp(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Fp(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(fm(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}class mv{}class fv{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new gv(t,this.durationSelector))}}class gv extends H{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=W(this,n);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,i){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function yv(t,e=mm){return n=()=>pf(t,e),function(t){return t.lift(new fv(n))};var n}class bv extends um{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class vv extends pm{}const Cv=new vv(bv);function Sv(t,e){return new S(e?n=>e.schedule(xv,0,{error:t,subscriber:n}):e=>e.error(t))}function xv({error:t,subscriber:e}){e.error(t)}let _v=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return gl(this.value);case"E":return Sv(this.error);case"C":return ml()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class kv extends f{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(kv.dispatch,this.delay,new wv(t,this.destination)))}_next(t){this.scheduleMessage(_v.createNext(t))}_error(t){this.scheduleMessage(_v.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(_v.createComplete()),this.unsubscribe()}}class wv{constructor(t,e){this.notification=t,this.destination=e}}class Tv extends I{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new Iv(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let o;if(this.closed)throw new k;if(this.isStopped||this.hasError?o=d.EMPTY:(this.observers.push(t),o=new w(this,t)),i&&t.add(t=new kv(t,i)),e)for(let s=0;s<r&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<r&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Cv).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let o=0;for(;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i}}class Iv{constructor(t,e){this.time=t,this.value=e}}const Av=20;let Pv=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._scrolled=new I,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Av){return this._platform.isBrowser?new S(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(yv(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):gl()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Tl(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_scrollableContainsElement(t,e){let n=e.nativeElement,i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>uf(window.document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(go),Wt(Vp))},token:t,providedIn:"root"}),t})();class Mv{constructor(t,e,n,i){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=i,this._destroyed=new I,this._elementScrolled=new S(t=>this.ngZone.runOutsideAngular(()=>uf(this.elementRef.nativeElement,"scroll").pipe(Tf(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;t.left=null==t.left?n?t.end:t.start:t.left,t.right=null==t.right?n?t.start:t.end:t.right,null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&jp()!=Yp.NORMAL?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),jp()==Yp.INVERTED?t.left=t.right:jp()==Yp.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&jp()==Yp.INVERTED?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&jp()==Yp.NEGATED?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}class Ev{}const Dv=20;let Fv=(()=>{class t{constructor(t,e){this._platform=t,e.runOutsideAngular(()=>{this._change=t.isBrowser?J(uf(window,"resize"),uf(window,"orientationchange")):gl(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}}change(t=Dv){return t>0?this._change.pipe(yv(t)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Vp),Wt(go))},token:t,providedIn:"root"}),t})();var Lv=ri({encapsulation:2,styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-pagination-after,.mat-tab-header-rtl .mat-tab-header-pagination-before{padding-right:4px}.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:'';height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform .5s cubic-bezier(.35,0,.25,1)}.mat-tab-links{display:flex}[mat-align-tabs=center] .mat-tab-links{justify-content:center}[mat-align-tabs=end] .mat-tab-links{justify-content:flex-end}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:.5s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}@media (-ms-high-contrast:active){.mat-ink-bar{outline:solid 2px;height:0}}.mat-tab-link-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-link{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;vertical-align:top;text-decoration:none;position:relative;overflow:hidden;-webkit-tap-highlight-color:transparent}.mat-tab-link:focus{outline:0}.mat-tab-link:focus:not(.mat-tab-disabled){opacity:1}@media (-ms-high-contrast:active){.mat-tab-link:focus{outline:dotted 2px}}.mat-tab-link.mat-tab-disabled{cursor:default}@media (-ms-high-contrast:active){.mat-tab-link.mat-tab-disabled{opacity:.5}}.mat-tab-link .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}@media (-ms-high-contrast:active){.mat-tab-link{opacity:1}}[mat-stretch-tabs] .mat-tab-link{flex-basis:0;flex-grow:1}.mat-tab-link.mat-tab-disabled{pointer-events:none}@media (max-width:599px){.mat-tab-link{min-width:72px}}"],data:{}});function Rv(t){return vs(2,[hs(402653184,1,{_inkBar:0}),hs(402653184,2,{_tabListContainer:0}),hs(402653184,3,{_tabList:0}),hs(671088640,4,{_nextPaginator:0}),hs(671088640,5,{_previousPaginator:0}),(t()(),rs(5,0,[[5,0],["previousPaginator",1]],null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-before mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"click"],[null,"mousedown"],[null,"touchend"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r._handlePaginatorClick("before")&&i),"mousedown"===e&&(i=!1!==r._handlePaginatorPress("before")&&i),"touchend"===e&&(i=!1!==r._stopInterval()&&i),i}),null,null)),mr(6,212992,null,0,$m,[pn,go,Vp,[2,Km],[2,Eb]],{disabled:[0,"disabled"]},null),(t()(),rs(7,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null)),(t()(),rs(8,0,[[2,0],["tabListContainer",1]],null,6,"div",[["class","mat-tab-link-container"]],null,[[null,"keydown"]],(function(t,e,n){var i=!0;return"keydown"===e&&(i=!1!==t.component._handleKeydown(n)&&i),i}),null,null)),(t()(),rs(9,0,[[3,0],["tabList",1]],null,5,"div",[["class","mat-tab-list"]],null,[[null,"cdkObserveContent"]],(function(t,e,n){var i=!0;return"cdkObserveContent"===e&&(i=!1!==t.component._onContentChanges()&&i),i}),null,null)),mr(10,1196032,null,0,pv,[dv,pn,go],null,{event:"cdkObserveContent"}),(t()(),rs(11,0,null,null,1,"div",[["class","mat-tab-links"]],null,null,null,null,null)),ms(null,0),(t()(),rs(13,0,null,null,1,"mat-ink-bar",[["class","mat-ink-bar"]],[[2,"_mat-animation-noopable",null]],null,null,null,null)),mr(14,16384,[[1,4]],0,Mf,[pn,go,Pf,[2,Eb]],null,null),(t()(),rs(15,0,[[4,0],["nextPaginator",1]],null,2,"div",[["aria-hidden","true"],["class","mat-tab-header-pagination mat-tab-header-pagination-after mat-elevation-z4 mat-ripple"],["mat-ripple",""]],[[2,"mat-tab-header-pagination-disabled",null],[2,"mat-ripple-unbounded",null]],[[null,"mousedown"],[null,"click"],[null,"touchend"]],(function(t,e,n){var i=!0,r=t.component;return"mousedown"===e&&(i=!1!==r._handlePaginatorPress("after")&&i),"click"===e&&(i=!1!==r._handlePaginatorClick("after")&&i),"touchend"===e&&(i=!1!==r._stopInterval()&&i),i}),null,null)),mr(16,212992,null,0,$m,[pn,go,Vp,[2,Km],[2,Eb]],{disabled:[0,"disabled"]},null),(t()(),rs(17,0,null,null,0,"div",[["class","mat-tab-header-pagination-chevron"]],null,null,null,null,null))],(function(t,e){var n=e.component;t(e,6,0,n._disableScrollBefore||n.disableRipple),t(e,16,0,n._disableScrollAfter||n.disableRipple)}),(function(t,e){var n=e.component;t(e,5,0,n._disableScrollBefore,er(e,6).unbounded),t(e,13,0,"NoopAnimations"===er(e,14)._animationMode),t(e,15,0,n._disableScrollAfter,er(e,16).unbounded)}))}class Bv{}function Nv(t){return Error(`A hint was already declared for 'align="${t}"'.`)}class Ov{}let Vv=0;const Wv=.75,Hv=5;class Gv{constructor(t){this._elementRef=t}}const zv=Rm(Gv,"primary"),Uv=new It("MAT_FORM_FIELD_DEFAULT_OPTIONS");class Yv extends zv{constructor(t,e,n,i,r,o,s,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this._defaults=r,this._platform=o,this._ngZone=s,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new I,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${Vv++}`,this._labelId=`mat-form-field-label-${Vv++}`,this._previousDirection="ltr",this._labelOptions=n||{},this.floatLabel=this._labelOptions.float||"auto",this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Dp(t)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._labelOptions.float||"auto",this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(nh(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Tf(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(Tf(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),J(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(nh(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(nh(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Tf(this._destroyed)).subscribe(()=>{this.updateOutlineGap(),this._previousDirection=this._dir.value})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&(this._showAlwaysAnimate=!0,uf(this._label.nativeElement,"transitionend").pipe(Xl(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw Nv("start");t=n}else if("end"===n.align){if(e)throw Nv("end");e=n}})}}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!document.documentElement.contains(this._elementRef.nativeElement))return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),o=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(r),s=this._getStartEnd(t.children[0].getBoundingClientRect());let a=0;for(const e of t.children)a+=e.offsetWidth;e=s-o-Hv,n=a>0?a*Wv+2*Hv:0}for(let s=0;s<r.length;s++)r.item(s).style.width=`${e}px`;for(let s=0;s<o.length;s++)o.item(s).style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return"rtl"===this._previousDirection?t.right:t.left}}class Xv{}var qv=ri({encapsulation:2,styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}@media (-ms-high-contrast:active){.mat-form-field-infix{border-image:linear-gradient(transparent,transparent)}}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform .4s cubic-bezier(.25,.8,.25,1),color .4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label,.mat-form-field-empty.mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scaleY(1.0001)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform .3s cubic-bezier(.25,.8,.25,1),opacity .1s cubic-bezier(.25,.8,.25,1),background-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-label-wrapper .mat-icon,.mat-form-field-subscript-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",".mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:'';display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}",".mat-input-element{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=month]::after,.mat-input-element[type=time]::after,.mat-input-element[type=week]::after{content:' ';white-space:pre;width:1px}.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button,.mat-input-element::-webkit-inner-spin-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color .4s .133s cubic-bezier(.25,.8,.25,1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent!important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:0 0}@media (-ms-high-contrast:active){.mat-focused select.mat-input-element::-ms-value{color:inherit}}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:'';width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}",".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-start{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start{border-width:2px;transition:border-color .3s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity .1s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}@media (-ms-high-contrast:active){.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity .6s cubic-bezier(.25,.8,.25,1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],data:{animation:[{type:7,name:"transitionMessages",definitions:[{type:0,name:"enter",styles:{type:6,styles:{opacity:1,transform:"translateY(0%)"},offset:null},options:void 0},{type:1,expr:"void => enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-100%)"},offset:null},{type:4,styles:null,timings:"300ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}]}});function jv(t){return vs(0,[(t()(),rs(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),rs(1,0,null,null,3,"div",[["class","mat-form-field-outline"]],null,null,null,null,null)),(t()(),rs(2,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),rs(3,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),rs(4,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null)),(t()(),rs(5,0,null,null,3,"div",[["class","mat-form-field-outline mat-form-field-outline-thick"]],null,null,null,null,null)),(t()(),rs(6,0,null,null,0,"div",[["class","mat-form-field-outline-start"]],null,null,null,null,null)),(t()(),rs(7,0,null,null,0,"div",[["class","mat-form-field-outline-gap"]],null,null,null,null,null)),(t()(),rs(8,0,null,null,0,"div",[["class","mat-form-field-outline-end"]],null,null,null,null,null))],null,null)}function Kv(t){return vs(0,[(t()(),rs(0,0,null,null,1,"div",[["class","mat-form-field-prefix"]],null,null,null,null,null)),ms(null,0)],null,null)}function $v(t){return vs(0,[(t()(),rs(0,0,null,null,3,null,null,null,null,null,null,null)),ms(null,2),(t()(),rs(2,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),gs(3,null,["",""]))],null,(function(t,e){t(e,3,0,e.component._control.placeholder)}))}function Qv(t){return vs(0,[ms(null,3),(t()(),is(0,null,null,0))],null,null)}function Jv(t){return vs(0,[(t()(),rs(0,0,null,null,1,"span",[["aria-hidden","true"],["class","mat-placeholder-required mat-form-field-required-marker"]],null,null,null,null,null)),(t()(),gs(-1,null,[" *"]))],null,null)}function Zv(t){return vs(0,[(t()(),rs(0,0,[[4,0],["label",1]],null,8,"label",[["class","mat-form-field-label"]],[[8,"id",0],[1,"for",0],[1,"aria-owns",0],[2,"mat-empty",null],[2,"mat-form-field-empty",null],[2,"mat-accent",null],[2,"mat-warn",null]],[[null,"cdkObserveContent"]],(function(t,e,n){var i=!0;return"cdkObserveContent"===e&&(i=!1!==t.component.updateOutlineGap()&&i),i}),null,null)),mr(1,16384,null,0,Za,[],{ngSwitch:[0,"ngSwitch"]},null),mr(2,1196032,null,0,pv,[dv,pn,go],{disabled:[0,"disabled"]},{event:"cdkObserveContent"}),(t()(),is(16777216,null,null,1,null,$v)),mr(4,278528,null,0,tl,[Vn,Nn,Za],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),is(16777216,null,null,1,null,Qv)),mr(6,278528,null,0,tl,[Vn,Nn,Za],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),is(16777216,null,null,1,null,Jv)),mr(8,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,1,0,n._hasLabel()),t(e,2,0,"outline"!=n.appearance),t(e,4,0,!1),t(e,6,0,!0),t(e,8,0,!n.hideRequiredMarker&&n._control.required&&!n._control.disabled)}),(function(t,e){var n=e.component;t(e,0,0,n._labelId,n._control.id,n._control.id,n._control.empty&&!n._shouldAlwaysFloat,n._control.empty&&!n._shouldAlwaysFloat,"accent"==n.color,"warn"==n.color)}))}function tC(t){return vs(0,[(t()(),rs(0,0,null,null,1,"div",[["class","mat-form-field-suffix"]],null,null,null,null,null)),ms(null,4)],null,null)}function eC(t){return vs(0,[(t()(),rs(0,0,[[1,0],["underline",1]],null,1,"div",[["class","mat-form-field-underline"]],null,null,null,null,null)),(t()(),rs(1,0,null,null,0,"span",[["class","mat-form-field-ripple"]],[[2,"mat-accent",null],[2,"mat-warn",null]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,1,0,"accent"==n.color,"warn"==n.color)}))}function nC(t){return vs(0,[(t()(),rs(0,0,null,null,1,"div",[],[[24,"@transitionMessages",0]],null,null,null,null)),ms(null,5)],null,(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function iC(t){return vs(0,[(t()(),rs(0,0,null,null,1,"div",[["class","mat-hint"]],[[8,"id",0]],null,null,null,null)),(t()(),gs(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n._hintLabelId),t(e,1,0,n.hintLabel)}))}function rC(t){return vs(0,[(t()(),rs(0,0,null,null,5,"div",[["class","mat-form-field-hint-wrapper"]],[[24,"@transitionMessages",0]],null,null,null,null)),(t()(),is(16777216,null,null,1,null,iC)),mr(2,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),ms(null,6),(t()(),rs(4,0,null,null,0,"div",[["class","mat-form-field-hint-spacer"]],null,null,null,null,null)),ms(null,7)],(function(t,e){t(e,2,0,e.component.hintLabel)}),(function(t,e){t(e,0,0,e.component._subscriptAnimationState)}))}function oC(t){return vs(2,[hs(671088640,1,{underlineRef:0}),hs(402653184,2,{_connectionContainerRef:0}),hs(671088640,3,{_inputContainerRef:0}),hs(671088640,4,{_label:0}),(t()(),rs(4,0,null,null,20,"div",[["class","mat-form-field-wrapper"]],null,null,null,null,null)),(t()(),rs(5,0,[[2,0],["connectionContainer",1]],null,11,"div",[["class","mat-form-field-flex"]],null,[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==(r._control.onContainerClick&&r._control.onContainerClick(n))&&i),i}),null,null)),(t()(),is(16777216,null,null,1,null,jv)),mr(7,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),is(16777216,null,null,1,null,Kv)),mr(9,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),rs(10,0,[[3,0],["inputContainer",1]],null,4,"div",[["class","mat-form-field-infix"]],null,null,null,null,null)),ms(null,1),(t()(),rs(12,0,null,null,2,"span",[["class","mat-form-field-label-wrapper"]],null,null,null,null,null)),(t()(),is(16777216,null,null,1,null,Zv)),mr(14,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),is(16777216,null,null,1,null,tC)),mr(16,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),is(16777216,null,null,1,null,eC)),mr(18,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),rs(19,0,null,null,5,"div",[["class","mat-form-field-subscript-wrapper"]],null,null,null,null,null)),mr(20,16384,null,0,Za,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),is(16777216,null,null,1,null,nC)),mr(22,278528,null,0,tl,[Vn,Nn,Za],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),is(16777216,null,null,1,null,rC)),mr(24,278528,null,0,tl,[Vn,Nn,Za],{ngSwitchCase:[0,"ngSwitchCase"]},null)],(function(t,e){var n=e.component;t(e,7,0,"outline"==n.appearance),t(e,9,0,n._prefixChildren.length),t(e,14,0,n._hasFloatingLabel()),t(e,16,0,n._suffixChildren.length),t(e,18,0,"outline"!=n.appearance),t(e,20,0,n._getDisplayedMessages()),t(e,22,0,"error"),t(e,24,0,"hint")}),null)}function sC(...t){let e;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),0===t.length?pl:e?sC(t).pipe(G(t=>e(...t))):new S(e=>new aC(e,t))}class aC extends H{constructor(t,e){super(t),this.sources=e,this.completed=0,this.haveValues=0;const n=e.length;this.values=new Array(n);for(let i=0;i<n;i++){const t=W(this,e[i],null,i);t&&this.add(t)}}notifyNext(t,e,n,i,r){this.values[n]=e,r._hasValue||(r._hasValue=!0,this.haveValues++)}notifyComplete(t){const{destination:e,haveValues:n,values:i}=this,r=i.length;t._hasValue?(this.completed++,this.completed===r&&(n===r&&e.next(i),e.complete())):e.complete()}}const lC=new It("NgValueAccessor"),hC=new It("CompositionEventMode");class cC{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=uh()?uh().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}class uC{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class dC extends uC{get formDirective(){return null}get path(){return null}}function pC(){throw new Error("unimplemented")}class mC extends uC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return pC()}get asyncValidator(){return pC()}}class fC{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class gC extends fC{constructor(t){super(t)}}function yC(t){return null==t||0===t.length}const bC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vC{static min(t){return e=>{if(yC(e.value)||yC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(yC(e.value)||yC(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return yC(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return yC(t.value)?null:bC.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(yC(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return vC.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(yC(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(CC);return 0==e.length?null:function(t){return xC(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(CC);return 0==e.length?null:function(t){return sC(function(t,e){return e.map(e=>e(t))}(t,e).map(SC)).pipe(G(xC))}}}function CC(t){return null!=t}function SC(t){const e=tn(t)?X(t):t;if(!en(e))throw new Error("Expected validator to return Promise or Observable.");return e}function xC(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function _C(t){return t.validate?e=>t.validate(e):t}function kC(t){return t.validate?e=>t.validate(e):t}class wC{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}const TC={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class IC{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${TC.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${TC.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${TC.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${TC.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${TC.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${TC.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function AC(t,e){return[...e.path,t]}function PC(t,e){t||FC(e,"Cannot find control with"),e.valueAccessor||FC(e,"No value accessor for form control with"),t.validator=vC.compose([t.validator,e.validator]),t.asyncValidator=vC.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&MC(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&MC(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function MC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function EC(t,e){null==t&&FC(e,"Cannot find control with"),t.validator=vC.compose([t.validator,e.validator]),t.asyncValidator=vC.composeAsync([t.asyncValidator,e.asyncValidator])}function DC(t){return FC(t,"There is no FormControl instance attached to form control element with")}function FC(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function LC(t){return null!=t?vC.compose(t.map(_C)):null}function RC(t){return null!=t?vC.composeAsync(t.map(kC)):null}const BC=[class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ke}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Ke}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const i=t.item(e),r=this._getOptionValue(i.value);n.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const i=t.item(e);if(i.selected){const t=this._getOptionValue(i.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},class{constructor(t,e,n,i){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(mC),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function NC(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function OC(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const VC="VALID",WC="INVALID",HC="PENDING",GC="DISABLED";function zC(t){const e=YC(t)?t.validators:t;return Array.isArray(e)?LC(e):e||null}function UC(t,e){const n=YC(e)?e.asyncValidators:t;return Array.isArray(n)?RC(n):n||null}function YC(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class XC{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===VC}get invalid(){return this.status===WC}get pending(){return this.status==HC}get disabled(){return this.status===GC}get enabled(){return this.status!==GC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=zC(t)}setAsyncValidators(t){this.asyncValidator=UC(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=HC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=GC,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=VC,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==VC&&this.status!==HC||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?GC:VC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=HC;const e=SC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof jC?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof KC&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Vr,this.statusChanges=new Vr}_calculateStatus(){return this._allControlsDisabled()?GC:this.errors?WC:this._anyControlsHaveStatus(HC)?HC:this._anyControlsHaveStatus(WC)?WC:VC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){YC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class qC extends XC{constructor(t=null,e,n){super(zC(e),UC(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class jC extends XC{constructor(t,e,n){super(zC(e),UC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof qC?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,i)=>{e=e||this.contains(i)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class KC extends XC{constructor(t,e,n){super(zC(e),UC(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof qC?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const $C=(()=>Promise.resolve(null))();class QC extends dC{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Vr,this.form=new jC({},LC(t),RC(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$C.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),PC(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$C.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),OC(this._directives,t)})}addFormGroup(t){$C.then(()=>{const e=this._findContainer(t.path),n=new jC({});EC(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$C.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){$C.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,NC(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}class JC{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${TC.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${TC.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${TC.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${TC.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${TC.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${TC.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const ZC=new It("NgFormSelectorWarning");class tS extends dC{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return AC(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return LC(this._validators)}get asyncValidator(){return RC(this._asyncValidators)}_checkParentType(){}}class eS extends tS{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof eS||this._parent instanceof QC||JC.modelGroupParentException()}}const nS=(()=>Promise.resolve(null))();class iS extends mC{constructor(t,e,n,i){super(),this.control=new qC,this._registered=!1,this.update=new Vr,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||FC(t,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return e.forEach(e=>{e.constructor===cC?n=e:function(t){return BC.some(e=>t.constructor===e)}(e)?(i&&FC(t,"More than one built-in value accessor matches form control with"),i=e):(r&&FC(t,"More than one custom value accessor matches form control with"),r=e)}),r||i||n||(FC(t,"No valid value accessor for form control with"),null)}(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Ke(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?AC(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return LC(this._rawValidators)}get asyncValidator(){return RC(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){PC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof eS)&&this._parent instanceof tS?JC.formGroupNameException():this._parent instanceof eS||this._parent instanceof QC||JC.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||JC.missingNameException()}_updateValue(t){nS.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;nS.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}const rS=new It("NgModelWithFormControlWarning");class oS extends dC{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Vr}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return PC(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){OC(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);EC(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);EC(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,NC(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>DC(e)),e.valueAccessor.registerOnTouched(()=>DC(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&PC(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=LC(this._validators);this.form.validator=vC.compose([this.form.validator,t]);const e=RC(this._asyncValidators);this.form.asyncValidator=vC.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||IC.missingFormException()}}class sS{}class aS{group(t,e=null){const n=this._reduceControls(t);let i=null,r=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,r=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,r=null!=e.asyncValidator?e.asyncValidator:null)),new jC(n,{asyncValidators:r,updateOn:o,validators:i})}control(t,e,n){return new qC(t,e,n)}array(t,e,n){const i=t.map(t=>this._createControl(t));return new KC(i,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof qC||t instanceof jC||t instanceof KC?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}class lS{static withConfig(t){return{ngModule:lS,providers:[{provide:ZC,useValue:t.warnOnDeprecatedNgFormSelector}]}}}class hS{static withConfig(t){return{ngModule:hS,providers:[{provide:rS,useValue:t.warnOnNgModelWithFormControl}]}}}class cS{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Rp(-this._previousScrollPosition.left),t.style.top=Rp(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,i=e.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=i,n.scrollBehavior=r}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function uS(){return Error("Scroll strategy has already been attached.")}class dS{constructor(t,e,n,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw uS();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class pS{enable(){}disable(){}attach(){}}function mS(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function fS(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class gS{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw uS();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();mS(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yS=(()=>{class t{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new pS,this.close=t=>new dS(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new cS(this._viewportRuler,this._document),this.reposition=t=>new gS(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=i}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Pv),Wt(Fv),Wt(go),Wt(al))},token:t,providedIn:"root"}),t})();class bS{constructor(t){if(this.scrollStrategy=new pS,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class vS{constructor(t,e,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class CS{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function SS(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "top", "bottom" or "center".')}function xS(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "start", "end" or "center".')}let _S=(()=>{class t{constructor(t){this._attachedOverlays=[],this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEventSubscriptions>0){e[n]._keydownEvents.next(t);break}},this._document=t}ngOnDestroy(){this._detach()}add(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(al))},token:t,providedIn:"root"}),t})(),kS=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.getElementsByClassName("cdk-overlay-container");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(al))},token:t,providedIn:"root"}),t})();class wS{constructor(t,e,n,i,r,o,s,a){this._portalOutlet=t,this._host=e,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=o,this._document=s,this._location=a,this._backdropElement=null,this._backdropClick=new I,this._attachments=new I,this._detachments=new I,this._locationChanges=d.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEventsObservable=new S(t=>{const e=this._keydownEvents.subscribe(t);return this._keydownEventSubscriptions++,()=>{e.unsubscribe(),this._keydownEventSubscriptions--}}),this._keydownEvents=new I,this._keydownEventSubscriptions=0,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Xl(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEventsObservable}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign({},this._config,t),this._updateElementSize()}setDirection(t){this._config=Object.assign({},this._config,{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Rp(this._config.width),t.height=Rp(this._config.height),t.minWidth=Rp(this._config.minWidth),t.minHeight=Rp(this._config.minHeight),t.maxWidth=Rp(this._config.maxWidth),t.maxHeight=Rp(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const i=t.classList;Lp(e).forEach(t=>{t&&(n?i.add(t):i.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(Tf(J(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const TS="cdk-overlay-connected-position-bounding-box";class IS{constructor(t,e,n,i,r){this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new I,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add(TS),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,i=[];let r;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),l=this._getOverlayFit(a,e,n,o);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!r||r.overlayFit.visibleArea<l.visibleArea)&&(r={overlayFit:l,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(i.length){let t=null,e=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>e&&(e=i,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&AS(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(TS),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,i;if("center"==e.originX)n=t.left+t.width/2;else{const i=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;n="start"==e.originX?i:r}return{x:n,y:i="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}_getOverlayPoint(t,e,n){let i,r;return i="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,{x:t.x+i,y:t.y+(r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height)}}_getOverlayFit(t,e,n,i){let{x:r,y:o}=t,s=this._getOffset(i,"x"),a=this._getOffset(i,"y");s&&(r+=s),a&&(o+=a);let l=0-o,h=o+e.height-n.height,c=this._subtractOverflows(e.width,0-r,r+e.width-n.width),u=this._subtractOverflows(e.height,l,h),d=c*u;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:u===e.height,fitsInViewportHorizontally:c==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const i=n.bottom-e.y,r=n.right-e.x,o=this._overlayRef.getConfig().minHeight,s=this._overlayRef.getConfig().minWidth,a=t.fitsInViewportHorizontally||null!=s&&s<=r;return(t.fitsInViewportVertically||null!=o&&o<=i)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=this._viewportRect,r=Math.max(t.x+e.width-i.right,0),o=Math.max(t.y+e.height-i.bottom,0),s=Math.max(i.top-n.top-t.y,0),a=Math.max(i.left-n.left-t.x,0);let l=0,h=0;return this._previousPushAmount={x:l=e.width<=i.width?a||-r:t.x<this._viewportMargin?i.left-n.left-t.x:0,y:h=e.height<=i.height?s||-o:t.y<this._viewportMargin?i.top-n.top-t.y:0},{x:t.x+l,y:t.y+h}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new CS(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,i=this._isRtl();let r,o,s,a,l,h;if("top"===e.overlayY)r=n.height-(o=t.y)+this._viewportMargin;else if("bottom"===e.overlayY)r=n.height-(s=n.height-t.y+2*this._viewportMargin)+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),i=this._lastBoundingBoxSize.height;o=t.y-e,(r=2*e)>i&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-i/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)h=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),i=this._lastBoundingBoxSize.width;l=t.x-e,(a=2*e)>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-i/2)}return{top:o,left:l,bottom:s,right:h,width:a,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="",i.width=i.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=Rp(n.height),i.top=Rp(n.top),i.bottom=Rp(n.bottom),i.width=Rp(n.width),i.left=Rp(n.left),i.right=Rp(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(i.maxHeight=Rp(t)),r&&(i.maxWidth=Rp(r))}this._lastBoundingBoxSize=n,AS(this._boundingBox.style,i)}_resetBoundingBoxStyles(){AS(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){AS(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={};if(this._hasExactPosition()){const i=this._viewportRuler.getViewportScrollPosition();AS(n,this._getExactOverlayY(e,t,i)),AS(n,this._getExactOverlayX(e,t,i))}else n.position="static";let i="",r=this._getOffset(e,"x"),o=this._getOffset(e,"y");r&&(i+=`translateX(${r}px) `),o&&(i+=`translateY(${o}px)`),n.transform=i.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),AS(this._pane.style,n)}_getExactOverlayY(t,e,n){let i={top:null,bottom:null},r=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=o,"bottom"===t.overlayY?i.bottom=`${this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)}px`:i.top=Rp(r.y),i}_getExactOverlayX(t,e,n){let i,r={left:null,right:null},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),"right"==(i=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?r.right=`${this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)}px`:r.left=Rp(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:fS(t,n),isOriginOutsideView:mS(t,n),isOverlayClipped:fS(e,n),isOverlayOutsideView:mS(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{xS("originX",t.originX),SS("originY",t.originY),xS("overlayX",t.overlayX),SS("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&Lp(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof pn)return t.nativeElement.getBoundingClientRect();if(t instanceof HTMLElement)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function AS(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}class PS{constructor(t,e,n,i,r,o,s){this._preferredPositions=[],this._positionStrategy=new IS(n,i,r,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,i){const r=new vS(t,e,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const MS="cdk-global-overlay-wrapper";class ES{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(MS),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();t.position=this._cssPosition,t.marginLeft="100%"===n.width?"0":this._leftOffset,t.marginTop="100%"===n.height?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,"100%"===n.width?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems="100%"===n.height?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(MS),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let DS=(()=>{class t{constructor(t,e,n,i){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=i}global(){return new ES}connectedTo(t,e,n){return new PS(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new IS(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Fv),Wt(al),Wt(Vp),Wt(kS))},token:t,providedIn:"root"}),t})(),FS=0;class LS{constructor(t,e,n,i,r,o,s,a,l,h){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=o,this._ngZone=s,this._document=a,this._directionality=l,this._location=h}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),i=this._createPortalOutlet(n),r=new bS(t);return r.direction=r.direction||this._directionality.value,new wS(i,e,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id=`cdk-overlay-${FS++}`,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Bo)),new Pp(t,this._componentFactoryResolver,this._appRef,this._injector)}}const RS=new It("cdk-connected-overlay-scroll-strategy");function BS(t){return()=>t.scrollStrategies.reposition()}class NS{}class OS{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new VS(t,this.delay,this.scheduler))}}class VS extends f{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,i=t.scheduler,r=t.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const e=Math.max(0,n[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(VS.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new WS(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(_v.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(_v.createComplete()),this.unsubscribe()}}class WS{constructor(t,e){this.time=t,this.notification=e}}let HS=0;class GS{constructor(t,e){this.source=t,this.option=e}}class zS{}const US=Bm(zS),YS=new It("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});class XS extends US{constructor(t,e,n){super(),this._changeDetectorRef=t,this._elementRef=e,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new Vr,this.opened=new Vr,this.closed=new Vr,this._classList={},this.id=`mat-autocomplete-${HS++}`,this._autoActiveFirstOption=!!n.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(t){this._autoActiveFirstOption=Dp(t)}set classList(t){this._classList=t&&t.length?t.split(" ").reduce((t,e)=>(t[e.trim()]=!0,t),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new Cm(this.options).withWrap(),this._setVisibility()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){const e=new GS(this,t);this.optionSelected.emit(e)}_setVisibilityClasses(t){t["mat-autocomplete-visible"]=this.showPanel,t["mat-autocomplete-hidden"]=!this.showPanel}}const qS=48,jS=256,KS=new It("mat-autocomplete-scroll-strategy");function $S(t){return()=>t.scrollStrategies.reposition()}class QS{constructor(t,e,n,i,r,o,s,a,l,h){this._element=t,this._overlay=e,this._viewContainerRef=n,this._zone=i,this._changeDetectorRef=r,this._dir=s,this._formField=a,this._document=l,this._viewportRuler=h,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=d.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new I,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=kl(()=>this.autocomplete&&this.autocomplete.options?J(...this.autocomplete.options.map(t=>t.onSelectionChange)):this._zone.onStable.asObservable().pipe(Xl(1),Jl(()=>this.optionSelections))),this._scrollStrategy=o}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(t){this._autocompleteDisabled=Dp(t)}ngAfterViewInit(){if("undefined"!=typeof window&&(this._zone.runOutsideAngular(()=>{window.addEventListener("blur",this._windowBlurHandler)}),function(){if(null==qp){const t="undefined"!=typeof document?document.head:null;qp=!(!t||!t.createShadowRoot&&!t.attachShadow)}return qp}())){const t=this._element.nativeElement,e=t.getRootNode?t.getRootNode():null;this._isInsideShadowRoot=e instanceof window.ShadowRoot}}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){"undefined"!=typeof window&&window.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return J(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Tl(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Tl(()=>this._overlayAttached)):gl()).pipe(G(t=>t instanceof sf?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return J(uf(this._document,"click"),uf(this._document,"touchend")).pipe(Tl(t=>{const e=this._isInsideShadowRoot&&t.composedPath?t.composedPath()[0]:t.target,n=this._formField?this._formField._elementRef.nativeElement:null;return this._overlayAttached&&e!==this._element.nativeElement&&(!n||!n.contains(e))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(e)}))}writeValue(t){Promise.resolve(null).then(()=>this._setTriggerValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){const e=t.keyCode;if(e===Qp&&t.preventDefault(),this.activeOption&&e===$p&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){const n=this.autocomplete._keyManager.activeItem,i=e===nm||e===rm;this.panelOpen||e===Kp?this.autocomplete._keyManager.onKeydown(t):i&&this._canOpen()&&this.openPanel(),(i||this.autocomplete._keyManager.activeItem!==n)&&this._scrollToOption()}}_handleInput(t){let e=t.target,n=e.value;"number"===e.type&&(n=""==n?null:parseFloat(n)),this._previousValue!==n&&(this._previousValue=n,this._onChange(n),this._canOpen()&&this._document.activeElement===t.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(t=!1){this._formField&&"auto"===this._formField.floatLabel&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_scrollToOption(){const t=this.autocomplete._keyManager.activeItemIndex||0,e=function(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),o=0;for(let e=0;e<t+1;e++)i[e].group&&i[e].group===r[o]&&o++;return o}return 0}(t,this.autocomplete.options,this.autocomplete.optionGroups);if(0===t&&1===e)this.autocomplete._setScrollTop(0);else{const n=function(t,e,n,i){const r=t*e;return r<n?r:r+e>n+i?Math.max(0,r-i+e):n}(t+e,qS,this.autocomplete._getScrollTop(),jS);this.autocomplete._setScrollTop(n)}}_subscribeToClosingActions(){return J(this._zone.onStable.asObservable().pipe(Xl(1)),this.autocomplete.options.changes.pipe(Ll(()=>this._positionStrategy.reapplyLastPosition()),function(t,e=mm){var n;const i=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new OS(i,e))}(0))).pipe(Jl(()=>{const t=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),t!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),Xl(1)).subscribe(t=>this._setValueAndClose(t))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(t){const e=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(t):t,n=null!=e?e:"";this._formField?this._formField._control.value=n:this._element.nativeElement.value=n,this._previousValue=n}_setValueAndClose(t){t&&t.source&&(this._clearPreviousSelectedOption(t.source),this._setTriggerValue(t.source.value),this._onChange(t.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(t.source)),this.closePanel()}_clearPreviousSelectedOption(t){this.autocomplete.options.forEach(e=>{e!=t&&e.selected&&e.deselect()})}_attachOverlay(){if(!this.autocomplete)throw Error("Attempting to open an undefined instance of `mat-autocomplete`. Make sure that the id passed to the `matAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.");let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new Ip(this.autocomplete.template,this._viewContainerRef),t=this._overlay.create(this._getOverlayConfig()),this._overlayRef=t,t.keydownEvents().subscribe(t=>{(t.keyCode===Qp||t.keyCode===nm&&t.altKey)&&(this._resetActiveItem(),this._closeKeyEventStream.next(),t.stopPropagation(),t.preventDefault())}),this._viewportRuler&&(this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}))),t&&!t.hasAttached()&&(t.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const e=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&e!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new bS({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir})}_getOverlayPosition(){const t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){const e={originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},n={originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-autocomplete-panel-above"};let i;t.withPositions(i="above"===this.position?[n]:"below"===this.position?[e]:[e,n])}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){this.autocomplete._keyManager.setActiveItem(this.autocomplete.autoActiveFirstOption?0:-1)}_canOpen(){const t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this._autocompleteDisabled}}class JS{}const ZS=Up({passive:!0});let tx=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return pl;const e=Bp(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const i=new I,r="cdk-text-field-autofilled",o=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(r)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(r)&&(e.classList.remove(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!1}))):(e.classList.add(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",o,ZS),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:i,unlisten:()=>{e.removeEventListener("animationstart",o,ZS)}}),i.asObservable()}stopMonitoring(t){const e=Bp(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Vp),Wt(go))},token:t,providedIn:"root"}),t})();class ex{}const nx=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let ix=0;class rx{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i}}const ox=Om(rx);class sx extends ox{constructor(t,e,n,i,r,o,s,a,l){super(o,i,r,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._uid=`mat-input-${ix++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new I,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>Gp().has(t));const h=this._elementRef.nativeElement;this._inputValueAccessor=s||h,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===h.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Dp(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Dp(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&Gp().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Dp(t)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(nx.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}class ax{}var lx=ri({encapsulation:2,styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}@media (-ms-high-contrast:active){.mat-autocomplete-panel{outline:solid 1px}}"],data:{}});function hx(t){return vs(0,[(t()(),rs(0,0,[[2,0],["panel",1]],null,3,"div",[["class","mat-autocomplete-panel"],["role","listbox"]],[[8,"id",0]],null,null,null,null)),gr(512,null,Ga,za,[Dn,Fn,pn,bn]),mr(2,278528,null,0,Ya,[Ga],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),ms(null,0)],(function(t,e){t(e,2,0,"mat-autocomplete-panel",e.component._classList)}),(function(t,e){t(e,0,0,e.component.id)}))}function cx(t){return vs(2,[hs(402653184,1,{template:0}),hs(671088640,2,{panel:0}),(t()(),is(0,[[1,2]],null,0,null,hx))],null,null)}var ux=n("VQUD");class dx{constructor(t,e,n){this.fs=t,this.ns=e,this.fbs=n,this.myControl=new qC,this.links=["All","Stock","Crypto","Forex"],this.activeLink=this.links[0],this.showStock=!0,this.showCrypto=!0,this.showForex=!0,this.listings=this.convertToListings(),this.filteredListings=[],this.stocks=[],this.symbols=["msft","aapl"],this.typed=""}onKey(t){this.filterListings(),console.log(this.typed)}ngOnInit(){this.fbs.getStocks().subscribe(t=>{this.stocks=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),setTimeout(()=>this.stocks.forEach(t=>{this.drawChart(this.stocks.indexOf(t))}))})}filterListings(){this.filteredListings=[],this.listings.forEach(t=>{(t.companyName.toLowerCase().includes(this.typed)||t.symbol.toLowerCase().includes(this.typed))&&this.filteredListings.push(t)})}getTopHeadlines(){return this.ns.getTopHeadlines()}show(t){switch(t){case"Stock":this.showStock=!0,this.showCrypto=!1,this.showForex=!1;case"Forex":this.showStock=!1,this.showCrypto=!1,this.showForex=!0;case"Crypto":this.showStock=!1,this.showCrypto=!0,this.showForex=!1;case"All":this.showStock=!0,this.showCrypto=!0,this.showForex=!0}console.log(t)}fillDb(){this.stocks.forEach(t=>{this.fbs.createStock(t)})}addToDb(t){this.fs.addStockToFirebase(t)}drawChart(t){let e=[],n=[],i=[],r=[],o=[];this.stocks[t].daily.forEach(t=>{e.push({y:Math.round(t.close)}),n.push({y:Math.round(t.open)}),i.push({y:Math.round(t.high)}),r.push({y:Math.round(t.low)}),o.push({y:Math.round(t.volume)})}),new ux.Chart("chartContainer"+t,{zoomEnabled:!0,animationEnabled:!0,exportEnabled:!0,title:{text:"Daily Chart"},data:[{type:"line",dataPoints:e,name:"Close",showInLegend:!0},{type:"line",dataPoints:n,name:"Open",showInLegend:!0},{type:"line",dataPoints:i,name:"High",showInLegend:!0},{type:"line",dataPoints:r,name:"Low",showInLegend:!0}]}).render()}getSector(){return this.fs.getSector()}getStockQuote(t){console.log(this.stocks[0].daily)}searchSymbol(t){return this.fs.searchSymbol(t)}getStockDaily(t){return this.fs.getStockDaily(t)}getStockWeekly(t){return this.fs.getStockWeekly(t)}getStockMonthly(t){return this.fs.getStockMonthly(t)}getCryptoDaily(t,e){return this.fs.getCryptoDaily(t,e)}getCryptoWeekly(t,e){return this.fs.getCryptoWeekly(t,e)}getCryptoMonthly(t,e){return this.fs.getCryptoMonthly(t,e)}getForexDaily(t,e){return this.fs.getForexDaily(t,e)}getForexWeekly(t,e){return this.fs.getForexWeekly(t,e)}getForexMonthly(t,e){return this.fs.getForexMonthly(t,e)}convertToListings(){let t=[];return'ACT Symbol,Company Name\n      A,"Agilent Technologies, Inc. Common Stock"\n      AA,Alcoa Inc. Common Stock\n      AA$B,Alcoa Inc. Depository Shares Representing 1/10th Preferred Convertilble Class B Series 1\n      AAC,"AAC Holdings, Inc. Common Stock"\n      AAN,"Aaron\'s, Inc. Common Stock"\n      AAP,Advance Auto Parts Inc Advance Auto Parts Inc W/I\n      AAT,"American Assets Trust, Inc. Common Stock"\n      AAV,Advantage Oil & Gas Ltd  Ordinary Shares\n      AB,Allianceberstein Holding L.P.  Units\n      ABB,ABB Ltd Common Stock\n      ABBV,AbbVie Inc. Common Stock\n      ABC,AmerisourceBergen Corporation (Holding Co) Common Stock\n      ABEV,Ambev S.A. American Depositary Shares (Each representing 1 Common Share)\n      ABG,Asbury Automotive Group Inc Common Stock\n      ABM,ABM Industries Incorporated Common Stock\n      ABR,Arbor Realty Trust Common Stock\n      ABR$A,Arbor Realty Trust Preferred Series A\n      ABR$B,Arbor Realty Trust Cumulative Redeemable Preferred Series B\n      ABR$C,Arbor Realty Trust Cumulative Redeemable Preferred Series C\n      ABRN,Arbor Realty Trust 7.375% Senior Notes due 2021\n      ABT,Abbott Laboratories Common Stock\n      ABX,Barrick Gold Corporation Common Stock\n      ACC,American Campus Communities Inc Common Stock\n      ACCO,Acco Brands Corporation Common Stock\n      ACE,Ace Limited Common Stock\n      ACG,Alliancebernstein Income Fund\n      ACH,Aluminum Corporation of China Limited American Depositary Shares\n      ACI,"Arch Coal, Inc. Common Stock"\n      ACM,AECOM Common Stock\n      ACMP,"Access Midstream Partners, L.P. Common Units Representing Limited Partner Interests"\n      ACN,Accenture plc. Class A Ordinary Shares (Ireland)\n      ACP,Avenue Income Credit Strategies Fund Common Shares\n      ACRE,Ares Commercial Real Estate Corporation Common Stock\n      ACT,Actavis plc Ordinary Shares\n      ACW,Accuride Corporation Common Stock\n      ADC,Agree Realty Corporation Common Stock\n      ADM,Archer\n      ADPT,Adeptus Health Inc. Common Stock\n      ADS,Alliance Data Systems Corporation Common Stock\n      ADT,ADT Corporation Common Stock\n      ADX,Adams Express Company (The)\n      AEB,AEGON N.V. Perp. Cap. Secs. Floating Rate (Netherlands)\n      AEC,Associated Estates Realty Corporation Common Stock\n      AED,AEGON N.V. Perp. Cap. Securities (Netherlands)\n      AEE,Ameren Corporation Common Stock\n      AEG,AEGON N.V. Common Stock\n      AEH,AEGON N.V. Perp. Cap Secs.\n      AEK,Aegon NV 8.00% Non\n      AEL,American Equity Investment Life Holding Company Common Stock\n      AEM,Agnico Eagle Mines Limited Common Stock\n      AEO,"American Eagle Outfitters, Inc. Common Stock"\n      AEP,"American Electric Power Company, Inc. Common Stock"\n      AER,Aercap Holdings N.V. Ordinary Shares\n      AES,The AES Corporation Common Stock\n      AES$C,AES Corporation (The) Class C Preferred Stock\n      AET,Aetna Inc. Common Stock\n      AF,Astoria Financial Corporation Common Stock\n      AF$C,Astoria Financial Corporation Depositary Shs Repstg 1/40th Int Perp Pfd Ser C 6.5%\n      AFA,"American Financial Group, Inc. 5.75% Senior Notes due 2042"\n      AFB,AllianceBernstein National Municipal Income Fund Inc\n      AFC,"Allied Capital Corporation Allied Capital Corporation 6.875% Notes due April 15, 2047"\n      AFG,"American Financial Group, Inc. Common Stock"\n      AFGE,"American Financial Group, Inc. 6.25% Subordinated Debentures due 2054"\n      AFL,AFLAC Incorporated Common Stock\n      AFM,"Affiliated Managers Group, Inc. 5.250% Senior Notes due 2022"\n      AFQ,"American Financial Group, Inc. 7% Senior Notes due 2050"\n      AFSD,"Aflac Incorporated 5.50% Subordinated Debentures due September 15, 2052"\n      AFSI$A,"AmTrust Financial Services, Inc. Preferred Series A"\n      AFSI$B,"AmTrust Financial Services, Inc. Depository Shares Representing 1/40th Preferred Series B"\n      AFSI$C,"AmTrust Financial Services, Inc. Depository Shares Representing 1/40th Preferred Series C"\n      AFT,Apollo Senior Floating Rate Fund Inc. Common Stock\n      AFW,"American Financial Group, Inc. 6 3/8% Senior Notes due 2042"\n      AG,First Majestic Silver Corp. Ordinary Shares (Canada)\n      AGC,Advent Claymore Convertible Securities and Income Fund Common Shares of Beneficial Interest\n      AGCO,AGCO Corporation Common Stock\n      AGD,Alpine Global Dynamic Dividend Fund Shares of Beneficial Interest\n      AGI,Alamos Gold Inc Ordinary Shares\n      AGM,Federal Agricultural Mortgage Corporation Common Stock\n      AGM$A,Federal Agricultural Mortgage Corporation 5.875% Non\n      AGM$B,Federal Agricultural Mortgage Corporation Non Cumulative Preferred Stock Series B\n      AGM$C,Federal Agricultural Mortgage Corporation Preferred Series C Fixed to Fltg\n      AGM.A,Federal Agricultural Mortgage Corporation Common Stock\n      AGN,"Allergan, Inc. Common Stock"\n      AGO,Assured Guaranty Ltd. Common Stock\n      AGO$B,Assured Guaranty Ltd.\n      AGO$E,Assured Guaranty Ltd.\n      AGO$F,Assured Guaranty Ltd.\n      AGRO,Adecoagro S.A. Common Shares\n      AGU,Agrium Inc. Common Stock\n      AGX,"Argan, Inc. Common Stock"\n      AHC,A.H. Belo Corporation Common Stock\n      AHH,"Armada Hoffler Properties, Inc. Common Stock"\n      AHL,Aspen Insurance Holdings Limited Ordinary Shares\n      AHL$A,Aspen Insurance Holdings Limited Perp Pfd Shares (Bermuda)\n      AHL$B,Aspen Insurance Holdings Limited Perp Pref Shs (Bermuda)\n      AHL$C,Aspen Insurance Holdings Limited 5.95% Fixed\n      AHP,"Ashford Hospitality Prime, Inc. Common Stock"\n      AHS,AMN Healthcare Services Inc AMN Healthcare Services Inc\n      AHT,Ashford Hospitality Trust Inc Common Stock\n      AHT$A,Ashford Hospitality Trust Inc 8.55% Cum Preferred Series A\n      AHT$D,Ashford Hospitality Trust Inc 8.45% Series D Cumulative Preferred Stock\n      AHT$E,Ashford Hospitality Trust Inc 9.00% Series E Cumulative Preferred Stock\n      AI,Arlington Asset Investment Corp Class A (new)\n      AIB,Apollo Investment Corporation 6.625% Senior Notes due 2042\n      AIF,Apollo Tactical Income Fund Inc. Common Stock\n      AIG,"American International Group, Inc. New Common Stock"\n      AIG.W,"American International Group, Inc. Warrant expiring January 19, 2021"\n      AIN,Albany International Corporation Common Stock\n      AIR,AAR Corp. Common Stock\n      AIT,"Applied Industrial Technologies, Inc. Common Stock"\n      AIV,Apartment Investment and Management Company Common Stock\n      AIV$A,Apartment Investment and Management Company Preferred Series Class A\n      AIV$Z,Apartment Investment and Management Company Class Z Cumulative Preferred Stock\n      AIW,Arlington Asset Investment Corp 6.625% Notes due 2023\n      AIY,Apollo Investment Corporation 6.875% Senior Notes due 2043\n      AIZ,"Assurant, Inc. Common Stock"\n      AJG,Arthur J. Gallagher & Co. Common Stock\n      AKO.A,Embotelladora Andina S.A. Common Stock\n      AKO.B,Embotelladora Andina S.A. Common Stock\n      AKP,Alliance California Municipal Income Fund Inc\n      AKR,Acadia Realty Trust Common Stock\n      AKS,AK Steel Holding Corporation Common Stock\n      AL,Air Lease Corporation Class A Common Stock\n      ALB,Albemarle Corporation Common Stock\n      ALDW,"Alon USA Partners, LP Common Units representing Limited Partner Interests"\n      ALE,"Allete, Inc."\n      ALEX,"Alexander & Baldwin, Inc. Common Stock"\n      ALG,"Alamo Group, Inc. Common Stock"\n      ALJ,"Alon USA Energy, Inc. common stick"\n      ALK,"Alaska Air Group, Inc. Common Stock"\n      ALL,Allstate Corporation (The) Common Stock\n      ALL$A,Allstate Corporation (The) Dep Shs Repstg 1/1000th Perp Pfd Ser A\n      ALL$B,Allstate Corporation (The) 5.100% Fixed\n      ALL$C,Allstate Corporation (The) Dep Shs Repstg 1/1000th Int Shs Pfd Stk Ser C\n      ALL$D,The Allstate Corporation Leopards Each Representing A 1/1000th Interest In A Share Of Fixed Rate Noncumulative Perpetual Preferred Stock Series D\n      ALL$E,Allstate Corporation Depositary Shares Representing 1/1000th Perpetual Preferred Series E\n      ALL$F,Allstate Corporation (The) Leopards Dep Shares Representing 1/1000th Perp Pfd\n      ALLE,Allegion plc Ordinary Shares\n      ALLY,Ally Financial Inc. Common Stock\n      ALLY$A,"GMAC Capital Trust I Fixed Rate Floating Rate Trust Preferred Securities, Series 2"\n      ALLY$B,"Ally Financial Inc Fixed Rate Floating Rate Perpetual Preferred Stock, Series A"\n      ALP$N,Alabama Power Company Preferred Stock\n      ALP$O,Alabama Power Company Preferred Stock\n      ALP$P,Alabama Power Company 5.30% Cl A Pfd Stk\n      ALR,Alere Inc. Common Stock\n      ALR$B,"Alere Inc. Inverness Medical Innovations, Inc. Series B Convertible Perpetual Preferred Stock"\n      ALSN,"Allison Transmission Holdings, Inc. Common Stock"\n      ALU,Alcatel\n      ALV,"Autoliv, Inc. Common Stock"\n      ALX,"Alexander\'s, Inc. Common Stock"\n      AM,Antero Midstream Partners LP Common Units representing limited partner interests\n      AMBR,"Amber Road, Inc. Common Stock"\n      AMC,"AMC Entertainment Holdings, Inc. Class A Common Stock"\n      AME,"AMETEK, Inc."\n      AMFW,AMEC Foster Wheeler plc American Depositary Shares\n      AMG,"Affiliated Managers Group, Inc. Common Stock"\n      AMH,American Homes 4 Rent Common Shares of Beneficial Interest\n      AMH$A,American Homes 4 Rent Participating Preferred Shares Series A\n      AMH$B,American Homes 4 Rent 5% Series B Participating Preferred Shares of Beneficial Interest\n      AMH$C,American Homes 4 Rent Participating Pfd Ser C\n      AMID,"American Midstream Partners, LP Common Units representing Limited Partner Interests"\n      AMP,"Ameriprise Financial, Inc. Common Stock"\n      AMRC,"Ameresco, Inc. Class A Common Stock"\n      AMRE,"AmREIT, Inc. Common stock"\n      AMT,American Tower Corporation (REIT) Common Stock\n      AMT$A,American Tower Corporation (REIT) Pfd Conv Ser A\n      AMTD,TD Ameritrade Holding Corporation Common Stock\n      AMTG,"Apollo Residential Mortgage, Inc. Common Stock"\n      AMTG$A,"Apollo Residential Mortgage, Inc. Pfd Shs Series A  (US)"\n      AMX,"America Movil, S.A.B. de C.V. American Depository Receipt Series L"\n      AN,"AutoNation, Inc. Common Stock"\n      ANET,"Arista Networks, Inc. Common Stock"\n      ANF,Abercrombie & Fitch Company Common Stock\n      ANFI,Amira Nature Foods Ltd Ordinary Shares\n      ANH,Anworth Mortgage Asset Corporation Common Stock\n      ANH$A,Anworth Mortgage Asset Corporation Series A Preferred Stock\n      ANH$B,Anworth Mortgage Asset  Corporation Preferred Stock Series B 6.25%\n      ANN,ANN INC. Common Stock\n      ANR,"Alpha Natural Resources, inc. comm stock"\n      ANTM,"Anthem, Inc. Common Stock"\n      ANW,Aegean Marine Petroleum Network Inc. Common Stock\n      AOD,Alpine Total Dynamic Dividend Fund Common Stock\n      AOI,"Alliance One International, Inc. Common Stock"\n      AOL,AOL Inc. AOL Inc. Common Stock\n      AON,Aon plc Class A Ordinary Shares (UK)\n      AOS,A.O. Smith Corporation Common Stock\n      AP,Ampco\n      APA,Apache Corporation Common Stock\n      APAM,Artisan Partners Asset Management Inc. Class A Common Stock\n      APB,"Asia Pacific Fund, Inc. (The)"\n      APC,Anadarko Petroleum Corporation Common Stock\n      APD,"Air Products and Chemicals, Inc. Common Stock"\n      APF,Morgan Stanley Asia\n      APH,Amphenol Corporation Common Stock\n      APL,"Atlas Pipeline Partners, L.P. Common Units, No Par Value"\n      APL$E,"Atlas Pipeline Partners, L.P. Cumulative Redeemable Perpetual Preferred Units Class E"\n      APO,"Apollo Global Management, LLC Class A Common Shares Representing Class A Limitied Liability Company Interests"\n      APU,"AmeriGas Partners, L.P. Common Stock"\n      AR,Antero Resources Corporation Common Stock\n      ARC,"ARC Document Solutions, Inc. Common Stock"\n      ARCO,Arcos Dorados Holdings Inc. Class A Shares\n      ARCX,Arc Logistic Partners LP Common Units representing limited partner interest\n      ARDC,"Ares Dynamic Credit Allocation Fund, Inc. Common Shares"\n      ARE,"Alexandria Real Estate Equities, Inc. Common Stock"\n      ARE$E,"Alexandria Real Estate Equities, Inc. Pfd Ser E"\n      ARES,Ares Management L.P. Common Units representing Limited Partner Interests\n      ARG,"Airgas, Inc. Common Stock"\n      ARH$C,Arch Capital Group Ltd. 6.75% PFD sh S C\n      ARI,"Apollo Commercial Real Estate Finance, Inc"\n      ARI$A,Apollo Commercial Real Estate Finance Cumulative Redeemable Perpetual Preferred Stock Series A\n      ARL,"American Realty Investors, Inc. Common Stock"\n      ARMF,Ares Multi\n      ARMK,Aramark Common Stock\n      ARN,Ares Capital Corporation 7.00% Senior Notes due 2022\n      ARO,Aeropostale Inc Common Stock\n      ARP,"Atlas Resource Partners, L.P. Common Units representing Limited Partner Interests"\n      ARP$D,"Atlas Resource Partners, L.P. CUM RED PERP PDF UNIT CL D %"\n      ARPI,"American Residential Properties, Inc. Common Stock"\n      ARR,"ARMOUR Residential REIT, Inc."\n      ARR$A,Armour Residential REIT INC Preferred Series A\n      ARR$B,"ARMOUR Residential REIT, Inc. Preferred Series B"\n      ARU,Ares Capital Corporation 5.875% Senior Notes due 2022\n      ARW,"Arrow Electronics, Inc. Common Stock"\n      ARY,Ares Capital Corporation 7.75% Senior Notes due 2040\n      ASA,ASA  Gold and Precious Metals Limited\n      ASB,Associated Banc\n      ASB$B,Associated Banc\n      ASC,Ardmore Shipping Corporation Common Stock\n      ASG,Liberty All\n      ASGN,"On Assignment, Inc. Common Stock"\n      ASH,Ashland Inc. (NEW) Common Stock\n      ASPN,"Aspen Aerogels, Inc. Common Stock"\n      ASR,"Grupo Aeroportuario del Sureste, S.A. de C.V. Common Stock"\n      ASX,"Advanced Semiconductor Engineering, Inc. Common Stock"\n      AT,Atlantic Power Corporation Ordinary Shares (Canada)\n      ATE,Advantest Corporation (Kabushiki Kaisha Advantest) ADS American Depositary Shares\n      ATEN,"A10 Networks, Inc. Common Stock"\n      ATHM,"Autohome Inc. American Depositary Shares, each representing one class A ordinary share."\n      ATI,Allegheny Technologies Incorporated Common Stock\n      ATK,Alliant Techsystems Inc. Common Stock\n      ATLS,"Atlas Energy, L.P. Common Units"\n      ATO,Atmos Energy Corporation Common Stock\n      ATR,"AptarGroup, Inc. Common Stock"\n      ATTO,Atento S.A. Ordinary Shares\n      ATU,Actuant Corporation Common Stock\n      ATV,"Acorn International, Inc. ADS"\n      ATW,"Atwood Oceanics, Inc. Common Stock"\n      AU,AngloGold Ashanti Limited Common Stock\n      AUO,AU Optronics Corp American Depositary Shares\n      AUQ,AuRico Gold Inc. Ordinary Shares\n      AUY,Yamana Gold Inc. Ordinary Shares (Canada)\n      AV,Aviva plc Unsponsored ADR (UK)\n      AVA,Avista Corporation Common Stock\n      AVAL,Grupo Aval Acciones y Valores S.A. ADR (Each representing 20 preferred shares)\n      AVB,"AvalonBay Communities, Inc. Common Stock"\n      AVD,American Vanguard Corporation Common Stock ($0.10 Par Value)\n      AVG,AVG Technologies N.V. Ordinary Shares\n      AVH,Avianca Holdings S.A. American Depositary Shares (Each representing 8 preferred Shares)\n      AVIV,"Aviv REIT, Inc. Common Stock"\n      AVK,Advent Claymore Convertible Securities and Income Fund\n      AVOL,Avolon Holdings Limited Common Shares\n      AVP,"Avon Products, Inc. Common Stock"\n      AVT,"Avnet, Inc. Common Stock"\n      AVV,Aviva plc Subordinated Capital Securities due 2041\n      AVX,AVX Corporation Common Stock\n      AVY,Avery Dennison Corporation Common Stock\n      AWF,Alliancebernstein Global High Income Fund\n      AWH,"Allied World Assurance Company Holdings, AG (Switzerland)"\n      AWI,Armstrong World Industries Inc Common Stock\n      AWK,"American Water Works Company, Inc. Common Stock"\n      AWP,Alpine Global Premier Properties Fund Alpine Global Premier Properties Fund Common Shares of Beneficial Interest\n      AWR,American States Water Company Common Stock\n      AXE,Anixter International Inc. Common Stock\n      AXL,"American Axle & Manufacturing Holdings, Inc. Common Stock"\n      AXLL,Axiall Corporation Common Stock\n      AXP,American Express Company Common Stock\n      AXR,AMREP Corporation Common Stock\n      AXS,Axis Capital Holdings Limited Common Stock\n      AXS$C,Axis Capital Holdings Limited Preferred Series C (Bermuda)\n      AXS$D,Axis Capital Holdings Limited Preferred Series D (Bermuda)\n      AXTA,Axalta Coating Systems Ltd. Common Shares\n      AYI,Acuity Brands Inc (Holding Company)\n      AYN,Alliance New York Municipal Income Fund Inc\n      AYR,Aircastle Limited Common Stock\n      AZN,Astrazeneca PLC Common Stock\n      AZO,"AutoZone, Inc. Common Stock"\n      AZZ,AZZ Incorporated Common Stock\n      B,"Barnes Group, Inc. Common Stock"\n      BA,Boeing Company (The) Common Stock\n      BABA,Alibaba Group Holding Limited American Depositary Shares each representing one Ordinary share\n      BAC,Bank of America Corporation Common Stock\n      BAC$D,Bank of America Corporation Depositary Shares Rpstg 1/1000th Interest in Sh of Non Cum Pfd Stk Ser D\n      BAC$E,Bank of America Corporation Depositary Sh repstg 1/1000th Perp Pfd Ser E\n      BAC$I,Bank Amer Corp Dep Sh Repstg 1/1000th Pfd Ser I\n      BAC$L,Bank of America Corporation Non Cumulative Perpetual Conv Pfd Ser L\n      BAC$W,Bank of America Corporation Depository Shares Representing 1/1000th Preferred Series W\n      BAC$Z,Bank of America Corporation BAC Capital Trust VIII 6% Capital Securities\n      BAC.A,"Bank of America Corporation Class A Warrant expiring January 16, 2019"\n      BAC.B,Bank of America Corporation Class B Warrants expiring 10/28/2018\n      BAF,BlackRock Municipal Income Investment Quality Trust\n      BAH,Booz Allen Hamilton Holding Corporation Common Stock\n      BAK,Braskem SA ADR\n      BALT,Baltic Trading Limited Common Stock\n      BAM,Brookfield Asset Management Inc. Common Stock\n      BANC,"Banc of California, Inc. Common Stock"\n      BANC$C,"Banc of California, Inc. Depositary Shares"\n      BAP,Credicorp Ltd. Common Stock\n      BAS,"Basic Energy Services, Inc. Common Stock"\n      BAX,Baxter International Inc. Common Stock\n      BBD,Banco Bradesco Sa American Depositary Shares\n      BBDO,Banco Bradesco Sa American Depositary Shares (each representing one Common Share)\n      BBF,BlackRock Municipal Income Investment Trust\n      BBG,Bill Barrett Corporation Common Stock\n      BBK,Blackrock Municipal Bond Trust\n      BBL,BHP Billiton plc Sponsored ADR\n      BBN,BlackRock Build America Bond Trust Common Shares of Beneficial Interest\n      BBT,BB&T Corporation Common Stock\n      BBT$D,BB&T Corporation Depositary Shares Representing 1/1000th Perpetual Preferred Series D\n      BBT$E,BB&T Corporation Depositary Shares Representing 1/1000th Perpetual Preferred Series E\n      BBT$F,BB&T Corporation Depositary Shares Representing 1/1000th Interest Series F Perpetual Preferred\n      BBT$G,BB&T Corporation Depositary Shares Representing 1/1000th Perpetual Preferred Series G\n      BBVA,Banco Bilbao Vizcaya Argentaria S.A. Common Stock\n      BBW,Build\n      BBX,BBX Capital Corporation Common Stock\n      BBY,"Best Buy Co., Inc. Common Stock"\n      BC,Brunswick Corporation Common Stock\n      BCA,Corpbanca Sponsored Reg S GDR representing Common (Chile)\n      BCC,"Boise Cascade, L.L.C. Common Stock"\n      BCE,"BCE, Inc. Common Stock"\n      BCEI,"Bonanza Creek Energy, Inc. Common Stock"\n      BCH,Banco De Chile Banco De Chile ADS\n      BCO,Brinks Company (The) Common Stock\n      BCR,"C.R. Bard, Inc. Common Stock"\n      BCRH,Blue Capital Reinsurance Holdings Ltd. Common Shares\n      BCS,Barclays PLC Common Stock\n      BCS$,Barclays Bank PLC ADR Ser 2 repstg Pref Shs Ser 2 (United Kingdom)\n      BCS$A,Barclays PLC ADS\n      BCS$C,Barclays PLC American Depositary Shares Series 4\n      BCS$D,Barclays PLC American Depositary Shares (Each representing Non\n      BCX,BlackRock Resources Common Shares of Beneficial Interest\n      BDC,Belden Inc Common Stock\n      BDJ,Blackrock Enhanced Equity Dividend Trust\n      BDN,Brandywine Realty Trust Common Stock\n      BDN$E,Brandywine Realty Tr Pfd Shs Ben Int Ser E\n      BDX,"Becton, Dickinson and Company Common Stock"\n      BEE,Strategic Hotels & Resorts  Inc Common Stock\n      BEL,Belmond Ltd. Class A Common Stock\n      BEN,"Franklin Resources, Inc. Common Stock"\n      BEP,Brookfield Renewable Energy Partners LP Partnership Units (Bermuda)\n      BERY,"Berry Plastics Group, Inc. Common Stock"\n      BF.A,Brown Forman Inc Class A Common Stock\n      BF.B,Brown Forman Inc Class B Common Stock\n      BFAM,Bright Horizons Family Solutions Inc. Common Stock\n      BFK,BlackRock Municipal Income Trust\n      BFO,Blackrock Florida Municipal 2020 Term Trust\n      BFR,BBVA Banco Frances S.A. Common Stock\n      BFS,"Saul Centers, Inc. Common Stock"\n      BFS$C,"Saul Centers, Inc. Depositary Shares, each representing 1/100th of a share of 6.875% Series C Cumulative Redeemable Preferred Stock, $0.01 par value"\n      BFZ,BlackRock California Municipal Income Trust\n      BG,Bunge Limited Bunge Limited\n      BGB,Blackstone / GSO Strategic Credit Fund Common Shares\n      BGC,General Cable Corporation Common Stock\n      BGCA,"BGC Partners, Inc. 8.125% Senior Notes due 2042"\n      BGE$B,Bge Cap Trust II 6.20% Trust Preferred Securities\n      BGG,Briggs & Stratton Corporation Common Stock\n      BGH,Babson Capital Global Short Duration High Yield Fund Common Shares of Beneficial Interests\n      BGR,BlackRock Energy and Resources Trust\n      BGS,"B&G Foods, Inc. B&G Foods, Inc. Common Stock"\n      BGT,BlackRock Floating Rate Income Trust\n      BGX,Blackstone GSO Long Short Credit Income Fund Common Shares\n      BGY,"BLACKROCK INTERNATIONAL, LTD. Blackrock International Real Estate Fund, Inc."\n      BH,Biglari Holdings Inc.\n      BHE,"Benchmark Electronics, Inc. Common Stock"\n      BHI,Baker Hughes Incorporated Common Stock\n      BHK,Blackrock Core Bond Trust Blackrock Core Bond Trust\n      BHL,Blackrock Defined Opportunity Credit Trust Blackrock Defined Opportunity Credit Trust\n      BHLB,"Berkshire Hills Bancorp, Inc. Common Stock"\n      BHP,BHP Billiton Limited Common Stock\n      BID,Sotheby\'s Common Stock\n      BIE,BlackRock Municipal Bond Investment Trust\n      BIF,"Boulder Growth & Income Fund, Inc."\n      BIG,"Big Lots, Inc. Common Stock"\n      BIN,Progressive Waste Solutions Ltd. Common Shares\n      BIO,Bio\n      BIO.B,Bio\n      BIOA,BioAmber Inc. Common Stock\n      BIOA.W,"BioAmber Inc. Warrant, expiring May 9, 2017"\n      BIP,Brookfield Infrastructure Partners LP Limited Partnership Units\n      BIT,BlackRock Multi\n      BITA,Bitauto Holdings Limited American Depositary Shares (each representing one ordinary share)\n      BJZ,Blackrock California Municipal 2018 Term Trust Blackrock California Municipal 2018 Term Trust\n      BK,Bank of New York Mellon Corporation (The) Common Stock\n      BK$C,Bank Of New York Mellon Corporation (The) Dep Shs Repstg 1/4000th Perp Pfd Ser C\n      BKD,Brookdale Senior Living Inc. Common Stock\n      BKE,"Buckle, Inc. (The) Common Stock"\n      BKH,Black Hills Corporation Common Stock\n      BKK,Blackrock Municipal 2020 Term Trust\n      BKN,BlackRock Investment Quality Municipal Trust Inc. (The)\n      BKS,"Barnes & Noble, Inc. Common Stock"\n      BKT,BlackRock Income Trust Inc. (The)\n      BKU,"BankUnited, Inc. Common Stock"\n      BLH,Blackrock New York Municipal 2018 Term Trust\n      BLK,"BlackRock, Inc. Common Stock"\n      BLL,Ball Corporation Common Stock\n      BLOX,Infoblox Inc. Common Stock\n      BLT,"Blount International, Inc. Common Stock"\n      BLW,Blackrock Limited Duration Income Trust\n      BLX,"Banco Latinoamericano de Comercio Exterior, S.A."\n      BMA,Banco Macro S.A.  ADR (representing Ten Class B Common Shares)\n      BME,Blackrock Health Sciences Trust\n      BMI,"Badger Meter, Inc. Common Stock"\n      BML$G,Bank of America Corporation Bank of America Corporation Depositary Shares (Each representing a 1/1200th interest in a share of Floating Rate Non\n      BML$H,Bank of America Corporation Bank of America Corporation Depositary Shares (Each representing a 1/1200th interest in a Share of Floating Rate Non\n      BML$I,Bank of America Corporation Bank of America Corporation Depositary Shares (Each representing a 1/1200th interest in a Share of 6.375% Non\n      BML$J,Bank of America Corporation Bank of America Corporation Depositary Shares (Each representing a 1/1200th interest in a Share of Floating Rate Non\n      BML$L,Bank of America Corporation Bank of America Corporation Depositary Shares (Each representing a 1/1200th Interest in a Share of Floating Rate Non\n      BMO,Bank Of Montreal Common Stock\n      BMR,Biomed Realty Trust Common Stock\n      BMS,"Bemis Company, Inc. Common Stock"\n      BMY,Bristol\n      BNJ,BlackRock New Jersey Municipal Income Trust\n      BNK,"C1 Financial, Inc. Common Stock"\n      BNS,Bank Nova Scotia Halifax Pfd 3 Ordinary Shares\n      BNY,BlackRock New York Municipal Income Trust\n      BOCA,"Banc of California, Inc. Senior Note due 4/15/2020"\n      BOE,Blackrock Global Blackrock Global Opportunities Equity Trust Common Shares of Beneficial Interest\n      BOH,Bank of Hawaii Corporation Common Stock\n      BOI,Brookfield Mortgage Opportunity Income Fund Inc. Common Stock\n      BOOT,"Boot Barn Holdings, Inc. Common Stock"\n      BORN,China New Borun Corporation American Depositary Shares\n      BOXC,Brookfield Canada Office Properties\n      BP,BP p.l.c. Common Stock\n      BPI,"Bridgepoint Education, Inc."\n      BPK,Blackrock Municipal 2018 Term Trust Blackrock Municipal 2018 Term Trust\n      BPL,Buckeye Partners L.P. Common Stock\n      BPT,BP Prudhoe Bay Royalty Trust Common Stock\n      BPY,Brookfield Property Partners L.P. Limited Partnership Units\n      BPZ,"BPZ Resources, Inc Common Stock"\n      BQH,Blackrock New York Municipal Bond Trust Common Shares of Beneficial Interest\n      BR,"Broadridge Financial Solutions, Inc.Common Stock"\n      BRC,Brady Corporation Common Stock\n      BRFS,BRF S.A.\n      BRK.A,Berkshire Hathaway Inc. Common Stock\n      BRK.B,Berkshire Hathaway Inc. New Common Stock\n      BRO,"Brown & Brown, Inc. Common Stock"\n      BRP,Brookfield Residential Properties Inc. Common Stock\n      BRS,Bristow Group Inc. Common Stock\n      BRSS,"Global Brass and Copper Holdings, Inc. Common Stock"\n      BRT,BRT Realty Trust Common Stock\n      BRX,Brixmor Property Group Inc. Common Stock\n      BSAC,Banco Santander\n      BSBR,"Banco Santander Brasil SA American Depositary Shares, each representing one unit"\n      BSD,BlackRock Strategic Municipal Trust Inc. (The) Common Stock\n      BSE,Blackrock New York Municipal Income Quality Trust Common Shares of Beneficial Interest\n      BSI,Alon Blue Square Israel Ltd.\n      BSL,Blackstone GSO Senior Floating Rate Term Fund Common Shares of Beneficial Interest\n      BSMX,"Grupo Financiero Santander Mexico S.A. B. de C.V. American Depositary Shares, each representing five Series B shares"\n      BST,BlackRock Science and Technology Trust Common Shares of Beneficial Interest\n      BSX,Boston Scientific Corporation Common Stock\n      BT,BT Group plc Common Stock\n      BTA,BlackRock Long\n      BTE,Baytex Energy Corp\n      BTF,"Boulder Total Return Fund, Inc. Common Stock"\n      BTH,"Blyth, Inc. New Common Stock"\n      BTO,John Hancock Financial Opportunities Fund Common Stock\n      BTT,BlackRock Municipal Target Term Trust Inc. (The) Common Shares of Beneficial Interest\n      BTU,Peabody Energy Corporation Common Stock\n      BTZ,BlackRock Credit Allocation Income Trust\n      BUD,Anheuser\n      BUI,BlackRock Utility and Infrastructure Trust Common Shares of Beneficial Interest\n      BURL,"Burlington Stores, Inc. Common Stock"\n      BVN,Buenaventura Mining Company Inc.\n      BWA,BorgWarner Inc. Common Stock\n      BWC,Babcock Common Stock\n      BWG,Legg Mason BW Global Income Opportunities Fund Inc. Common Stock\n      BWP,Boardwalk Pipeline Partners LP Common Units\n      BWS,"Brown Shoe Company, Inc. Common Stock"\n      BX,The Blackstone Group L.P. Common Units Representing Limited Partnership Interests\n      BXC,Bluelinx Holdings Inc. Common Stock\n      BXE,Bellatrix Exploration Ltd Ordinary Shares (Canada)\n      BXMT,"Blackstone Mortgage Trust, Inc. Common Stock"\n      BXMX,Nuveen S&P 500 Buy\n      BXP,"Boston Properties, Inc. Common Stock"\n      BXP$B,"Boston Properties, Inc. Depositary Shares, each representing 1/100th of a share of the Issuer\'s 5.25% Sockeries B Cumulative Redeemable Preferred St"\n      BXS,"BancorpSouth, Inc. Common Stock"\n      BYD,Boyd Gaming Corporation Common Stock\n      BYM,Blackrock Municipal Income Quality Trust Common Shares of Beneficial Interest\n      BZH,"Beazer Homes USA, Inc. Common Stock"\n      BZT,"Beazer Homes USA, Inc. Tangible Equity Unit"\n      C,"Citigroup, Inc. Common Stock"\n      C$C,Citigroup Inc. Depositary Shares representing 1/1000 Series C Noncumulative Preferred Stock (United States)\n      C$J,Citigroup Inc. Dep Shs Repstg 1/1000 Pfd Ser J Fixed/Fltg\n      C$K,Citigroup Inc. Dep Shs Repstg 1/1000th Pfd Ser K\n      C$L,Citigroup Inc. Depositary Share representing 1/1000 interest in a share of noncumulative series L\n      C$N,Citigroup Capital VIII 7.875% Fixed rate Floating Rate trust Preferred Securities (TruPS)\n      C$P,Citigroup Inc. Dep Shs Repstg 1/1000th Pfd Ser AA\n      C.A,"Citigroup Inc. Warrants Class A expiring January 4, 2019"\n      C.B,"Citigroup Inc. Class B Warant expiring October 28, 2018"\n      CAB,Cabela\'s Inc Class A Common Stock\n      CACI,"CACI International, Inc. Class A Common Stock"\n      CAE,CAE Inc. Ordinary Shares\n      CAF,Morgan Stanley China A Share Fund Inc. Common Stock\n      CAG,"ConAgra Foods, Inc. Common Stock"\n      CAH,"Cardinal Health, Inc. Common Stock"\n      CAJ,"Canon, Inc. American Depositary Shares"\n      CALX,"Calix, Inc Common Stock"\n      CAM,Cameron International Corporation Common Stock\n      CAP,"Cai International, Inc. Common Stock"\n      CAPL,CrossAmerica Partners LP Common Units representing limited partner interests\n      CAS,Castle (A.M.) & Co. Common Stock\n      CAT,"Caterpillar, Inc. Common Stock"\n      CATO,Cato Corporation (The) Class A Common Stock\n      CB,Chubb Corporation (The) Common Stock\n      CBA,ClearBridge American Energy MLP Fund Inc. Common Stock\n      CBB,Cincinnati Bell Inc. Common Stock\n      CBB$B,Cincinnati Bell Inc. Preferred Stock\n      CBD,Companhia Brasileira de Distribuicao ADS\n      CBG,CBRE Group Inc Common Stock Class A\n      CBI,Chicago Bridge & Iron Company N.V. Common Stock\n      CBK,Christopher & Banks Corporation Common Stock\n      CBL,"CBL & Associates Properties, Inc. Common Stock"\n      CBL$D,"CBL & Associates Properties, Inc. Dep Shares Repstg 1/10th Preferred Series D"\n      CBL$E,"CBL & Associates Properties, Inc. Depositary Shs Repstg 1/10 6.625% Ser E Cum Redeemable (Pfd Stk)"\n      CBM,Cambrex Corporation Common Stock\n      CBPX,"Continental Building Products, Inc. Common Stock"\n      CBR,"Ciber, Inc. Common Stock"\n      CBS,CBS Corporation Class B Common Stock\n      CBS.A,CBS Corporation CBS Corporation Class A Common Stock\n      CBT,Cabot Corporation Common Stock\n      CBU,"Community Bank System, Inc. Common Stock"\n      CBZ,"CBIZ, Inc. Common Stock"\n      CCC,Calgon Carbon Corporation Common Stock\n      CCE,Coca\n      CCG,"Campus Crest Communities, Inc. Common Stock"\n      CCG$A,"Campus Crest Communities, Inc. 8.00% Series A Cumulative Redeemable Preferred Stock"\n      CCI,Crown Castle International Corp. (REIT) Common Stock\n      CCI$A,Crown Castle International Corp. (REIT) Mandatory Conv Pfd Stk Series A\n      CCJ,Cameco Corporation Common Stock\n      CCK,"Crown Holdings, Inc."\n      CCL,Carnival Corporation Common Stock\n      CCM,Concord Medical Services Holdings Limited ADS (Each represents three ordinary shares)\n      CCO,"Clear Channel Outdoor Holdings, Inc. Clear Channel Outdoor Holdings, Inc. Class A Common Stock"\n      CCS,"Century Communities, Inc. Common Stock"\n      CCSC,"Country Style Cooking Restaurant Chain Co., Ltd American Depositary Shares, each representing four ordinary shares"\n      CCU,"Compania Cervecerias Unidas, S.A. Common Stock"\n      CCV,Comcast Corporation 5.00% Notes due 2061\n      CCZ,Comcast Holdings ZONES\n      CDE,"Coeur Mining, Inc. Common Stock"\n      CDE.W,"Coeur Mining, Inc. Warrant expiring April 16, 2017"\n      CDI,CDI Corporation Common Stock\n      CDR,"Cedar Realty Trust, Inc. Common Stock"\n      CDR$B,"Cedar Realty Trust, Inc. 7.25% Series B Cumulative Redeemable Preferred Stock"\n      CE,Celanese Corporation Celanese Corporation Series A Common Stock\n      CEA,China Eastern Airlines Corporation Ltd. Common Stock\n      CEB,Corporate Executive Board Company (The) Common Stock\n      CEE,"Central Europe, Russia and Turkey Fund, Inc. (The) Common Stock"\n      CEL,"Cellcom Israel, Ltd. Ordinary Shares"\n      CELP,"Cypress Energy Partners, L.P. Common Units representing limited partner interests"\n      CEM,ClearBridge Energy MLP Fund Inc. Common Stock\n      CEN,Center Coast MLP & Infrastructure Fund Common Shares of Beneficial Interest\n      CEO,CNOOC Limited Common Stock\n      CEQP,Crestwood Equity Partners LP\n      CF,"CF Industries Holdings, Inc. Common Stock"\n      CFC$A,Countrywide Capital IV (New) 6.75% Trust Pfd Securities\n      CFC$B,Countrywide Capital V (New) 7.00% Capital Securities\n      CFG,"Citizens Financial Group, Inc. Common Stock"\n      CFI,"Culp, Inc. Common Stock"\n      CFN,CareFusion Corporation Common Stock\n      CFR,"Cullen/Frost Bankers, Inc. Common Stock"\n      CFR$A,"Cullen/Frost Bankers, Inc. Perpetual Preferred Series A"\n      CFX,Colfax Corporation Common Stock\n      CGA,"China Green Agriculture, Inc. Common Stock"\n      CGG,CGG\n      CGI,"Celadon Group, Inc. Common Stock"\n      CHA,China Telecom Corp Ltd ADS\n      CHD,"Church & Dwight Company, Inc. Common Stock"\n      CHE,Chemed Corp\n      CHGG,"Chegg, Inc. Common Stock"\n      CHH,"Choice Hotels International, Inc. Common Stock"\n      CHK,Chesapeake Energy Corporation Common Stock\n      CHK$D,Chesapeake Energy Corporation Convertible Preferred\n      CHKR,Chesapeake Granite Wash Trust Common Units representing beneficial interests in the Trust\n      CHL,China Mobile Limited Common Stock\n      CHMI,Cherry Hill Mortgage Investment Corporation Common Stock\n      CHMT,Chemtura Corp. Common Stock\n      CHN,"China Fund, Inc. (The) Common Stock"\n      CHS,"Chico\'s FAS, Inc. Common Stock"\n      CHSP,Chesapeake Lodging Trust Common Shares of Beneficial Interest\n      CHSP$A,Chesapeake Lodging Trust 7.75% Series A Cumulative Redeemable Preferred Shares\n      CHT,"Chunghwa Telecom Co., Ltd."\n      CHU,China Unicom (Hong Kong) Ltd Common Stock\n      CI,Cigna Corporation Common Stock\n      CIA,"Citizens, Inc. Class A Common Stock ($1.00 Par)"\n      CIB,BanColombia S.A. Common Stock\n      CIE,"Cobalt International Energy, Inc. COBALT INTERNATIONAL ENERGY, INC."\n      CIEN,Ciena Corporation Common Stock\n      CIF,MFS Intermediate High Income Fund Common Stock\n      CIG,Comp En De Mn Cemig ADS American Depositary Shares\n      CIG.C,Comp En De Mn Cemig ADS American Depositary Receipts\n      CII,"Blackrock Capital and Income Fund, Inc."\n      CIM,Chimera Investment Corporation Common Stock\n      CIO,"City Office REIT, Inc. Common Stock"\n      CIR,"CIRCOR International, Inc. Common Stock"\n      CIT,CIT Group Inc (DEL) Common Stock\n      CIVI,"Civitas Solutions, Inc. Common Stock"\n      CJES,"C&J Energy Services, Inc. Common Stock"\n      CKH,SEACOR Holdings Inc. Common Stock\n      CKP,"Checkpoint Systms, Inc. Common Stock"\n      CL,Colgate\n      CLA,Capitala Finance Corp. 7.125% Notes due 2021\n      CLB,Core Laboratories N.V. Common Stock\n      CLC,CLARCOR Inc. Common Stock\n      CLD,Cloud Peak Energy Inc Common Stock\n      CLDT,Chatham Lodging Trust (REIT) Common Shares of Beneficial Interest\n      CLF,Cliffs Natural Resources Inc Common Stock\n      CLGX,"CoreLogic, Inc. Common Stock"\n      CLH,"Clean Harbors, Inc. Common Stock"\n      CLI,Mack\n      CLNY,"Colony Financial, Inc Common Stock"\n      CLNY$A,Colony Finl Inc Cum Red Perp Pfd Ser A %\n      CLNY$B,"Colony Financial, Inc Perp Pfd Ser B %"\n      CLR,"Continental Resources, Inc. Common Stock"\n      CLS,"Celestica, Inc. Common Stock"\n      CLV,Cliffs Natural Resources Inc. Depositary Shares Representing 1/40th Preferred Convertible Series A\n      CLW,Clearwater Paper Corporation Common Stock\n      CLX,Clorox Company (The) Common Stock\n      CM,Canadian Imperial Bank of Commerce Common Stock\n      CMA,Comerica Incorporated Common Stock\n      CMA.W,"Comerica Incorporated Warrant expiring November 14, 2018"\n      CMC,Commercial Metals Company Common Stock\n      CMCM,"Cheetah Mobile Inc. American Depositary Shares, each representing 10 Class Ordinary Shares"\n      CMG,"Chipotle Mexican Grill, Inc. Common Stock"\n      CMI,Cummins Inc. Common Stock\n      CMK,MFS Intermarket Income Trust I Common Stock\n      CMLP,Crestwood Midstream Partners LP\n      CMN,Cantel Medical Corp. Common Stock\n      CMO,Capstead Mortgage Corporation Common Stock\n      CMO$E,Capstead Mortgage Corporation Pfd Ser E\n      CMP,Compass Minerals Intl Inc Common Stock\n      CMRE,Costamare Inc. Common Stock $0.0001 par value\n      CMRE$B,Costamare Inc. Perpetual Preferred Stock Series B (Marshall Islands)\n      CMRE$C,Costamare Inc. Perpetual Preferred Series C (Marshall Islands)\n      CMS,CMS Energy Corporation Common Stock\n      CMS$B,CMS Energy Corporation Preferred Stock\n      CMU,MFS Municipal Income Trust Common Stock\n      CNA,CNA Financial Corporation Common Stock\n      CNC,Centene Corporation Common Stock\n      CNCO,Cencosud S.A. American Depositary Shares (Each representing three Common Shares)\n      CNHI,CNH Industrial N.V. Common Shares\n      CNI,Canadian National Railway Company Common Stock\n      CNK,"Cinemark Holdings Inc Cinemark Holdings, Inc. Common Stock"\n      CNL,Cleco Corporation Common Stock\n      CNNX,Cone Midstream Partners LP Common Units representing limited partner interests\n      CNO,"CNO Financial Group, Inc. Common Stock"\n      CNP,"CenterPoint Energy, Inc (Holding Co) Common Stock"\n      CNQ,Canadian Natural Resources Limited Common Stock\n      CNS,Cohn & Steers Inc Common Stock\n      CNW,Con\n      CNX,CONSOL Energy Inc. Common Stock\n      CO,China Cord Blood Corporation Common Stock\n      CODE,Spansion Inc Common Stock Class A New\n      CODI,Compass Diversified Holdings Shares of Beneficial Interest\n      COF,Capital One Financial Corporation Common Stock\n      COF$C,Capital One Financial Corp Depository Shares Representing 1/40th Int Perp Pfd Ser C%\n      COF$D,Capital One Financial Corp Depository Shares Representing 1/40th Interest Perpetual Preferred Series D\n      COF$P,Capital One Financial Corp Pfd Ser B\n      COF.W,"Capital One Financial Corporation Warrants expiring November 14, 2018"\n      COG,Cabot Oil & Gas Corporation Common Stock\n      COH,"Coach, Inc. Common Stock"\n      COL,"Rockwell Collins, Inc. Common Stock"\n      COO,"Cooper Companies, Inc. (The) Common Stock"\n      COP,ConocoPhillips Common Stock\n      COR,CoreSite Realty Corporation Common Stock\n      COR$A,CoreSite Realty Corporation Pfd Ser A\n      CORR,"CorEnergy Infrastructure Trust, Inc. Common Stock"\n      COT,Cott Corporation Common Stock\n      COTY,Coty Inc. Class A Common Stock\n      COUP,Coupons.com Incorporated Common Stock\n      COV,Covidien plc. Ordinary Shares (Ireland)\n      CP,Canadian Pacific Railway Limited Common Stock\n      CPA,"Copa Holdings, S.A. Copa Holdings, S.A. Class A Common Stock"\n      CPAC,"Cementos Pacasmayo S.A.A. American Depositary Shares, each representing five Common Shares"\n      CPB,Campbell Soup Company Common Stock\n      CPE,Callon Petroleum Company Common Stock\n      CPE$A,Callon Petroleum Company Preferred Shares Series A 10%\n      CPF,Central Pacific Financial Corp New\n      CPG,Crescent Point Energy Corporation Ordinary Shares (Canada)\n      CPK,Chesapeake Utilities Corporation Common Stock\n      CPL,CPFL Energia S.A. CPFL Energia S.A. American Depositary Shares\n      CPN,Calpine Corporation Common Stock\n      CPS,Cooper\n      CPT,Camden Property Trust Common Stock\n      CR,Crane Company Common Stock\n      CRC,California Resources Corporation Common Stock\n      CRCM,"Care.com, Inc. Common Stock"\n      CRD.A,Crawford & Company Common Stock\n      CRD.B,Crawford & Company Common Stock\n      CRH,CRH PLC American Depositary Shares\n      CRI,"Carter\'s, Inc. Common Stock"\n      CRK,"Comstock Resources, Inc. Common Stock"\n      CRL,"Charles River Laboratories International, Inc. Common Stock"\n      CRM,Salesforce.com Inc Common Stock\n      CRR,"Carbo Ceramics, Inc. Common Stock"\n      CRS,Carpenter Technology Corporation Common Stock\n      CRT,Cross Timbers Royalty Trust Common Stock\n      CRY,"CryoLife, Inc. Common Stock"\n      CS,Credit Suisse Group American Depositary Shares\n      CSC,Computer Sciences Corporation Common Stock\n      CSG,Chambers Street Properties Common Shares of Beneficial Interest\n      CSH,"Cash America International, Inc. Common Stock"\n      CSI,Cutwater Select Income Fund\n      CSL,Carlisle Companies Incorporated Common Stock\n      CSLT,"Castlight Health, Inc. Class B Common Stock"\n      CSS,"CSS Industries, Inc. Common Stock"\n      CST,"CST Brands, Inc. Common Stock"\n      CSTM,Constellium N.V. Ordinary Shares\n      CSU,Capital Senior Living Corporation Common Stock\n      CSV,"Carriage Services, Inc. Common Stock"\n      CSX,CSX Corporation Common Stock\n      CTB,Cooper Tire & Rubber Company Common Stock\n      CTL,"CenturyLink, Inc. Common Stock"\n      CTLT,"Catalent, Inc. Common Stock"\n      CTQ,Qwest Corporation 7.375% Notes due 2051\n      CTR,ClearBridge Energy MLP Total Return Fund Inc. Common Stock\n      CTS,CTS Corporation Common Stock\n      CTT,"CatchMark Timber Trust, Inc. Class A Common Stock"\n      CTU,Qwest Corporation 7.00% Notes due 2025\n      CTV,Qwest Corporation 6.875% Notes due 2054\n      CTW,Qwest Corporation 7.50% Notes due 2051\n      CTX,Qwest Corporation 7.00% Notes due 2052\n      CTY,Qwest Corporation 6.125% Notes due 2053\n      CUB,Cubic Corporation Common Stock\n      CUBE,CubeSmart Common Shares\n      CUBE$A,CubeSmart 7.75% Series A Cumulative Redeemable Preferred Shares of Beneficial Interest\n      CUBI,"Customers Bancorp, Inc Common Stock"\n      CUBS,"Customers Bancorp, Inc 6.375% Senior Notes due 2018"\n      CUDA,"Barracuda Networks, Inc. Common Stock"\n      CUK,Carnival Plc ADS ADS\n      CUZ,Cousins Properties Incorporated Common Stock\n      CVA,Covanta Holding Corporation Common Stock\n      CVB,"Lehman ABS Corporation 7.75% Corp Backed Tr Ctfs, Kinder Morgan Debenture"\n      CVC,Cablevision Systems Corporation Class A Common Stock\n      CVD,Covance Inc. Common Stock\n      CVE,Cenovus Energy Inc Common Stock\n      CVEO,Civeo Corporation Common Stock\n      CVG,Convergys Corporation Common Stock\n      CVI,CVR Energy Inc. Common Stock\n      CVO,Cenveo Inc\n      CVRR,"CVR Refining, LP Common Units Representing Limited Partner Interests"\n      CVS,CVS Health Corporation Common Stock\n      CVT,"CVENT, INC. Common Stock"\n      CVX,Chevron Corporation Common Stock\n      CW,Curtiss\n      CWEI,"Clayton Williams Energy, Inc. Common Stock"\n      CWT,California Water Service Group Common Stock\n      CX,"Cemex, S.A.B. de C.V. Sponsored ADR"\n      CXE,MFS High Income Municipal Trust Common Stock\n      CXH,MFS Investment Grade Municipal Trust Common Stock\n      CXO,Concho Resources Inc. Common Stock\n      CXP,"Columbia Property Trust, Inc. Common Stock"\n      CXW,Corrections Corporation of America Common Stock\n      CYD,China Yuchai International Limited Common Stock\n      CYH,"Community Health Systems, Inc. Common Stock"\n      CYN,City National Corporation Common Stock\n      CYN$C,City National Corporation Depositary Shares Representing 1/40th Perpetual Preferred Series Series C\n      CYN$D,City National Corporation Depositary Shares Representing 1/40th Preferred Series D Fixed/Floating\n      CYNI,"Cyan, Inc. Common Stock"\n      CYS,"CYS Investments, Inc. Common Stock"\n      CYS$A,CYS Investments Inc Cumulative Redeemable Preferred Series A\n      CYS$B,"CYS Investments, Inc. Preferred Series B"\n      CYT,Cytec Industries Inc. Common Stock\n      CZZ,Cosan Limited Class A Common Stock\n      D,"Dominion Resources, Inc. Common Stock"\n      DAC,Danaos Corporation Common Stock\n      DAL,"Delta Air Lines, Inc. Common Stock"\n      DAN,Dana Holding Corporation Common Stock When\n      DANG,E\n      DAR,Darling Ingredients Inc. Common Stock\n      DATA,"Tableau Software, Inc. Class A Common Stock"\n      DB,Deutsche Bank AG Common Stock\n      DBD,"Diebold, Incorporated Common Stock"\n      DBL,DoubleLine Opportunistic Credit Fund Common Shares of Beneficial Interest\n      DCA,Virtus Total Return Fund\n      DCI,"Donaldson Company, Inc. Common Stock"\n      DCM,"NTT DOCOMO, Inc American Depositary Shares"\n      DCO,Ducommun Incorporated Common Stock\n      DCT,DCT Industrial Trust Inc Common Stock\n      DCUA,"Dominion Resources, Inc. Corporate Unit 2013 Series A"\n      DCUB,"Dominion Resources, Inc. Corporate Unit 2013 Series B"\n      DCUC,"Dominion Resources, Inc. VA New 2014 Series A Corp Unit"\n      DD,E.I. du Pont de Nemours and Company Common Stock\n      DD$A,E.I. du Pont de Nemours and Company Preferred Stock\n      DD$B,E.I. du Pont de Nemours and Company Preferred Stock\n      DDC,Dominion Diamond Corporation Common Stock\n      DDD,3D Systems Corporation Common Stock\n      DDE,Dover Downs Gaming & Entertainment Inc Common Stock\n      DDF,"Delaware Investments Dividend & Income Fund, Inc. Common Stock"\n      DDR,DDR Corp. Common Stock\n      DDR$J,DDR Corporation Dep Shs Repstg 1/20th Pfd Cl J\n      DDR$K,DDR Corp. DEPOSITARY SH REPSTG 1/20TH PDF CL K % (United States)\n      DDS,"Dillard\'s, Inc. Common Stock"\n      DDT,Dillard\'s Capital Trust I\n      DE,Deere & Company Common Stock\n      DECK,Deckers Outdoor Corporation Common Stock\n      DEG,"Etablissements Delhaize Freres et Cie ""Le Lion"" S.A. Common Stock"\n      DEI,"Douglas Emmett, Inc. Common Stock"\n      DEL,Deltic Timber Corporation Common Stock\n      DEO,Diageo plc Common Stock\n      DEX,Delaware Enhanced Global Dividend Common Shares of Beneficial Interest\n      DF,Dean Foods Company Common Stock\n      DFP,Flaherty & Crumrine Dynamic Preferred and Income Fund Inc. Common Stock\n      DFS,Discover Financial Services Common Stock\n      DFS$B,Discover Financial Services Dep Shs\n      DFT,"Dupont Fabros Technology, Inc. Common Stock"\n      DFT$A,DuPont Fabros Technology Inc CUMULATIVE RED PERP PFD SER A\n      DFT$B,"Dupont Fabros Technology, Inc. 7.625% Series B Cumulative Redeemable Perpetual Preferred Stock"\n      DG,Dollar General Corporation Common Stock\n      DGI,"DigitalGlobe, Inc Common Stock"\n      DGX,Quest Diagnostics Incorporated Common Stock\n      DHF,Dreyfus High Yield Strategies Fund Common Stock\n      DHG,"Deutsche High Income Opportunities Fund, Inc  New Common Stock"\n      DHI,"D.R. Horton, Inc. Common Stock"\n      DHR,Danaher Corporation Common Stock\n      DHT,"DHT Holdings, Inc."\n      DHX,"Dice Holdings, Inc. Common Stock"\n      DIAX,Nuveen Dow 30SM Dynamic Overwrite Fund Common Shares of Beneficial Interest\n      DIN,"DineEquity, Inc Common Stock"\n      DIS,Walt Disney Company (The) Common Stock\n      DK,"Delek US Holdings, Inc. Common Stock"\n      DKL,"Delek Logistics Partners, L.P. Common Units representing Limited Partner Interests"\n      DKS,Dick\'s Sporting Goods Inc Common Stock\n      DKT,Deutsch Bk Contingent Cap Tr V Tr Pfd Secs\n      DL,China Distance Education Holdings Limited American Depositary Shares\n      DLB,Dolby Laboratories Common Stock\n      DLNG,Dynagas LNG Partners LP Common Units\n      DLPH,Delphi Automotive plc Ordinary Shares\n      DLR,"Digital Realty Trust, Inc. Common Stock"\n      DLR$E,"Digital Realty Trust, Inc. Redeemable Pfd Ser E"\n      DLR$F,"Digital Realty Trust, Inc. Preferred Series F"\n      DLR$G,"Digital Realty Trust, Inc. Preferred Series G"\n      DLR$H,"Digital Realty Trust, Inc. Redeemable Preferred Stock Series H"\n      DLX,Deluxe Corporation Common Stock\n      DM,"Dominion Midstream Partners, LP Common Units representing Limited Partner Interests"\n      DMB,"Dreyfus Municipal Bond Infrastructure Fund, Inc. Common Stock"\n      DMD,Demand Media Inc. Common Stock\n      DMO,Western Asset Mortgage Defined Opportunity Fund Inc Common Stock\n      DNB,Dun & Bradstreet Corporation (The) Common Stock\n      DNI,Dividend and Income Fund Common Stock\n      DNOW,NOW Inc. Common Stock\n      DNP,"DNP Select Income Fund, Inc. Common Stock"\n      DNR,Denbury Resources Inc. Common Stock\n      DNY,The Denali Fund Inc\n      DO,"Diamond Offshore Drilling, Inc. Common Stock"\n      DOC,Physicians Realty Trust Common Shares of Beneficial Interest\n      DOM,Dominion Resources Black Warrior Trust Common Stock\n      DOOR,Masonite International Corporation Ordinary Shares (Canada)\n      DOV,Dover Corporation Common Stock\n      DOW,Dow Chemical Company (The) Common Stock\n      DPG,Duff & Phelps Global Utility Income Fund Inc. Common Stock\n      DPLO,"Diplomat Pharmacy, Inc. Common Stock"\n      DPM,"DCP Midstream Partners, LP DCP Midstream Partnership, LP Common Units"\n      DPS,"Dr Pepper Snapple Group, Inc Dr Pepper Snapple Group, Inc  Common Stock"\n      DPZ,Domino\'s Pizza Inc Common Stock\n      DQ,"DAQO New Energy Corp. American Depositary Shares, each representing five ordinary shares"\n      DRA,Diversified Real Asset Income Fund Common Shares of Beneficial Interest\n      DRC,Dresser\n      DRD,DRDGOLD Limited American Depositary Shares\n      DRE,Duke Realty Corporation Common Stock\n      DRH,Diamondrock Hospitality Company Common Stock\n      DRI,"Darden Restaurants, Inc. Common Stock"\n      DRII,"Diamond Resorts International, Inc. Common Stock"\n      DRL,Doral Financial Corporation NEW Common Stock\n      DRQ,Dril\n      DSE,Duff & Phelps Select Energy MLP Fund Inc. Common Stock\n      DSL,DoubleLine Income Solutions Fund Common Shares of Beneficial Interests\n      DSM,"Dreyfus Strategic Municipal Bond Fund, Inc. Common Stock"\n      DST,"DST Systems, Inc. Common Stock"\n      DSU,"Blackrock Debt Strategies Fund, Inc. Common Stock"\n      DSW,DSW Inc. Common Stock\n      DSX,Diana Shipping inc. common stock\n      DSX$B,Diana Shipping Inc. Perpetual Preferred Shares Series B (Marshall Islands)\n      DTE,DTE Energy Company Common Stock\n      DTF,DTF Tax\n      DTK,Deutsche Bk Contingent Cap Tr III Tr Pfd Secs\n      DTLA$,Brookfield DTLA Inc. 7.625% Series A Cumulative Redeemable Preferred Stock\n      DTQ,"DTE Energy Company 2012 Series C 5.25% Junior Subordinate Debentures due December 1, 2062"\n      DTT,Deutsche Bank Cap Fdg Tr IX Guaranteed Trust Preferred Securities\n      DTZ,DTE Energy Company 2011 Series I 6.50% Junior Subordinate Debentures due 2061\n      DUA,Deutsche Bank Cap Fdg Tr VIII 6.375% Tr Pfd Secs\n      DUC,"Duff & Phelps Utility & Corporate Bond Trust, Inc. Common Stock"\n      DUK,Duke Energy Corporation (Holding Company) Common Stock\n      DUKH,Duke Energy Corporation 5.125% Junior Subordinated Debentures due 2073\n      DV,DeVry Education Group Inc. Common Stock\n      DVA,DaVita HealthCare Partners Inc. Common Stock\n      DVD,"Dover Motorsports, Inc. Common Stock"\n      DVN,Devon Energy Corporation Common Stock\n      DW,Drew Industries Incorporated Common Stock ($0.01 Par Value)\n      DWRE,"DEMANDWARE, INC. Common Stock"\n      DX,"Dynex Capital, Inc. Common Stock"\n      DX$A,"Dynex Capital, Inc. Preferred Stock Series A"\n      DX$B,"Dynex Capital, Inc. Preferred Series B"\n      DXB,Deutsche Bk Contingent Cap TR II Tr Pfd Sec\n      DY,"Dycom Industries, Inc. Common Stock"\n      DYN,Dynegy Inc. Common Stock\n      DYN$A,Dynegy Inc. Mandatory Preferred Convertible Series A%\n      DYN.W,"Dynegy Inc. Warrant expiring October 2, 2017"\n      E,ENI S.p.A. Common Stock\n      EAA,"Entergy Arkansas, Inc. First Mortgage Bonds, 5.75% Series Due November 1, 2040"\n      EAB,"Entergy Arkansas, Inc. First Mortgage Bonds, 4.90% Series Due December 1, 2052"\n      EAE,"Entergy Arkansas, Inc. First Mortgage Bonds, 4.75% Series due June 1, 2063"\n      EARN,Ellington Residential Mortgage REIT Common Shares of Beneficial Interest\n      EAT,"Brinker International, Inc. Common Stock"\n      EBF,"Ennis, Inc. Common Stock"\n      EBR,Centrais Elc Braz Pfb B Elbras American Depositary Shares\n      EBR.B,Centrais Elc Braz Pfb B Elbras American Depositary Shares\n      EBS,"Emergent Biosolutions, Inc. Common Stock"\n      EC,Ecopetrol S.A. American Depositary Shares\n      ECA,Encana Corporation\n      ECC,Eagle Point Credit Company Inc. Common Stock\n      ECL,Ecolab Inc. Common Stock\n      ECOM,ChannelAdvisor Corporation Common Stock\n      ECR,Eclipse Resources Corporation Common Stock\n      ECT,ECA Marcellus Trust I Common Units of Beneficial Interest\n      ED,"Consolidated Edison, Inc. Common Stock"\n      EDD,"Morgan Stanley Emerging Markets Domestic Debt Fund, Inc. Morgan Stanley Emerging Markets Domestic Debt Fund, Inc. Common Stock"\n      EDE,Empire District Electric Company (The) Common Stock\n      EDF,Stone Harbor Emerging Markets Income Fund Common Shares of Beneficial Interest\n      EDI,Stone Harbor Emerging Markets Total Income Fund Common Shares of Beneficial Interests\n      EDN,Empresa Distribuidora Y Comercializadora Norte S.A. (Edenor) Empresa Distribuidora Y Comercializadora Norte S.A. (Edenor) American Depositary Shares\n      EDR,"Education Realty Trust, Inc. Common Stock"\n      EDU,"New Oriental Education & Technology Group, Inc. Sponsored ADR representing 1 Ordinary Share (Cayman Islands)"\n      EE,El Paso Electric Company Common Stock\n      EEA,"The European Equity Fund, Inc. Common Stock"\n      EEP,"Enbridge Energy, L.P. Class A Common Units"\n      EEQ,Enbridge Energy Management LLC Shares repstg limited liability company interests\n      EFC,"Ellington Financial LLC Common Shares representing Limitied Liability Company Interests, no par valu"\n      EFF,Eaton vance Floating\n      EFM,"Entergy Mississippi, Inc. First Mortgage Bonds, 6.20% Series due April 15, 2040"\n      EFR,Eaton Vance Senior Floating\n      EFT,Eaton Vance Floating Rate Income Trust Common Shares of Beneficial Interest\n      EFX,"Equifax, Inc. Common Stock"\n      EGF,"Blackrock Enhanced Government Fund, Inc. Common Stock"\n      EGL,"Engility Holdings, Inc. Common Stock"\n      EGN,Energen Corporation Common Stock\n      EGO,Eldorado Gold Corporation Ordinary Shares\n      EGP,"EastGroup Properties, Inc. Common Stock"\n      EGY,Vaalco Energy Inc Common Stock\n      EHI,Western Asset Global High Income Fund Inc Common Stock\n      EHIC,eHi Car Services Limited American Depositary Shares\n      EIG,Employers Holdings Inc Common Stock\n      EIX,Edison International Common Stock\n      EJ,E\n      EL,"Estee Lauder Companies, Inc. (The) Common Stock"\n      ELA,"Entergy Louisiana, LLC First Mortgage Bonds, 5.875% Series due June 15, 2041"\n      ELB,"Entergy Louisiana, Inc. 6.0% Series Due March 15, 2040"\n      ELJ,"Entergy Louisiana, Inc. First Mortgage Bonds, 5.25% Series due July 1, 2052"\n      ELLI,"Ellie Mae, Inc. Common Stock"\n      ELP,Companhia Paranaense de Energia (COPEL) Common Stock\n      ELS,"Equity Lifestyle Properties, Inc. Common Stock"\n      ELS$C,"Equity Lifestyle Properties, Inc. Depositary Shares each representing 1/100th of a share of 6.75% Series C Cumulative Redeemable Perpetual Preferred Stock"\n      ELU,"Entergy Louisiana, Inc. First Mortgage Bonds, 4.70% Series due June 1, 2063"\n      ELX,Emulex Corporation Common Stock\n      ELY,Callaway Golf Company Common Stock\n      EMC,EMC Corporation Common Stock\n      EMD,"Western Asset Emerging Markets Income Fund, Inc. Common Stock"\n      EME,"EMCOR Group, Inc. Common Stock"\n      EMES,Emerge Energy Services LP Common Units representing Limited Partner Interests\n      EMF,Templeton Emerging Markets Fund Common Stock\n      EMN,Eastman Chemical Company Common Stock\n      EMO,ClearBridge Energy MLP Opportunity Fund Inc. Common Stock\n      EMQ,"Entergy Mississippi, Inc. 1st Mtg Bds"\n      EMR,Emerson Electric Company Common Stock\n      EMZ,"Entergy Mississippi, Inc. First Mortgage Bonds, 6.0% Series due May 1, 2051"\n      ENB,Enbridge Inc Common Stock\n      ENBL,"Enable Midstream Partners, LP Common Units representing limited partner interests"\n      ENH,Endurance Specialty Holdings Ltd Common Stock\n      ENH$A,Endurance Specialty Holdings Ltd Preferred Series A\n      ENH$B,Endurance Specialty Holdings Ltd PFD SER B (Bermuda)\n      ENI,Enersis S A Common Stock\n      ENJ,"Entergy New Orleans, Inc. First Mortgage Bonds, 5.0% Series due December 1, 2052"\n      ENL,Reed Elsevier NV American Depositary Shares\n      ENLC,"EnLink Midstream, LLC Common Units representing Limited Partner Interests"\n      ENLK,"EnLink Midstream Partners, LP Common Units Representing Limited Partnership Interests"\n      ENR,"Energizer Holdings, Inc. Common Stock"\n      ENS,Enersys Common Stock\n      ENV,"Envestnet, Inc Common Stock"\n      ENVA,"Enova International, Inc. Common Stock"\n      ENZ,"Enzo Biochem, Inc. Common Stock ($0.01 Par Value)"\n      EOC,Empresa Nacional de Electricidad S.A. Common Stock\n      EOD,Wells Fargo Advantage Global Dividend Opportunity Fund\n      EOG,"EOG Resources, Inc. Common Stock"\n      EOI,Eaton Vance Enhance Equity Income Fund Eaton Vance Enhanced Equity Income Fund Shares of Beneficial Interest\n      EOS,Eaton Vance Enhance Equity Income Fund II Common Stock\n      EOT,Eaton Vance Municipal Income Trust EATON VANCE NATIONAL MUNICIPAL OPPORTUNITIES TRUST\n      EP$C,El Paso Corporation Preferred Stock\n      EPAM,"EPAM Systems, Inc. Common Stock"\n      EPD,Enterprise Products Partners L.P. Common Stock\n      EPE,EP Energy Corporation Class A Common Stock\n      EPR,EPR Properties Common Stock\n      EPR$C,EPR Properties 5.75% Series C Cumulative Convertible Preferred Shares\n      EPR$E,EPR Properties Series E Cumulative Conv Pfd Shs Ser E\n      EPR$F,EPR Properties Pfd Ser F\n      EQC,Equity Commonwealth Common Shares of Beneficial Interest\n      EQC$D,Equity Commonwealth 6.50% Pfd Conv Shs Ser D\n      EQC$E,Equity Commonwealth 7.25% Series E Cumulative Redeemable Preferred Shares\n      EQCO,Equity Commonwealth 5.75% Senior Notes due 2042\n      EQM,"EQT Midstream Partners, LP Common Units representing Limited Partner Interests"\n      EQR,Equity Residential Common Shares of Beneficial Interest\n      EQS,"Equus Total Return, Inc. Common Stock"\n      EQT,EQT Corporation Common Stock\n      EQY,"Equity One, Inc. Common Stock"\n      ERA,"Era Group, Inc. Common Stock"\n      ERF,Enerplus Corporation Common Stock\n      ERJ,Embraer S.A. Common Stock\n      EROS,Eros International PLC A Ordinary Shares\n      ESD,Western Asset Emerging Markets Debt Fund Inc Common Stock\n      ESE,ESCO Technologies Inc. Common Stock\n      ESI,"ITT Educational Services, Inc. Common Stock"\n      ESL,Esterline Technologies Corporation Common Stock\n      ESNT,Essent Group Ltd. Common Shares\n      ESRT,"Empire State Realty Trust, Inc. Class A Common Stock"\n      ESS,"Essex Property Trust, Inc. Common Stock"\n      ESS$H,"Essex Property Trust, Inc. 7.125% Series H Cumulative Redeemable Preferred Stock"\n      ESV,Ensco plc Class A Ordinary Shares\n      ETB,Eaton Vance Tax\n      ETE,"Energy Transfer Equity, L.P. Energy Transfer Equity, L.P. Common Units representing Limited Partnership interests"\n      ETG,Eaton Vance Tax\n      ETH,Ethan Allen Interiors Inc. Common Stock\n      ETJ,Eaton Vance Risk\n      ETM,Entercom Communications Corporation Common Stock\n      ETN,"Eaton Corporation, PLC Ordinary Shares"\n      ETO,Eaton Vance Tax\n      ETP,"Energy Transfer Partners, L.P. ENERGY TRANSFER PARNTERS"\n      ETR,Entergy Corporation Common Stock\n      ETV,Eaton Vance Corporation Eaton Vance Tax\n      ETW,Eaton Vance Corporation Eaton Vance Tax\n      ETX,Eaton Vance Municipal Income Term Trust Common Shares of Beneficial Interest\n      ETY,Eaton Vance Tax\n      EV,Eaton Vance Corporation Common Stock\n      EVC,Entravision Communications Corporation Common Stock\n      EVDY,"Everyday Health, Inc. Common Stock"\n      EVER,EverBank Financial Corp. Common Stock\n      EVER$A,EverBank Financial Corp. Depositary Shares Representing 1/1000th Perpetual Preferred Series A\n      EVF,Eaton Vance Senior Income Trust Common Stock\n      EVG,Eaton Vance Short Diversified Income Fund Eaton Vance Short Duration Diversified Income Fund Common Shares of Beneficial Interest\n      EVGN,Evogene Ltd Ordinary shares (Israel)\n      EVHC,"Envision Healthcare Holdings, Inc. Common Stock"\n      EVN,Eaton Vance Municipal Income Trust Common Stock\n      EVR,Evercore Partners Inc Class A Common Stock\n      EVT,Eaton Vance Tax Advantaged Dividend Income Fund Common Shares of Beneficial Interest\n      EVTC,"Evertec, Inc. Common Stock"\n      EW,Edwards Lifesciences Corporation Common Stock\n      EXAM,"ExamWorks Group, Inc. Common Stock"\n      EXAR,Exar Corporation Common Stock\n      EXC,Exelon Corporation Common Stock\n      EXCU,Exelon Corp. Conv Unit\n      EXD,Eaton Vance Tax\n      EXG,Eaton Vance Tax\n      EXH,"Exterran Holdings, Inc. Common Stock"\n      EXK,Endeavour Silver Corporation Ordinary Shares (Canada)\n      EXL,"Excel Trust, Inc. Common Stock"\n      EXL$B,"Excel Trust, Inc. 8.125% Series B Cumulative Redeemable Preferred Stock, $0.01 par value"\n      EXP,Eagle Materials Inc Common Stock\n      EXPR,"Express, Inc. Common Stock"\n      EXR,Extra Space Storage Inc Common Stock\n      EZT,"Entergy Texas Inc First Mortgage Bonds 5.625% Series due June 1, 2064"\n      F,Ford Motor Company Common Stock\n      FAC,First Acceptance Corporation\n      FAF,First American Corporation (New) Common Stock\n      FAM,First Trust/Aberdeen Global Opportunity Income Fund First Trust/Aberdeen Global Opportunity Income Fund Common Shares of Beneficial Interest\n      FAV,First Trust Dividend and Income Fund Common Shares of Beneficial Interest\n      FBC,"Flagstar Bancorp, Inc. Common Stock"\n      FBHS,"Fortune Brands Home & Security, Inc. Common Stock"\n      FBP,First BanCorp. New Common Stock\n      FBR,Fibria Celulose S.A.\n      FBS$A,First Preferred Cap Tr Iv First Preferred Capital Trust IV 8.15% Cum Trust Pfd Sec\n      FC,Franklin Covey Company Common Stock\n      FCAM,Fiat Chrysler Automobiles N.V. Mandatory Convertible Securities\n      FCAU,Fiat Chrysler Automobiles N.V. Common Shares\n      FCB,"FCB Financial Holdings, Inc. Class A Common Stock"\n      FCE.A,"Forest City Enterprises, Inc. Common Stock"\n      FCE.B,"Forest City Enterprises, Inc. Common Stock"\n      FCF,First Commonwealth Financial Corporation Common Stock\n      FCH,FelCor Lodging Trust Incorporated Common Stock\n      FCH$A,FelCor Lodging Trust Incorporated Preferred Stock\n      FCH$C,FelCor Lodging Trust Incorporated Dep Shares Representing 1/100 Preferred Series C\n      FCN,"FTI Consulting, Inc. Common Stock"\n      FCT,First Trust Senior Floating Rate Income Fund II Common Shares of Beneficial Interest\n      FCX,Freeport\n      FDI,"Fort Dearborn Income Securities, Inc. Common Stock"\n      FDO,"Family Dollar Stores, Inc. Common Stock"\n      FDP,"Fresh Del Monte Produce, Inc. Common Stock"\n      FDS,FactSet Research Systems Inc. Common Stock\n      FDX,FedEx Corporation Common Stock\n      FE,FirstEnergy Corporation Common Stock\n      FEI,First Trust MLP and Energy Income Fund Common Shares of Beneficial Interest\n      FELP,Foresight Energy LP Common Units representing Limited Partner Interests\n      FENG,"Phoenix New Media Limited American Depositary Shares, each representing 8 Class A ordinary shares."\n      FEO,First Trust/Aberdeen Emerging Opportunity Fund Common Shares of Beneficial Interest\n      FET,"Forum Energy Technologies, Inc. Common Stock"\n      FF,FutureFuel Corp.  Common shares\n      FFA,First Trust Enhanced Equity Income Fund\n      FFC,Flaherty & Crumrine Preferred Securities Income Fund Incorporated\n      FFG,"FBL Financial Group, Inc. Common Stock"\n      FGB,First Trust Specialty Finance and Financial Opportunities Fund\n      FGL,Fidelity & Guaranty Life Common Stock\n      FGP,"Ferrellgas Partners, L.P. Common Stock"\n      FHN,First Horizon National Corporation Common Stock\n      FHN$A,First Horizon National Corporation Depositary Shares\n      FHY,First Trust Strategic High Income Fund II First Trust Strategic High Income Fund II Common Shares of Beneficial Interest\n      FI,Frank\'s International N.V. Common Stock\n      FICO,Fair Isaac Corproation Common Stock\n      FIF,First Trust Energy Infrastructure Fund Common Shares of Beneficial Interest\n      FIG,Fortress Investment Group LLC Class A Common Stock\n      FII,"Federated Investors, Inc. Common Stock"\n      FIS,"Fidelity National Information Services, Inc. Common Stock"\n      FIX,"Comfort Systems USA, Inc. Common Stock"\n      FL,"Foot Locker, Inc."\n      FLC,Flaherty & Crumrine Total Return Fund Inc Common Stock\n      FLO,"Flowers Foods, Inc. Common Stock"\n      FLR,Fluor Corporation Common Stock\n      FLS,Flowserve Corporation Common Stock\n      FLT,"FleetCor Technologies, Inc. Common Stock"\n      FLTX,Fleetmatics Group PLC Ordinary Shares\n      FLY,Fly Leasing Limited\n      FMC,FMC Corporation Common Stock\n      FMD,First Marblehead Corporation (The) Common Stock\n      FMER$A,FirstMerit Corporation Depositary Shares\n      FMN,Federated Premier Municipal Income Fund Federated Premier Municipal Income Fund\n      FMO,Fiduciary/Claymore MLP Opportunity Fund Fiduciary/Claymore MLP Opportunity Fund Common Shares of Beneficial Interest\n      FMS,Fresenius Medical Care AG Common Stock\n      FMSA,FMSA Holdings Inc. Common Stock\n      FMX,Fomento Economico Mexicano S.A.B. de C.V. Common Stock\n      FMY,First Trust Motgage Income Fund Common Shares of Beneficial Interest\n      FN,Fabrinet Ordinary Shares\n      FNB,F.N.B. Corporation Common Stock\n      FNB$E,"F.N.B. Corporation Depositary Shares, each representing a 1/40th interest in a share of Fixed"\n      FNF,"FNF Group of Fidelity National Financial, Inc. Common Stock"\n      FNFG$B,First Niagara Financial Group Inc. PFD NON CUM SER B FXD/FLTG\n      FNFV,"FNFV Group of Fidelity National Financial, Inc. Common Stock"\n      FNV,Franco\n      FOE,Ferro Corporation Common Stock\n      FOF,Cohen & Steers Closed\n      FOR,Forestar Group Inc Common Stock\n      FPF,First Trust Intermediate Duration Preferred & Income Fund Common Shares of Beneficial Interest\n      FPL,First Trust New Opportunities MLP & Energy Fund Common Shares of Beneficial Interest\n      FPO,First Potomac Realty Trust Common Shares of Beneficial Interest\n      FPO$A,First Potomac Realty Trust CUMULATIVE REDEEMABLE PFD PERPETUAL SER A\n      FPT,Federated Premier Intermediate Municipal Income Fund Federated Premier Intermediate Municipal Income Fund\n      FR,"First Industrial Realty Trust, Inc. Common Stock"\n      FRA,Blackrock Floating Rate Income Strategies Fund Inc  Common Stock\n      FRC,FIRST REPUBLIC BANK Common Stock\n      FRC$A,First Republicbank Corp DEP SHS REPSTG 1/40TH PERP PFD SER A\n      FRC$B,First Republic Bank Depositary Shares Representing 1/40th Perpetual Preferred Series B\n      FRC$C,FIRST REPUBLIC BANK Dep Shs Repstg 1/40th Perp Pfd Ser C\n      FRC$D,First Republic Bank San Francisco California Depositary Shares Representing 1/40th Perpetual Preferred Series D\n      FRC$E,FIRST REPUBLIC BANK Depositary Shs Repstg 1/40th Perp Pfd Ser E Fixed To Fltg (RATE)\n      FRM,Furmanite Corporation Common Stock\n      FRO,Frontline Ltd. Ordinary Shares\n      FRT,Federal Realty Investment Trust Common Stock\n      FSCE,Fifth Street Finance Corp. 5.875% Senior Notes due 2024\n      FSD,First Trust High Income Long Short Fund Common Shares of Beneficial Interest\n      FSIC,FS Investment Corporation Common Stock\n      FSL,"Freescale Semiconductor, Ltd Common Shares"\n      FSM,Fortuna Silver Mines Inc Ordinary Shares (Canada)\n      FSS,Federal Signal Corporation Common Stock\n      FT,Franklin Universal Trust Common Stock\n      FTI,"FMC Technologies, Inc. Common Stock"\n      FTK,"Flotek Industries, Inc. Common Stock"\n      FTT,Federated Enhanced Treasury Income Fund Common Shares of Beneficial Interest\n      FUL,H. B. Fuller Company Common Stock\n      FUN,"Cedar Fair, L.P. Common Stock"\n      FUR,Winthrop Realty Trust New Common Stock\n      FVE,"Five Star Quality Care, Inc. Common Stock"\n      FXCM,FXCM Inc. Class A Common Stock\n      G,Genpact Limited Common Stock\n      GAB,"Gabelli Equity Trust, Inc. (The) Common Stock"\n      GAB$D,"Gabelli Equity Trust, Inc. (The) Preferred Stock Series D"\n      GAB$G,"Gabelli Equity Trust, Inc. (The) Series G Cumulative Preferred Stock"\n      GAB$H,"Gabelli Equity Trust, Inc. (The) Pfd Ser H"\n      GAM,"General American Investors, Inc. Common Stock"\n      GAM$B,"General American Investors Company, Inc. Cumulative Preferred Stock"\n      GAS,"AGL Resources, Inc. Common Stock"\n      GB,"Greatbatch, Inc. Common Stock"\n      GBAB,Guggenheim Build America Bonds Managed Duration Trust Common Shares of Beneficial Interest\n      GBL,"Gamco Investors, Inc. Common Stock"\n      GBX,"Greenbrier Companies, Inc. (The) Common Stock"\n      GCA,"Global Cash Access Holdings, Inc. Common Stock"\n      GCAP,"GAIN Capital Holdings, Inc. Common Stock"\n      GCH,"Aberdeen Greater China Fund, Inc. Common Stock"\n      GCI,"Gannett Co., Inc. Common Stock"\n      GCO,Genesco Inc. Common Stock\n      GCV,"Gabelli Convertible and Income Securities Fund, Inc. (The) Common Stock"\n      GCV$B,"Gabelli Convertible and Income Securities Fund, Inc. (The) Series B 6.00% Cumulative Preferred Stock"\n      GD,General Dynamics Corporation Common Stock\n      GDF,"Western Asset Global Partners Income Fund, Inc. Common Stock"\n      GDL,"GDL Fund, The Common Shares of Beneficial Interest"\n      GDL$B,The GDL Fund Series B Cumulative Puttable and Callable Preferred Shares\n      GDO,Western Asset Global Corporate Defined Opportunity Fund Inc. Western Asset Global Corporate Defined Opportunity Fund Inc.\n      GDOT,"Green Dot Corporation Class A Common Stock, $0.001 par value"\n      GDP,Goodrich Petroleum Corporation Common Stock\n      GDP$C,Goodrich Petroleum Corporation Depositary Shares Representing 1/1000th Preferred Series C\n      GDP$D,Goodrich Petroleum Corporation Depositary Shares Representing 1/1000th Preferred Series D\n      GDV,Gabelli Dividend & Income Trust Common Shares of Beneficial Interest\n      GDV$A,Gabelli Dividend & Income Tr Preferred Series A\n      GDV$D,Gabelli Dividend Pfd Series D\n      GE,General Electric Company Common Stock\n      GEB,"General Electric Company 4.875% Notes due October 15, 2052"\n      GEF,Greif Inc. Class A Common Stock\n      GEF.B,"Greif, Inc. Corporation Class B Common Stock"\n      GEH,"General Electric Capital Corporation 4.876% Notes due January 29, 2053"\n      GEK,"General Electric Capital Corporation 4.70% Notes due May 16, 2053"\n      GEL,"Genesis Energy, L.P. Common Units"\n      GEO,Geo Group Inc (The) REIT\n      GEQ,Guggenheim Equal Weight Enhanced Equity Income Fund Common Shares of Beneficial Interest\n      GER,Goldman Sachs MLP Energy Renaissance Fund\n      GES,"Guess?, Inc. Common Stock"\n      GF,"New Germany Fund, Inc. (The) Common Stock"\n      GFA,Gafisa SA Gafisa S.A. American Depositary Shares\n      GFF,Griffon Corporation Common Stock\n      GFI,Gold Fields Limited American Depositary Shares\n      GFIG,GFI Group Inc. Common Stock\n      GFY,Western Asset Variable Rate Strategic Fund Inc. Common Stock\n      GG,Goldcorp Inc. Common Stock\n      GGB,Gerdau S.A. Common Stock\n      GGE,Guggenheim Enhanced Equity Strategy Fund\n      GGG,Graco Inc. Common Stock\n      GGM,Guggenheim Credit Allocation Fund Common Shares of Beneficial Interest\n      GGP,"General Growth Properties, Inc. Common Stock"\n      GGP$A,"General Growth Properties, Inc. Preferred Series A"\n      GGT,Gabelli Multi\n      GGT$B,Gabelli Multi\n      GGZ,Gabelli Global Small and Mid Cap Value Trust (The) Common Shares of Beneficial Interest\n      GHC,Graham Holdings Company Common Stock\n      GHI,"Global High Income Fund, Inc. Common Stock"\n      GHL,"Greenhill & Co., Inc. Common Stock"\n      GHM,Graham Corporation Common Stock\n      GHY,"Prudential Global Short Duration High Yield Fund, Inc. Common Stock"\n      GIB,"CGI Group, Inc. Common Stock"\n      GIL,"Gildan Activewear, Inc. Class A Sub. Vot. Common Stock"\n      GIM,"Templeton Global Income Fund, Inc. Common Stock"\n      GIMO,Gigamon Inc. Common Stock\n      GIS,"General Mills, Inc. Common Stock"\n      GJH,Synthetic Fixed\n      GJO,Synthetic Fixed\n      GJP,Synthetic Fixed\n      GJR,Synthetic Fixed\n      GJS,"Goldman Sachs Group Securities STRATS Trust for Goldman Sachs Group Securities, Series 2006"\n      GJT,Synthetic Fixed\n      GJV,Synthetic Fixed\n      GLF,"GulfMark Offshore, Inc. New Common Stock"\n      GLOB,Globant S.A. Common Shares\n      GLOG,GasLog Ltd. Common Shares\n      GLOP,GasLog Partners LP Common Units representing limited partnership interests\n      GLP,Global Partners LP Global Partners LP Common Units representing Limited Partner Interests\n      GLPW,Global Power Equipment Group Inc Common Stock\n      GLT,Glatfelter Common Stock\n      GLW,Corning Incorporated Common Stock\n      GM,General Motors Company Common Stock\n      GM.A,General Motors Company Warrant (Expires 07/10/2016)\n      GM.B,General Motors Company Warrant (Expires 07/10/2019)\n      GM.C,"General Motors Company Warrants (expiring December 31, 2015)"\n      GME,Gamestop Corporation Common Stock\n      GMED,"Globus Medical, Inc. Class A Common Stock"\n      GMK,"GRUMA, S.A.B de C.V. Common Stock"\n      GMT,GATX Corporation Common Stock\n      GMZ,Goldman Sachs MLP Income Opportunities Fund\n      GNC,"GNC Holdings, Inc. Class A Common Stock"\n      GNE,Genie Energy Ltd. Class B Common Stock Stock\n      GNE$A,Genie Energy Ltd. Series 2012\n      GNI,Great Northern Iron Ore Properties Common Stock\n      GNRC,Generac Holdlings Inc. Common Stock\n      GNT,"GAMCO Natural Resources, Gold & Income Trust"\n      GNW,Genworth Financial Inc Common Stock\n      GOF,Guggenheim Strategic Opportunities Fund Common Shares of Beneficial Interest\n      GOL,Gol Linhas Aereas Inteligentes S.A. Sponsored ADR representing Pfd Shares\n      GOV,Government Properties Income Trust Common Shares of Beneficial Interest\n      GPC,Genuine Parts Company Common Stock\n      GPE$A,"Georgia Power Company Georgia Power Company 6 1/8% Series Class A Preferred Stock, Non"\n      GPI,"Group 1 Automotive, Inc. Common Stock"\n      GPK,Graphic Packaging Holding Company\n      GPM,Guggenheim Enhanced Equity Income Fund\n      GPN,Global Payments Inc. Common Stock\n      GPRK,Geopark Ltd Common Shares\n      GPS,"Gap, Inc. (The) Common Stock"\n      GPT,Gramercy Property Trust Inc. Common Stock\n      GPT$B,Gramercy Property Trust Inc. Preferred Series B\n      GPX,GP Strategies Corporation Common Stock\n      GRA,W.R. Grace & Co. Common Stock\n      GRAM,"Grana y Montero S.A.A. American Depositary Shares, each representing five Common Shares"\n      GRO,Agria Corporation American Depositary Shares\n      GRP.U,"Granite Real Estate Inc. Stapled Units, each consisting of one unit of Granite Real Estate Trust and one common share of Granite REIT Inc."\n      GRR,"Asia Tigers Fund, Inc. (The) Common Stock"\n      GRT,Glimcher Realty Trust Common Stock\n      GRT$G,Glimcher Realty Trust Preferred Shares of Beneficial Interest Series G\n      GRT$H,Glimcher Reatly Tr Pfd Sh Ben Int Ser H %\n      GRT$I,Glimcher Realty Trust 6.875% Cumulative Redeemable Preferred Shares of Beneficial Interest\n      GRUB,GrubHub Inc. Common Stock\n      GRX,The Gabelli Healthcare & Wellness Trust Common Shares of Beneficial Interest\n      GRX$A,Gabelli Healthcare PFD SER A\n      GRX$B,Gabelli Healthcare Preferred Series B\n      GS,"Goldman Sachs Group, Inc. (The) Common Stock"\n      GS$A,"Goldman Sachs Group, Inc. (The) Depositary Shares each representing 1/1000th Interest in a Share of Floating Rate Non"\n      GS$B,"Goldman Sachs Group, Inc. (The) Depositary Share repstg 1/1000th Preferred Series B"\n      GS$C,"Goldman Sachs Group, Inc. (The) Depositary Share repstg 1/1000th Preferred Series C"\n      GS$D,"Goldman Sachs Group, Inc. (The) Dep Shs repstg 1/1000 Pfd Ser D Fltg"\n      GS$I,"Goldman Sachs Group, Inc. (The) Perpetual Preferred Series I"\n      GS$J,Goldman Sachs Group Inc Depositary Shs Repstg 1/1000th Pfd Ser J Fixed to Fltg Rate\n      GS$K,"Goldman Sachs Group, Inc. (The) Dep Shs Repstg 1/1000 Int Sh Fxd/Fltg Non Cum Pfd Stk Ser K"\n      GSF,"Goldman Sachs Group, Inc. (The) 6.125% Notes due 2060"\n      GSH,Guangshen Railway Company Limited Common Stock\n      GSI,"General Steel Holdings, Inc. Common Stock"\n      GSJ,"Goldman Sachs Group, Inc. (The) 6.50% Notes due 2061"\n      GSK,GlaxoSmithKline PLC Common Stock\n      GSL,Global Ship Lease Inc New Class A Common Shares\n      GSL$B,"Global Ship Lease, Inc. Depository Shares Representing 1/100th Perpetual Preferred Series B% (Marshall Island)"\n      GTI,GrafTech International Ltd (Holding Co.) Common Stock\n      GTN,"Gray Communications Systems, Inc. Common Stock"\n      GTN.A,"Gray Television, Inc. CLass A Common Stock"\n      GTS,Triple\n      GTT,"GTT Communications, Inc. Common Stock"\n      GTY,Getty Realty Corporation Common Stock\n      GUA,"Gulf Power Company Series 2011A 5.75% Senior Notes due June 1, 2051"\n      GUT,Gabelli Utility Trust (The) Common Stock\n      GUT$A,Gabelli Utility Trust (The) 5.625% Series A Cumulative Preferred Shares\n      GVA,Granite Construction Incorporated Common Stock\n      GWB,"Great Western Bancorp, Inc. Common Stock"\n      GWR,Genesee & Wyoming Inc. Class A Common Stock\n      GWRE,"Guidewire Software, Inc. Common Stock"\n      GWRU,"Genesee & Wyoming, Inc. Tangible Equity Unit"\n      GWW,"W.W. Grainger, Inc. Common Stock"\n      GXP,Great Plains Energy Incorporated Common Stock\n      GXP$A,Great Plains Energy Incorporated Preferred Stock\n      GXP$D,Great Plains Energy Incorporated Preferred Stock\n      GXP$E,Great Plains Energy Incorporated Preferred Stock\n      GY,GenCorp Inc. Common Stock\n      GYB,CABCO Series 2004\n      GYC,Corporate Asset Backed Corp CABCO Corporate Asset Backed Corporation CABCO Series 2004\n      GZT,Gazit\n      H,Hyatt Hotels Corporation Class A Common Stock\n      HAE,Haemonetics Corporation Common Stock\n      HAL,Halliburton Company Common Stock\n      HAR,"Harman International Industries, Incorporated Common Stock"\n      HASI,"Hannon Armstrong Sustainable Infrastructure Capital, Inc. Common Stock"\n      HBI,Hanesbrands Inc. Common Stock\n      HBM,Hudbay Minerals Inc Ordinary Shares (Canada)\n      HBM.W,HudBay Minerals Inc Warrants Expiring 07/20/2018 (Canada)\n      HCA,"HCA Holdings, Inc. Common Stock"\n      HCC,"HCC Insurance Holdings, Inc. Common Stock"\n      HCI,"HCI Group, Inc. Common Stock"\n      HCJ,"HCI Group, Inc. 8% Senior Notes due 2020"\n      HCLP,Hi\n      HCN,"Health Care REIT, Inc. Common Stock"\n      HCN$I,"Health Care REIT, Inc. PFD PERPETUAL CONV SER I"\n      HCN$J,HEALTH CARE REIT INC Preferred Stock 6.5% PFD SERIES J\n      HCP,"HCP, Inc. Common Stock"\n      HD,"Home Depot, Inc. (The) Common Stock"\n      HDB,HDFC Bank Limited Common Stock\n      HDY,HyperDynamics Corporation Common Stock\n      HE,"Hawaiian Electric Industries, Inc. Common Stock"\n      HE$U,"Hawaiian Electric Industries, Inc. 6.5 % Cum QUIPS"\n      HEI,Heico Corporation Common Stock\n      HEI.A,Heico Corporation Common Stock\n      HELI,CHC Group Ltd. Ordinary Shares\n      HEP,"Holly Energy Partners, L.P. Common Stock"\n      HEQ,John Hancock Hedged Equity & Income Fund Common Shares of Beneficial Interest\n      HES,Hess Corporation Common Stock\n      HF,"HFF, Inc. Common Stock, Class A"\n      HFC,HollyFrontier Corporation Common Stock\n      HGG,"HHGregg, Inc. Common Stock"\n      HGH,"Hartford Financial Services Group, Inc. (The) 7.875% Fixed to Floating Rate Junior Subordinated Debentures due 2042"\n      HGR,"Hanger, Inc. Common Stock ($0.01 Par Value)"\n      HGT,Hugoton Royalty Trust Common Stock\n      HHC,Howard Hughes Corporation (The) Common Stock\n      HHS,Harte\n      HHY,Brookfield High Income Fund Inc.\n      HI,Hillenbrand Inc Common Stock\n      HIE,Miller/Howard High Income Equity Fund Common Shares of Beneficial Interest\n      HIG,"Hartford Financial Services Group, Inc. (The) Common Stock"\n      HIG.W,"Hartford Financial Services Group, Inc. (The) Warrants expiring June 26, 2019"\n      HII,"Huntington Ingalls Industries, Inc. Common Stock"\n      HIL,"Hill International, Inc. Common Stock"\n      HIO,"Western Asset High Income Opportunity Fund, Inc. Common Stock"\n      HIVE,"Aerohive Networks, Inc. Common Stock"\n      HIW,"Highwoods Properties, Inc. Common Stock"\n      HIX,Western Asset High Income Fund II Inc. Common Stock\n      HJV,"MS Structured Asset Corp MS Structured Asset Corp. SATURNS J.C. Penney Company, Inc. Debenture Backed Series 2007"\n      HK,Halcon Resources Corporation Common Stock\n      HL,Hecla Mining Company Common Stock\n      HL$B,Hecla Mining Company Preferred Stock\n      HLF,Herbalife Ltd. Common Stock\n      HLS,HealthSouth Corporation Common Stock\n      HLT,Hilton Worldwide Holdings Inc. Common Stock\n      HLX,"Helix Energy Solutions Group, Inc. Common Stock"\n      HMC,"Honda Motor Company, Ltd. Common Stock"\n      HME,"Home Properties, Inc. Common Stock"\n      HMLP,Hoegh LNG Partners LP Common Units representing Limited Partner Interests\n      HMN,Horace Mann Educators Corporation Common Stock\n      HMY,Harmony Gold Mining Company Limited\n      HNI,HNI Corporation Common Stock\n      HNP,Huaneng Power Intl Common Stock\n      HNR,Harvest Natural Resources Inc\n      HNT,Health Net Inc. Common Stock\n      HOG,Harley\n      HON,Honeywell International Inc. Common Stock\n      HOS,Hornbeck Offshore Services Common Stock\n      HOT,"Starwood Hotels & Resorts Worldwide, Inc. Common Stock"\n      HOV,"Hovnanian Enterprises, Inc. Class A Common Stock"\n      HP,"Helmerich & Payne, Inc. Common Stock"\n      HPF,John Hancock Pfd Income Fund II Pfd Income Fund II\n      HPI,John Hancock Preferred Income Fund Common Shares of Beneficial Interest\n      HPP,"Hudson Pacific Properties, Inc. Common Stock"\n      HPP$B,"Hudson Pacific Properties, Inc. 8.375% Series B Cumulative Redeemable Preferred shares"\n      HPQ,Hewlett\n      HPS,John Hancock Preferred Income Fund III Preferred Income Fund III\n      HPT,Hospitality Properites Trust Common Stock\n      HPT$D,Hospitality Properties Trust Preferred Stock\n      HPY,"Heartland Payment Systems, Inc. Common Stock"\n      HQH,Tekla Healthcare Investors Common Stock\n      HQL,TeklaLife Sciences Investors Common Stock\n      HR,Healthcare Realty Trust Incorporated Common Stock\n      HRB,"H&R Block, Inc. Common Stock"\n      HRC,Hill\n      HRG,Harbinger Group Inc Common Stock\n      HRL,Hormel Foods Corporation Common Stock\n      HRS,Harris Corporation Common Stock\n      HRTG,"Heritage Insurance Holdings, Inc. Common Stock"\n      HSBC,"HSBC Holdings, plc. Common Stock"\n      HSBC$A,"HSBC Holdings, plc. ADR SER A REP 1/40 PFD SER A"\n      HSC,Harsco Corporation Common Stock\n      HSEA,"HSBC Holdings, plc. Perpetual Sub Cap Secs"\n      HSEB,HSBC Holdings plc PERP SUB CAP SECS EXCH PREF SHS SER 2 (United Kingdom)\n      HSFC$B,HSBC Finance Corp Dep. Shares reptsg 1/40 Preferred Series B\n      HSP,Hospira Inc\n      HST,"Host Hotels & Resorts, Inc. Common Stock"\n      HSY,The Hershey Company Common Stock\n      HT,Hersha Hospitality Trust Class A Common Shares of Beneficial Interest\n      HT$B,Hersha Hospitality Trust PFD SER B\n      HT$C,Hersha Hospitality Trust 6.875% Series C Cumulative Redeemable Preferred Shares of Beneficial Interest\n      HTA,"Healthcare Trust of America, Inc. Class A Common Stock"\n      HTD,John Hancock Tax Advantaged Dividend Income Fund Common Shares of Beneficial Interest\n      HTF,Horizon Technology Finance Corporation 7.375% Senior Notes due 2019\n      HTGC,"Hercules Technology Growth Capital, Inc. Common Stock"\n      HTGX,"Hercules Technology Growth Capital, Inc. 6.25% Notes due 2024"\n      HTGY,"Hercules Technology Growth Capital, Inc. 7.00% Senior Notes due 2019"\n      HTGZ,"Hercules Technology Growth Capital, Inc. 7.00% Note due 2019"\n      HTH,Hilltop Holdings Inc.\n      HTR,Brookfield Total Return Fund Inc. (The) Common Stock\n      HTS,Hatteras Financial Corp Hatteras Financial Corp  Common Stock\n      HTS$A,Hatteras Financial Corp Cum Redeemable Pfd Ser A\n      HTY,John Hancock Tax\n      HTZ,"Hertz Global Holdings, Inc Common Stock"\n      HUB.A,Hubbell Inc A Common Stock\n      HUB.B,Hubbell Inc Common Stock Class B\n      HUBS,"HubSpot, Inc. Common Stock"\n      HUM,Humana Inc. Common Stock\n      HUN,Huntsman Corporation Common Stock\n      HUSI$D,"HSBC USA, Inc. Preferred Stock"\n      HUSI$F,"HSBC USA, Inc. Preferred Series F Floating Rate"\n      HUSI$G,"HSBC USA, Inc. Dep Shs repstg 1/40 Preferred Series G"\n      HUSI$H,"HSBC USA, Inc. Depositary Sh repstg 1/40th Preferred Series H"\n      HUSI$Z,"HSBC USA, Inc. Preferred Stock"\n      HVB,Hudson Valley Holding Corp. Common Stock\n      HVT,"Haverty Furniture Companies, Inc. Common Stock"\n      HVT.A,"Haverty Furniture Companies, Inc. Common Stock"\n      HW,Headwaters Incorporated Common Stock\n      HXL,Hexcel Corporation Common Stock\n      HY,Hyster\n      HYB,"New America High Income Fund, Inc. (The) Common Stock"\n      HYF,"Managed High Yield Plus Fund, Inc. Common Stock"\n      HYH,"Halyard Health, Inc. Common Stock"\n      HYI,Western Asset High Yield Defined Opportunity Fund Inc. Common Stock\n      HYT,"Blackrock Corporate High Yield Fund, Inc. Common Stock"\n      HZO,"MarineMax, Inc. Common Stock"\n      I,Intelsat S.A. Common Shares\n      I$A,Intelsat S.A. Series A mandatory convefrtible junior non\n      IAE,Voya Asia Pacific High Dividend Equity Income Fund ING Asia Pacific High Dividend Equity Income Fund Common Shares of Beneficial Interest\n      IAG,Iamgold Corporation Ordinary Shares\n      IBA,"Industrias Bachoco, S.A.B. de C.V. Common Stock"\n      IBM,International Business Machines Corporation Common Stock\n      IBN,ICICI Bank Limited Common Stock\n      IBP,"Installed Building Products, Inc. Common Stock"\n      ICA,Empresas Ica Soc Contrladora Common Stock\n      ICB,"MS Income Securities, Inc. Common Stock"\n      ICD,"Independence Contract Drilling, Inc. Common Stock"\n      ICE,Intercontinental Exchange Inc. Common Stock\n      ICL,Israel Chemicals Limited Ordinary Shares\n      IDA,"IDACORP, Inc. Common Stock"\n      IDE,"Voya Infrastructure, Industrials and Materials Fund Common Shares of Beneficial Interest"\n      IDG,ING GROEP N V PREF CTF 7.3750% Perp Hybrid Cap Secs (Netherlands)\n      IDT,IDT Corporation Class B Common Stock\n      IEH,Integrys Energy Group 6.00% Junior Subordinated Notes Due 2073\n      IEX,IDEX Corporation Common Stock\n      IFF,"Internationa Flavors & Fragrances, Inc. Common Stock"\n      IFN,"India Fund, Inc. (The) Common Stock"\n      IFT,"Imperial Holdings, Inc. Common Stock"\n      IGA,Voya Global Advantage and Premium Opportunity Fund Common Shares of Beneficial Interest\n      IGD,Voya Global Equity Dividend and Premium Opportunity Fund\n      IGI,Western Asset Investment Grade Defined Opportunity Trust Inc. Common Stock\n      IGR,CBRE Clarion Global Real Estate Income Fund Common Stock\n      IGT,International Game Technology Common Stock\n      IHC,Independence Holding Company Common Stock\n      IHD,Voya Emerging Markets High Income Dividend Equity Fund Common Shares\n      IHG,Intercontinental Hotels Group American Depositary Shares (Each representing one Ordinary Share)\n      IHS,IHS Inc. IHS Inc. Class A Common Stock\n      IID,Voya International High Dividend Equity Income Fund Common Shares of Beneficial Interest\n      IIF,"Morgan Stanley India Investment Fund, Inc. Common Stock"\n      IIM,Invesco Value Municipal Income Trust Common Stock\n      IL,"IntraLinks Holdings, Inc. Common Stock $0.001 par value"\n      IM,Ingram Micro Inc. Common Stock\n      IMAX,Imax Corporation Common Stock\n      IMN,Imation Corporation Common Stock\n      IMPR,"Imprivata, Inc. Common Stock"\n      IMPV,"Imperva, Inc. Common Stock"\n      IMS,"IMS Health Holdings, Inc. Common Stock"\n      INB,"Cohen & Steers Global Income Builder, Inc. Common Shares of Beneficial Interest"\n      IND,"ING Group, N.V. Perpetual Debt Securities"\n      INF,Brookfield Global Listed Infrastructure Income Fund Closed End Fund\n      INFY,Infosys Limited American Depositary Shares\n      ING,"ING Group, N.V. Common Stock"\n      INGR,Ingredion Incorporated Common Stock\n      INN,"Summit Hotel Properties, Inc. Common Stock"\n      INN$A,"Summit Hotel Properties, Inc. 9.25% Series A Cumulative Redeemable Preferred Stock"\n      INN$B,"Summit Hotel Properties, Inc. Pfd Ser B"\n      INN$C,"Summit Hotel Properties, Inc. 7.125% Series C Cumulative Redeemable Preferred Stock"\n      INT,World Fuel Services Corporation Common Stock\n      INVN,"InvenSense, Inc. Common Stock"\n      INXN,InterXion Holding N.V. Ordinary Shares (0.01 nominal value)\n      INZ,Ing Groep NV Perpetual Debt Securities\n      IO,Ion Geophysical Corporation Common Stock\n      IOC,InterOil Corporation\n      IP,International Paper Company Common Stock\n      IPG,"Interpublic Group of Companies, Inc. (The) Common Stock"\n      IPHI,Inphi Corporation Common Stock $0.001 par value\n      IPI,"Intrepid Potash, Inc Common Stock"\n      IPL$D,Interstate Power & Light Company Perp Prd Ser D\n      IQI,Invesco Quality Municipal Income Trust Common Stock\n      IR,Ingersoll\n      IRC,Inland Real Estate Corporation Common Stock\n      IRC$A,"Inland Real Estate Corporation 8.125% Series A Cumulative Redeemable Preferred Stock, $0.01 par value"\n      IRC$B,Inland Real Estate Corporation Redeemable Preferred Series B\n      IRE,Governor and Company of the Bank of Ireland (The) Common Stock\n      IRET,Investors Real Estate Trust Shares of Beneficial Interest\n      IRET$,Investors Real Estate Trust Series A Cumulative Redeemable Preferred Shares of Beneficial Interest\n      IRET$B,Investors Real Estate Trust 7.95% Series B Cumulative Redeemable Preferred Shares\n      IRF,International Rectifier Corporation Common Stock\n      IRL,"New Ireland Fund, Inc (The) Common Stock"\n      IRM,Iron Mountain Incorporated (Delaware)Common Stock\n      IRR,Voya Natural Resources Equity Income Fund Common Shares of Beneficial Interest\n      IRS,IRSA Inversiones Y Representaciones S.A. Common Stock\n      ISD,"Prudential Short Duration High Yield Fund, Inc. Common Stock"\n      ISF,"ING Group, N.V. Perp Hybrid Cap Secs (Netherlands)"\n      ISG,"ING Group, N.V. Perpetual Dent Secs 6.125%"\n      ISH,International Shipholding Corporation Common Stock\n      ISH$A,International Shipholding Corporation Cumulative Redeemable Perpetual Preferred Series A\n      ISH$B,International Shipholding Corporation PERP PFD SER B\n      ISP,ING Groep NV 6.20% Perpetual Debt Securities (Netherlands)\n      IT,"Gartner, Inc. Common Stock"\n      ITC,ITC Holdings Corp. Common Stock\n      ITG,"Investment Technology Group, Inc. Common Stock"\n      ITT,ITT Corporation Common Stock New\n      ITUB,Itau Unibanco Banco Holding SA American Depositary Shares (Each repstg 500 Preferred shares)\n      ITW,Illinois Tool Works Inc. Common Stock\n      IVC,Invacare Corporation Common Stock\n      IVH,Ivy High Income Opportunities Fund Common Shares of Beneficial Interest\n      IVR,INVESCO MORTGAGE CAPITAL INC Common Stock\n      IVR$A,Invesco Mortgage Capital Inc. Pfd Ser A\n      IVR$B,Invesco Mortgage Capital Inc. Preferred Series B Cum Fxd to Fltg\n      IVZ,Invesco Plc New Common Stock\n      IX,Orix Corp Ads Common Stock\n      JAH,Jarden Corporation Common Stock\n      JBK,Lehman ABS 3.50 3.50% Adjustable Corp Backed Tr Certs GS Cap I\n      JBL,"Jabil Circuit, Inc. Common Stock"\n      JBN,"Select Asset Inc. Select Asset Inc. on behalf of Corporate Backed Callable Trust Certificates, J.C. Penney Debenture Backed Series 2007"\n      JBR,"Select Asset Inc. Corporate Backed Callable Trust Certificates, J.C. Penney Debenture"\n      JBT,John Bean Technologies Corporation Common Stock\n      JCE,Nuveen Core Equity Alpha Fund Nuveen Core Equity Alpha Fund Common Shares of Beneficial Interest\n      JCI,"Johnson Controls, Inc. Common Stock"\n      JCP,"J.C. Penney Company, Inc. Holding Company Common Stock"\n      JDD,Nuveen Diversified Dividend and Income Fund Shares of Beneficial Interest\n      JE,"Just Energy Group, Inc. Ordinary Shares (Canada)"\n      JEC,Jacobs Engineering Group Inc. Common Stock\n      JEQ,"Aberdeen Japan Equity Fund, Inc.  Common Stock"\n      JFC,"JPMorgan China Region  Fund, Inc. Common Stock"\n      JFR,Nuveen Floating Rate Income Fund Common Stock\n      JGH,Nuveen Global High Income Fund Common Shares of Beneficial Interest\n      JGV,Nuveen Global Equity Income Fund\n      JGW,J.G. Wentworth Company (The) Class A Common Stock\n      JHI,John Hancock Investors Trust Common Stock\n      JHP,Nuveen Quality Preferred Income Fund 3 Preferred Income 3\n      JHS,John Hancock Income Securities Trust Common Stock\n      JHX,James Hardie Industries plc American Depositary Shares (Ireland)\n      JKS,JinkoSolar Holding Company Limited American Depositary Shares (each representing 4 Common Shares)\n      JLL,Jones Lang LaSalle Incorporated Common Stock\n      JLS,Nuveen Mortgage Opportunity Term Fund Nuveen Mortgage Opportunity Term Fund\n      JMEI,"Jumei International Holding Limited American Depositary Shares, each representing one Class A ordinary share"\n      JMF,Nuveen Energy MLP Total Return Fund Common Shares of Beneficial Interest\n      JMI,Javelin Mortgage Investment Corp. Common Stock\n      JMLP,Nuveen All Cap Energy MLP Opportunities Fund Common Shares of Beneficial Interest\n      JMM,Nuveen Multi\n      JMP,JMP Group LLC Common Shares\n      JMPB,JMP Group Inc 8.00% Senior Notes due 2023\n      JMPC,JMP Group Inc 7.25% Senior Notes due 2021\n      JMT,Nuveen Mortgage Opportunity Term Fund 2 Common Shares of Beneficial Interest\n      JNJ,Johnson & Johnson Common Stock\n      JNPR,"Juniper Networks, Inc. Common Stock"\n      JNS,"Janus Capital Group, Inc. Cmn Stk"\n      JOE,St. Joe Company (The) Common Stock\n      JOF,Japan Smaller Capitalization Fund Inc Common Stock\n      JONE,"Jones Energy, Inc. Class A Common Stock"\n      JOY,Joy Global Inc. Common Stock\n      JPC,Nuveen  Preferred Income Opportunities Fund\n      JPEP,JP Energy Partners LP Common units representing limited partner interests\n      JPI,Nuveen Preferred and Income Term Fund Common Shares of Beneficial Interest\n      JPM,JP Morgan Chase & Co. Common Stock\n      JPM$A,J P Morgan Chase & Co Depositary Shs Repstg 1/400 Pfd Ser P\n      JPM$B,JP Morgan Chase & Co Depositary Shares Representing 1/400th Preferred Series T\n      JPM$C,"JPMorgan Chase Capital XXIX 6.70% Capital Securities, Series CC"\n      JPM$D,JPMorgan Chase Bank N A London Branch Depositary Shs Repstg 1/400th Pfd Ser O\n      JPM$E,J P Morgan Chase & Co Depository Shares Representing 1/400th Int Perp Pfd Ser W\n      JPM.W,"J P Morgan Chase & Co Warrant expiring October 28, 2018"\n      JPS,Nuveen Quality Preferred Income Fund 2 Shares of Beneficial Interest\n      JPW,Nuveen Flexible Investment Income Fund Common Shares of Beneficial Interest\n      JQC,Nuveen Credit Strategies Income Fund Shares of Beneficial Interest\n      JRI,Nuveen Real Asset Income and Growth Fund Common Shares of Beneficial Interest\n      JRN,"Journal Communications, Inc. Class A Common Stock"\n      JRO,Nuveen Floating Rate Income Opportuntiy Fund Shares of Beneficial Interest\n      JSD,Nuveen Short Duration Credit Opportunities Fund Common Shares of Beneficial Interest\n      JTA,Nuveen Tax\n      JTD,Nuveen Tax\n      JTP,Nuveen Quality Preferred Income Fund Shares of Beneficial Interest\n      JW.A,"John Wiley & Sons, Inc. Common Stock"\n      JW.B,"John Wiley & Sons, Inc. Common Stock"\n      JWN,"Nordstrom, Inc. Common Stock"\n      K,Kellogg Company Common Stock\n      KAI,Kadant Inc Common Stock\n      KAMN,Kaman Corporation Common Stock\n      KAP,"KCAP Financial, Inc. 7.375% Senior Notes due 2019"\n      KAR,"KAR Auction Services, Inc Common Stock"\n      KATE,Kate Spade & Company Common Stock\n      KB,KB Financial Group Inc\n      KBH,KB Home Common Stock\n      KBR,"KBR, Inc. Common Stock"\n      KCC,Structured Products Corp. 8.20% Corporate Backed Trust Securities (CorTS)Issued by Provident Financial Trust I\n      KCG,"KCG Holdings, Inc. Class A Common Stock"\n      KED,Kayne Anderson Energy Development Company Common Stock\n      KEF,"Korea Equity Fund, Inc. Common Stock"\n      KEG,"Key Energy Services, Inc. Common Stock"\n      KEM,Kemet Corporation New Common Stock\n      KEN.V,Kenon Holdings Ltd. Ordinary Shares When Issued\n      KEP,Korea Electric Power Corporation Common Stock\n      KEX,Kirby Corporation Common Stock\n      KEY,KeyCorp Common Stock\n      KEY$G,KeyCorp Non Cumulative Perp Conv Pfd Ser A\n      KEYS,Keysight Technologies Inc. Common Stock\n      KF,"Korea Fund, Inc. (The) New Common Stock"\n      KFH,KKR Financial Holdings LLC 8.375% Senior Notes due 2041\n      KFI,KKR Financial Holdings LLC 7.50% Senior Notes due 2042\n      KFN$,KKR Financial Holdings LLC Pfd Ser A Llc\n      KFS,"Kingsway Financial Services, Inc. Ordinary Shares"\n      KFY,Korn/Ferry International Common Stock\n      KGC,Kinross Gold Corporation Common Stock\n      KHI,Deutsche High Income Trust Shares of Beneficial Interest\n      KIM,Kimco Realty Corporation Common Stock\n      KIM$H,Kimco Realty Corporation Depositary Shares Representing 1/100 Shares of Redeemable Preferred Class H\n      KIM$I,Kimco Realty Corporation DEPOSITARY SH REPSTG 1/1000TH PFD SER I\n      KIM$J,Kimco Realty Corporation Depositary Sh Repstg 1/1000th Pfd CL J %\n      KIM$K,Kimco Realty Corporation Depositary Shares Representing 1/1000th Preferred Series K\n      KING,King Digital Entertainment plc Ordinary Share\n      KIO,KKR Income Opportunities Fund Common Shares\n      KKD,"Krispy Kreme Doughnuts, Inc. Common Stock"\n      KKR,KKR & Co. L.P. Common Units Representing Limited Partnership Interest\n      KMB,Kimberly\n      KMF,"Kayne Anderson Midstream Energy Fund, Inc Common Stock"\n      KMG,"KMG Chemicals, Inc. Common Stock"\n      KMI,"Kinder Morgan, Inc. Common Stock"\n      KMI.W,"Kinder Morgan, Inc. Warrants Expiring 2017"\n      KMM,Deutsche  Multi\n      KMPA,Kemper Corporation 7.375% Subordinated Debentures due 2054\n      KMPR,Kemper Corporation\n      KMT,Kennametal Inc. Common Stock\n      KMX,CarMax Inc\n      KN,Knowles Corporation Common Stock\n      KND,"Kindred Healthcare, Inc. Common Stock"\n      KNL,"Knoll, Inc. Common Stock"\n      KNM,Konami Corporation American Depositary Shares (Each repstg one share of Common Stock)\n      KNOP,KNOT Offshore Partners LP Common Units representing Limited Partner Interests\n      KNX,"Knight Transportation, Inc. Common Stock"\n      KO,Coca\n      KODK,Eastman Kodak Company Common New\n      KODK.A,Eastman Kodak Company Wt Exp 135%\n      KODK.W,"Eastman Kodak Company Warrant (Expiring September 3, 2018)"\n      KOF,Coca Cola Femsa S.A.B. de C.V.  Common Stock\n      KOP,Koppers Holdings Inc. Koppers Holdings Inc. Common Stock\n      KORS,Michael Kors Holdings Limited Ordinary Shares\n      KOS,Kosmos Energy Ltd. Common Shares\n      KR,Kroger Company (The) Common Stock\n      KRA,"Kraton Performance Polymers, Inc Common Stock"\n      KRC,Kilroy Realty Corporation Common Stock\n      KRC$G,Kilroy Realty Corporation Preferred Stock Series G\n      KRC$H,Kilroy Realty Corporation Pfd Ser H\n      KRG,Kite Realty Group Trust Common Stock\n      KRG$A,Kite Realty Group Trust PERP PFD SER A\n      KRO,Kronos Worldwide Inc Common Stock\n      KS,KapStone Paper and Packaging Corporation Common Stock\n      KSM,Deutsche Strategic Municiple Income Trust Common Shares of Beneficial Interest\n      KSS,Kohl\'s Corporation Common Stock\n      KST,Deutsche Strategic Income Trust Shares of Beneficial Interest\n      KSU,Kansas City Southern Common Stock\n      KSU$,Kansas City Southern Preferred Stock\n      KT,KT Corporation Common Stock\n      KTF,Deutsche Municiple Income Trust Common Shares\n      KTH,Structures Products Cp 8% CorTS Issued by Peco Energy Cap Tr II Preferred Stock\n      KTN,Structured Products Corp 8.205% CorTS 8.205% Corporate Backed Trust Securities (CorTS)\n      KTP,Corts 7.625 Pfd Common Stock\n      KW,Kennedy\n      KWN,Kennedy\n      KWR,Quaker Chemical Corporation Common Stock\n      KYE,"Kayne Anderson Total Energy Return Fund, Inc. Common Stock"\n      KYN,Kayne Anderson MLP Investment Company Common Stock\n      KYN$E,"Kayne Anderson MLP Investment Company Series E Mandatory Redeemable Preferred Shares, $25.00 liquidation preference"\n      KYN$F,Kayne Anderson MLP Investment Company 3.50% Series F Mandatory Redeemable Preferred Shares $25.00 Liquidation Preference per share\n      KYN$G,Kayne Anderson MLP Investment Company Series G Mandatory Redeemable Preferred Shares Liquidation Preference\n      KYO,Kyocera Corporation Common Stock\n      L,Loews Corporation Common Stock\n      LAD,"Lithia Motors, Inc. Common Stock"\n      LADR,Ladder Capital Corp Class A Common Stock\n      LAS,"Lentuo International Inc. American Depositary Shares, each representing two ordinary shares"\n      LAZ,"Lazard LTD. Lazard, LTD. Class A Common Stock"\n      LB,"L Brands, Inc."\n      LBF,"Deutsche Global High Income Fund, Inc. Common Stock"\n      LC,LendingClub Corporation Common Stock\n      LCI,Lannett Co Inc Common Stock\n      LCM,Advent/Claymore Enhanced Growth & Income Fund Advent/Claymore Enhanced Growth & Income Fund Common Shares of Beneficial Interest\n      LDF,"Latin American Discovery Fund, Inc. (The) Common Stock"\n      LDL,"Lydall, Inc. Common Stock"\n      LDOS,"Leidos Holdings, Inc. Common Stock"\n      LDP,"Cohen & Steers Limited Duration Preferred and Income Fund, Inc."\n      LDR,"Landauer, Inc. Common Stock"\n      LEA,Lear Corporation Common Stock\n      LEAF,"Springleaf Holdings, Inc. Common Stock"\n      LEE,"Lee Enterprises, Incorporated Common Stock"\n      LEG,"Leggett & Platt, Incorporated Common Stock"\n      LEJU,"Leju Holdings Limited American Depositary Shares, each representing one Ordinary share"\n      LEN,Lennar Corporation Class A Common Stock\n      LEN.B,Lennar Corporation Class B\n      LEO,"Dreyfus Strategic Municipals, Inc. Common Stock"\n      LEU,Centrus Energy Corp. Class A Common Stock\n      LF,Leapfrog Enterprises Inc Common Stock\n      LFC,China Life Insurance Company Limited American Depositary Shares\n      LFL,LATAM Airlines Group S.A.\n      LG,Laclede Gas Company Common Stock\n      LGF,Lions Gate Entertainment Corporation Common Stock\n      LGI,Lazard Global Total Return and Income Fund Common Stock\n      LH,Laboratory Corporation of America Holdings Common Stock\n      LHO,LaSalle Hotel Properties Common Stock\n      LHO$H,LaSalle Hotel Properties 7.50% Series H Cumulative Redeemable Preferred Shares of Beneficial Interest\n      LHO$I,LaSalle Hotel Properties 6.375% Series I Cumulative Redeemable Redeemable Preferred SBI\n      LII,"Lennox International, Inc. Common Stock"\n      LITB,"LightInTheBox Holding Co., Ltd. American Depositary Shares, each representing 2 ordinary shares"\n      LL,"Lumber Liquidators Holdings, Inc Common Stock"\n      LLL,L\n      LLY,Eli Lilly and Company Common Stock\n      LM,"Legg Mason, Inc. Common Stock"\n      LMT,Lockheed Martin Corporation Common Stock\n      LNC,Lincoln National Corporation Common Stock\n      LNC.W,"Lincoln National Corporation Warrant expiring July 10, 2019"\n      LND,Brasilagro Brazilian Agric Real Estate Co Sponsored ADR (Brazil)\n      LNKD,LinkedIn Corporation Class A Common Stock\n      LNN,Lindsay Corporation Common Stock\n      LNT,Alliant Energy Corporation Common Stock\n      LO,"Lorillard, Inc Common Stock"\n      LOCK,"LifeLock, Inc. Common Stock"\n      LOR,"Lazard World Dividend & Income Fund, Inc. Common Stock"\n      LOW,"Lowe\'s Companies, Inc. Common Stock"\n      LPG,Dorian LPG Ltd. Common Stock\n      LPI,"Laredo Petroleum, Inc. Common Stock"\n      LPL,"LG Display Co, Ltd AMERICAN DEPOSITORY SHARES"\n      LPT,Liberty Property Trust\n      LPX,Louisiana\n      LQ,La Quinta Holdings Inc. Common Stock\n      LRE,"LRR Energy, L.P. Common Units Representing Limited Partner Interests"\n      LRN,K12 Inc Common Stock\n      LTC,"LTC Properties, Inc. Common Stock"\n      LTM,Life Time Fitness Common Stock\n      LUB,"Luby\'s, Inc. Common Stock"\n      LUK,Leucadia National Corporation Common Stock\n      LUV,Southwest Airlines Company Common Stock\n      LUX,"Luxottica Group, S.p.A. Common Stock"\n      LVLT,"Level 3 Communications, Inc. Common Stock"\n      LVS,Las Vegas Sands Corp. Common Stock\n      LXFR,Luxfer Holdings PLC American Depositary Shares (each representing one\n      LXFT,"Luxoft Holding, Inc. Class A Ordinary Shares"\n      LXK,"Lexmark International, Inc. Common Stock"\n      LXP,Lexington Realty Trust Common Stock\n      LXP$C,Lexington Realty Trust  Preferred Conv. Series C\n      LXU,"LSB Industries, Inc. Common Stock"\n      LYB,LyondellBasell Industries NV Ordinary Shares Class A (Netherlands)\n      LYG,Lloyds Banking Group Plc American Depositary Shares\n      LYG$A,"Lloyds Banking Group Plc 7.75% Public Income NotES (PINES) due July 15, 2050"\n      LYV,"Live Nation Entertainment, Inc. Common Stock"\n      LZB,La\n      M,Macy\'s Inc Common Stock\n      MA,Mastercard Incorporated Common Stock\n      MAA,Mid\n      MAC,Macerich Company (The) Common Stock\n      MAIN,Main Street Capital Corporation Common Stock\n      MAN,ManpowerGroup Common Stock\n      MANU,Manchester United Ltd. Class A Ordinary Shares\n      MAS,Masco Corporation Common Stock\n      MATX,"Matson, Inc. Common Stock"\n      MAV,Pioneer Municipal High Income Advantage Trust Common Shares of Beneficial Interest\n      MBI,MBIA Inc. Common Stock\n      MBLY,Mobileye N.V. Ordinary Shares\n      MBT,Mobile TeleSystems OJSC\n      MC,Moelis & Company Class A Common Stock\n      MCA,"Blackrock MuniYield California Quality Fund, Inc. Common Stock"\n      MCC,Medley Capital Corporation Common Stock\n      MCD,McDonald\'s Corporation Common Stock\n      MCI,Babson Capital Corporate Investors Common Stock\n      MCK,McKesson Corporation Common Stock\n      MCN,Madison Covered Call & Equity Strategy Fund Common Stock\n      MCO,Moody\'s Corporation Common Stock\n      MCP,"Molycorp, Inc Common Stock"\n      MCQ,Medley Capital Corporation 7.125% Senior Notes due 2019\n      MCR,MFS Charter Income Trust Common Stock\n      MCS,Marcus Corporation (The) Common Stock\n      MCV,Medley Capital Corporation 6.125% Senior Notes due 2023\n      MCY,Mercury General Corporation Common Stock\n      MD,"Mednax, Inc. Common Stock"\n      MDC,"M.D.C. Holdings, Inc. Common Stock"\n      MDLY,Medley Management Inc. Class A Common Stock\n      MDP,Meredith Corporation Common Stock\n      MDR,"McDermott International, Inc. Common Stock"\n      MDT,Medtronic Inc. Common Stock\n      MDU,"MDU Resources Group, Inc. Common Stock"\n      MED,MEDIFAST INC Common Stock\n      MEG,"Media General, Inc. Common Stock"\n      MEI,"Methode Electronics, Inc. Common Stock"\n      MEN,"Blackrock MuniEnhanced Fund, Inc Common Stock"\n      MEP,"Midcoast Energy Partners, L.P. Common units representing limited partner interests"\n      MER$D,"Merrill Lynch & Co., Inc. Preferred Stock"\n      MER$E,"Merrill Lynch & Co., Inc. Preferred Stock"\n      MER$F,"Merrill Lynch & Co., Inc. Preferred Stock"\n      MER$K,"Merrill Lynch & Co., Inc. 6.45% Trust Preferred Securities"\n      MER$M,"Merrill Lynch & Co., Inc. 6.45% Trust Preferred Securities"\n      MER$P,"Merrill Lynch & Co., Inc. Merrill Lynch Capital Trust III 7.375% Trust Preferred Securities"\n      MET,"MetLife, Inc. Common Stock"\n      MET$A,"MetLife, Inc. Preferred Series A Floating Rate"\n      MET$B,"MetLife, Inc. Preferred Series B"\n      MFA,"MFA Financial, Inc."\n      MFA$B,"MFA Financial, Inc. Preferred Series B"\n      MFC,Manulife Financial Corporation Common Stock\n      MFD,Macquarie/First Trust Global Common Stock\n      MFG,"Mizuho Financial Group, Inc. Sponosred ADR (Japan)"\n      MFL,Blackrock MuniHoldings Investment Quality Fund Common Shares of Beneficial Interest\n      MFM,MFS Municipal Income Trust Common Stock\n      MFO,"MFA Financial, Inc. 8.00% Senior Notes due 2042"\n      MFT,Blackrock MuniYield Investment Quality Fund Common Shares of Beneficial Interest\n      MFV,MFS Special Value Trust Common Stock\n      MG,Mistras Group Inc Common Stock\n      MGA,"Magna International, Inc. Common Stock"\n      MGF,MFS Government Markets Income Trust Common Stock\n      MGM,MGM Resorts International Common Stock\n      MGR,"Affiliated Managers Group, Inc. 6.375% Senior Notes due 2042"\n      MGU,Macquarie Global Infrastructure Total Return Fund Inc. Common Stock\n      MH$A,"Maiden Holdings, Ltd. Pref Shs Ser A (Bermuda)"\n      MHD,"Blackrock MuniHoldings Fund, Inc. Common Stock"\n      MHF,"Western Asset Municipal High Income Fund, Inc. Common Stock"\n      MHFI,"McGraw Hill Financial, Inc. Common Stock"\n      MHG,Marine Harvest ASA Sponsored ADR (Norway)\n      MHI,Pioneer Municipal High Income Trust Common Shares of Beneficial Interest\n      MHK,"Mohawk Industries, Inc. Common Stock"\n      MHN,"Blackrock MuniHoldings New York Quality Fund, Inc. Common Stock"\n      MHNA,Maiden Holdings North America Ltd. 8.25% Notes due 2041\n      MHNB,"Maiden Holdings North America, Ltd. 8.00% Notes due 2042"\n      MHNC,"Maiden Holdings North America, Ltd. 7.75% Notes due 2043"\n      MHO,"M/I Homes, Inc. Common Stock"\n      MHO$A,"M/I Homes, Inc. M/I Homes, Inc. Depositary Shares (Each representing 1/1000 of a Share of 9.75% Series A Preferred Share)"\n      MHR,Magnum Hunter Resources Corporation\n      MHY,"Western Asset Managed High Income Fund, Inc. Common Stock"\n      MIC,Macquarie Infrastructure Company LLC (New) Shares representing one Limited Liability Interest\n      MIE,"Cohen & Steers MLP Income and Energy Opportunity Fund, Inc. Common Stock"\n      MIG,"Meadowbrook Insurance Group, Inc. Common Stock"\n      MIL,MFC Industrial Ltd.\n      MILL,"Miller Energy Resourses, Inc. Common Stock"\n      MILL$C,"Miller Energy Resources, Inc. 10.75% Series C Cumulative, Redeemable Preferred Stock"\n      MILL$D,"Miller Energy Resources, Inc. 10.5% Series D Fixed Rate/Floating Rate Cumulative Redeemable Preferred Stock"\n      MIN,MFS Intermediate Income Trust Common Stock\n      MITT,"AG Mortgage Investment Trust, Inc. Common Stock"\n      MITT$A,"AG Mortgage Investment Trust, Inc. 8.25% Preferred Series A"\n      MITT$B,"AG Mortgage Investment Trust, Inc. Preferred Series B"\n      MIXT,"MiX Telematics Limited American Depositary Shares, each representing 25 Ordinary Shares"\n      MIY,"Blackrock MuniYield Michigan Quality Fund, Inc. Common Stock"\n      MJI,"Blackrock MuniYield New Jersey Quality Fund, Inc. Common Stock"\n      MJN,Mead Johnson Nutrition Company Common Stock\n      MKC,"McCormick & Company, Incorporated Common Stock"\n      MKC.V,"McCormick & Company, Incorporated Common Stock"\n      MKL,Markel Corporation Common Stock\n      MLI,"Mueller Industries, Inc. Common Stock"\n      MLM,"Martin Marietta Materials, Inc. Common Stock"\n      MLP,"Maui Land & Pineapple Company, Inc. Common Stock"\n      MLR,"Miller Industries, Inc. Common Stock"\n      MM,"Millennial Media, Inc. Common Stock"\n      MMC,"Marsh & McLennan Companies, Inc. Common Stock"\n      MMD,MainStay DefinedTerm Municipal Opportunities Fund Common Shares of Beneficial Interest\n      MMI,"Marcus & Millichap, Inc. Common Stock"\n      MMM,3M Company Common Stock\n      MMP,Magellan Midstream Partners L.P. Limited Partnership\n      MMS,"Maximus, Inc. Common Stock"\n      MMT,MFS Multimarket Income Trust Common Stock\n      MMU,"Western Asset Managed Municipals Fund, Inc. Common Stock"\n      MN,"Manning & Napier, Inc. Class A Common Stock"\n      MNE,Blackrock Muni New York Intermediate Duration Fund Inc Common Stock\n      MNI,McClatchy Company (The) Common Stock\n      MNK,Mallinckrodt plc Ordinary Shares\n      MNP,"Western Asset Municipal Partners Fund, Inc. Common Stock"\n      MNR,Monmouth Real Estate Investment Corporation Class A Common Stock\n      MNR$A,Monmouth Real Estate Investment Corporation 7.625% Series A Cumulative Redeemable Preferred Stock\n      MNR$B,Monmouth Real Estate Investment Corporation Series B Cumulative Redeemable Preferred Stock $0.01 par value\n      MO,"Altria Group, Inc."\n      MOD,Modine Manufacturing Company Common Stock\n      MODN,"Model N, Inc. Common Stock"\n      MOG.A,Moog Inc. Class A Common Stock\n      MOG.B,Moog Inc. Class B Common Stock\n      MOH,Molina Healthcare Inc Common Stock\n      MON,Monsanto Company Common Stock\n      MORE,"Monogram Residential Trust, Inc. Common"\n      MOS,Mosaic Company (The) Common Stock\n      MOV,Movado Group Inc. Common Stock\n      MP$D,Mississippi Power Company 5.25 Srs Pfd\n      MPA,Blackrock MuniYield Pennsylvania Quality Fund Common Stock\n      MPC,Marathon Petroleum Corporation Common Stock\n      MPG,Metaldyne Performance Group Inc. Common Stock\n      MPLX,MPLX LP Common Units Representing Limited Partner Interests\n      MPO,"Midstates Petroleum Company, Inc. Common Stock"\n      MPV,Babson Capital Participation Investors Common Stock\n      MPW,"Medical Properties Trust, Inc. common stock"\n      MPX,Marine Products Corporation Common Stock\n      MQT,"Blackrock MuniYield Quality Fund II, Inc. Common Stock"\n      MQY,"Blackrock MuniYield Quality Fund, Inc. Common Stock"\n      MR,Mindray Medical International Limited Sponsored ADR representing Class A shares (China)\n      MRC,MRC Global Inc. Common Stock\n      MRH,Montpelier Re Holdings Ltd.\n      MRH$A,Montpelier RE Holdings Ltd Non Cumulative Series A Preferred Shares (Bermuda)\n      MRIN,Marin Software Incorporated Common Stock\n      MRK,"Merck & Company, Inc. Common Stock (new)"\n      MRO,Marathon Oil Corporation Common Stock\n      MS,Morgan Stanley Common Stock\n      MS$A,Morgan Stanley Dep Shs repstg 1/1000 Pfd Ser A\n      MS$E,Morgan Stanley DEPOSITARY SHARES REP 1/1000TH SHARES FIXED/FLTG PREFERRED STOCK SERIES E\n      MS$F,Morgan Stanley Dep Shs Rpstg 1/1000th Int Prd Ser F Fxd to Flag\n      MS$G,Morgan Stanley Depositary Shares Representing 1/1000th Preferred Series G\n      MS$I,Morgan Stanley Depository Shares Representing 1/1000th Preferred Series 1 Fixed to Floating Non (Cum)\n      MSA,MSA Safety Incorporated Common Stock\n      MSB,Mesabi Trust Common Stock\n      MSCA,Main Street Capital Corporation 6.125% Senior Notes due 2023\n      MSCI,MSCI Inc Common Stock\n      MSD,"Morgan Stanley Emerging Markets Debt Fund, Inc. Common Stock"\n      MSF,"Morgan Stanley Emerging Markets Fund, Inc. Common Stock"\n      MSI,"Motorola Solutions, Inc. Common Stock"\n      MSJ,Morgan Stanley Cap Trust VI Cap Securities\n      MSK,Morgan Stanley Cap TR VIII GDT Cap Securities\n      MSL,MidSouth Bancorp Common Stock\n      MSM,"MSC Industrial Direct Company, Inc. Common Stock"\n      MSO,"Martha Stewart Living Omnimedia, Inc. Common Stock"\n      MSP,Madison Strategic Sector Premium Fund Madison Strategic Sector Premium Fund Common Shares of Beneficial Interest\n      MSZ,Morgan Stanley Capital Trust VII Cap Secs\n      MT,Arcelor Mittal NY Registry Shares NEW\n      MTB,M&T Bank Corporation Common Stock\n      MTB$,"M&T Bank Corporation Fixed Rate Cumulative Perpetual Preferred Stock, Series A"\n      MTB$C,"M&T Bank Corporation Fixed Rate Cumulative Perpetual Preferred Stock, Series C"\n      MTB.W,"M&T Bank Corporation Warrant (Expiring December 23, 2018)"\n      MTCN,ArcelorMittal 6.00% Mandatorily Convertible Subordinated Notes due 2016\n      MTD,Mettler\n      MTDR,Matador Resources Company Common Stock\n      MTG,MGIC Investment Corporation Common Stock\n      MTH,Meritage Homes Corporation Common Stock\n      MTL,Mechel OAO American Depositary Shares (Each rep. 1 common shares)\n      MTL$,Mechel Steel Group OAO American Depositary Shares (each representing one\n      MTN,"Vail Resorts, Inc. Common Stock"\n      MTOR,"Meritor, Inc. Common Stock"\n      MTR,Mesa Royalty Trust Common Stock\n      MTRN,Materion Corporation\n      MTS,"Montgomery Street Income Securities, Inc. Common Stock"\n      MTT,Western Asset Municipal Defined Opportunity Trust Inc Common Stock\n      MTU,"Mitsubishi UFJ Financial Group, Inc. Common Stock"\n      MTW,"Manitowoc Company, Inc. (The) Common Stock"\n      MTX,Minerals Technologies Inc. Common Stock\n      MTZ,"MasTec, Inc. Common Stock"\n      MUA,"Blackrock MuniAssets Fund, Inc Common Stock"\n      MUC,"Blackrock MuniHoldings California Quality Fund, Inc.  Common Stock"\n      MUE,"Blackrock MuniHoldings Quality Fund II, Inc. Common Stock"\n      MUH,"Blackrock MuniHoldings Fund II, Inc. Common Stock"\n      MUI,Blackrock Muni Intermediate Duration Fund Inc Common Stock\n      MUJ,"Blackrock MuniHoldings New Jersey Quality Fund, Inc. Common Stock"\n      MUR,Murphy Oil Corporation Common Stock\n      MUS,"Blackrock MuniHoldings Quality Fund, Inc Common Stock"\n      MUSA,Murphy USA Inc. Common Stock\n      MUX,McEwen Mining Inc. Common Stock\n      MVC,"MVC Capital, Inc. Common Stock"\n      MVCB,MVC Capital 7.25% Senior Notes due 2023\n      MVNR,"Mavenir Systems, Inc. Common Stock"\n      MVO,MV Oil Trust Units of Beneficial Interests\n      MVT,"Blackrock MuniVest Fund II, Inc.  Common Stock"\n      MW,"Men\'s Wearhouse, Inc. (The) Common Stock"\n      MWA,MUELLER WATER PRODUCTS Common Stock\n      MWE,"MarkWest Energy Partners, LP Common units representing limited partnership units"\n      MWG,Morgan Stanley Cap Tr IV Gtd Cap Secs\n      MWO,Morgan Stanley Cap Tr V Gtd Cap Secs\n      MWR,Morgan Stanley Cap Tr III Capital Trust Securities\n      MWV,Meadwestvaco Corporation Common Stock\n      MWW,"Monster Worldwide, Inc. Common Stock"\n      MX,"MagnaChip Semiconductor Corporation Depositary Shares, each representing one share of common stock"\n      MXE,"Mexico Equity and Income Fund, Inc. (The) Common Stock"\n      MXF,"Mexico Fund, Inc. (The) Common Stock"\n      MXL,"MaxLinear, Inc Class A Common Stock"\n      MY,"China Ming Yang Wind Power Group Limited American Depositary Shares, each representing one ordinary share $0.001 par value"\n      MYC,"Blackrock MuniYield California Fund, Inc. Common Stock"\n      MYCC,"ClubCorp Holdings, Inc. Common Stock"\n      MYD,"Blackrock MuniYield Fund, Inc.  Common Stock"\n      MYE,"Myers Industries, Inc. Common Stock"\n      MYF,Blackrock MuniYield Investment Fund Common Stock\n      MYI,"Blackrock MuniYield Quality Fund III, Inc Common Stock"\n      MYJ,"Blackrock MuniYield New Jersey Fund, Inc Common Stock"\n      MYM,"Blackrock MuniYield Michigan Quality Fund II, Inc. Common Stock"\n      MYN,"Blackrock MuniYield New York Quality Fund, Inc.Common Stock"\n      MZF,Managed Duration Investment Grade Municipal Fund\n      N,Netsuite Inc Common Stock\n      NAC,Nuveen California Dividend Advantage Municipal Fund Common Stock\n      NAD,Nuveen Dividend Advantage Municipal Fund Common Stock\n      NADL,North Atlantic Drilling Ltd. Common Shares\n      NAN,Nuveen New York Dividend Advantage Municipal Fund Common Stock\n      NAO,Nordic Amern Offshore Ltd Ordinary Shares Reg S (Marshall Islands)\n      NAP,Navios Maritime Midstream Partners LP Common Units representing limited partner interests\n      NAT,Nordic American Tankers Limited Common Stock\n      NAV,Navistar International Corporation Common Stock\n      NAV$D,Navistar International Corporation Preferred Stock\n      NAZ,Nuveen Arizona Premium Income Municipal Fund Common Stock\n      NBB,Nuveen Build America Bond Fund Common Shares of Beneficial Interest\n      NBD,Nuveen Build America Bond Opportunity Fund Common Shares of Beneficial Interest\n      NBG,Natl Bk Greece American Depositary Shares\n      NBG$A,National Bank of Greece SA Sponsored ADR representing Series A Preferred Shares (Greece)\n      NBHC,National Bank Holdings Corporation Common Stock\n      NBL,Noble Energy Inc. Common Stock\n      NBR,Nabors Industries Ltd.\n      NC,"NACCO Industries, Inc. Common Stock"\n      NCA,"Nuveen California Municipal Value Fund, Inc. Common Stock"\n      NCFT,"Norcraft Companies, Inc. Common Stock"\n      NCI,"Navigant Consulting, Inc. Common Stock"\n      NCR,NCR Corporation Common Stock\n      NCS,"NCI Building Systems, Inc. New Common Stock"\n      NCT,Newcastle Investment Corporation\n      NCT$B,Newcastle Investment Corporation Preferred Series B\n      NCT$C,Newcastle Investment Corporation Preferred Series C\n      NCT$D,Newcastle Invt Corp New PFD Ser D%\n      NCV,AllianzGI Convertible & Income Fund\n      NCZ,AllianzGI Convertible & Income Fund II Common Shares of Beneficial Interest\n      NDP,"Tortoise Energy Independence Fund, Inc. Common Stock"\n      NDRO,Enduro Royalty Trust Trust Units representing beneficial interest in the trust\n      NE,Noble Corporation Ordinary Shares (UK)\n      NEA,Nuveen AMT\n      NEE,"NextEra Energy, Inc. Common Stock"\n      NEE$C,"FPL Group, Inc. 5 7/8% Preferred Trust Securities"\n      NEE$G,"NextEra Energy, Inc. Series G Junior Subordinated Debenture due March 1, 2072"\n      NEE$H,"NextEra Energy, Inc. Series H Junior Subordinated Debentures due June 15, 2072"\n      NEE$I,"NextEra Energy, Inc. Series I Junior Subordinated Debentures due November 15, 2072"\n      NEE$J,"NextEra Energy, Inc. Series J Junior Subordinated Debentures due January 15, 2073"\n      NEE$O,"NextEra Energy, Inc. Units Expiring 09/01/2015"\n      NEE$P,"NextEra Energy, Inc. EQUITY UNIT"\n      NEFF,Neff Corporation Common Stock\n      NEM,Newmont Mining Corporation\n      NEP,"NextEra Energy Partners, LP Common Units representing limited partner interests"\n      NES,"Nuverra Environmental Solutions, Inc. Common Stock"\n      NEU,NewMarket Corp Common Stock\n      NEV,Nuveen Enhanced Municipal Value Fund Common Shares of Beneficial Interest\n      NEWM,New Media Investment Group Inc. Common Stock\n      NEWR,"New Relic, Inc. Common Stock"\n      NFG,National Fuel Gas Company Common Stock\n      NFJ,"AllianzGI NFJ Dividend, Interest & Premium Strategy Fund"\n      NFX,Newfield Exploration Company Common Stock\n      NGG,"National Grid Transco, PLC National Grid PLC (NEW) American Depositary Shares"\n      NGL,NGL ENERGY PARTNERS LP Common Units representing Limited Partner Interests\n      NGLS,Targa Resources Partners LP Common Units Representing Limited Partnership Interests\n      NGS,"Natural Gas Services Group, Inc. Common Stock"\n      NGVC,"Natural Grocers by Vitamin Cottage, Inc. Common Stock"\n      NHF,NexPoint Credit Strategies Fund\n      NHI,"National Health Investors, Inc. Common Stock"\n      NI,NiSource Inc Common Stock\n      NID,Nuveen Intermediate Duration Municipal Term Fund Common Shares of Beneficial Interest\n      NIE,AllianzGI Equity & Convertible Income Fund\n      NIM,Nuveen Select Maturities Municipal Fund Common Stock\n      NIO,"Nuveen Municipal Opportunity Fund, Inc. Common Stock"\n      NIQ,Nuveenn Intermediate Duration Quality Municipal Term Fund Common Shares of Beneficial Interest\n      NJ,Nidec Corporation (Nihon Densan Kabushiki Kaisha) American Depositary Shares\n      NJR,NewJersey Resources Corporation Common Stock\n      NKA,Niska Gas Storage Partners LLC Common Units Representing Limited Liability Company Interests\n      NKE,"Nike, Inc. Common Stock"\n      NKG,Nuveen Georgia Dividend Advantage Municipal Fund 2 Nuveen Georgia Dividend Advantage Municipal Fund 2 (the\n      NKX,Nuveen California AMT\n      NL,"NL Industries, Inc. Common Stock"\n      NLS,"Nautilus, Inc. Common Stock"\n      NLSN,Nielsen N.V. Common Stock\n      NLY,Annaly Capital Management Inc Common Stock\n      NLY$A,Annaly Capital Management Inc Preferred Stock Series A\n      NLY$C,Annaly Capital Management Inc 7.625% Series C Cumulative Redeemable Preferred Stock\n      NLY$D,Annaly Capital Management Inc Preferred Series D\n      NM,Navios Maritime Holdings Inc. Common Stock\n      NM$G,Navios Maritime Holdings Inc. Sponsored ADR Representing 1/100th Perpetual Preferred Series G (Marshall Islands)\n      NM$H,Navios Maritime Holdings Inc. Sponsored ADR Representing 1/100th Perp. Preferred Series H%\n      NMA,"Nuveen Municipal Advantage Fund, Inc. Common Stock"\n      NMBL,"Nimble Storage, Inc. Common Stock"\n      NMFC,New Mountain Finance Corporation Common Stock\n      NMI,"Nuveen Municipal Income Fund, Inc. Common Stock"\n      NMK$B,"Niagara Mohawk Holdings, Inc. Preferred Stock"\n      NMK$C,"Niagara Mohawk Holdings, Inc. Preferred Stock"\n      NMM,Navios Maritime Partners LP Common Units Representing Limited Partner Interests\n      NMO,"Nuveen Municipal Market Opportunity Fund, Inc. Common Stock"\n      NMR,Nomura Holdings Inc ADR American Depositary Shares\n      NMS,Nuveen Minnesota Municipal Income Fund Common Shares of Beneficial Interest\n      NMT,Nuveen Massachusetts Premium Income Municipal Fund Common Stock\n      NMY,Nuveen Maryland Premium Income Municipal Fund Common Stock\n      NNA,Navios Maritime Acquisition Corporation Common stock\n      NNC,Nuveen North Carolina Premium Income Municipal Fund Common Stock\n      NNI,"Nelnet, Inc. Common Stock"\n      NNN,National Retail Properties Common Stock\n      NNN$D,National Retail Properties Depositary Shares Representing 1/100th Preferred Series D\n      NNN$E,"National Retail Properties Depositary Shares, each representing a 1/100th interest in a share of 5.70% Series E Pfd."\n      NNP,"Nuveen New York Performance Plus Municipal Fund, Inc. Common Stock"\n      NNY,"Nuveen New York Municipal Value Fund, Inc. Common Stock"\n      NOA,"North American Energy Partners, Inc. Common Shares (no par)"\n      NOAH,Noah Holdings Limited\n      NOC,Northrop Grumman Corporation Common Stock\n      NOK,Nokia Corporation Sponsored American Depositary Shares\n      NOM$C,Nuveen Missouri Premium Income Municipal Fund MUNIFUND TERM PFD SHS SER 2015 (United States)\n      NOR,Noranda Aluminum Holding Corporation Common Stock\n      NORD,"Nord Anglia Education, Inc. Ordinary Shares"\n      NOV,"National Oilwell Varco, Inc. Common Stock"\n      NOW,"ServiceNow, Inc. Common Stock"\n      NP,"Neenah Paper, Inc. Common Stock"\n      NPD,China Nepstar Chain Drugstore Ltd American Depositary Shares\n      NPF,"Nuveen Premier Municipal Income Fund, Inc. Common Stock"\n      NPI,"Nuveen Premium Income Municipal Fund, Inc. Common Stock"\n      NPK,"National Presto Industries, Inc. Common Stock"\n      NPM,"Nuveen Premium Income Municipal Fund II, Inc. Common Stock"\n      NPO,Enpro Industries Inc\n      NPP,"Nuveen Performance Plus Municipal Fund, Inc. Common Stock"\n      NPT,"Nuveen Premium Income Municipal Fund IV, Inc. Common Stock"\n      NPTN,NeoPhotonics Corporation Common Stock\n      NPV,Nuveen Virginia Premium Income Municipal Fund Common Stock\n      NQ,"NQ Mobile Inc. American Depositary Shares, each representing five Class A common shares"\n      NQI,"Nuveen Quality Municipal Fund, Inc.  Common Stock"\n      NQM,"Nuveen Investment Quality Municipal Fund, Inc. Common Stock"\n      NQP,"Nuveen Pennsylvania Investment Quality Municipal Fund, Inc. Common Stock"\n      NQS,"Nuveen Select Quality Municipal Fund, Inc. Common Stock"\n      NQU,"Nuveen Quality Income Municipal Fund, Inc. Common Stock"\n      NR,"Newpark Resources, Inc. Common Stock"\n      NRF,NorthStar Realty Finance Corp. Common Stock (New)\n      NRF$A,Northstar Realty Finance Corp. 8.75% Series A Cumulative Redeemable Preferred Stock\n      NRF$B,Northstar Realty Finance Corp. Preferred Series B\n      NRF$C,Northstar Realty Finance Corp. Preferred Series C\n      NRF$D,Northstar Realty Finance Corp. 8.50% Series D Cumulative Redeemable Preferred Stock\n      NRF$E,Northstar Realty Finance Corp. Preferred Stock Series E\n      NRG,"NRG Energy, Inc. Common Stock"\n      NRK,Nuveen New York AMT\n      NRP,Natural Resource Partners LP Limited Partnership\n      NRT,North European Oil Royality Trust Common Stock\n      NRZ,New Residential Investment Corp. Common Stock\n      NS,Nustar Energy L.P.  Common Units\n      NSAM,"NorthStar Asset Management Group, Inc. Common Stock"\n      NSC,Norfolk Southern Corporation Common Stock\n      NSH,"Nustar GP Holdings, LLC Units"\n      NSL,Nuveen Senior Income Fund Common Stock\n      NSLP,New Source Energy Partners L.P. Common Units Representing Limited Partner Interests\n      NSM,Nationstar Mortgage Holdings Inc. Common Stock\n      NSP,"Insperity, Inc. Common Stock"\n      NSR,"Neustar, Inc. Neustar, Inc. Class A Common Stock"\n      NSS,"NuStar Logistics, L.P. 7.625% Fixed"\n      NTC,Nuveen Connecticut Premium Income Municipal Fund Common Stock\n      NTG,"Tortoise MLP Fund, Inc. Common Stock"\n      NTI,Northern Tier Energy LP Common Units representing Limited Partner Interests\n      NTL,"Nortel Inversora SA, ADR Common Stock"\n      NTP,Nam Tai Property Inc. Common Stock\n      NTT,Nippon Telegraph and Telephone Corporation Common Stock\n      NTX,Nuveen Texas Quality Income Municipal Fund Common Stock\n      NTX$C,Nuveen Texas Quality Income Municipal Fund Munifund Term Pfd Shs Ser 2013\n      NTZ,"Natuzzi, S.p.A."\n      NU,Northeast Utilities Common Stock\n      NUE,Nucor Corporation Common Stock\n      NUM,Nuveen Michigan Quality Income Municipal Fund Common Stock\n      NUO,Nuveen Ohio Quality Income Municipal Fund Common Stock\n      NUS,"Nu Skin Enterprises, Inc. Common Stock"\n      NUV,"Nuveen Municipal Value Fund, Inc. Common Stock"\n      NUW,Nuveen AMT\n      NVGS,Navigator Holdings Ltd. Ordinary Shares (Marshall Islands)\n      NVO,Novo Nordisk A/S Common Stock\n      NVR,"NVR, Inc. Common Stock"\n      NVRO,Nevro Corp. Common Stock\n      NVS,Novartis AG Common Stock\n      NW$C,Natl Westminster Pfd Preferred Stock\n      NWE,NorthWestern Corporation Common Stock\n      NWHM,New Home Company Inc. (The) Common Stock\n      NWL,Newell Rubbermaid Inc. Common Stock\n      NWN,Northwest Natural Gas Company Common Stock\n      NWY,"New York & Company, Inc. New York & Company, Inc. Common Shares"\n      NX,Quanex Building Products Corporation Common Stock\n      NXC,Nuveen California Select Tax\n      NXJ,Nuveen New Jersey Dividend Advantage Municipal Fund Share of Beneficial Interest\n      NXJ$C,"Nuveen New Jersey Dividend Advantage Municipal Fund MuniFund Term Preferred Shares, 2.00% Series 2015, $10.00 Liquidation preference per share"\n      NXN,Nuveen New York Select Tax\n      NXP,Nuveen Select Tax Free Income Portfolio Common Stock\n      NXQ,Nuveen Select Tax Free Income Portfolio II Common Stock\n      NXR,Nuveen Select Tax Free Income Portfolio III Common Stock\n      NYCB,"New York Community Bancorp, Inc. Common Stock"\n      NYCB$U,"New York Community Bancorp, Inc. New York Community Capital Tr V (BONUSES)"\n      NYLD,"NRG Yield, Inc. Class A Common Stock"\n      NYRT,"New York REIT, Inc. Common Stock"\n      NYT,New York Times Company (The) Common Stock\n      O,Realty Income Corporation Common Stock\n      O$F,Realty Income Corporation Monthly Income Cumulative Red Preferred Stock Class F\n      OAK,"Oaktree Capital Group, LLC Class A Units Representing Limited Liability Company Interests"\n      OAKS,Five Oaks Investment Corp. Common Stock\n      OAKS$A,Five Oaks Investment Corp. 8.75% Series A Cumulative Redeemable Preferred Stock\n      OAS,Oasis Petroleum Inc. Common Stock\n      OB,"OneBeacon Insurance Group, Ltd. Class A Common Stock"\n      OC,Owens Corning Inc Common Stock New\n      OCIP,OCI Partners LP Common Units representing Limited Partner Interests\n      OCIR,OCI Resources LP Common Units representing Limited Partner Interests\n      OCN,Ocwen Financial Corporation NEW Common Stock\n      OCR,"Omnicare, Inc. Common Stock"\n      OCR$A,"Omnicare, Inc. Trust Preferred Income Equity Redeemable Securities (PIERS)"\n      OCR$B,"Omnicare, Inc. Omnicare Capital Trust II Series B 4.00% Trust Preferred Income Equity Redeemable Securities (PIERS)"\n      ODC,Oil\n      OEC,Orion Engineered Carbons S.A Common Shares\n      OFC,Corporate Office Properties Trust Common Stock\n      OFC$L,Corporate Office Properties Trust Preferred Series L\n      OFG,OFG Bancorp Common Stock\n      OFG$A,OFG Bancorp Preferred Stock\n      OFG$B,OFG Bancorp 7.0% Non Cumulative Monthly Income Preferred Stock Series B\n      OFG$D,OFG Bancorp 7.125% Non\n      OGE,OGE Energy Corporation Common Stock\n      OGS,"ONE Gas, Inc. Common Stock"\n      OHI,"Omega Healthcare Investors, Inc. Common Stock"\n      OI,Owens\n      OIA,Invesco Municipal Income Opportunities Trust Common Stock\n      OIBR,Oi S.A. American Depositary Shares (Each representing 1 Preferred Share)\n      OIBR.C,"Oi S.A. American Depositary Shares, (Each representing 1 Common Share)"\n      OII,"Oceaneering International, Inc. Common Stock"\n      OILT,"Oiltanking Partners, L.P. Common Units Representing Limited Partnership Interests"\n      OIS,"Oil States International, Inc. Common Stock"\n      OKE,"ONEOK, Inc. Common Stock"\n      OKS,"ONEOK Partners, L.P. Common Stock"\n      OLN,Olin Corporation Common Stock\n      OLP,"One Liberty Properties, Inc. Common Stock"\n      OMAM,OM Asset Management plc Ordinary Shares\n      OMC,Omnicom Group Inc. Common Stock\n      OME,Omega Protein Corporation Common Stock\n      OMG,"OM Group, Inc. Common Stock"\n      OMI,"Owens & Minor, Inc. Common Stock"\n      OMN,OMNOVA Solutions Inc. Common Stock\n      ONDK,"On Deck Capital, Inc. Common Stock"\n      ONE,"Higher One Holdings, Inc. Common Stock"\n      OPK,OPKO Health Inc. Common Stock\n      OPWR,"Opower, Inc. Common Stock"\n      OPY,"Oppenheimer Holdings, Inc. Class A Common Stock (DE)"\n      ORA,"Ormat Technologies, Inc. Common Stock"\n      ORAN,Orange\n      ORB,Orbital Sciences Corporation Common Stock\n      ORC,"Orchid Island Capital, Inc. Common Stock"\n      ORCL,Oracle Corporation Common Stock\n      ORI,Old Republic International Corporation Common Stock\n      ORN,Orion Marine Group Inc Common\n      OSK,Oshkosh Corporation (Holding Company)Common Stock\n      OUBS,UBS AG Common Stock\n      OUT,OUTFRONT Media Inc. Common Stock\n      OWW,"Orbitz Worldwide, Inc. Common Stock"\n      OXM,"Oxford Industries, Inc. Common Stock"\n      OXY,Occidental Petroleum Corporation Common Stock\n      OZM,Och\n      P,"Pandora Media, Inc. Common Stock"\n      PAA,"Plains All American Pipeline, L.P. Common Stock"\n      PAC,"Grupo Aeroportuario Del Pacifico, S.A. B. de C.V. Grupo Aeroportuario Del Pacifico, S.A. de C.V. (each representing 10 Series B shares)"\n      PACD,Pacific Drilling S.A. Common Shares\n      PAG,"Penske Automotive Group, Inc. Common Stock"\n      PAGP,"Plains Group Holdings, L.P. Class A Shares representing limited partner interests"\n      PAH,Platform Specialty Products Corporation Common Stock\n      PAI,Western Asset Income Fund Common Stock\n      PAM,Pampa Energia S.A. Pampa Energia S.A.\n      PANW,"Palo Alto Networks, Inc. Common Stock"\n      PAR,PAR Technology Corporation Common Stock\n      PAY,"Verifone Systems, Inc. Common Stock"\n      PAYC,"Paycom Software, Inc. Common Stock"\n      PB,"Prosperity Bancshares, Inc. Common Stock"\n      PBA,Pembina Pipeline Corp. Ordinary Shares (Canada)\n      PBF,PBF Energy Inc. Class A Common Stock\n      PBFX,PBF Logistics LP Common Units representing limited partner interests\n      PBH,"Prestige Brand Holdings, Inc. Common Stock"\n      PBI,Pitney Bowes Inc. Common Stock\n      PBI$A,Pitney Bowes Inc 5.25% Notes due 2022\n      PBI$B,Pitney Bowes Inc 6.70% Notes Due 2043\n      PBR,Petroleo Brasileiro S.A.\n      PBR.A,Petroleo Brasileiro S.A.\n      PBT,Permian Basin Royalty Trust Common Stock\n      PBY,Pep Boys\n      PBYI,Puma Biotechnology Inc Common Stock\n      PCF,Putnam High Income Securities Fund Common Stock\n      PCG,Pacific Gas & Electric Co. Common Stock\n      PCI,PIMCO Dynamic Credit Income Fund Common Shares of Beneficial Interest\n      PCK,Pimco California Municipal Income Fund II Common Shares of Beneficial Interest\n      PCL,"Plum Creek Timber Company, Inc. Common Stock"\n      PCM,"PCM Fund, Inc. Common Stock"\n      PCN,Pimco Corporate & Income Strategy Fund Common Stock\n      PCP,Precision Castparts Corporation Common Stock\n      PCQ,PIMCO California Municipal Income Fund Common Stock\n      PDI,PIMCO Dynamic Income Fund Common Stock\n      PDM,"Piedmont Office Realty Trust, Inc. Class A Common Stock"\n      PDS,Precision Drilling Corporation Common Stock\n      PDT,John Hancock Premium Dividend Fund\n      PE,"Parsley Energy, Inc. Class A Common Stock"\n      PEB,Pebblebrook Hotel Trust Common Shares of Beneficial Interest\n      PEB$A,Pebblebrook Hotel Trust PFD SER A\n      PEB$B,Pebblebrook Hotel Trust Preferred Series B\n      PEB$C,Pebblebrook Hotel Trust 6.50% Series C Cumulative Redeemable Preferred Shares of Beneficial Interest\n      PEG,Public Service Enterprise Group Incorporated Common Stock\n      PEI,Pennsylvania Real Estate Investment Trust Common Stock\n      PEI$A,Pennsylvania Real Estate Investment Trust PFD sh CL A\n      PEI$B,Pennsylvania Real Estate Investment Trust Cumulative Redeemable Perpetual Preferred Shares Series B\n      PEO,Petroleum Resources Corporation Common Stock\n      PEP,"Pepsico, Inc. Common Stock"\n      PER,SandRidge Permian Trust Common Units of Benficial Interest\n      PES,Pioneer Energy Services Corp. Common Stk\n      PF,"Pinnacle Foods, Inc. Common Stock"\n      PFD,Flaherty & Crumrine Preferred Income Fund Incorporated Common Stock\n      PFE,"Pfizer, Inc. Common Stock"\n      PFG,Principal Financial Group Inc Common Stock\n      PFG$B,"Principal Financial Group, Inc. 6.518% Series B Non"\n      PFH,Cabco Tr Jcp 7.625 Common Stock\n      PFK,Prudential Financial Inflation\n      PFL,PIMCO Income Strategy Fund Shares of Beneficial Interest\n      PFN,PIMCO Income Strategy Fund II\n      PFO,Flaherty & Crumrine Preferred Income Opportunity Fund Incorporated Common Stock\n      PFS,"Provident Financial Services, Inc Common Stock"\n      PFSI,"PennyMac Financial Services, Inc. Class A Common Stock"\n      PFX,"Phoenix Companies, Inc. Phoenix Companies Inc 7.45% Pfd"\n      PG,Procter & Gamble Company (The) Common Stock\n      PGEM,"Ply Gem Holdings, Inc. Common Stock"\n      PGH,Pengrowth Energy Corporation\n      PGI,"Premiere Global Services, Inc."\n      PGN,Paragon Offshore plc Ordinary Shares\n      PGP,Pimco Global Stocksplus & Income Fund Pimco Global StocksPlus & Income Fund Common Shares of Beneficial Interest\n      PGR,Progressive Corporation (The) Common Stock\n      PGRE,"Paramount Group, Inc. Common Stock"\n      PGZ,Principal Real Estate Income Fund Common Shares of Beneficial Interest\n      PH,Parker\n      PHD,Pioneer Floating Rate Trust Pioneer Floating Rate Trust Shares of Beneficial Interest\n      PHG,Koninklijke Philips N.V. NY Registry Shares\n      PHH,PHH Corp Common Stock\n      PHI,Philippine Long Distance Telephone Company Sponsored ADR\n      PHK,Pimco High Income Fund Pimco High Income Fund\n      PHM,"PulteGroup, Inc. Common Stock"\n      PHT,Pioneer High Income Trust Common Shares of Beneficial Interest\n      PHX,Panhandle Oil and Gas Inc Common Stock\n      PII,Polaris Industries Inc. Common Stock\n      PIM,Putnam Master Intermediate Income Trust Common Stock\n      PIR,"Pier 1 Imports, Inc. Common Stock"\n      PIY,Preferred Plus Trust (Ser CZN) Preferred Plus Trust Ser CZN\n      PJC,Piper Jaffray Companies Common Stock\n      PJH,"Prudential Financial, Inc. 5.75% Junior Subordinated Notes due 2052"\n      PJS,PreferredPlus Trust Ser FAR 1 Tr Ctf\n      PKD,Parker Drilling Company Common Stock\n      PKE,Park Electrochemical Corporation Common Stock\n      PKG,Packaging Corporation of America Common Stock\n      PKI,"PerkinElmer, Inc. Common Stock"\n      PKO,Pimco Income Opportunity Fund Common Shares of Beneficial Interest\n      PKX,POSCO Common Stock\n      PKY,"Parkway Properties, Inc. Common Stock"\n      PL,Protective Life Corporation Common Stock\n      PL$B,Protective Life Corporation PLC Capital Trust V Trust Originated Preferred Securities (TOPRS)\n      PL$C,Protective Life Corporation 6.25% Subordinated Debentures due 2042\n      PL$E,Protective Life Corporation 6.00% Subordinated Debentures due 2042\n      PLD,"ProLogis, Inc. Common Stock"\n      PLL,Pall Corporation Common Stock\n      PLOW,"Douglas Dynamics, Inc. Common Stock"\n      PLT,"Plantronics, Inc. Common Stock"\n      PM,Philip Morris International Inc Common Stock\n      PMC,Pharmerica Corporation Common Stock\n      PMF,PIMCO Municipal Income Fund Common Stock\n      PML,Pimco Municipal Income Fund II Common Shares of Beneficial Interest\n      PMM,Putnam Managed Municipal Income Trust Common Stock\n      PMO,Putnam Municipal Opportunities Trust Common Stock\n      PMT,PennyMac Mortgage Investment Trust Common Shares of Beneficial Interest\n      PMX,PIMCO Municipal Income Fund III Common Shares of Beneficial Interest\n      PNC,"PNC Financial Services Group, Inc. (The) Common Stock"\n      PNC$P,"PNC Financial Services Group, Inc. (The) Depositary Shares Representing 1/4000th Perpetual Preferred Series P"\n      PNC$Q,"PNC Financial Services Group, Inc. (The) Depositary Shares Representing 1/4000th Perpetual Preferred Shares Series Q"\n      PNC.W,"PNC Financial Services Group, Inc. Warrant expiring December 31, 2018"\n      PNF,PIMCO New York Municipal Income Fund Common Stock\n      PNI,Pimco New York Municipal Income Fund II Common Shares of Beneficial Interest\n      PNK,"Pinnacle Entertainment, Inc. Common Stock"\n      PNM,"PNM Resources, Inc. (Holding Co.) Common Stock"\n      PNR,Pentair plc. Ordinary Share\n      PNTA,PennantPark Investment Corporation 6.25% Senior Notes due 2025\n      PNW,Pinnacle West Capital Corporation Common Stock\n      PNX,"Phoenix Companies, Inc. (The) Common Stock"\n      PNY,"Piedmont Natural Gas Company, Inc. Common Stock"\n      POL,PolyOne Corporation Common Stock\n      POM,"PEPCO Holdings, Inc Common Stock"\n      POR,Portland General Electric Co Common Stock\n      POST,"Post Holdings, Inc. Common Stock"\n      POT,Potash Corporation of Saskatchewan Inc. Common Stock\n      POWR,"PowerSecure International, Inc. Common Stock"\n      PPG,"PPG Industries, Inc. Common Stock"\n      PPL,PP&L Corporation Common Stock\n      PPO,Polypore International Inc Common Stock\n      PPP,Primero Mining Corp.  New Common Shares (Canada)\n      PPR,Voya Prime Rate Trust Shares of Beneficial Interest\n      PPS,"Post Properties, Inc. Common Stock"\n      PPS$A,"Post Properties, Inc. Preferred Stock"\n      PPT,Putnam Premier Income Trust Common Stock\n      PPX,"PPL Capital Funding, Inc. 2013 Series B Junior Subordinated Notes due 2073"\n      PQ,Petroquest Energy Inc Common Stock\n      PRA,ProAssurance Corporation Common Stock\n      PRE,PartnerRe Ltd. Common Stock\n      PRE$D,PartnerRe Ltd. Preferred Series D 6.5% (Bermuda)\n      PRE$E,PartnerRe Ltd. PFD SER E (Bermuda)\n      PRE$F,PartnerRe Ltd. Redeemable Preferred Shares Series F (Bermuda)\n      PRGO,Perrigo Company plc Ordinary Shares\n      PRH,"Prudential Financial, Inc. 5.70% Junior Subordinated Notes due 2053"\n      PRI,"Primerica, Inc. Common Stock"\n      PRLB,"Proto Labs, Inc. Common stock"\n      PRO,"PROS Holdings, Inc. Common Stock"\n      PRU,"Prudential Financial, Inc. Common Stock"\n      PRY,Prospect Capital Corporation 6.95% Senior Notes due 2022\n      PSA,Public Storage Common Stock\n      PSA$A,"Public Storage Depositary Shares each representing 1/1,000 of a 5.875% Cumulative Preferred SBI, Series A"\n      PSA$O,Public Storage Depositary Shares Representing 1/1000% Cumulative Pfd Sh Ben Int Series O\n      PSA$P,Public Storage DEPOSITARY SHS REPSTG % CUMULATIVE PFD SHS BEN INT (SER P)\n      PSA$Q,Public Storage DEPOSITARY SHS REPSTG 1/1000TH PFD SHS BEN INT SER Q\n      PSA$R,Public Storage Depository Sh Repstg 1/1000th Pfd Ser R\n      PSA$S,Public Storage DEP SH REPSTG PFD SH BEN INT SER S\n      PSA$T,Public Storage Depository Shares Representing 1/1000 Pfd Shares Beneficial Interest Series T\n      PSA$U,Public Storage Depositary Shares Representing 1/1000 Preferred Benerficial Interest Series U\n      PSA$V,Public Storage Dep Shs Repstg 1/1000th Pfd Sh Ben Int Ser V\n      PSA$W,Public Storage Depositary Shares Representing 1/1000 Preferred Shares of Benficial Interest Series W\n      PSA$X,Public Storage Depositary Shares Representing 1/1000th Cumulative Preferred Shares Beneficial Interest Series X\n      PSA$Y,Public Storage Dep Shs Repstg 1/1000th Pfd Sh Ben Int Ser Y\n      PSA$Z,Public Storage Dep Shs Representing 1/1000th Pfd Sh Ben Int Ser Z\n      PSB,"PS Business Parks, Inc. Common Stock"\n      PSB$R,"PS Business Parks, Inc. Depositary Shares, Each representing 1/1,000 of a share of 6.875% Cumulative Preferred stock, Series R, $0.01 par"\n      PSB$S,"PS Business Parks, Inc. Depositary Shares, each representing 1/1,000 of a share of 6.45% Cumulative Preferred Stock"\n      PSB$T,"PS Business Parks, Inc. Depositary Shares Representing 1/1000th Preferred Series T"\n      PSB$U,"PS Business Parks, Inc. Dep Shs Repstg 1/1000 Pfd Ser U"\n      PSB$V,"PS Business Parks, Inc. Depositary Shares Represting 1/1000th Shares Cumulative Preferred Stock Series V"\n      PSF,"Cohen & Steers Select Preferred and Income Fund, Inc. Common Stock"\n      PSG,Performance Sports Group Ltd. Ordinary Shares (Canada)\n      PSO,"Pearson, Plc Common Stock"\n      PSX,Phillips 66 Common Stock\n      PSXP,Phillips 66 Partners LP Common Units representing limited partner interest in the Partnership\n      PT,"Portugal Telecom SGPS, S.A . Common Stock"\n      PTP,"Platinum Underwriters Holdings, Ltd"\n      PTR,PetroChina Company Limited Common Stock\n      PTY,Pimco Corporate & Income Opportunity Fund\n      PUK,Prudential Public Limited Company Common Stock\n      PUK$,Prudential Public Limited Company 6.75% Perpetual Subordinated Captial Security\n      PUK$A,Prudential Public Limited Company 6.50% Perpetual Subordinated Capital Securities Exchangeable at the Issuer\'s Option Into Non\n      PVA,Penn Virginia Corporation Common Stock\n      PVG,"Pretium Resources, Inc. Ordinary Shares (Canada)"\n      PVH,PVH Corp. Common Stock\n      PVTD,"PrivateBancorp, Inc. 7.125% Subordinated Debentures due 2042"\n      PWE,Penn West Petroleum Ltd\n      PWR,"Quanta Services, Inc. Common Stock"\n      PX,"Praxair, Inc. Common Stock"\n      PXD,Pioneer Natural Resources Company Common Stock\n      PYB,PPlus Trust Series GSG\n      PYN,PIMCO New York Municipal Income Fund III Common Shares of Beneficial Interest\n      PYS,Merrill Lynch Depositor Inc PPlus Tr Ser RRD\n      PYT,PPlus Tr GSC\n      PZB,"Merrill Lynch Depositor, Inc. Merrill Lynch Depositor, Inc. PPLUS Class A 6.7% Callable Trust Certificates, Series LTD"\n      PZC,PIMCO California Municipal Income Fund III Common Shares of Beneficial Interest\n      PZE,Petrobras Argentina S.A. ADS\n      PZN,Pzena Investment Management Inc Class A Common Stock\n      Q,Quintiles Transnational Holdings Inc. Common Stock\n      QEP,"QEP Resources, Inc. Common Stock"\n      QEPM,"QEP Midstream Partners, LP Common Units representing Limited Partner Interests"\n      QIHU,"Qihoo 360 Technology Co. Ltd. American Depositary Shares, every 2 of which representing three Class A Ordinary Shares"\n      QSR,Restaurant Brands International Inc. Common Shares\n      QTM,Quantum Corporation Common Stock\n      QTS,"QTS Realty Trust, Inc. Class A Common Stock"\n      QTWO,"Q2 Holdings, Inc. Common Stock"\n      QUAD,"Quad Graphics, Inc Class A Common Stock"\n      R,"Ryder System, Inc. Common Stock"\n      RAD,Rite Aid Corporation Common Stock\n      RAI,Reynolds American Inc Common Stock\n      RALY,Rally Software Development Corp. Common Stock\n      RAS,RAIT Financial Trust New Common Shares of Beneficial Interest\n      RAS$A,RAIT Financial Trust  7.75% Series A Cumulative Redeemable Preferred Shares of Beneficial Interest\n      RAS$B,RAIT Financial Trust 8.375% Series B Cumulative Redeemable Preferred Shares of Beneficial Interest\n      RAS$C,RAIT Financial Trust 8.875% Series C Cumulative Redeemable Preferred Shares of Beneficial Interest\n      RATE,"Bankrate, Inc. Common Stock"\n      RAX,"Rackspace Hosting, Inc Common Stock"\n      RBA,Ritchie Bros. Auctioneers Incorporated Common Stock\n      RBC,Regal Beloit Corporation Common Stock\n      RBS,Royal Bank of Scotland Group Plc New (The) ADS\n      RBS$E,RBS Capital Funding Trust V\n      RBS$F,Royal Bank of Scotland Group Plc (The) Preferred Stock\n      RBS$G,RBS Capital Funding Trust VII\n      RBS$H,Royal Bank of Scotland Group Plc (The) Preferred Stock\n      RBS$I,RBS Capital Funding Trust VI\n      RBS$L,Royal Bank of Scotland Group Plc (The) ADR representing One Non\n      RBS$M,Royal Bank of Scotland Group Plc (The) ADS Series M\n      RBS$N,Royal Bank of Scotland Group Plc (The) Royal Bank of Scotland Group PLC (The) American Depositary Shares (each representing One Non\n      RBS$P,Royal Bank of Scotland Group Plc (The) ADR representing Preferred Shares Series P\n      RBS$Q,Royal Bank of Scotland Group Plc (The) ADR repstg Pref Shs Ser Q\n      RBS$R,Royal Bank of Scotland Group Plc (The) ADR repstg USD Pfd Shs Ser R (United Kingdom)\n      RBS$S,Royal Bank of Scotland Group Plc (The) Sponsored ADR Repstg Pref Ser S (United Kingdom)\n      RBS$T,Royal Bank of Scotland Group Plc (The) Sponsored ADR Representing Pfef shs ser T (United Kingdom)\n      RCAP,RCS CAPITAL CORPORATION Common Stock\n      RCI,"Rogers Communication, Inc. Common Stock"\n      RCL,Royal Caribbean Cruises Ltd. Common Stock\n      RCS,"PIMCO Strategic Income Fund, Inc."\n      RDC,Rowan Companies plc Class A Ordinary Shares\n      RDN,Radian Group Inc. Common Stock\n      RDS.A,Royal Dutch Shell PLC Royal Dutch Shell American Depositary Shares (Each representing two Class A Ordinary Shares)\n      RDS.B,Royal Dutch Shell PLC Royal Dutch Shell PLC American Depositary Shares (Each representing two Class B Ordinary Shares)\n      RDY,Dr. Reddy\'s Laboratories Ltd Common Stock\n      RE,"Everest Re Group, Ltd. Common Stock"\n      REG,Regency Centers Corporation Common Stock\n      REG$F,Regency Centers Corporation Cumulative Red Preferred Series 6%\n      REG$G,Regency Centers Corporation Pfd Ser 7%\n      REN,Resolute Energy Corporation Comon Stock\n      RENN,"Renren Inc. American Depositary Shares, each representing three Class A ordinary shares"\n      RES,"RPC, Inc. Common Stock"\n      RESI,Altisource Residential Corporation Common Stock\n      REV,"Revlon, Inc. New Common Stock"\n      REX,REX American Resources Corporation\n      REXR,"Rexford Industrial Realty, Inc. Common Stock"\n      RF,Regions Financial Corporation Common Stock\n      RF$A,Regions Financial Corporation Depositary Shares Representing 1/40th Perpetual Preferred Series A\n      RF$B,Regions Financial Corporation Depositary Shares Representing 1/40th Perpetual Preferred Series B\n      RFI,"Cohen & Steers Total Return Realty Fund, Inc. Common Stock"\n      RFP,Resolute Forest Products Inc. Common Stock\n      RFT,RAIT Financial Trust 7.625% Senior Notes due 2024\n      RFTA,RAIT Financial Trust 7.125% Senior Notes due 2019\n      RGA,"Reinsurance Group of America, Incorporated Common Stock"\n      RGC,Regal Entertainment Group Class A Common Stock\n      RGP,Regency Energy Partners LP Common Units Representing Limited Partner Interests\n      RGR,"Sturm, Ruger & Company, Inc. Common Stock"\n      RGS,Regis Corporation Common Stock\n      RGT,"Royce Global Value Trust, Inc. Common Stock"\n      RH,Restoration Hardware Holdings Inc. Common Stock\n      RHI,Robert Half International Inc. Common Stock\n      RHP,"Ryman Hospitality Properties, Inc. (REIT)"\n      RHT,"Red Hat, Inc. Common Stock"\n      RICE,Rice Energy Inc. Common Stock\n      RIG,Transocean Ltd (Switzerland) Common Stock\n      RIGP,Transocean Partners LLC Common Units Representing Limited Liability Company Interests\n      RIO,Rio Tinto Plc Common Stock\n      RIOM,Rio Alto Mining Limited Common Shares (Canada)\n      RIT,LMP Real Estate Income Fund Inc Common Stock\n      RJD,"Raymond James Financial, Inc. 6.90% Senior Notes Due 2042"\n      RJF,"Raymond James Financial, Inc. Common Stock"\n      RKT,Rock\n      RKUS,"Ruckus Wireless, Inc. Common Stock"\n      RL,Ralph Lauren Corporation Common Stock\n      RLD,RealD Inc Common Stock\n      RLGY,Realogy Holdings Corp. Common Stock\n      RLH,Red Lions Hotels Corporation Common Stock\n      RLH$A,Red Lion Hotels Capital Trust Red Lion Hotels Capital Trust\n      RLI,RLI Corp. Common Stock\n      RLJ,RLJ Lodging Trust Common Shares of Beneficial Interest $0.01 par value\n      RM,Regional Management Corp. Common Stock\n      RMAX,"RE/MAX Holdings, Inc. Class A Common Stock"\n      RMD,ResMed Inc. Common Stock\n      RMP,Rice Midstream Partners LP Common Units representing limited partner interests\n      RMT,Royce Micro\n      RNDY,"Roundy\'s, Inc. Common Stock"\n      RNE,"Morgan Stanley Eastern Europe Fund, Inc. Common Stock"\n      RNF,"Rentech Nitrogen Partners, L.P. Common Units representing limited partner interests"\n      RNG,"Ringcentral, Inc. Class A Common Stock"\n      RNO,Rhino Resource Partners LP Common Units representing limited partnership interests\n      RNP,Cohen & Steers Reit and Preferred Income Fund Inc Common Shares\n      RNR,RenaissanceRe Holdings Ltd. Common Stock\n      RNR$C,RenaissanceRe Holdings Ltd. 6.08% Series C Preference Shares\n      RNR$E,RenaissanceRe Holdings Ltd. 5.375% Series E Preference Shares\n      ROC,"Rockwood Holdings, Inc. Common Stock"\n      ROG,Rogers Corporation Common Stock\n      ROK,"Rockwell Automation, Inc. Common Stock"\n      ROL,"Rollins, Inc. Common Stock"\n      ROP,"Roper Industries, Inc. Common Stock"\n      ROYT,Pacific Coast Oil Trust Units of Beneficial Interest\n      RPAI,"Retail Properties of America, Inc. Class A Common Stock"\n      RPAI$A,"Retail Properties of America, Inc. Pfd Ser A %"\n      RPM,RPM International Inc. Common Stock\n      RPT,Ramco\n      RPT$D,Ramco\n      RQI,Cohen & Steers Quality Income Realty Fund Inc Common Shares\n      RRC,Range Resources Corporation Common Stock\n      RRMS,"Rose Rock Midstream, L.P. Common Units Representing Limited Partner Interests"\n      RRTS,"Roadrunner Transportation Systems, Inc Common Stock"\n      RS,Reliance Steel & Aluminum Co. Common Stock\n      RSE,"Rouse Properties, Inc. Common Stock"\n      RSG,"Republic Services, Inc. Common Stock"\n      RSH,Radioshack Corporation Common Stock\n      RSO,Resource Capital Corp. Resource Capital Corp. Common Stock\n      RSO$A,Resource Capital Corp. 8.50% Series A Cumulative Redeemable Preferred Stock\n      RSO$B,Resource Capital Corp. Pfd Ser B\n      RSO$C,Resource Capital Corp. Preferred Series C\n      RSPP,"RSP Permian, Inc. Common Stock"\n      RST,"Rosetta Stone Rosetta Stone, Inc."\n      RT,"Ruby Tuesday, Inc. Common Stock"\n      RTEC,"Rudolph Technologies, Inc. Common Stock"\n      RTI,"RTI International Metals, Inc. Common Stock"\n      RTN,Raytheon Company Common Stock\n      RUBI,"The Rubicon Project, Inc. Common Stock"\n      RUK,Reed Elsevier NV PLC New ADS\n      RVT,"Royce Value Trust, Inc. Common Stock"\n      RWT,"Redwood Trust, Inc. Common Stock"\n      RXN,Rexnord Corporation Common Stock\n      RY,Royal Bank Of Canada Common Stock\n      RYAM,Rayonier Advanced Materials Inc. Common Stock\n      RYI,Ryerson Holding Corporation Common Stock\n      RYL,"Ryland Group, Inc. (The) Common Stock"\n      RYN,Rayonier Inc. REIT Common Stock\n      RZA,"Reinsurance Group of America, Incorporated 6.20% Fixed"\n      S,Sprint Corporation Common Stock\n      SA,"Seabridge Gold, Inc. Ordinary Shares (Canada)"\n      SAH,"Sonic Automotive, Inc. Common Stock"\n      SAIC,SCIENCE APPLICATIONS INTERNATIONAL CORPORATION Common Stock\n      SALT,Scorpio Bulkers Inc. Common Stock\n      SAM,"Boston Beer Company, Inc. (The) Common Stock"\n      SAN,"Banco Santander, S.A. Sponsored ADR (Spain)"\n      SAN$A,"Banco Santander, S.A. 6.80% Non"\n      SAN$B,Santander Finance Preferred SA Unipersonal Floating Rate Non\n      SAN$C,"Banco Santander, S.A. 6.50% Non"\n      SAN$I,"Banco Santander Central Hispano, S.A. Santander Finance Preferred S.A. Unipersonal 6.41% Non"\n      SAP,SAP  SE ADS\n      SAQ,Saratoga Investment Corp 7.50% Notes due 2020\n      SAR,Saratoga Investment Corp New\n      SB,"Safe Bulkers, Inc Common Stock ($0.001 par value)"\n      SB$B,"Safe Bulkers, Inc 8.00% Series B Cumulative Redeemable Perpetual Preferred Shares"\n      SB$C,"Safe Bulkers, Inc Cumulative Redeemable Perpetual Preferred Series C (Marshall Islands)"\n      SB$D,"Safe Bulkers, Inc Perpetual Preferred Series D (Marshall Islands)"\n      SBGL,Sibanye Gold Limited American Depositary Shares (Each representing four ordinary shares)\n      SBH,"Sally Beauty Holdings, Inc. (Name to be changed from Sally Holdings, Inc.) Common Stock"\n      SBNA,Scorpio Tankers Inc. 6.75% Senior Notes due 2020\n      SBNB,Scorpio Tankers Inc. 7.50% Senior Notes Due 2017\n      SBR,Sabine Royalty Trust Common Stock\n      SBS,Companhia de saneamento Basico Do Estado De Sao Paulo\n      SBW,Western Asset Worldwide Income Fund Inc. Common Stock\n      SBY,Silver Bay Realty Trust Corp. Common Stock\n      SC,Santander Consumer USA Holdings Inc. Common Stock\n      SCCO,Southern Copper Corporation Common Stock\n      SCD,LMP Capital and Income Fund Inc. Common Stock\n      SCE$F,Southern California Edison Trust I Trust Preferred Securities\n      SCE$G,SCE Trust II Trust Preferred Securities\n      SCE$H,SCE Trust III Fixed/Floating Rate Trust Preference Securities\n      SCG,SCANA Corporation Common Stock\n      SCHW,Charles Schwab Corporation (The) Common Stock\n      SCHW$B,Charles Schwab Corporation Depositary Shares Representing 1/40th Int Sh Non Cumulative Preferred Stock Series B\n      SCI,Service Corporation International Common Stock\n      SCL,Stepan Company Common Stock\n      SCM,Stellus Capital Investment Corporation Common Stock\n      SCQ,Stellus Capital Investment Corporation 6.50% Notes due 2019\n      SCS,Steelcase Inc. Common Stock\n      SCU,Scana Corporation SCANA CORPORATION 2009 Series A 7.70% Enhanced Junior Subordinated Notes\n      SCX,L.S. Starrett Company (The) Common Stock\n      SD,Sandridge Energy Inc. Common Stock\n      SDLP,Seadrill Partners LLC Common Units Representing Limited Liability Company Interests\n      SDR,SandRidge Mississippian Trust II Common Units representing Beneficial Interests\n      SDRL,Seadrill Limited Ordinary Shares (Bermuda)\n      SDT,SandRidge Mississippian Trust I Common Units of Beneficial Interest\n      SE,Spectra Energy Corp Common Stock\n      SEAS,"SeaWorld Entertainment, Inc. Common Stock"\n      SEE,Sealed Air Corporation Common Stock\n      SEM,Select Medical Holdings Corporation Common Stock\n      SEMG,Semgroup Corporation Class A Common Stock\n      SEP,"Spectra Energy Partners, LP Common Units representing Limited Partner Interests"\n      SERV,"ServiceMaster Global Holdings, Inc. Common Stock"\n      SF,Stifel Financial Corporation Common Stock\n      SFB,Stifel Financial Corp. 6.70% Senior Note due 2022\n      SFE,"Safeguard Scientifics, Inc. New Common Stock"\n      SFG,"StanCorp Financial Group, Inc. Common Stock"\n      SFL,Ship Finance International Limited\n      SFN,Stifel Financial Corporation 5.375% Senior Notes due December 2022\n      SFS,"Smart & Final Stores, Inc. Common Stock"\n      SFUN,"SouFun Holdings Limited American Depositary Shares (Each representing Four Class A Ordinary Shares, HK$1.00 par value)"\n      SFY,Swift Energy Company (Holding Company) Common Stock\n      SGF,"Aberdeen Singapore Fund, Inc. Common Stock"\n      SGL,"Strategic Global Income Fund, Inc. Common Stock"\n      SGM,Stonegate Mortgage Corporation Common Stock\n      SGU,"Star Gas Partners, L.P. Common Stock"\n      SGY,Stone Energy Corporation Common Stock\n      SGZA,"Selective Insurance Group, Inc. 5.875% Senior Notes due 2043"\n      SHG,Shinhan Financial Group Co Ltd American Depositary Shares\n      SHI,"SINOPEC Shangai Petrochemical Company, Ltd. Common Stock"\n      SHLX,"Shell Midstream Partners, L.P. Common Units representing Limited Partner Interests"\n      SHO,"Sunstone Hotel Investors, Inc. Sunstone Hotel Investors, Inc. Common Shares"\n      SHO$D,"Sunstone Hotel Investors, Inc. 8.0% Series D Cumulative Redeemable Preferred Stock"\n      SHW,Sherwin\n      SID,Companhia Siderurgica Nacional S.A. Common Stock\n      SIG,Signet Jewelers Limited Common Shares\n      SIR,Select Income REIT Common Shares of Beneficial Interest\n      SIX,Six Flags Entertainment Corporation New Common Stock\n      SJI,"South Jersey Industries, Inc. Common Stock"\n      SJM,J.M. Smucker Company (The) New Common Stock\n      SJR,Shaw Communications Inc. Common Stock\n      SJT,San Juan Basin Royalty Trust Common Stock\n      SJW,SJW Corporation Common Stock\n      SKH,"Skilled Healthcare Group, Inc. Common Stock"\n      SKM,"SK Telecom Co., Ltd. Common Stock"\n      SKT,"Tanger Factory Outlet Centers, Inc. Common Stock"\n      SKX,"Skechers U.S.A., Inc. Common Stock"\n      SLB,Schlumberger N.V. Common Stock\n      SLCA,"U.S. Silica Holdings, Inc. Common Stock"\n      SLF,Sun Life Financial Inc. Common Stock\n      SLG,SL Green Realty Corporation Common Stock\n      SLG$I,SL Green Realty Corporation Preferred Series I\n      SLH,"Solera Holdings, Inc. Solera Holdings, Inc. Common Stock"\n      SLRA,Solar Capital Ltd. 6.75% Senior Notes due 2042\n      SLTB,Scorpio Bulkers Inc. 7.50% Senior Notes due 2019\n      SLW,Silver Wheaton Corp Common Shares (Canada)\n      SM,SM Energy Company Common Stock\n      SMFG,Sumitomo Mitsui Financial Group Inc Unsponsored American Depositary Shares (Japan)\n      SMG,Scotts Miracle\n      SMI,Semiconductor  Manufacturing International Corporation ADR\n      SMLP,"Summit Midstream Partners, LP Common Units Representing Limited Partner Interests"\n      SMM,Salient Midstream Common Shares of Beneficial Interest\n      SMP,"Standard Motor Products, Inc. Common Stock"\n      SN,Sanchez Energy Corporation Common Stock\n      SNA,Snap\n      SNE,Sony Corporation Common Stock\n      SNH,Senior Housing Properties Trust Common Stock\n      SNHN,Senior Housing Properties Trust 5.625% Senior Notes due 2042\n      SNI,"Scripps Networks Interactive, Inc Common Class A"\n      SNN,"Smith & Nephew SNATS, Inc. Common Stock"\n      SNOW,"Intrawest Resorts Holdings, Inc. Common Stock"\n      SNP,China Petroleum & Chemical Corporation Common Stock\n      SNR,New Senior Investment Group Inc. Common Stock\n      SNV,Synovus Financial Corp. Common Stock\n      SNV$C,Synovus Financial Corp. Perp Pfd Ser C Fxd To Fltg\n      SNX,Synnex Corporation Common Stock\n      SNY,Sanofi American Depositary Shares (Each repstg one\n      SO,Southern Company (The) Common Stock\n      SOL,Renesola Ltd. Common Shares of Beneficial Interest\n      SON,Sonoco Products Company Common Stock\n      SOR,"Source Capital, Inc. Common Stock"\n      SOV$C,"Santander Holdings USA, Inc. Dep Shs repstg 1/1000 Perp Pfd Ser C"\n      SPA,Sparton Corporation Common Stock\n      SPB,"Spectrum Brands Holdings, Inc. Common Stock"\n      SPE,"Special Opportunities Fund, Inc Common Stock"\n      SPF,Standard Pacific Corp Common Stock\n      SPG,"Simon Property Group, Inc. Common Stock"\n      SPG$J,"Simon Property Group, Inc. Simon Property Group 8 3/8% Series J Cumulative Redeemable Preferred Stock"\n      SPH,"Suburban Propane Partners, L.P. Common Stock"\n      SPLP,Steel Partners Holdings LP LTD PARTNERSHIP UNIT\n      SPN,"Superior Energy Services, Inc. Common Stock"\n      SPR,"Spirit Aerosystems Holdings, Inc. Common Stock"\n      SPW,SPX Corporation Common Stock\n      SPXX,Nuveen S&P 500 Dynamic Overwrite Fund\n      SQM,Sociedad Quimica y Minera S.A. Common Stock\n      SQNS,"Sequans Communications S.A. American Depositary Shares, each representing one Ordinary Share"\n      SR,Standard Register Company (The) Common Stock\n      SRC,"Spirit Realty Capital, Inc. Common Stock"\n      SRE,Sempra Energy Common Stock\n      SRF,The Cushing Royalty & Income Fund Common Shares of Beneficial Interest\n      SRI,"Stoneridge, Inc. Common Stock"\n      SRLP,Sprague Resources LP Common Units representing Limited Partner Interests\n      SRT,"StarTek, Inc. Common Stock"\n      SRV,The Cushing MLP Total Return Fund Common Shares of Beneficial Interest\n      SSD,"Simpson Manufacturing Company, Inc. Common Stock"\n      SSE,Seventy Seven Energy Inc. Common Stock\n      SSI,"Stage Stores, Inc. Common Stock"\n      SSL,Sasol Ltd. American Depositary Shares\n      SSLT,Sesa Sterlite Limited  American Depositary Shares (Each representing four equity shares)\n      SSNI,"Silver Spring Networks, Inc. Common Stock"\n      SSP,E.W. Scripps Company (The) Common Stock\n      SSS,"Sovran Self Storage, Inc. Common Stock"\n      SSTK,"Shutterstock, Inc. Common Stock"\n      SSW,Seaspan Corporation Seaspan Corporation Common Shares\n      SSW$C,Seaspan Corporation 9.50% Series C Cumulative Redeemable Perpetual Preferred Shares\n      SSW$D,Seaspan Corporation Cumulative Redeemable Perpetual Preferred Series D (Marshall Islands)\n      SSW$E,Seaspan Corporation Cumulative Redeemable Perpetual Preferred Series E (Marshall Islands)\n      SSWN,Seaspan Corporation 6.375% Notes due 2019\n      ST,Sensata Technologies Holding N.V. Ordinary Shares\n      STAG,"Stag Industrial, Inc. Common Stock"\n      STAG$A,"Stag Industrial, Inc. Preferred Series A"\n      STAG$B,"Stag Industrial, Inc. Cum Pfd Ser B"\n      STAR,iStar Financial Inc. Common Stock\n      STAR$D,iStar Financial Inc. Preferred Stock\n      STAR$E,iStar Financial Inc. 7.875% Preferred Ser E\n      STAR$F,iStar Financial Inc. Series F Preferred Stock\n      STAR$G,iStar Financial Inc. Preferred Stock Series G\n      STAR$I,iStar Financial Inc. Preferred Series I\n      STAY,"Extended Stay America, Inc. Common Stock"\n      STC,Stewart Information Services Corporation Common Stock\n      STE,STERIS Corporation Common Stock\n      STI,"SunTrust Banks, Inc. Common Stock"\n      STI$A,"SunTrust Banks, Inc. Dep Shs repstg 1/4000 Perpetual Pfd Stk Ser A"\n      STI$E,"SunTrust Banks, Inc. Depositary Shares Representing Perpetual Preferred Series E"\n      STI.A,"SunTrust Banks, Inc. Class A Warrant (Expiring December 31, 2018)"\n      STI.B,"SunTrust Banks, Inc. Class B Warrant (Expiring November 14, 2018)"\n      STJ,"St. Jude Medical, Inc. Common Stock"\n      STK,Columbia Seligman Premium Technology Growth Fund Inc\n      STL,Sterling Bancorp\n      STM,STMicroelectronics N.V. Common Stock\n      STN,Stantec Inc Common Stock\n      STNG,Scorpio Tankers Inc. Common Shares\n      STO,Statoil ASA\n      STON,StoneMor Partners L.P. Common Unit Rep Limited Partnership Interests\n      STOR,STORE Capital Corporation Common Stock\n      STR,Questar Corporation Common Stock\n      STRI,"STR Holdings, Inc Common Stock"\n      STT,State Street Corporation Common Stock\n      STT$C,State Street Corporation Dep Shs Representing 1/4000 Ownership Int In Sh Non Cum (Perpertual Pfd Stk Ser C)\n      STT$D,State Street Corporation Depositary Shares representing 1/4000th Perpetual Preferred Series D\n      STT$E,"State Street Corporation Depository Shares, each representing a 1/4,000th ownership interest in a share of Non"\n      STV,"China Digital TV Holding Co., Ltd. American Depositary Shares"\n      STWD,"STARWOOD PROPERTY TRUST, INC. Starwood Property Trust Inc."\n      STZ,"Constellation Brands, Inc. Common Stock"\n      STZ.B,"Constellation Brands, Inc. Common Stock"\n      SU,Suncor Energy  Inc. Common Stock\n      SUI,"Sun Communities, Inc. Common Stock"\n      SUI$A,"Sun Communities, Inc. Preferred Series A"\n      SUN,Sunoco LP Common Units representing limited partner interests\n      SUNE,"SunEdison, Inc. Common Stock"\n      SUP,"Superior Industries International, Inc. Common Stock"\n      SVM,Silvercorp Metals Inc Ordinary Shares (Canada)\n      SVU,SuperValu Inc. Common Stock\n      SWAY,Starwood Waypoint Residential Trust Common Stock\n      SWC,Stillwater Mining Company Common Stock ($0.01 Par Value)\n      SWFT,Swift Transportation Company Class A Common Stock\n      SWH,"Stanley Black & Decker, Inc. Corp Unit 2013"\n      SWI,"Solarwinds, Inc. Common Stock"\n      SWJ,"Stanley Black & Decker, Inc. 5.75% Junior Subordinated Debenture due 2052"\n      SWK,"Stanley Black & Decker, Inc. Common Stock"\n      SWM,Schweitzer\n      SWN,Southwestern Energy Company Common Stock\n      SWU,"Stanley Black & Decker, Inc Corporate Units"\n      SWX,Southwest Gas Corporation Common Stock\n      SWY,Safeway Inc. Common Stock\n      SWZ,"Swiss Helvetia Fund, Inc. (The) Common Stock"\n      SXC,"SunCoke Energy, Inc. Common Stock"\n      SXCP,"SunCoke Energy Partners, L.P. Common Units Representing Limited partner Interests"\n      SXE,"Southcross Energy Partners, L.P. Common Units representing limited partner interest in the Partnership"\n      SXI,Standex International Corporation Common Stock\n      SXL,Sunoco Logistics Partners LP Common Units representing limited partner interests\n      SXT,Sensient Technologies Corporation Common Stock\n      SYA,Symetra Financial Corporation Common Stock $0.01 par value\n      SYF,Synchrony Financial Common Stock\n      SYK,Stryker Corporation Common Stock\n      SYT,Syngenta AG Common Stock\n      SYX,Systemax Inc. Common Stock\n      SYY,Sysco Corporation Common Stock\n      SZC,Cushing Renaissance Fund (The) Common Shares of Beneficial Interest\n      T,AT&T Inc.\n      TA,TravelCenters of America LLC Common Stock\n      TAC,TransAlta Corporation Ordinary Shares\n      TAHO,"Tahoe Resources, Inc. Ordinary Shares (Canada)"\n      TAI,"Transamerica Income Shares, Inc. Common Stock"\n      TAL,"TAL International Group, Inc. Common Stock"\n      TANN,TravelCenters of America LLC 8.25% Senior Notes due 2028\n      TANO,TravelCenters of America LLC 8.00% Senior Notes due 2029\n      TAOM,Taomee Holdings Limited American Depositary Shares (each representing 20 ordinary shares)\n      TAP,Molson Coors Brewing Company Class B Common Stock\n      TAP.A,Molson Coors Brewing  Company Molson Coors Brewing Company Class A Common Stock\n      TARO,Taro Pharmaceutical Industries Ltd. Ordinary Shares\n      TBI,"TrueBlue, Inc. Common Stock"\n      TC,Thompson Creek Metals Company Inc. Ordinary Shares (Canada)\n      TCAP,Triangle Capital Corporation Common Stock\n      TCB,TCF Financial Corporation Common Stock\n      TCB$B,TCF Financial Corporation Del Dep Shs Repstg 1/1000 Pfd Ser A\n      TCB$C,TCF Financial Corporation Perp Pfd Ser B\n      TCB.W,TCF Financial Corporation TCF Financial Corporation Warrants\n      TCC,Triangle Capital Corporation 7.00% Senior Notes due 2019\n      TCCA,Triangle Capital Corporation 6.375% Senior Notes due 2022\n      TCI,"Transcontinental Realty Investors, Inc. Common Stock"\n      TCK,Teck Resources Ltd Ordinary Shares\n      TCO,"Taubman Centers, Inc. Common Stock"\n      TCO$J,"Taubman Centers, Inc. Preferred Shares Series J"\n      TCO$K,"Taubman Centers, Inc. Preferred Series K"\n      TCP,"TC PipeLines, LP Common Units representing Limited Partner Interests"\n      TCPI,TCP International Holdings Ltd. Common Shares\n      TCRX,"THL Credit, Inc. 6.75% Notes due 2021"\n      TCS,Container Store (The) Common Stock\n      TD,Toronto Dominion Bank (The) Common Stock\n      TDA,"Telephone and Data Systems, Inc. 5.875% Senior Notes due 2061"\n      TDC,Teradata Corporation Common Stock\n      TDE,"Telephone and Data Systems, Inc. 6.875% Senior Notes due 2059"\n      TDF,"Templeton Dragon Fund, Inc. Common Stock"\n      TDG,Transdigm Group Incorporated Transdigm Group Inc. Common Stock\n      TDI,"Telephone and Data Systems, Inc. Sr Nt"\n      TDJ,"Telephone and Data Systems, Inc. 7% Senior Notes due 2060"\n      TDS,"Telephone and Data Systems, Inc. Common Shares"\n      TDW,Tidewater Inc. Common Stock\n      TDY,Teledyne Technologies Incorporated Common Stock\n      TE,"TECO Energy, Inc. Common Stock"\n      TEF,Telefonica SA Common Stock\n      TEG,"Integrys Energy Group, Inc. Common Stock"\n      TEI,"Templeton Emerging Markets Income Fund, Inc. Common Stock"\n      TEL,TE Connectivity Ltd. New Switzerland Registered Shares\n      TEN,Tenneco Inc. Common Stock\n      TEO,Telecom Argentina SA\n      TEP,"Tallgrass Energy Partners, LP Common Units representing limited partner interests"\n      TER,"Teradyne, Inc. Common Stock"\n      TEU,Box Ships Inc. Common Shares\n      TEU$C,Box Ships Inc. 9.00% Series C Cumulative Perpetual Preferred Stock\n      TEVA,Teva Pharmaceutical Industries Limited American Depositary Shares\n      TEX,Terex Corporation Common Stock\n      TFG,"Fixed Income Trust for Goldman Sachs Subordinated Notes, Series 2011"\n      TFX,Teleflex Incorporated Common Stock\n      TG,Tredegar Corporation Common Stock\n      TGH,Textainer Group Holdings Limited Common Shares\n      TGI,"Triumph Group, Inc. Common Stock"\n      TGP,Teekay LNG Partners L.P.\n      TGS,Transportadora de Gas del Sur SA TGS Common Stock\n      TGT,Target Corporation Common Stock\n      THC,Tenet Healthcare Corporation Common Stock\n      THG,Hanover Insurance Group Inc\n      THGA,"The Hanover Insurance Group, Inc. 6.35% Subordinated Debentures due 2053"\n      THO,"Thor Industries, Inc. Common Stock"\n      THQ,Tekla Healthcare Opportunies Fund Shares of Beneficial Interest\n      THR,"Thermon Group Holdings, Inc. Common Stock"\n      THS,"Treehouse Foods, Inc. Common Stock"\n      TI,Telecom Italia S.P.A. New\n      TI.A,Telecom Italia S.P.A. New\n      TIF,Tiffany & Co. Common Stock\n      TIME,Time Inc. Common Stock\n      TISI,"Team, Inc. Common Stock"\n      TJX,"TJX Companies, Inc. (The) Common Stock"\n      TK,Teekay Corporation Common Stock\n      TKC,Turkcell Iletisim Hizmetleri AS Common Stock\n      TKF,"Turkish Investment Fund, Inc. (The) Common Stock"\n      TKR,Timken Company (The) Common Stock\n      TLI,LMP Corporate Loan Fund Inc Common Stock\n      TLK,"PT Telekomunikasi Indonesia, Tbk"\n      TLLP,Tesoro Logistics LP Common Units representing Limited Partner Interests\n      TLM,Talisman Energy Inc. Common Stock\n      TLP,Transmontaigne Partners L.P. Transmontaigne Partners L.P. Common Units representing limited partner interests\n      TLYS,"Tilly\'s, Inc. Common Stock"\n      TM,Toyota Motor Corporation Common Stock\n      TMH,"Team Health Holdings, Inc. Team Health Holdings, Inc."\n      TMHC,Taylor Morrison Home Corporation Class A Common Stock\n      TMK,Torchmark Corporation Common Stock\n      TMK$B,Torchmark Corporation 5.875% Junior Subordinated Debenture due 2052\n      TMO,Thermo Fisher Scientific Inc Common Stock\n      TMST,Timken Steel Corporation Common Shares\n      TMUS,T\n      TMUS$A,T\n      TNC,Tennant Company Common Stock\n      TNET,"TriNet Group, Inc. Common Stock"\n      TNH,"Terra Nitrogen Company, L.P. Common Units"\n      TNK,Teekay Tankers Ltd.\n      TNP,Tsakos Energy Navigation Ltd Common Shares\n      TNP$B,Tsakos Energy Navigation Ltd Red Perp Pfd Ser B% (Bermuda)\n      TNP$C,Tsakos Energy Navigation Ltd 8.875% Series C Preferred Cumulative Redeemable Perpetual Preferred Shares\n      TOL,Toll Brothers Inc. Common Stock\n      TOO,Teekay Offshore Partners L.P. Common Units representing Limited Partner Interests\n      TOO$A,Teekay Offshore Partners L.P. 7.25% Series A Redeemable Preferred Units\n      TOT,Total S.A.\n      TOWR,"Tower International, Inc. Common stock"\n      TPC,Tutor Perini Corporation Common Stock\n      TPH,"Tri Pointe Homes, Inc. Common Stock"\n      TPL,Texas Pacific Land Trust Common Stock\n      TPRE,Third Point Reinsurance Ltd. Common Shares\n      TPUB,Tribune Publishing Company Common Stock\n      TPVG,TriplePoint Venture Growth BDC Corp. Common Stock\n      TPX,"Tempur Sealy International, Inc. Common Stock"\n      TPZ,"Tortoise Power and Energy Infrastructure Fund, Inc Common Stock"\n      TR,"Tootsie Roll Industries, Inc. Common Stock"\n      TRC,Tejon Ranch Co Common Stock\n      TRCO,Tribune Media Company Class A Common Stock\n      TREC,Trecora Resources Common Stock\n      TREX,"Trex Company, Inc. Common Stock"\n      TRF,"Templeton Russia and East European Fund, Inc. Common Stock"\n      TRGP,"Targa Resources, Inc. Common Stock"\n      TRI,Thomson Reuters Corp Ordinary Shares\n      TRK,"Speedway Motorsports, Inc. Common Stock"\n      TRLA,"Trulia, Inc. Common Stock"\n      TRMR,"Tremor Video, Inc. Common Stock"\n      TRN,"Trinity Industries, Inc. Common Stock"\n      TRNO,Terreno Realty Corporation Common Stock\n      TRNO$A,Terreno Realty Corporation Preferred Shares Series A\n      TROX,Tronox Limited Ordinary Shares Class A $0.01 par\n      TRP,TransCanada Corporation Common Stock\n      TRQ,Turquoise Hill Resources Ltd. Ordinary Shares\n      TRR,"TRC Companies, Inc. Common Stock"\n      TRUP,"Trupanion, Inc. Common Stock"\n      TRV,"The Travelers Companies, Inc. Common Stock"\n      TRW,TRW Automotive Holdings Corporation Common Stock\n      TS,Tenaris S.A. American Depositary Shares\n      TSE,Trinseo S.A. Ordinary Shares\n      TSI,"TCW Strategic Income Fund, Inc. Common Stock"\n      TSL,Trina Solar Limited Sponsored ADR (Cayman Islands)\n      TSLF,THL Credit Senior Loan Fund Common Shares of Beneficial Interest\n      TSLX,"TPG Specialty Lending, Inc. Common Stock"\n      TSM,Taiwan Semiconductor Manufacturing Company Ltd.\n      TSN,"Tyson Foods, Inc. Common Stock"\n      TSNU,"Tyson Foods, Inc. Tangible Equity Unit 1 Prepaid Stock Purchase Contact & 1 Sr (Amortorizing NT)"\n      TSO,Tesoro Corporation Common Stock\n      TSQ,"Townsquare Media, Inc. Class A Common Stock"\n      TSS,"Total System Services, Inc. Common Stock"\n      TSU,TIM Participacoes S.A. American Depositary Shares (Each representing 5 Common Shares)\n      TTC,Toro Company (The) Common Stock\n      TTF,"Thai Fund, Inc. (The) Common Stock"\n      TTI,"Tetra Technologies, Inc. Common Stock"\n      TTM,Tata Motors Ltd Tata Motors Limited\n      TTP,"Tortoise Pipeline & Energy Fund, Inc. Common Stock"\n      TU,Telus Corporation Ordinary Shares\n      TUMI,"Tumi Holdings, Inc. Common Stock"\n      TUP,Tupperware Brands Corporation Common Stock\n      TV,Grupo Televisa S.A. Common Stock\n      TVC,Tennessee Valley Authority Common Stock\n      TVE,Tennessee Valley Authority\n      TVPT,Travelport Worldwide Limited Common Shares\n      TW,Towers Watson & Co Common Stock Class A\n      TWC,Time Warner Cable Inc Common Stock\n      TWI,"Titan International, Inc. Common Stock"\n      TWN,"Taiwan Fund, Inc. (The) Common Stock"\n      TWO,Two Harbors Investment Corp\n      TWTR,"Twitter, Inc. Common Stock"\n      TWX,Time Warner Inc. New Common Stock\n      TX,"Ternium S.A. Ternium S.A. American Depositary Shares (each representing ten shares, USD1.00 par value)"\n      TXT,Textron Inc. Common Stock\n      TXTR,Textura Corporation Common Stock\n      TY,Tri Continental Corporation Common Stock\n      TY$,Tri Continental Corporation Preferred Stock\n      TYC,Tyco International plc (Ireland) Ordinary Share\n      TYG,Tortoise Energy Infrastructure Corporation Common Stock\n      TYG$B,Tortoise Energy Infrastructure Corporation Mandatory Red Pfd Ser B\n      TYG$C,Tortoise Energy Infrastructure Corporation Series C Mandatory Redeemable Preferred Shares\n      TYL,"Tyler Technologies, Inc. Common Stock"\n      TZF,"Bear Stearns Depositor, Inc. Pfd Stk TRUCs Srs 2001"\n      UA,"Under Armour, Inc. Class A Common Stock"\n      UAL,United Continental Holdings\n      UAM,Universal American Corporation New Common Stock\n      UAN,"CVR Partners, LP Common Units representing Limited Partner Interests"\n      UBA,Urstadt Biddle Properties Inc. Common Stock\n      UBP,Urstadt Biddle Properties Inc. Common Stock\n      UBP$F,Urstadt Biddle Properties Inc. Pfd Ser F\n      UBP$G,Urstadt Biddle Properties Inc. Preferred Stock Series G 6.75%\n      UBS,UBS Group AG Registered Ordinary Shares\n      UBS$D,UBS AG Trust Preferred Securities\n      UCP,"UCP, Inc. Class A Common Stock"\n      UDR,"UDR, Inc. Common Stock"\n      UE.V,Urban Edge Properties Common Shares of Beneficial Interest When Issued\n      UFI,"Unifi, Inc. New Common Stock"\n      UFS,Domtar Corporation (NEW) Common Stock\n      UGI,UGI Corporation Common Stock\n      UGP,Ultrapar Participacoes S.A. (New) American Depositary Shares (Each representing one Common Share)\n      UHS,"Universal Health Services, Inc. Common Stock"\n      UHT,Universal Health Realty Income Trust Common Stock\n      UIL,UIL Holdings Corporation Common Stock\n      UIS,Unisys Corporation New Common Stock\n      UL,Unilever PLC Common Stock\n      UMC,United Microelectronics Corporation (NEW) Common Stock\n      UMH,"UMH Properties, Inc. Common Stock"\n      UMH$A,"UMH Properties, Inc. 8.25% Series A Cumulative Redeemable Preferred Stock, Liquidation Preference $25 per share"\n      UN,Unilever NV Common Stock\n      UNF,Unifirst Corporation Common Stock\n      UNH,UnitedHealth Group Incorporated Common Stock\n      UNM,Unum Group Common Stock\n      UNP,Union Pacific Corporation Common Stock\n      UNT,Unit Corporation Common Stock\n      UPL,Ultra Petroleum Corp. Common Stock\n      UPS,"United Parcel Service, Inc. Common Stock"\n      URI,"United Rentals, Inc. Common Stock"\n      USA,Liberty All\n      USAC,"USA Compression Partners, LP Common Units Representing Limited Partner Interests"\n      USB,U.S. Bancorp Common Stock\n      USB$A,"U.S. Bancorp Depositary Shares, Each representing a 1/100th interest in a share of Series A Non"\n      USB$H,U.S. Bancorp Depositary Shares repstg 1/1000th Pfd Ser B\n      USB$M,U.S. Bancorp Depositary Shares Representing 1/1000th Interest in a Shares Series F\n      USB$N,US Bancorp Del DEPOSITARY SH S G\n      USB$O,US Bancorp Del Dep Shs Repstg 1/1000th Perp Pfd Ser H\n      USDP,USD Partners LP Common Units representing limited partner interest\n      USG,USG Corporation Common Stock\n      USM,United States Cellular Corporation Common Stock\n      USNA,"USANA Health Sciences, Inc. Common Stock"\n      USPH,"U.S. Physical Therapy, Inc. Common Stock"\n      UTF,"Cohen & Steers Infrastructure Fund, Inc Common Stock"\n      UTI,Universal Technical Institute Inc Common Stock\n      UTL,UNITIL Corporation Common Stock\n      UTX,United Technologies Corporation Common Stock\n      UTX$A,United Technologies Corp Corp Unit\n      UVE,UNIVERSAL INSURANCE HOLDINGS INC Common Stock\n      UVV,Universal Corporation Common Stock\n      UZA,United States Cellular Corporation 6.95% Senior Notes due 2060\n      UZB,United States Cellular Corporation 7.25% Senior Notes due 2063\n      V,Visa Inc.\n      VAC,Marriot Vacations Worldwide Corporation Common Stock\n      VAL,Valspar Corporation (The) Common Stock\n      VALE,VALE S.A.  American Depositary Shares Each Representing one common share\n      VALE.P,VALE S.A.\n      VAR,"Varian Medical Systems, Inc. Common Stock"\n      VBF,Invesco Bond Fund Common Stock\n      VC,Visteon Corporation Common Stock\n      VCO,Vina Concha Y Toro Common Stock\n      VCRA,"Vocera Communications, Inc. Common Stock"\n      VCV,Invesco California Value Municipal Income Trust Common Stock\n      VEC,"Vectrus, Inc. Common Stock"\n      VEEV,Veeva Systems Inc. Class A Common Stock\n      VET,Vermilion Energy Inc. Common (Canada)\n      VFC,V.F. Corporation Common Stock\n      VG,Vonage Holdings Corp. Common Stock\n      VGI,Virtus Global Multi\n      VGM,Invesco Trust for Investment Grade Municipals Common Stock (DE)\n      VGR,Vector Group Ltd. Common Stock\n      VHI,"Valhi, Inc. Common Stock"\n      VIPS,"Vipshop Holdings Limited American Depositary Shares, each representing two ordinary shares"\n      VIV,"Telefonica Brasil, S.A. ADS"\n      VJET,"voxeljet AG American Depositary Shares, each representing one"\n      VKQ,Invesco Municipal Trust Common Stock\n      VLO,Valero Energy Corporation Common Stock\n      VLP,Valero Energy Partners LP Common Units representing limited partner interests\n      VLRS,"Controladora Vuela Compania de Aviacion, S.A.B. de C.V. American Depositary Shares, each representing ten (10) Ordinary Participation Certificates"\n      VLT,Invesco High Income Trust II\n      VLY,Valley National Bancorp Common Stock\n      VLY.W,Valley National Bancorp Warrants Expiring 11/14/2018\n      VMC,Vulcan Materials Company (Holding Company) Common Stock\n      VMEM,"Violin Memory, Inc. Common Stock"\n      VMI,"Valmont Industries, Inc. Common Stock"\n      VMO,Invesco Municipal Opportunity Trust Common Stock\n      VMW,"Vmware, Inc. Common stock, Class A"\n      VNCE,Vince Holding Corp. Common Stock\n      VNO,Vornado Realty Trust Common Stock\n      VNO$G,Vornado Realty Trust Preferred Series G\n      VNO$I,Vornado Realty Trust Preferred Series I\n      VNO$J,Vornado Realty Trust PFD CUMULATIVE RED SER J %\n      VNO$K,Vornado Realty Trust Pfd S K\n      VNO$L,Vornado Realty TrListingUtils; Inc. Common Stock"\n      VSI,"Vitamin Shoppe, Inc Common Stock"\n      VSLR,"Vivint Solar, Inc. Common Stock"\n      VTA,Invesco Credit Opportunities Fund Common Shares of Beneficial Interest\n      VTN,Invesco Trust for Investment Grade New York Municipals Common Stock\n      VTR,"Ventas, Inc. Common Stock"\n      VTRB,"Ventas Realty, Limited Partnership // Ventas Capital Corporation 5.45% Senior Notes due 2043"\n      VTTI,VTTI Energy Partners LP Common Units representing limited partner interests\n      VVC,Vectren Corporation Common Stock\n      VVI,Viad Corp Common Stock\n      VVR,Invesco Senior Income Trust Common Stock (DE)\n      VZ,Verizon Communications Inc. Common Stock\n      VZA,Verizon Communications Inc. 5.90% Notes due 2054\n      W,Wayfair Inc. Class A Common Stock\n      WAB,Westinghouse Air Brake Technologies Corporation Common Stock\n      WAC,Walter Investment Management Corp. Common Stock\n      WAGE,"WageWorks, Inc. Common Stock $0.001 par value"\n      WAIR,"Wesco Aircraft Holdings, Inc. Common Stock"\n      WAL,Western Alliance Bancorporation Common Stock (DE)\n      WAT,Waters Corporation Common Stock\n      WBAI,"500.com Limited American Depositary Shares, each representing 10 Class A shares"\n      WBC,Wabco Holdings Inc. Common Stock\n      WBK,Westpac Banking Corporation Common Stock\n      WBS,Webster Financial Corporation Common Stock\n      WBS$E,Webster Financial Corporation Dep Shs Repstg 1/1000th Perp Pfd Ser E\n      WBS.W,"Webster Financial Corporation Warrant (expiring November 21, 2018)"\n      WCC,"WESCO International, Inc. Common Stock"\n      WCG,"Wellcare Health Plans, Inc. Common Stock"\n      WCIC,"WCI Communities, Inc. Common Stock"\n      WCN,"Waste Connections, Inc. Common Stock"\n      WD,"Walker & Dunlop, Inc Common Stock"\n      WDAY,"Workday, Inc. Common Stock"\n      WDR,"Waddell & Reed Financial, Inc. Common Stock"\n      WEA,Western Asset Bond Fund Share of Beneficial Interest\n      WEC,Wisconsin Energy Corporation Common Stock\n      WES,"Western Gas Partners, LP Limited Partner Interests"\n      WEX,WEX Inc. common stock\n      WF,Woori Bank American Depositary Shares (Each representing 3 shares of Common Stock)\n      WFC,Wells Fargo & Company Common Stock\n      WFC$J,Wells Fargo & Company Wells Fargo & Company 8.00% Non\n      WFC$L,Wells Fargo & Company Wells Fargo & Company 7.50% Non\n      WFC$N,Wells Fargo & Company Dep Shs Repstg 1/1000th Perp Pfd Cl A Ser N\n      WFC$O,Wells Fargo & Company Depositary Shares Representing 1/1000th Perpetual Preferred Class A Series O\n      WFC$P,Wells Fargo & Company Dep Shs Repstg 1/1000th Int Non Cum Perp Cl A Pfd (Ser P)\n      WFC$Q,Wells Fargo & Company Depositary Shares Representing 1/1000th Interest Perpetual Preferred Class A Series Q Fixed to Floating\n      WFC$R,Wells Fargo & Company Dep Shs Repstg 1/1000th Int Perp Pfd Cl A (Ser R Fixed To Flltg)\n      WFC$T,Wells Fargo & Company New Depository Share Representing 1/1000th Perp. Preferred Class A Series T\n      WFC.W,"Wells Fargo & Company Warrants expiring October 28, 2018"\n      WFE$A,"Wells Fargo & Company Cumulative Perpetual Preferred Stock, Series A, Liquidation Preference $25 per share"\n      WFT,Weatherford International plc (Ireland)\n      WG,"Willbros Group, Inc. (DE) Common Stock"\n      WGL,WGL Holdings IncCommon Stock\n      WGO,"Winnebago Industries, Inc. Common Stock"\n      WGP,"Western Gas Equity Partners, LP Common Units Representing Limited Partner Interests"\n      WHG,Westwood Holdings Group Inc Common Stock\n      WHR,Whirlpool Corporation Common Stock\n      WHX,Whiting USA Trust I Whiting USA Trust I\n      WHZ,Whiting USA Trust II Units of Beneficial Interest\n      WIA,Western Asset/Claymore Inflation\n      WIT,Wipro Limited Common Stock\n      WIW,Western Asset/Claymore Inflation\n      WK,Workiva Inc. Class A Common Stock\n      WLH,Lyon William Homes Common Stock (Class A)\n      WLK,Westlake Chemical Corporation Common Stock\n      WLKP,Westlake Chemical Partners LP Common Units representing limited partner interests\n      WLL,Whiting Petroleum Corporation Common Stock\n      WLT,"Walter Energy, Inc. Common Stock"\n      WM,"Waste Management, Inc. Common Stock"\n      WMB,"Williams Companies, Inc. (The) Common Stock"\n      WMC,Western Asset Mortgage Capital Corporation Common Stock\n      WMK,"Weis Markets, Inc. Common Stock"\n      WMLP,"Westmoreland Resource Partners, LP Common Units representing Limited Partner Interests"\n      WMS,"Advanced Drainage Systems, Inc. Common Stock"\n      WMT,Wal\n      WNC,Wabash National Corporation Common Stock\n      WNR,"Western Refining Inc. Western Refining, Inc. Common Stock"\n      WNRL,"Western Refining Logistics, LP Common Units representing limited partner interests"\n      WNS,WNS (Holdings) Limited Sponsored ADR (Jersey)\n      WOR,"Worthington Industries, Inc. Common Stock"\n      WPC,W.P. Carey Inc. REIT\n      WPG,Washington Prime Group Inc. Common Stock\n      WPP,Wausau Paper Corp. Common Stock\n      WPT,"World Point Terminals, LP Common Units representing Limited Partner Interests"\n      WPX,"WPX Energy, Inc. Common Stock"\n      WPZ,Williams Partners L.P. Common Units\n      WR,"Westar Energy, Inc. Common Stock"\n      WRB,W.R. Berkley Corporation Common Stock\n      WRB$B,W.R. Berkley Corporation 5.625% Subordinated Debentures due 2053\n      WRE,Washington Real Estate Investment Trust Common Stock\n      WRI,Weingarten Realty Investors Common Stock\n      WRI$F,Weingarten Realty Investors Depository Shares Restg 1/100 Pfd Ser F\n      WRT,Winthrop Realty Trust 7.75% Senior Notes due 2022\n      WSH,Willis Group Holdings Public Limited (Ireland) Common Stock\n      WSM,Williams\n      WSO,"Watsco, Inc. Common Stock"\n      WSO.B,"Watsco, Inc. Class B Common Stock"\n      WSR,Whitestone REIT Common Shares\n      WST,"West Pharmaceutical Services, Inc. Common Stock"\n      WTI,"W&T Offshore, Inc. Common Stock"\n      WTM,"White Mountains Insurance Group, Ltd. Common Stock"\n      WTR,"Aqua America, Inc. Common Stock"\n      WTS,"Watts Water Technologies, Inc. Class A Common Stock"\n      WTW,Weight Watchers International Inc Weight Watchers International Inc\n      WU,Western Union Company (The) Common Stock\n      WUBA,"58.com Inc. American Depositary Shares, each representing 2 Class A Ordinary Shares"\n      WWAV,Whitewave Foods Company (The) Common Stock\n      WWE,"World Wrestling Entertainment, Inc. Class A Common Stock"\n      WWW,"Wolverine World Wide, Inc. Common Stock"\n      WX,WuXi PharmaTech (Cayman) Inc. American Depositary Shares\n      WY,Weyerhaeuser Company Common Stock\n      WY$A,Weyerhaeuser Company Pref Conv Ser A\n      WYN,Wyndham Worldwide Corp Common  Stock\n      X,United States Steel Corporation Common Stock\n      XCO,"EXCO Resources, Inc. Exco Resources, Inc. Common Stock"\n      XEC,Cimarex Energy Co Common Stock\n      XEL,Xcel Energy Inc. Common Stock\n      XIN,Xinyuan Real Estate Co Ltd American Depositary Shares\n      XKE,Lehman ABS Corporation Corporate\n      XL,XL Group plc\n      XLS,Exelis Inc. Common Stock New\n      XNY,"China Xiniya Fashion Limited American Depositary Shares, each representing four ordinary shares"\n      XOM,Exxon Mobil Corporation Common Stock\n      XON,Intrexon Corporation Common Stock\n      XOXO,"XO Group, Inc. Common Stock"\n      XPO,"XPO Logistics, Inc."\n      XRM,"Xerium Technologies, Inc. New Common Stock"\n      XRS,"TAL Education Group American Depositary Shares, each representing 2 Class A common shares"\n      XRX,Xerox Corporation Common Stock\n      XUE,"Xueda Education Group American Depositary Shares, each representing two Ordinary Shares, $0.0001 par value"\n      XYL,Xylem Inc. Common Stock New\n      Y,Alleghany Corporation Common Stock\n      YDKN,Yadkin Financial Corporation Common Stock\n      YELP,Yelp Inc. Class A Common Stock\n      YGE,Yingli Green Energy Holding Company Limited ADR\n      YOKU,"Youku Tudou Inc. American Depositary Shares, each representing 18 Class A ordinary shares."\n      YPF,YPF Sociedad Anonima Common Stock\n      YUM,"Yum! Brands, Inc."\n      YUME,"YuMe, Inc. Common Stock"\n      YZC,Yanzhou Coal Mining Company Limited Common Stock\n      ZA,Zuoan Fashion Limited American Depositary Shares\n      ZAYO,"Zayo Group Holdings, Inc. Common Stock"\n      ZB$A,Zions Bancorporation Depositary Shares (Each representing 1/40th Interest in a Share of Series A Floating\n      ZB$F,Zions Bancorporation Dep shs Repstg 1/40th Int Sh Ser F Fxd Rate Non Cum (Perp Pfd Stk)\n      ZB$G,Zions Bancorporation Dep Shs Repstg 1/40th Perp Pfd Ser G\n      ZB$H,Zions Bancorporation Dep Shs Repstg 1/40th Int Sh Ser H Perp Pfd Stk\n      ZBK,Zions Bancorporation 6.95% Fixed\n      ZEN,"Zendesk, Inc. Common Stock"\n      ZEP,Zep Inc. Common Stock\n      ZF,"Zweig Fund, Inc. (The) Common Stock"\n      ZFC,ZAIS Financial Corp. Common Stock\n      ZMH,"Zimmer Holdings, Inc. Common Stock"\n      ZNH,China Southern Airlines Company Limited Common Stock\n      ZOES,"Zoe\'s Kitchen, Inc. Common Stock"\n      ZPIN,"Zhaopin Limited American Depositary Shares, each reprenting two Ordinary Shares"\n      ZQK,"Quiksilver, Inc. Common Stock"\n      ZTR,"Zweig Total Return Fund, Inc. (The) Common Stock"\n      ZTS,Zoetis Inc. Class A Common Stock\n      ZX,"China Zenix Auto International Limited American Depositary Shares, each representing four ordinary shares."'.split("\n").forEach(e=>{let n=e.split(",");t.push({symbol:n[0].trim(),companyName:n[1]})}),t}}class px{}class mx{}class fx{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof fx?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new fx;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof fx?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;0===(t=t.filter(t=>-1===r.indexOf(t))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class gx{encodeKey(t){return yx(t)}encodeValue(t){return yx(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function yx(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class bx{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new gx,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const i=t.indexOf("="),[r,o]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],s=n.get(r)||[];s.push(o),n.set(r,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new bx({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function vx(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Cx(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Sx(t){return"undefined"!=typeof FormData&&t instanceof FormData}class xx{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new fx),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new bx,this.urlWithParams=e}serializeBody(){return null===this.body?null:vx(this.body)||Cx(this.body)||Sx(this.body)||"string"==typeof this.body?this.body:this.body instanceof bx?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:Sx(this.body)?null:Cx(this.body)?this.body.type||null:vx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bx?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new xx(e,n,r,{params:l,headers:a,reportProgress:s,responseType:i,withCredentials:o})}}const _x=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class kx{constructor(t,e=200,n="OK"){this.headers=t.headers||new fx,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class wx extends kx{constructor(t={}){super(t),this.type=_x.ResponseHeader}clone(t={}){return new wx({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Tx extends kx{constructor(t={}){super(t),this.type=_x.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Tx({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ix extends kx{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Ax(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}class Px{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof xx)i=t;else{let r=void 0;r=n.headers instanceof fx?n.headers:new fx(n.headers);let o=void 0;n.params&&(o=n.params instanceof bx?n.params:new bx({fromObject:n.params})),i=new xx(t,e,void 0!==n.body?n.body:null,{headers:r,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=gl(i).pipe(sh(t=>this.handler.handle(t)));if(t instanceof xx||"events"===n.observe)return r;const o=r.pipe(Tl(t=>t instanceof Tx));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return o.pipe(G(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(G(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(G(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(G(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new bx).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Ax(n,e))}post(t,e,n={}){return this.request("POST",t,Ax(n,e))}put(t,e,n={}){return this.request("PUT",t,Ax(n,e))}}class Mx{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ex=new It("HTTP_INTERCEPTORS");class Dx{intercept(t,e){return e.handle(t)}}const Fx=/^\)\]\}',?\n/;class Lx{}class Rx{constructor(){}build(){return new XMLHttpRequest}}class Bx{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new S(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const i=t.serializeBody();let r=null;const o=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,i=n.statusText||"OK",o=new fx(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new wx({headers:o,status:e,statusText:i,url:s})},s=()=>{let{headers:i,status:r,statusText:s,url:a}=o(),l=null;204!==r&&(l=void 0===n.response?n.responseText:n.response),0===r&&(r=l?200:0);let h=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(Fx,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,h&&(h=!1,l={error:c,text:l})}}h?(e.next(new Tx({body:l,headers:i,status:r,statusText:s,url:a||void 0})),e.complete()):e.error(new Ix({error:l,headers:i,status:r,statusText:s,url:a||void 0}))},a=t=>{const{url:i}=o(),r=new Ix({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});e.error(r)};let l=!1;const h=i=>{l||(e.next(o()),l=!0);let r={type:_x.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===t.responseType&&n.responseText&&(r.partialText=n.responseText),e.next(r)},c=t=>{let n={type:_x.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",h),null!==i&&n.upload&&n.upload.addEventListener("progress",c)),n.send(i),e.next({type:_x.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",h),null!==i&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}const Nx=new It("XSRF_COOKIE_NAME"),Ox=new It("XSRF_HEADER_NAME");class Vx{}class Wx{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ha(t,this.cookieName),this.lastCookieString=t),this.lastToken}}class Hx{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}class Gx{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ex,[]);this.chain=t.reduceRight((t,e)=>new Mx(t,e),this.backend)}return this.chain.handle(t)}}class zx{static disable(){return{ngModule:zx,providers:[{provide:Hx,useClass:Dx}]}}static withOptions(t={}){return{ngModule:zx,providers:[t.cookieName?{provide:Nx,useValue:t.cookieName}:[],t.headerName?{provide:Ox,useValue:t.headerName}:[]]}}}class Ux{}function Yx(t){return function(t){return new S(e=>({unsubscribe:t.onSnapshot(e)}))}(t).pipe(st())}function Xx(t){return Yx(t).pipe(G(t=>({payload:t,type:"query"})))}function qx(t){return Xx(t).pipe(G(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function jx(t,e){return Xx(t).pipe(G(t=>t.payload.docChanges()),ih((t,n)=>(function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t})(t,n,e),[]),G(t=>t.map(t=>({type:t.type,payload:t}))))}n("mrSG");class Kx{constructor(t,e){this.zone=t,this.platformId=e}schedule(...t){return this.zone.runGuarded((function(){return Cv.schedule.apply(Cv,t)}))}keepUnstableUntilFirst(t){return cl(this.platformId)?new S(e=>{const n=()=>{},i=Zone.current.scheduleMacroTask("firebaseZoneBlock",n,{},n,n);t.subscribe(t=>{"scheduled"===i.state&&i.invoke(),e.next(t)},t=>{"scheduled"===i.state&&i.invoke(),e.error(t)},()=>{"scheduled"===i.state&&i.invoke(),e.complete()})}):t}runOutsideAngular(t){return new S(e=>this.zone.runOutsideAngular(()=>t.subscribe(t=>this.zone.run(()=>e.next(t)),t=>this.zone.run(()=>e.error(t)),()=>this.zone.run(()=>e.complete()))))}}const $x=t=>e=>new S(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())));function Qx(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Jx{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(qx(this.query))).pipe(G(e=>e.filter(e=>t.indexOf(e.type)>-1)),Tl(t=>t.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(qx(this.query)))}auditTrail(t){return this.stateChanges(t).pipe(ih((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Qx(t),n=jx(this.query,e),i=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(i)}valueChanges(t={}){const e=Xx(this.query),n=this.afs.scheduler.runOutsideAngular(e);return this.afs.scheduler.keepUnstableUntilFirst(n).pipe(G(e=>e.payload.docs.map(e=>t.idField?Object.assign({},e.data(),{[t.idField]:e.id}):e.data())))}get(t){return X(this.query.get(t)).pipe($x(this.afs.scheduler.zone))}add(t){return this.ref.add(t)}doc(t){return new Zx(this.ref.doc(t),this.afs)}}class Zx{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:i,query:r}=m_(n,e);return new Jx(i,r,this.afs)}snapshotChanges(){const t=Yx(this.ref).pipe(G(t=>({payload:t,type:"value"}))),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e)}valueChanges(){return this.snapshotChanges().pipe(G(t=>t.payload.data()))}get(t){return X(this.ref.get(t)).pipe($x(this.afs.scheduler.zone))}}class t_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(qx(this.query))).pipe(G(e=>e.filter(e=>t.indexOf(e.type)>-1)),Tl(t=>t.length>0)):this.afs.scheduler.keepUnstableUntilFirst(this.afs.scheduler.runOutsideAngular(qx(this.query)))}auditTrail(t){return this.stateChanges(t).pipe(ih((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Qx(t),n=jx(this.query,e),i=this.afs.scheduler.runOutsideAngular(n);return this.afs.scheduler.keepUnstableUntilFirst(i)}valueChanges(){const t=Xx(this.query),e=this.afs.scheduler.runOutsideAngular(t);return this.afs.scheduler.keepUnstableUntilFirst(e).pipe(G(t=>t.payload.docs.map(t=>t.data())))}get(t){return X(this.query.get(t)).pipe($x(this.afs.scheduler.zone))}}var e_,n_=n("Wcq6"),i_=n.n(n_);const r_=new It("angularfire2.app.options"),o_=new It("angularfire2.app.nameOrConfig");class s_{}function a_(t,e,n){const i="object"==typeof n&&n||{};return i.name=i.name||"string"==typeof n&&n||"[DEFAULT]",i_.a.apps.filter(t=>t&&t.name===i.name)[0]||e.runOutsideAngular(()=>i_.a.initializeApp(t,i))}let l_=e_=class{static initializeApp(t,e){return{ngModule:e_,providers:[{provide:r_,useValue:t},{provide:o_,useValue:e}]}}};const h_=new It("angularfire2.enableFirestorePersistence"),c_=new It("angularfire2.firestore.persistenceSettings"),u_=new It("angularfire2.firestore.settings"),d_=parseInt(i_.a.SDK_VERSION.split(".")[0]),p_=d_<5||5==d_&&parseInt(i_.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function m_(t,e=(t=>t)){return{query:e(t),ref:t}}let f_=class{constructor(t,e,n,i,r,o,s){this.scheduler=new Kx(o,r),this.firestore=o.runOutsideAngular(()=>{const n=a_(t,o,e).firestore();return n.settings(i||p_),n}),this.persistenceEnabled$=n&&!cl(r)?o.runOutsideAngular(()=>{try{return X(this.firestore.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(t){return gl(!1)}}):gl(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:i,query:r}=m_(n,e);return new Jx(i,r,this)}collectionGroup(t,e){if(d_<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=e||(t=>t),i=this.firestore.collectionGroup(t);return new t_(n(i),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new Zx(e,this)}createId(){return this.firestore.collection("_").doc().id}},g_=(()=>{class t{constructor(t){this.db=t}createStock(t){return this.db.collection("stocks").add(t)}createArticle(t){return this.db.collection("articles").add(t)}getStocks(){return this.db.collection("stocks").snapshotChanges()}getNews(){return this.db.collection("articles").snapshotChanges()}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(f_))},token:t,providedIn:"root"}),t})(),y_=(()=>{class t{constructor(t,e){this.http=t,this.fbs=e,this.stocks=[],this.daily={},this.stockData={},this.stockDaily=[],this.ids=[],this.fbStock={id:"",low:0,high:0,symbol:"",open:0,price:0,volume:0,changePercent:"",latestDay:"",prevClose:0,change:0,daily:[],weekly:[],monthly:[]},this.newStock={}}reqSymbol(t,e){return"https://www.alphavantage.co/query?function="+t+"&symbol="+e+"&apikey=0NCCP7Q9F1OD5W8E"}reqCompare(t,e,n){return"https://www.alphavantage.co/query?function="+t+"&from_symbol="+e+"&to_symbol="+n+"&apikey=0NCCP7Q9F1OD5W8E"}reqCurrency(t,e){return"https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency="+t+"&to_currency="+e+"&apikey=0NCCP7Q9F1OD5W8E"}reqCrypto(t,e,n){return"https://www.alphavantage.co/query?function="+t+"&symbol="+e+"&market="+n+"&apikey=0NCCP7Q9F1OD5W8E"}addStockToFirebase(t){this.http.get(this.reqSymbol("GLOBAL_QUOTE",t)).subscribe(e=>{this.newStock.symbol=e["Global Quote"][["01. symbol"]],this.newStock.open=e["Global Quote"][["02. open"]],this.newStock.high=e["Global Quote"][["03. high"]],this.newStock.low=e["Global Quote"][["04. low"]],this.newStock.price=e["Global Quote"][["05. price"]],this.newStock.volume=e["Global Quote"][["06. volume"]],this.newStock.latestDay=e["Global Quote"][["07. latest trading day"]],this.newStock.prevClose=e["Global Quote"][["08. previous close"]],this.newStock.change=e["Global Quote"][["09. change"]],this.newStock.changePercent=e["Global Quote"][["10. change percent"]],this.newStock.daily=[],this.fbStock=this.newStock,this.newStock={},this.http.get(this.reqSymbol("TIME_SERIES_DAILY",t)).subscribe(t=>{this.stockData=t["Time Series (Daily)"],Object.keys(this.stockData).forEach(t=>{this.ids.push(t)});let e=0;Object.values(this.stockData).forEach(t=>{this.daily.id=this.ids[e],this.daily.open=t["1. open"],this.daily.high=t["2. high"],this.daily.low=t["3. low"],this.daily.close=t["4. close"],this.daily.volume=t["5. volume"],this.fbStock.daily.push(this.daily),this.daily={},e++}),console.log(this.fbStock),this.fbs.createStock(this.fbStock),this.fbStock={id:"",low:0,high:0,symbol:"",open:0,price:0,volume:0,changePercent:"",latestDay:"",prevClose:0,change:0,daily:[],weekly:[],monthly:[]}})})}getStockDaily(t){this.http.get(this.reqSymbol("TIME_SERIES_DAILY",t)).subscribe(e=>{this.stockData=e["Time Series (Daily)"],Object.keys(this.stockData).forEach(t=>{this.ids.push(t)});let n=-1;this.stocks.forEach(e=>{e.symbol.toLowerCase()==t.toLowerCase()&&(n=this.stocks.indexOf(e))});let i=0;Object.values(this.stockData).forEach(t=>{this.daily.id=this.ids[i],this.daily.open=t["1. open"],this.daily.high=t["2. high"],this.daily.low=t["3. low"],this.daily.close=t["4. close"],this.daily.volume=t["5. volume"],this.stockDaily.push(this.daily),this.stocks[n].daily.push(this.daily),this.daily={},i++}),this.stockDaily=[],localStorage.setItem("stocks",JSON.stringify(this.stocks))})}getStockDailyAdjusted(t){this.http.get(this.reqSymbol("TIME_SERIES_DAILY_ADJUSTED",t)).subscribe(t=>{console.log(t)})}getStockWeekly(t){this.http.get(this.reqSymbol("TIME_SERIES_WEEKLY",t)).subscribe(t=>{console.log(t)})}getStockWeeklyAdjusted(t){this.http.get(this.reqSymbol("TIME_SERIES_WEEKLY_ADJUSTED",t)).subscribe(t=>{console.log(t)})}getStockMonthly(t){this.http.get(this.reqSymbol("TIME_SERIES_MONTHLY",t)).subscribe(t=>{console.log(t)})}getStockMonthlyAdjusted(t){this.http.get(this.reqSymbol("TIME_SERIES_MONTHLY_ADJUSTED",t)).subscribe(t=>{console.log(t)})}getStockQuote(t){this.http.get(this.reqSymbol("GLOBAL_QUOTE",t)).subscribe(t=>{this.newStock.symbol=t["Global Quote"][["01. symbol"]],this.newStock.open=t["Global Quote"][["02. open"]],this.newStock.high=t["Global Quote"][["03. high"]],this.newStock.low=t["Global Quote"][["04. low"]],this.newStock.price=t["Global Quote"][["05. price"]],this.newStock.volume=t["Global Quote"][["06. volume"]],this.newStock.latestDay=t["Global Quote"][["07. latest trading day"]],this.newStock.prevClose=t["Global Quote"][["08. previous close"]],this.newStock.change=t["Global Quote"][["09. change"]],this.newStock.changePercent=t["Global Quote"][["10. change percent"]],this.newStock.daily=[],this.stocks.push(this.newStock),this.newStock={}})}searchSymbol(t){this.http.get("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords="+t+"&apikey=0NCCP7Q9F1OD5W8E").subscribe(t=>{console.log(t)})}getSector(){this.http.get("https://www.alphavantage.co/query?function=SECTOR&apikey=0NCCP7Q9F1OD5W8E").subscribe(t=>{console.log(t)})}getCryptoDaily(t,e){this.http.get(this.reqCrypto("DIGITAL_CURRENCY_DAILY",t,e)).subscribe(t=>{console.log(t)})}getCryptoWeekly(t,e){this.http.get(this.reqCrypto("DIGITAL_CURRENCY_WEEKLY",t,e)).subscribe(t=>{console.log(t)})}getCryptoMonthly(t,e){this.http.get(this.reqCrypto("DIGITAL_CURRENCY_MONTHLY",t,e)).subscribe(t=>{console.log(t)})}getExchangeRate(t,e){this.http.get(this.reqCurrency(t,e)).subscribe(t=>{console.log(t)})}getForexDaily(t,e){this.http.get(this.reqCompare("FX_DAILY",t,e)).subscribe(t=>{console.log(t)})}getForexWeekly(t,e){this.http.get(this.reqCompare("FX_WEEKLY",t,e)).subscribe(t=>{console.log(t)})}getForexMonthly(t,e){this.http.get(this.reqCompare("FX_MONTHLY",t,e)).subscribe(t=>{console.log(t)})}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Px),Wt(g_))},token:t,providedIn:"root"}),t})(),b_=(()=>{class t{constructor(t){this.http=t,this.articles=[]}getTopHeadlines(){this.http.get("https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=0ddacba682974e2eb952e80e315bb170").subscribe(t=>{this.articles=t.articles,localStorage.setItem("articles",JSON.stringify(this.articles))})}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Px))},token:t,providedIn:"root"}),t})();var v_=ri({encapsulation:0,styles:[[""]],data:{}});function C_(t){return vs(0,[(t()(),rs(0,0,null,null,2,"a",[["class","mat-tab-link"],["mat-tab-link",""]],[[1,"aria-current",0],[1,"aria-disabled",0],[1,"tabIndex",0],[2,"mat-tab-disabled",null],[2,"mat-tab-label-active",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(r.activeLink=t.context.$implicit,i=!1!==r.show(t.context.$implicit)&&i),i}),null,null)),mr(1,147456,[[1,4]],0,Hf,[Nf,pn,go,Vp,[2,Km],[8,null],Pm,[2,Eb]],{active:[0,"active"]},null),(t()(),gs(2,null,[" "," "]))],(function(t,e){t(e,1,0,e.component.activeLink==e.context.$implicit)}),(function(t,e){t(e,0,0,er(e,1).active?"page":null,er(e,1).disabled,er(e,1).tabIndex,er(e,1).disabled,er(e,1).active),t(e,2,0,e.context.$implicit)}))}function S_(t){return vs(0,[(t()(),rs(0,0,null,null,2,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==er(t,1)._selectViaInteraction()&&i),"keydown"===e&&(i=!1!==er(t,1)._handleKeydown(n)&&i),i}),Ob,Bb)),mr(1,8568832,[[11,4]],0,lf,[pn,Fe,[2,af],[2,rf]],{value:[0,"value"]},null),(t()(),gs(2,0,[" ",": "," "]))],(function(t,e){t(e,1,0,e.context.$implicit.symbol)}),(function(t,e){t(e,0,0,er(e,1)._getTabIndex(),er(e,1).selected,er(e,1).multiple,er(e,1).active,er(e,1).id,er(e,1)._getAriaSelected(),er(e,1).disabled.toString(),er(e,1).disabled),t(e,2,0,e.context.$implicit.symbol,e.context.$implicit.companyName)}))}function x_(t){return vs(0,[(t()(),rs(0,0,null,null,11,"div",[],null,null,null,null,null)),(t()(),rs(1,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getStockDaily(r.typed)&&i),i}),jb,qb)),mr(2,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Stock Daily"])),(t()(),rs(4,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getStockWeekly(r.typed)&&i),i}),jb,qb)),mr(5,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Stock Weekly"])),(t()(),rs(7,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getStockMonthly(r.typed)&&i),i}),jb,qb)),mr(8,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Stock Monthly"])),(t()(),rs(10,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Jb,Qb)),mr(11,49152,null,0,Kb,[],null,null)],null,(function(t,e){t(e,1,0,er(e,2).disabled||null,"NoopAnimations"===er(e,2)._animationMode),t(e,4,0,er(e,5).disabled||null,"NoopAnimations"===er(e,5)._animationMode),t(e,7,0,er(e,8).disabled||null,"NoopAnimations"===er(e,8)._animationMode),t(e,10,0,er(e,11).vertical?"vertical":"horizontal",er(e,11).vertical,!er(e,11).vertical,er(e,11).inset)}))}function __(t){return vs(0,[(t()(),rs(0,0,null,null,11,"div",[],null,null,null,null,null)),(t()(),rs(1,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getCryptoDaily(r.typed,"CNY")&&i),i}),jb,qb)),mr(2,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Crypto Daily"])),(t()(),rs(4,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getCryptoWeekly(r.typed,"CNY")&&i),i}),jb,qb)),mr(5,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Crypto Weekly"])),(t()(),rs(7,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getCryptoMonthly(r.typed,"CNY")&&i),i}),jb,qb)),mr(8,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Crypto Monthly"])),(t()(),rs(10,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Jb,Qb)),mr(11,49152,null,0,Kb,[],null,null)],null,(function(t,e){t(e,1,0,er(e,2).disabled||null,"NoopAnimations"===er(e,2)._animationMode),t(e,4,0,er(e,5).disabled||null,"NoopAnimations"===er(e,5)._animationMode),t(e,7,0,er(e,8).disabled||null,"NoopAnimations"===er(e,8)._animationMode),t(e,10,0,er(e,11).vertical?"vertical":"horizontal",er(e,11).vertical,!er(e,11).vertical,er(e,11).inset)}))}function k_(t){return vs(0,[(t()(),rs(0,0,null,null,11,"div",[],null,null,null,null,null)),(t()(),rs(1,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getForexDaily(r.typed,"usd")&&i),i}),jb,qb)),mr(2,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Forex Weekly"])),(t()(),rs(4,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getForexDaily(r.typed,"usd")&&i),i}),jb,qb)),mr(5,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Forex Daily"])),(t()(),rs(7,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.getForexDaily(r.typed,"usd")&&i),i}),jb,qb)),mr(8,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Forex Monthly"])),(t()(),rs(10,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Jb,Qb)),mr(11,49152,null,0,Kb,[],null,null)],null,(function(t,e){t(e,1,0,er(e,2).disabled||null,"NoopAnimations"===er(e,2)._animationMode),t(e,4,0,er(e,5).disabled||null,"NoopAnimations"===er(e,5)._animationMode),t(e,7,0,er(e,8).disabled||null,"NoopAnimations"===er(e,8)._animationMode),t(e,10,0,er(e,11).vertical?"vertical":"horizontal",er(e,11).vertical,!er(e,11).vertical,er(e,11).inset)}))}function w_(t){return vs(0,[(t()(),rs(0,0,null,null,27,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,lv,av)),mr(1,49152,null,0,rv,[[2,Eb]],null,null),(t()(),rs(2,0,null,0,4,"mat-card-header",[["class","mat-card-header"]],null,null,null,cv,hv)),mr(3,49152,null,0,ov,[],null,null),(t()(),rs(4,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),mr(5,16384,null,0,tv,[],null,null),(t()(),gs(6,null,["",""])),(t()(),rs(7,0,null,0,20,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),mr(8,16384,null,0,Zb,[],null,null),(t()(),rs(9,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(10,null,["High: ",""])),(t()(),rs(11,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(12,null,["Low: ",""])),(t()(),rs(13,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(14,null,["Open: ",""])),(t()(),rs(15,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(16,null,["Price: ",""])),(t()(),rs(17,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(18,null,["Volume: ",""])),(t()(),rs(19,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(20,null,["Previous Close: ",""])),(t()(),rs(21,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(22,null,["Latest Day: ",""])),(t()(),rs(23,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(24,null,["Change: ",""])),(t()(),rs(25,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(26,null,["Change Percent: ",""])),(t()(),rs(27,0,null,null,0,"div",[["style","height: 370px; width: 100%; margin-left:auto;margin-right:auto;"]],[[8,"id",0]],null,null,null,null))],null,(function(t,e){t(e,0,0,"NoopAnimations"===er(e,1)._animationMode),t(e,6,0,e.context.$implicit.symbol),t(e,10,0,e.context.$implicit.high),t(e,12,0,e.context.$implicit.low),t(e,14,0,e.context.$implicit.open),t(e,16,0,e.context.$implicit.price),t(e,18,0,e.context.$implicit.volume),t(e,20,0,e.context.$implicit.prevClose),t(e,22,0,e.context.$implicit.latestDay),t(e,24,0,e.context.$implicit.change),t(e,26,0,e.context.$implicit.changePercent),t(e,27,0,Ei(1,"","chartContainer"+e.context.index,""))}))}function T_(t){return vs(0,[(t()(),rs(0,0,null,null,4,"nav",[["class","mat-tab-nav-bar mat-tab-header"],["mat-tab-nav-bar",""]],[[2,"mat-tab-header-pagination-controls-enabled",null],[2,"mat-tab-header-rtl",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null]],null,null,Rv,Lv)),mr(1,7520256,null,1,Nf,[pn,[2,Lb],go,Fe,Fv,[2,Vp],[2,Eb]],null,null),hs(603979776,1,{_items:1}),(t()(),is(16777216,null,0,1,null,C_)),mr(4,278528,null,0,qa,[Vn,Nn,Dn],{ngForOf:[0,"ngForOf"]},null),(t()(),rs(5,0,null,null,38,"div",[["style","margin-top: 1.5rem"]],null,null,null,null,null)),(t()(),rs(6,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getSector()&&i),i}),jb,qb)),mr(7,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Get Sector"])),(t()(),rs(9,0,null,null,29,"mat-form-field",[["appearance","outline"],["class","mat-form-field"]],[[2,"mat-form-field-appearance-standard",null],[2,"mat-form-field-appearance-fill",null],[2,"mat-form-field-appearance-outline",null],[2,"mat-form-field-appearance-legacy",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-form-field-has-label",null],[2,"mat-form-field-hide-placeholder",null],[2,"mat-form-field-disabled",null],[2,"mat-form-field-autofilled",null],[2,"mat-focused",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"_mat-animation-noopable",null]],null,null,oC,qv)),mr(10,7520256,null,9,Yv,[pn,Fe,[2,cf],[2,Lb],[2,Uv],Vp,go,[2,Eb]],{appearance:[0,"appearance"]},null),hs(603979776,2,{_controlNonStatic:0}),hs(335544320,3,{_controlStatic:0}),hs(603979776,4,{_labelChildNonStatic:0}),hs(335544320,5,{_labelChildStatic:0}),hs(603979776,6,{_placeholderChild:0}),hs(603979776,7,{_errorChildren:1}),hs(603979776,8,{_hintChildren:1}),hs(603979776,9,{_prefixChildren:1}),hs(603979776,10,{_suffixChildren:1}),(t()(),rs(20,0,null,3,2,"mat-label",[],null,null,null,null,null)),mr(21,16384,[[4,4],[5,4]],0,Ov,[],null,null),(t()(),gs(-1,null,["Label"])),(t()(),rs(23,16777216,null,1,8,"input",[["aria-label","Number"],["class","mat-autocomplete-trigger mat-input-element mat-form-field-autofill-control"],["matInput",""],["name","input"],["placeholder","Choose Listing"],["type","text"]],[[1,"autocomplete",0],[1,"role",0],[1,"aria-autocomplete",0],[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[1,"aria-haspopup",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"mat-input-server",null],[1,"id",0],[1,"placeholder",0],[8,"disabled",0],[8,"required",0],[1,"readonly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[1,"aria-required",0]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focusin"],[null,"keydown"],[null,"focus"]],(function(t,e,n){var i=!0,r=t.component;return"input"===e&&(i=!1!==er(t,24)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==er(t,24).onTouched()&&i),"compositionstart"===e&&(i=!1!==er(t,24)._compositionStart()&&i),"compositionend"===e&&(i=!1!==er(t,24)._compositionEnd(n.target.value)&&i),"focusin"===e&&(i=!1!==er(t,25)._handleFocus()&&i),"blur"===e&&(i=!1!==er(t,25)._onTouched()&&i),"input"===e&&(i=!1!==er(t,25)._handleInput(n)&&i),"keydown"===e&&(i=!1!==er(t,25)._handleKeydown(n)&&i),"blur"===e&&(i=!1!==er(t,30)._focusChanged(!1)&&i),"focus"===e&&(i=!1!==er(t,30)._focusChanged(!0)&&i),"input"===e&&(i=!1!==er(t,30)._onInput()&&i),"ngModelChange"===e&&(i=!1!==(r.typed=n)&&i),"keyup"===e&&(i=!1!==r.onKey(n)&&i),i}),null,null)),mr(24,16384,null,0,cC,[bn,pn,[2,hC]],null,null),mr(25,4866048,null,0,QS,[pn,LS,Vn,go,Fe,KS,[2,Lb],[2,Yv],[2,al],Fv],{autocomplete:[0,"autocomplete"]},null),gr(1024,null,lC,(function(t,e){return[t,e]}),[cC,QS]),mr(27,671744,null,0,iS,[[8,null],[8,null],[8,null],[6,lC]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),gr(2048,null,mC,null,[iS]),mr(29,16384,null,0,gC,[[4,mC]],null,null),mr(30,999424,null,0,sx,[pn,Vp,[6,mC],[2,QC],[2,oS],Wm,[8,null],tx,go],{placeholder:[0,"placeholder"],type:[1,"type"]},null),gr(2048,[[2,4],[3,4]],Bv,null,[sx]),(t()(),rs(32,0,null,1,6,"mat-autocomplete",[["class","mat-autocomplete"]],null,null,null,cx,lx)),gr(6144,null,af,null,[XS]),mr(34,1097728,[["auto",4]],2,XS,[Fe,pn,YS],null,null),hs(603979776,11,{options:1}),hs(603979776,12,{optionGroups:1}),(t()(),is(16777216,null,0,1,null,S_)),mr(38,278528,null,0,qa,[Vn,Nn,Dn],{ngForOf:[0,"ngForOf"]},null),(t()(),rs(39,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0,r=t.component;return"click"===e&&(i=!1!==r.addToDb(r.typed)&&i),i}),jb,qb)),mr(40,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Add to DB"])),(t()(),rs(42,0,null,null,1,"mat-divider",[["class","mat-divider"],["role","separator"]],[[1,"aria-orientation",0],[2,"mat-divider-vertical",null],[2,"mat-divider-horizontal",null],[2,"mat-divider-inset",null]],null,null,Jb,Qb)),mr(43,49152,null,0,Kb,[],null,null),(t()(),is(16777216,null,null,1,null,x_)),mr(45,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),is(16777216,null,null,1,null,__)),mr(47,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),is(16777216,null,null,1,null,k_)),mr(49,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),(t()(),rs(50,0,null,null,2,"div",[["style","padding-right: 2rem; padding-left: 2rem;"]],null,null,null,null,null)),(t()(),is(16777216,null,null,1,null,w_)),mr(52,278528,null,0,qa,[Vn,Nn,Dn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.links),t(e,10,0,"outline"),t(e,25,0,er(e,34)),t(e,27,0,"input",n.typed),t(e,30,0,"Choose Listing","text"),t(e,38,0,n.filteredListings),t(e,45,0,n.showStock),t(e,47,0,n.showCrypto),t(e,49,0,n.showForex),t(e,52,0,n.stocks)}),(function(t,e){t(e,0,0,er(e,1)._showPaginationControls,"rtl"==er(e,1)._getLayoutDirection(),"warn"!==er(e,1).color&&"accent"!==er(e,1).color,"accent"===er(e,1).color,"warn"===er(e,1).color),t(e,6,0,er(e,7).disabled||null,"NoopAnimations"===er(e,7)._animationMode),t(e,9,1,["standard"==er(e,10).appearance,"fill"==er(e,10).appearance,"outline"==er(e,10).appearance,"legacy"==er(e,10).appearance,er(e,10)._control.errorState,er(e,10)._canLabelFloat,er(e,10)._shouldLabelFloat(),er(e,10)._hasFloatingLabel(),er(e,10)._hideControlPlaceholder(),er(e,10)._control.disabled,er(e,10)._control.autofilled,er(e,10)._control.focused,"accent"==er(e,10).color,"warn"==er(e,10).color,er(e,10)._shouldForward("untouched"),er(e,10)._shouldForward("touched"),er(e,10)._shouldForward("pristine"),er(e,10)._shouldForward("dirty"),er(e,10)._shouldForward("valid"),er(e,10)._shouldForward("invalid"),er(e,10)._shouldForward("pending"),!er(e,10)._animationsEnabled]),t(e,23,1,[er(e,25).autocompleteAttribute,er(e,25).autocompleteDisabled?null:"combobox",er(e,25).autocompleteDisabled?null:"list",er(e,25).panelOpen&&er(e,25).activeOption?er(e,25).activeOption.id:null,er(e,25).autocompleteDisabled?null:er(e,25).panelOpen.toString(),er(e,25).autocompleteDisabled||!er(e,25).panelOpen?null:null==er(e,25).autocomplete?null:er(e,25).autocomplete.id,!er(e,25).autocompleteDisabled,er(e,29).ngClassUntouched,er(e,29).ngClassTouched,er(e,29).ngClassPristine,er(e,29).ngClassDirty,er(e,29).ngClassValid,er(e,29).ngClassInvalid,er(e,29).ngClassPending,er(e,30)._isServer,er(e,30).id,er(e,30).placeholder,er(e,30).disabled,er(e,30).required,er(e,30).readonly&&!er(e,30)._isNativeSelect||null,er(e,30)._ariaDescribedby||null,er(e,30).errorState,er(e,30).required.toString()]),t(e,39,0,er(e,40).disabled||null,"NoopAnimations"===er(e,40)._animationMode),t(e,42,0,er(e,43).vertical?"vertical":"horizontal",er(e,43).vertical,!er(e,43).vertical,er(e,43).inset)}))}function I_(t){return vs(0,[(t()(),rs(0,0,null,null,1,"app-test-page",[],null,null,null,T_,v_)),mr(1,114688,null,0,dx,[y_,b_,g_],null,null)],(function(t,e){t(e,1,0)}),null)}var A_=Ui("app-test-page",dx,I_,{},{},[]);class P_{constructor(t,e){this.ns=t,this.fbs=e,this.articles=[]}ngOnInit(){this.fbs.getNews().subscribe(t=>{this.articles=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data()))})}fillDb(){this.ns.getTopHeadlines();let t=JSON.parse(localStorage.getItem("articles"));t.forEach(e=>{this.articles.forEach(n=>{n.url==e.url&&t.splice(t.indexOf(n))})}),t.forEach(t=>{this.fbs.createArticle(t)})}}var M_=ri({encapsulation:0,styles:[["mat-card[_ngcontent-%COMP%]{margin-bottom:1rem;border:1px solid #e91e63;box-shadow:0 0 8px 0 #e91e63}mat-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 24px 0 #e91e63;-moz-box-shadow:0 0 24px 0 #e91e63;-webkit-box-shadow:0 0 24px 0 #e91e63}mat-card[_ngcontent-%COMP%]:first-child{margin-top:1rem}"]],data:{}});function E_(t){return vs(0,[(t()(),rs(0,0,null,null,19,"mat-card",[["class","mat-card"]],[[2,"_mat-animation-noopable",null]],null,null,lv,av)),mr(1,49152,null,0,rv,[[2,Eb]],null,null),(t()(),rs(2,0,null,0,7,"mat-card-header",[["class","mat-card-header"]],null,null,null,cv,hv)),mr(3,49152,null,0,ov,[],null,null),(t()(),rs(4,0,null,1,2,"mat-card-title",[["class","mat-card-title"]],null,null,null,null,null)),mr(5,16384,null,0,tv,[],null,null),(t()(),gs(6,null,["",""])),(t()(),rs(7,0,null,1,2,"mat-card-subtitle",[["class","mat-card-subtitle"]],null,null,null,null,null)),mr(8,16384,null,0,ev,[],null,null),(t()(),gs(9,null,["Written by: ",""])),(t()(),rs(10,0,null,0,1,"img",[["class","mat-card-image"],["mat-card-image",""]],[[8,"src",4]],null,null,null,null)),mr(11,16384,null,0,iv,[],null,null),(t()(),rs(12,0,null,0,3,"mat-card-content",[["class","mat-card-content"]],null,null,null,null,null)),mr(13,16384,null,0,Zb,[],null,null),(t()(),rs(14,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),gs(15,null,["",""])),(t()(),rs(16,0,null,0,3,"mat-card-actions",[["class","mat-card-actions"]],[[2,"mat-card-actions-align-end",null]],null,null,null,null)),mr(17,16384,null,0,nv,[],null,null),(t()(),rs(18,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(t()(),gs(-1,null,["Learn more"]))],null,(function(t,e){t(e,0,0,"NoopAnimations"===er(e,1)._animationMode),t(e,6,0,e.context.$implicit.title),t(e,9,0,e.context.$implicit.author),t(e,10,0,Ei(1,"",e.context.$implicit.urlToImage,"")),t(e,15,0,e.context.$implicit.description),t(e,16,0,"end"===er(e,17).align),t(e,18,0,Ei(1,"",e.context.$implicit.url,""))}))}function D_(t){return vs(0,[(t()(),rs(0,0,null,null,2,"button",[["mat-button",""]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.fillDb()&&i),i}),jb,qb)),mr(1,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),gs(-1,0,["Fill Firebase"])),(t()(),rs(3,0,null,null,2,"div",[["style","padding-right: 2rem; padding-left: 2rem;"]],null,null,null,null,null)),(t()(),is(16777216,null,null,1,null,E_)),mr(5,278528,null,0,qa,[Vn,Nn,Dn],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,5,0,e.component.articles)}),(function(t,e){t(e,0,0,er(e,1).disabled||null,"NoopAnimations"===er(e,1)._animationMode)}))}function F_(t){return vs(0,[(t()(),rs(0,0,null,null,1,"app-news",[],null,null,null,D_,M_)),mr(1,114688,null,0,P_,[b_,g_],null,null)],(function(t,e){t(e,1,0)}),null)}var L_=Ui("app-news",P_,F_,{},{},[]);function R_(t){return Error(`Unable to find icon with the name "${t}"`)}function B_(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+`via Angular's DomSanitizer. Attempted URL was "${t}".`)}function N_(t){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+`Angular's DomSanitizer. Attempted literal was "${t}".`)}class O_{constructor(t,e){this.options=e,t.nodeName?this.svgElement=t:this.url=t}}let V_=(()=>{class t{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new O_(n,i))}addSvgIconLiteralInNamespace(t,e,n,i){const r=this._sanitizer.sanitize(Ie.HTML,n);if(!r)throw N_(n);const o=this._createSvgElementForSingleIcon(r,i);return this._addSvgIconConfig(t,e,new O_(o,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new O_(e,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(Ie.HTML,e);if(!i)throw N_(e);const r=this._svgElementFromString(i);return this._addSvgIconSetConfig(t,new O_(r,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(Ie.RESOURCE_URL,t);if(!e)throw B_(t);const n=this._cachedIconsByUrl.get(e);return n?gl(W_(n)):this._loadSvgIconFromConfig(new O_(t)).pipe(Ll(t=>this._cachedIconsByUrl.set(e,t)),G(t=>W_(t)))}getNamedSvgIcon(t,e=""){const n=H_(e,t),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):Sv(R_(n))}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgElement?gl(W_(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(Ll(e=>t.svgElement=e),G(t=>W_(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?gl(n):sC(e.filter(t=>!t.svgElement).map(t=>this._loadSvgIconSetFromConfig(t).pipe(zl(e=>{const n=`Loading icon set URL: ${this._sanitizer.sanitize(Ie.RESOURCE_URL,t.url)} failed: ${e.message}`;return this._errorHandler?this._errorHandler.handleError(new Error(n)):console.error(n),gl(null)})))).pipe(G(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw R_(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.svgElement){const e=this._extractSvgIconFromSet(i.svgElement,t,i.options);if(e)return e}}return null}_loadSvgIconFromConfig(t){return this._fetchUrl(t.url).pipe(G(e=>this._createSvgElementForSingleIcon(e,t.options)))}_loadSvgIconSetFromConfig(t){return t.svgElement?gl(t.svgElement):this._fetchUrl(t.url).pipe(G(e=>(t.svgElement||(t.svgElement=this._svgElementFromString(e)),t.svgElement)))}_createSvgElementForSingleIcon(t,e){const n=this._svgElementFromString(t);return this._setSvgAttributes(n,e),n}_extractSvgIconFromSet(t,e,n){const i=t.querySelector(`[id="${e}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(r),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let i=0;i<n.length;i++){const{name:t,value:r}=n[i];"id"!==t&&e.setAttribute(t,r)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchUrl(t){if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==t)throw Error(`Cannot fetch icon from URL "${t}".`);const e=this._sanitizer.sanitize(Ie.RESOURCE_URL,t);if(!e)throw B_(t);const n=this._inProgressUrlFetches.get(e);if(n)return n;const i=this._httpClient.get(e,{responseType:"text"}).pipe(ah(()=>this._inProgressUrlFetches.delete(e)),st());return this._inProgressUrlFetches.set(e,i),i}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(H_(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Px,8),Wt(mc),Wt(al,8),Wt(ne,8))},token:t,providedIn:"root"}),t})();function W_(t){return t.cloneNode(!0)}function H_(t,e){return t+":"+e}class G_{constructor(t){this._elementRef=t}}const z_=Rm(G_),U_=new It("mat-icon-location",{providedIn:"root",factory:function(){const t=Ht(al),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Y_=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],X_=Y_.map(t=>`[${t}]`).join(", "),q_=/^url\(['"]?#(.*?)['"]?\)$/;class j_ extends z_{constructor(t,e,n,i,r){super(t),this._iconRegistry=e,this._location=i,this._errorHandler=r,this._inline=!1,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Dp(t)}get fontSet(){return this._fontSet}set fontSet(t){this._fontSet=this._cleanupFontValue(t)}get fontIcon(){return this._fontIcon}set fontIcon(t){this._fontIcon=this._cleanupFontValue(t)}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnChanges(t){const e=t.svgIcon;if(e)if(this.svgIcon){const[t,e]=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(e,t).pipe(Xl(1)).subscribe(t=>this._setSvgElement(t),n=>{const i=`Error retrieving icon ${t}:${e}! ${n.message}`;this._errorHandler?this._errorHandler.handleError(new Error(i)):console.error(i)})}else e.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}ngOnInit(){this._usingFontIcon()&&this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&this._location&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let n=0;n<e.length;n++)e[n].textContent+=" ";if(this._location){const e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e)}this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(X_),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)Y_.forEach(t=>{const r=e[i],o=r.getAttribute(t),s=o?o.match(q_):null;if(s){let e=n.get(r);e||n.set(r,e=[]),e.push({name:t,value:s[1]})}})}}class K_{}var $_=ri({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],data:{}});function Q_(t){return vs(2,[ms(null,0)],null,null)}function J_(t){throw Error(`A drawer was already declared for 'position="${t}"'`)}const Z_=new It("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}});class tk extends Mv{constructor(t,e,n,i,r){super(n,i,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}class ek{constructor(t,e,n,i,r,o){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=i,this._ngZone=r,this._doc=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._autoFocus=!0,this._animationStarted=new I,this._animationEnd=new I,this._animationState="void",this.openedChange=new Vr(!0),this._destroyed=new I,this.onPositionChanged=new Vr,this._modeChanged=new I,this._opened=!1,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._isFocusTrapEnabled&&this._focusTrap&&this._trapFocus()):this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{uf(this._elementRef.nativeElement,"keydown").pipe(Tl(t=>t.keyCode===Qp&&!this.disableClose&&!hm(t)),Tf(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(function(t,e){return e=>e.lift(new kf(t,void 0))}((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Dp(t)}get autoFocus(){return this._autoFocus}set autoFocus(t){this._autoFocus=Dp(t)}get _openedStream(){return this.openedChange.pipe(Tl(t=>t),G(()=>{}))}get openedStart(){return this._animationStarted.pipe(Tl(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),G(()=>{}))}get _closedStream(){return this.openedChange.pipe(Tl(t=>!t),G(()=>{}))}get closedStart(){return this._animationStarted.pipe(Tl(t=>t.fromState!==t.toState&&"void"===t.toState),G(()=>{}))}get _isFocusTrapEnabled(){return this.opened&&"side"!==this.mode}_trapFocus(){this.autoFocus&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){if(!this.autoFocus)return;const t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened instanceof HTMLElement?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}get opened(){return this._opened}set opened(t){this.toggle(Dp(t))}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}toggle(t=!this.opened,e="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(Xl(1)).subscribe(e=>t(e?"open":"close"))})}get _width(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this._isFocusTrapEnabled)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}class nk{constructor(t,e,n,i,r,o=!1,s){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=i,this._animationMode=s,this.backdropClick=new Vr,this._destroyed=new I,this._doCheckSubject=new I,this._contentMargins={left:null,right:null},this._contentMarginChanges=new I,t&&t.change.pipe(Tf(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(Tf(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=o}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Dp(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Dp(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._drawers.changes.pipe(nh(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(fm(10),Tf(this._destroyed)).subscribe(()=>this.updateContentMargins())}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._width;else if("push"==this._left.mode){const n=this._left._width;t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._width;else if("push"==this._right.mode){const n=this._right._width;e+=n,t-=n}e=e||null,(t=t||null)===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Tl(t=>t.fromState!==t.toState),Tf(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Tf(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Tf(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.asObservable().pipe(Xl(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Tf(J(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?(null!=this._end&&J_("end"),this._end=t):(null!=this._start&&J_("start"),this._start=t)}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawer()}_closeModalDrawer(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t.close())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}class ik extends tk{constructor(t,e,n,i,r){super(t,e,n,i,r)}}class rk extends ek{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Dp(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Fp(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Fp(t)}}class ok extends nk{}class sk{}var ak=ri({encapsulation:2,styles:[],data:{}});function lk(t){return vs(2,[ms(null,0)],null,null)}var hk=ri({encapsulation:2,styles:[],data:{animation:[{type:7,name:"transform",definitions:[{type:0,name:"open, open-instant",styles:{type:6,styles:{transform:"none",visibility:"visible"},offset:null},options:void 0},{type:0,name:"void",styles:{type:6,styles:{"box-shadow":"none",visibility:"hidden"},offset:null},options:void 0},{type:1,expr:"void => open-instant",animation:{type:4,styles:null,timings:"0ms"},options:null},{type:1,expr:"void <=> open, open-instant => void",animation:{type:4,styles:null,timings:"400ms cubic-bezier(0.25, 0.8, 0.25, 1)"},options:null}],options:{}}]}});function ck(t){return vs(2,[(t()(),rs(0,0,null,null,1,"div",[["class","mat-drawer-inner-container"]],null,null,null,null,null)),ms(null,0)],null,null)}var uk=ri({encapsulation:2,styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}@media (-ms-high-contrast:active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}@media (-ms-high-contrast:active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media (-ms-high-contrast:active){.mat-drawer.mat-drawer-end,[dir=rtl] .mat-drawer{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}"],data:{}});function dk(t){return vs(0,[(t()(),rs(0,0,null,null,0,"div",[["class","mat-drawer-backdrop"]],[[2,"mat-drawer-shown",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component._onBackdropClicked()&&i),i}),null,null))],null,(function(t,e){t(e,0,0,e.component._isShowingBackdrop())}))}function pk(t){return vs(0,[(t()(),rs(0,0,null,null,3,"mat-sidenav-content",[["cdkScrollable",""],["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,lk,ak)),mr(1,212992,null,0,Mv,[pn,Pv,go,[2,Lb]],null,null),mr(2,1294336,null,0,ik,[Fe,ok,pn,Pv,go],null,null),ms(0,2)],(function(t,e){t(e,1,0),t(e,2,0)}),(function(t,e){t(e,0,0,er(e,2)._container._contentMargins.left,er(e,2)._container._contentMargins.right)}))}function mk(t){return vs(2,[hs(671088640,1,{_userContent:0}),(t()(),is(16777216,null,null,1,null,dk)),mr(2,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),ms(null,0),ms(null,1),(t()(),is(16777216,null,null,1,null,pk)),mr(6,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.hasBackdrop),t(e,6,0,!n._content)}),null)}class fk{constructor(t){this._elementRef=t}}const gk=Rm(fk);class yk extends gk{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){oe()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}class bk{}var vk=ri({encapsulation:2,styles:["@media (-ms-high-contrast:active){.mat-toolbar{outline:solid 1px}}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media (max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}"],data:{}});function Ck(t){return vs(2,[ms(null,0),ms(null,1)],null,null)}class Sk{}const xk=Bm(Sk);class _k{}const kk=Bm(_k);class wk extends xk{constructor(){super(...arguments),this._stateChanges=new I}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}class Tk extends xk{constructor(t){super(),this._elementRef=t,this._stateChanges=new I,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}class Ik extends kk{constructor(t,e,n,i){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new I,this._isInteractiveList=!!(n||i&&"action-list"===i._getListType()),this._list=n||i;const r=this._getHostElement();"button"!==r.nodeName.toLowerCase()||r.hasAttribute("type")||r.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(Tf(this._destroyed)).subscribe(()=>{e.markForCheck()})}ngAfterContentInit(){var t,e;e=this._element,(t=this._lines).changes.pipe(nh(t)).subscribe(({length:t})=>{Hm(e,"mat-2-line",!1),Hm(e,"mat-3-line",!1),Hm(e,"mat-multi-line",!1),2===t||3===t?Hm(e,`mat-${t}-line`,!0):t>3&&Hm(e,"mat-multi-line",!0)})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}class Ak{}var Pk=ri({encapsulation:2,styles:[".mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:0}mat-action-list button{background:0 0;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:0}@media (-ms-high-contrast:active){.mat-selection-list:focus{outline-style:dotted}.mat-list-option:focus,.mat-list-option:hover,.mat-nav-list .mat-list-item:focus,.mat-nav-list .mat-list-item:hover,mat-action-list .mat-list-item:focus,mat-action-list .mat-list-item:hover{outline:dotted 1px}}@media (hover:none){.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover{background:0 0}}"],data:{}});function Mk(t){return vs(2,[ms(null,0)],null,null)}var Ek=ri({encapsulation:2,styles:[],data:{}});function Dk(t){return vs(2,[(t()(),rs(0,0,null,null,6,"div",[["class","mat-list-item-content"]],null,null,null,null,null)),(t()(),rs(1,0,null,null,1,"div",[["class","mat-list-item-ripple mat-ripple"],["mat-ripple",""]],[[2,"mat-ripple-unbounded",null]],null,null,null,null)),mr(2,212992,null,0,$m,[pn,go,Vp,[2,Km],[2,Eb]],{disabled:[0,"disabled"],trigger:[1,"trigger"]},null),ms(null,0),(t()(),rs(4,0,null,null,1,"div",[["class","mat-list-text"]],null,null,null,null,null)),ms(null,1),ms(null,2)],(function(t,e){var n=e.component;t(e,2,0,n._isRippleDisabled(),n._getHostElement())}),(function(t,e){t(e,1,0,er(e,2).unbounded)}))}class Fk{constructor(t){this.total=t}call(t,e){return e.subscribe(new Lk(t,this.total))}}class Lk extends f{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class Rk{}const Bk=new Set;let Nk,Ok=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Vk}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!Bk.has(t))try{Nk||((Nk=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(Nk)),Nk.sheet&&(Nk.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),Bk.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Vp))},token:t,providedIn:"root"}),t})();function Vk(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let Wk=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new I}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Hk(Lp(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=Sl(Hk(Lp(t)).map(t=>this._registerQuery(t).observable));return(e=eh(e.pipe(Xl(1)),e.pipe(t=>t.lift(new Fk(1)),fm(0)))).pipe(G(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new S(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(nh(e),G(e=>({query:t,matches:e.matches})),Tf(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.ngInjectableDef=ft({factory:function(){return new t(Wt(Ok),Wt(go))},token:t,providedIn:"root"}),t})();function Hk(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}const Gk={XSmall:"(max-width: 599.99px)",Small:"(min-width: 600px) and (max-width: 959.99px)",Medium:"(min-width: 960px) and (max-width: 1279.99px)",Large:"(min-width: 1280px) and (max-width: 1919.99px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.99px) and (orientation: portrait), (max-width: 959.99px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.99px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.99px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.99px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.99px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};class zk{constructor(t){this.breakpointObserver=t,this.isHandset$=this.breakpointObserver.observe(Gk.Handset).pipe(G(t=>t.matches),function(t,e,n){let i;return i={bufferSize:void 0,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(h){s++,r&&!a||(a=!1,r=new Tv(t,e,i),o=h.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){l=!0,r.complete()}}));const c=r.subscribe(this);this.add(()=>{s--,c.unsubscribe(),o&&!l&&n&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}())}}var Uk=ri({encapsulation:0,styles:[[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:0;z-index:1}"]],data:{}});function Yk(t){return vs(0,[(t()(),rs(0,0,null,null,4,"button",[["aria-label","Toggle sidenav"],["mat-icon-button",""],["type","button"]],[[1,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==er(t.parent,5).toggle()&&i),i}),jb,qb)),mr(1,180224,null,0,Yb,[pn,Pm,[2,Eb]],null,null),(t()(),rs(2,0,null,0,2,"mat-icon",[["aria-label","Side nav toggle icon"],["class","mat-icon notranslate"],["role","img"]],[[2,"mat-icon-inline",null],[2,"mat-icon-no-color",null]],null,null,Q_,$_)),mr(3,9158656,null,0,j_,[pn,V_,[8,null],[2,U_],[2,ne]],null,null),(t()(),gs(-1,0,["menu"]))],(function(t,e){t(e,3,0)}),(function(t,e){t(e,0,0,er(e,1).disabled||null,"NoopAnimations"===er(e,1)._animationMode),t(e,2,0,er(e,3).inline,"primary"!==er(e,3).color&&"accent"!==er(e,3).color&&"warn"!==er(e,3).color)}))}function Xk(t){return vs(0,[(t()(),rs(0,0,null,null,45,"mat-sidenav-container",[["class","sidenav-container mat-drawer-container mat-sidenav-container"]],[[2,"mat-drawer-container-explicit-backdrop",null]],null,null,mk,uk)),mr(1,1490944,null,2,ok,[[2,Lb],pn,go,Fe,Fv,Z_,[2,Eb]],null,null),hs(603979776,1,{_drawers:1}),hs(603979776,2,{_content:0}),(t()(),rs(4,0,null,0,28,"mat-sidenav",[["class","sidenav mat-drawer mat-sidenav"],["fixedInViewport",""],["tabIndex","-1"]],[[1,"role",0],[1,"align",0],[2,"mat-drawer-end",null],[2,"mat-drawer-over",null],[2,"mat-drawer-push",null],[2,"mat-drawer-side",null],[2,"mat-drawer-opened",null],[2,"mat-sidenav-fixed",null],[4,"top","px"],[4,"bottom","px"],[40,"@transform",0]],[["component","@transform.start"],["component","@transform.done"]],(function(t,e,n){var i=!0;return"component:@transform.start"===e&&(i=!1!==er(t,5)._animationStartListener(n)&&i),"component:@transform.done"===e&&(i=!1!==er(t,5)._animationDoneListener(n)&&i),i}),ck,hk)),mr(5,3325952,[[1,4],["drawer",4]],0,rk,[pn,Tm,Pm,Vp,go,[2,al]],{mode:[0,"mode"],opened:[1,"opened"],fixedInViewport:[2,"fixedInViewport"]},null),fr(131072,ol,[Fe]),fr(131072,ol,[Fe]),fr(131072,ol,[Fe]),(t()(),rs(9,0,null,0,3,"mat-toolbar",[["class","mat-toolbar"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,Ck,vk)),mr(10,4243456,null,1,yk,[pn,Vp,al],null,null),hs(603979776,3,{_toolbarRows:1}),(t()(),gs(-1,0,["Menu"])),(t()(),rs(13,0,null,0,19,"mat-nav-list",[["class","mat-nav-list mat-list-base"],["role","navigation"]],null,null,null,Mk,Pk)),mr(14,704512,null,0,wk,[],null,null),(t()(),rs(15,0,null,0,5,"a",[["class","mat-list-item"],["href","test"],["mat-list-item",""]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,Dk,Ek)),mr(16,1228800,null,3,Ik,[pn,Fe,[2,wk],[2,Tk]],null,null),hs(603979776,4,{_lines:1}),hs(603979776,5,{_avatar:0}),hs(603979776,6,{_icon:0}),(t()(),gs(-1,2,["Test"])),(t()(),rs(21,0,null,0,5,"a",[["class","mat-list-item"],["href","news"],["mat-list-item",""]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,Dk,Ek)),mr(22,1228800,null,3,Ik,[pn,Fe,[2,wk],[2,Tk]],null,null),hs(603979776,7,{_lines:1}),hs(603979776,8,{_avatar:0}),hs(603979776,9,{_icon:0}),(t()(),gs(-1,2,["News"])),(t()(),rs(27,0,null,0,5,"a",[["class","mat-list-item"],["href","#"],["mat-list-item",""]],[[2,"mat-list-item-avatar",null],[2,"mat-list-item-with-avatar",null]],null,null,Dk,Ek)),mr(28,1228800,null,3,Ik,[pn,Fe,[2,wk],[2,Tk]],null,null),hs(603979776,10,{_lines:1}),hs(603979776,11,{_avatar:0}),hs(603979776,12,{_icon:0}),(t()(),gs(-1,2,["Link 3"])),(t()(),rs(33,0,null,1,12,"mat-sidenav-content",[["class","mat-drawer-content mat-sidenav-content"]],[[4,"margin-left","px"],[4,"margin-right","px"]],null,null,lk,ak)),mr(34,1294336,[[2,4]],0,ik,[Fe,ok,pn,Pv,go],null,null),(t()(),rs(35,0,null,0,7,"mat-toolbar",[["class","mat-toolbar"],["color","primary"]],[[2,"mat-toolbar-multiple-rows",null],[2,"mat-toolbar-single-row",null]],null,null,Ck,vk)),mr(36,4243456,null,1,yk,[pn,Vp,al],{color:[0,"color"]},null),hs(603979776,13,{_toolbarRows:1}),(t()(),is(16777216,null,0,2,null,Yk)),mr(39,16384,null,0,Ka,[Vn,Nn],{ngIf:[0,"ngIf"]},null),fr(131072,ol,[Fe]),(t()(),rs(41,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),gs(-1,null,["broknet-prototype"])),(t()(),rs(43,0,null,0,2,"div",[["style","padding: 1rem"]],null,null,null,null,null)),(t()(),rs(44,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),mr(45,212992,null,0,qd,[Xd,Vn,hn,[8,null],Fe],null,null)],(function(t,e){var n=e.component;t(e,1,0),t(e,5,0,ei(e,5,0,er(e,6).transform(n.isHandset$))?"over":"side",!1===ei(e,5,1,er(e,7).transform(n.isHandset$)),""),t(e,34,0),t(e,36,0,"primary"),t(e,39,0,ei(e,39,0,er(e,40).transform(n.isHandset$))),t(e,45,0)}),(function(t,e){var n=e.component;t(e,0,0,er(e,1)._backdropOverride),t(e,4,1,[ei(e,4,0,er(e,8).transform(n.isHandset$))?"dialog":"navigation",null,"end"===er(e,5).position,"over"===er(e,5).mode,"push"===er(e,5).mode,"side"===er(e,5).mode,er(e,5).opened,er(e,5).fixedInViewport,er(e,5).fixedInViewport?er(e,5).fixedTopGap:null,er(e,5).fixedInViewport?er(e,5).fixedBottomGap:null,er(e,5)._animationState]),t(e,9,0,er(e,10)._toolbarRows.length>0,0===er(e,10)._toolbarRows.length),t(e,15,0,er(e,16)._avatar||er(e,16)._icon,er(e,16)._avatar||er(e,16)._icon),t(e,21,0,er(e,22)._avatar||er(e,22)._icon,er(e,22)._avatar||er(e,22)._icon),t(e,27,0,er(e,28)._avatar||er(e,28)._icon,er(e,28)._avatar||er(e,28)._icon),t(e,33,0,er(e,34)._container._contentMargins.left,er(e,34)._container._contentMargins.right),t(e,35,0,er(e,36)._toolbarRows.length>0,0===er(e,36)._toolbarRows.length)}))}var qk=ri({encapsulation:0,styles:[[""]],data:{}});function jk(t){return vs(0,[(t()(),rs(0,0,null,null,1,"app-main-nav",[],null,null,null,Xk,Uk)),mr(1,49152,null,0,zk,[Wk],null,null)],null,null)}function Kk(t){return vs(0,[(t()(),rs(0,0,null,null,1,"app-root",[],null,null,null,jk,qk)),mr(1,49152,null,0,Ia,[],null,null)],null,null)}var $k,Qk=Ui("app-root",Ia,Kk,{},{},[]);n("6Joi");let Jk=$k=class{static enablePersistence(t){return{ngModule:$k,providers:[{provide:h_,useValue:!0},{provide:c_,useValue:t}]}}};const Zk=new It("mat-select-scroll-strategy");function tw(t){return()=>t.scrollStrategies.reposition()}class ew{}class nw{}class iw{}class rw{}var ow=ka(Ta,[Ia],(function(t){return function(t){const e={},n=[];let i=!1;for(let r=0;r<t.length;r++){const o=t[r];o.token===Re&&!0===o.value&&(i=!0),1073741824&o.flags&&n.push(o.token),o.index=r,e[ti(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:i}}([Ni(512,hn,cn,[[8,[bp,_p,A_,L_,Qk]],[3,hn],Ut]),Ni(5120,Qr,ts,[[3,Qr]]),Ni(4608,Va,Wa,[Qr,[2,Oa]]),Ni(5120,Er,es,[go]),Ni(5120,Ur,Yr,[]),Ni(5120,Dn,Jo,[]),Ni(5120,Fn,Zo,[]),Ni(4608,mc,fc,[al]),Ni(6144,Ae,null,[mc]),Ni(4608,ac,hc,[]),Ni(5120,Ph,(function(t,e,n,i,r,o,s,a){return[new oc(t,e,n),new pc(i),new cc(r,o,s,a)]}),[al,go,jr,al,al,ac,$r,[2,lc]]),Ni(4608,Mh,Mh,[Ph,go]),Ni(135680,Fh,Fh,[al]),Ni(4608,Wh,Wh,[Mh,Fh,Ur]),Ni(5120,hg,Ab,[]),Ni(5120,cy,Pb,[]),Ni(4608,Xy,Ib,[al,hg,cy]),Ni(5120,gn,Mb,[Wh,Xy,go]),Ni(6144,Dh,null,[Fh]),Ni(4608,_o,_o,[go]),Ni(5120,Fu,cp,[Ud]),Ni(4608,Qd,Qd,[]),Ni(6144,Kd,null,[Qd]),Ni(135680,Jd,Jd,[Ud,Oo,ro,Ne,Kd]),Ni(4608,$d,$d,[]),Ni(5120,Zd,op,[Ud,ul,tp]),Ni(5120,mp,pp,[up]),Ni(5120,Kr,(function(t){return[t]}),[mp]),Ni(4608,ff,bb,[gn,al]),Ni(4608,Vx,Wx,[al,jr,Nx]),Ni(4608,Hx,Hx,[Vx,Ox]),Ni(5120,Ex,(function(t){return[t]}),[Hx]),Ni(4608,Rx,Rx,[]),Ni(6144,Lx,null,[Rx]),Ni(4608,Bx,Bx,[Lx]),Ni(6144,mx,null,[Bx]),Ni(4608,px,Gx,[mx,Ne]),Ni(4608,Px,Px,[px]),Ni(4608,wC,wC,[]),Ni(5120,s_,a_,[r_,go,[2,o_]]),Ni(4608,f_,f_,[r_,[2,o_],[2,h_],[2,u_],jr,go,[2,c_]]),Ni(4608,uv,uv,[]),Ni(4608,Wm,Wm,[]),Ni(4608,LS,LS,[yS,kS,hn,DS,_S,Ne,go,al,Lb,[2,Da]]),Ni(5120,RS,BS,[LS]),Ni(5120,Zk,tw,[LS]),Ni(5120,KS,$S,[LS]),Ni(4608,aS,aS,[]),Ni(1073742336,sl,sl,[]),Ni(1024,ne,_c,[]),Ni(1024,Eo,(function(){return[ip()]}),[]),Ni(512,up,up,[Ne]),Ni(1024,Gr,(function(t,e){return[(n=t,Th("probe",Ah),Th("coreTokens",Object.assign({},Ih,(n||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>Ah),dp(e)];var n}),[[2,Eo],up]),Ni(512,zr,zr,[[2,Gr]]),Ni(131584,Bo,Bo,[go,$r,Ne,ne,hn,zr]),Ni(1073742336,ns,ns,[Bo]),Ni(1073742336,kc,kc,[[3,kc]]),Ni(1024,ep,ap,[[3,Ud]]),Ni(512,uu,du,[]),Ni(512,Xd,Xd,[]),Ni(256,tp,{},[]),Ni(1024,Ma,sp,[Aa,[2,Ea],tp]),Ni(512,Da,Da,[Ma,Aa]),Ni(512,ro,ro,[]),Ni(512,Oo,zo,[ro,[2,Ho]]),Ni(1024,Nd,(function(){return[[{path:"",component:vp},{path:"test",component:dx},{path:"news",component:P_}]]}),[]),Ni(1024,Ud,hp,[Bo,uu,Xd,Da,Ne,Oo,ro,Nd,tp,[2,Vd],[2,Rd]]),Ni(1073742336,rp,rp,[[2,ep],[2,Ud]]),Ni(1073742336,nw,nw,[]),Ni(1073742336,Db,Db,[]),Ni(1073742336,Rk,Rk,[]),Ni(1073742336,Rb,Rb,[]),Ni(1073742336,Fm,Fm,[[2,Dm],[2,lc]]),Ni(1073742336,bk,bk,[]),Ni(1073742336,Wp,Wp,[]),Ni(1073742336,Qm,Qm,[]),Ni(1073742336,Xb,Xb,[]),Ni(1073742336,Ev,Ev,[]),Ni(1073742336,sk,sk,[]),Ni(1073742336,K_,K_,[]),Ni(1073742336,Gm,Gm,[]),Ni(1073742336,Zm,Zm,[]),Ni(1073742336,$b,$b,[]),Ni(1073742336,Ak,Ak,[]),Ni(1073742336,zx,zx,[]),Ni(1073742336,Ux,Ux,[]),Ni(1073742336,sS,sS,[]),Ni(1073742336,lS,lS,[]),Ni(1073742336,l_,l_,[]),Ni(1073742336,Jk,Jk,[]),Ni(1073742336,Mp,Mp,[]),Ni(1073742336,mv,mv,[]),Ni(1073742336,Mm,Mm,[]),Ni(1073742336,Gf,Gf,[]),Ni(1073742336,Xv,Xv,[]),Ni(1073742336,ex,ex,[]),Ni(1073742336,ax,ax,[]),Ni(1073742336,NS,NS,[]),Ni(1073742336,hf,hf,[]),Ni(1073742336,ew,ew,[]),Ni(1073742336,sv,sv,[]),Ni(1073742336,iw,iw,[]),Ni(1073742336,rw,rw,[]),Ni(1073742336,JS,JS,[]),Ni(1073742336,hS,hS,[]),Ni(1073742336,Ta,Ta,[]),Ni(256,Re,!0,[]),Ni(256,Eb,"BrowserAnimations",[]),Ni(256,Nx,"XSRF-TOKEN",[]),Ni(256,Ox,"X-XSRF-TOKEN",[]),Ni(256,r_,{apiKey:"AIzaSyBgLLuyLuQrjsboYkpyN3PCw9GVxfuWv8A",authDomain:"broknet-investment-manager.firebaseapp.com",databaseURL:"https://broknet-investment-manager.firebaseio.com",projectId:"broknet-investment-manager",storageBucket:"broknet-investment-manager.appspot.com",messagingSenderId:"10848707689",appId:"1:10848707689:web:22db871dc3262339b9aef8",measurementId:"G-7KHN6G4PVC"},[]),Ni(256,o_,void 0,[])])}));(function(){if(re)throw new Error("Cannot enable prod mode after platform setup.");ie=!1})(),xc().bootstrapModuleFactory(ow).catch(t=>console.error(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mrSG"),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],s=r+1<t.length,a=s?t[r+1]:0,l=r+2<t.length,h=l?t[r+2]:0,c=(15&a)<<2|h>>6,u=63&h;l||(u=64,s||(c=64)),i.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[u])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var s=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0,a=++r<t.length?n[t.charAt(r)]:64,l=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==s||null==a||null==l)throw Error();i.push(o<<2|s>>4),64!==a&&(i.push(s<<4&240|a>>2),64!==l&&i.push(a<<6&192|l))}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var u=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p="FirebaseError",m=function(t){function e(n,i){var r=t.call(this,i)||this;return r.code=n,r.name=p,Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,f.prototype.create),r}return i.__extends(e,t),e}(Error),f=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=e[0]||{},r=this.service+"/"+t,o=this.errors[t],s=o?g(o,i):"Error",a=this.serviceName+": "+s+" ("+r+").",l=new m(r,a),h=0,c=Object.keys(i);h<c.length;h++){var u=c[h];"_"!==u.slice(-1)&&(u in l&&console.warn('Overwriting FirebaseError base field "'+u+'" can cause unexpected behavior.'),l[u]=i[u])}return l},t}();function g(t,e){return t.replace(y,(function(t,n){var i=e[n];return null!=i?i.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function b(t){return JSON.parse(t)}var v=function(t){var e={},n={},i={},r="";try{var o=t.split(".");e=b(h(o[0])||""),n=b(h(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:i,signature:r}},C=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++)n[i]=4294967295&((u=n[i-3]^n[i-8]^n[i-14]^n[i-16])<<1|u>>>31);var r,o,s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],h=this.chain_[3],c=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(r=h^a&(l^h),o=1518500249):(r=a^l^h,o=1859775393):i<60?(r=a&l|h&(a|l),o=2400959708):(r=a^l^h,o=3395469782);var u=(s<<5|s>>>27)+r+c+o+n[i]&4294967295;c=h,h=l,l=4294967295&(a<<30|a>>>2),a=s,s=u}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}(),S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(i.next=x),void 0===i.error&&(i.error=x),void 0===i.complete&&(i.complete=x);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}})),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(i){"undefined"!=typeof console&&console.error&&console.error(i)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function x(){}function _(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+i+" argument "}e.CONSTANTS=r,e.Deferred=u,e.ErrorFactory=f,e.FirebaseError=m,e.Sha1=C,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=l,e.base64Decode=h,e.base64Encode=function(t){var e=a(t);return l.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new S(t,e);return n.subscribe.bind(n)},e.decode=v,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=_,e.getUA=d,e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=v(t).claims,n=Math.floor((new Date).getTime()/1e3),i=0,r=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?i=e.nbf:e.hasOwnProperty("iat")&&(i=e.iat),r=e.hasOwnProperty("exp")?e.exp:i+86400),!!n&&!!i&&!!r&&n>=i&&n<=r},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=b,e.map=function(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var o=r[i];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var s=r-55296;o(++i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(s<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")},e.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(_(t,e,i)+"must be a valid function.")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(_(t,e,i)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(_(t,e,i)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);